(self.webpackChunkangular_todo=self.webpackChunkangular_todo||[]).push([[179],{8255:Ke=>{function Se(F){return Promise.resolve().then(()=>{var d=new Error("Cannot find module '"+F+"'");throw d.code="MODULE_NOT_FOUND",d})}Se.keys=()=>[],Se.resolve=Se,Se.id=8255,Ke.exports=Se},7716:(Ke,Se,F)=>{"use strict";F.d(Se,{deG:()=>qc,tb:()=>Hy,AFp:()=>As,ip1:()=>L9,CZH:()=>G6,hGG:()=>o_,z2F:()=>A5,sBO:()=>Vv,Sil:()=>B4,_Vd:()=>oc,EJc:()=>q6,SBq:()=>Yi,qLn:()=>g,vpe:()=>po,gxx:()=>Ya,tBr:()=>Va,XFs:()=>Ze,OlP:()=>jt,zs3:()=>In,ZZ4:()=>jh,aQg:()=>D6,soG:()=>b5,YKP:()=>Uv,v3s:()=>ZA,h0i:()=>s2,PXZ:()=>Z9,R0b:()=>Ts,FiY:()=>$i,Lbi:()=>C5,g9A:()=>k9,Qsj:()=>x6,FYo:()=>i2,JOm:()=>qi,Tiy:()=>iu,q3G:()=>Vn,tp0:()=>C1,EAV:()=>ep,Rgc:()=>D4,dDg:()=>Ky,DyG:()=>gi,q4F:()=>su,GfV:()=>Bh,s_b:()=>$h,ifc:()=>He,eFA:()=>zE,G48:()=>Qy,Gpc:()=>H,X6Q:()=>G9,_c5:()=>WE,VLi:()=>LE,c2e:()=>Uy,zSh:()=>Gl,wAp:()=>ct,vHH:()=>we,EiD:()=>Ld,mCW:()=>El,qzn:()=>eo,JVY:()=>z0,pB0:()=>V0,eBb:()=>O0,L6k:()=>u8,LAX:()=>Ua,cg1:()=>rc,Tjo:()=>GE,kL8:()=>t2,yhl:()=>Bo,dqk:()=>en,sIi:()=>J2,CqO:()=>fh,QGY:()=>w4,F4k:()=>B3,RDi:()=>ll,AaK:()=>ee,z3N:()=>X1,qOj:()=>Ye,TTD:()=>Sc,_Bn:()=>S4,xp6:()=>x8,uIk:()=>Xl,ekj:()=>yh,Suo:()=>f5,Xpm:()=>Ur,lG2:()=>E2,Yz7:()=>Xt,cJS:()=>It,oAB:()=>Co,Yjl:()=>t1,Y36:()=>dr,_UZ:()=>Og,qZA:()=>U3,TgZ:()=>Ff,EpF:()=>d6,n5z:()=>ps,Ikx:()=>G3,LFG:()=>On,$8M:()=>Qn,NdJ:()=>ph,CRH:()=>Cy,oxw:()=>Fg,Hsn:()=>$f,F$t:()=>f6,Q6J:()=>hh,DdM:()=>dy,iGM:()=>w9,CHM:()=>Nc,oJD:()=>W0,LSH:()=>ja,kYT:()=>w2,YNc:()=>k3,_uU:()=>Jf,Oqu:()=>Le,AsE:()=>qs});var d=F(9765),ne=F(5319),O=F(7574),pe=F(6682),re=F(8819);function J(i){for(let s in i)if(i[s]===J)return s;throw Error("Could not find renamed property on target object.")}function be(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ee(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ee).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function W(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const z=J({__forward_ref__:J});function H(i){return i.__forward_ref__=H,i.toString=function(){return ee(this())},i}function B(i){return ie(i)?i():i}function ie(i){return"function"==typeof i&&i.hasOwnProperty(z)&&i.__forward_ref__===H}class we extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function te(i){return"string"==typeof i?i:null==i?"":String(i)}function he(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():te(i)}function mt(i,s){const a=s?` in ${s}`:"";throw new we("201",`No provider for ${he(i)} found${a}`)}function wt(i,s){null==i&&function(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function It(i){return{providers:i.providers||[],imports:i.imports||[]}}function rr(i){return ir(i,xs)||ir(i,zi)}function ir(i,s){return i.hasOwnProperty(s)?i[s]:null}function e1(i){return i&&(i.hasOwnProperty(Fr)||i.hasOwnProperty(Ds))?i[Fr]:null}const xs=J({\u0275prov:J}),Fr=J({\u0275inj:J}),zi=J({ngInjectableDef:J}),Ds=J({ngInjectorDef:J});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let kn;function Hr(i){const s=kn;return kn=i,s}function it(i,s,a){const l=rr(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ze.Optional?null:void 0!==s?s:void mt(ee(i),"Injector")}function Pt(i){return{toString:i}.toString()}var St=(()=>((St=St||{})[St.OnPush=0]="OnPush",St[St.Default=1]="Default",St))(),He=(()=>((He=He||{})[He.Emulated=0]="Emulated",He[He.None=2]="None",He[He.ShadowDom=3]="ShadowDom",He))();const tt="undefined"!=typeof globalThis&&globalThis,Oi="undefined"!=typeof window&&window,rs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,en=tt||"undefined"!=typeof global&&global||Oi||rs,G={},$=[],K=J({\u0275cmp:J}),Te=J({\u0275dir:J}),ae=J({\u0275pipe:J}),We=J({\u0275mod:J}),ut=J({\u0275loc:J}),zt=J({\u0275fac:J}),tn=J({__NG_ELEMENT_ID__:J});let gn=0;function Ur(i){return Pt(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===St.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||$,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||He.Emulated,id:"c",styles:i.styles||$,_:null,setInput:null,schemas:i.schemas||null,tView:null},u=i.directives,f=i.features,v=i.pipes;return l.id+=gn++,l.inputs=oa(i.inputs,a),l.outputs=oa(i.outputs),f&&f.forEach(_=>_(l)),l.directiveDefs=u?()=>("function"==typeof u?u():u).map(Kn):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(di):null,l})}function Kn(i){return sr(i)||function(i){return i[Te]||null}(i)}function di(i){return function(i){return i[ae]||null}(i)}const sa={};function Co(i){return Pt(()=>{const s={type:i.type,bootstrap:i.bootstrap||$,declarations:i.declarations||$,imports:i.imports||$,exports:i.exports||$,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(sa[i.id]=i.type),s})}function w2(i,s){return Pt(()=>{const a=Fi(i,!0);a.declarations=s.declarations||$,a.imports=s.imports||$,a.exports=s.exports||$})}function oa(i,s){if(null==i)return G;const a={};for(const l in i)if(i.hasOwnProperty(l)){let u=i[l],f=u;Array.isArray(u)&&(f=u[1],u=u[0]),a[u]=l,s&&(s[u]=f)}return a}const E2=Ur;function t1(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function sr(i){return i[K]||null}function Fi(i,s){const a=i[We]||null;if(!a&&!0===s)throw new Error(`Type ${ee(i)} does not have '\u0275mod' property.`);return a}function ss(i){return Array.isArray(i)&&"object"==typeof i[1]}function Er(i){return Array.isArray(i)&&!0===i[1]}function I2(i){return 0!=(8&i.flags)}function A2(i){return 2==(2&i.flags)}function Eo(i){return 1==(1&i.flags)}function $r(i){return null!==i.template}function $n(i){return 0!=(512&i[2])}function ks(i,s){return i.hasOwnProperty(zt)?i[zt]:null}class ol{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Sc(){return a1}function a1(i){return i.type.prototype.ngOnChanges&&(i.setInput=c1),Zu}function Zu(){const i=al(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===G)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function c1(i,s,a,l){const u=al(i)||function(i,s){return i[Ui]=s}(i,{previous:G,current:null}),f=u.current||(u.current={}),v=u.previous,_=this.declaredInputs[a],w=v[_];f[_]=new ol(w&&w.currentValue,s,v===G),i[l]=s}Sc.ngInherit=!0;const Ui="__ngSimpleChanges__";function al(i){return i[Ui]||null}let da;function ll(i){da=i}function l1(){return void 0!==da?da:"undefined"!=typeof document?document:void 0}function on(i){return!!i.listen}const ji={createRenderer:(i,s)=>l1()};function an(i){for(;Array.isArray(i);)i=i[0];return i}function u1(i,s){return an(s[i])}function Mr(i,s){return an(s[i.index])}function S2(i,s){return i.data[s]}function Gr(i,s){const a=s[i];return ss(a)?a:a[0]}function ga(i){return 4==(4&i[2])}function Dc(i){return 128==(128&i[2])}function Ps(i,s){return null==s?null:i[s]}function xo(i){i[18]=0}function d1(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const at={lFrame:fl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ya(){return at.bindingsEnabled}function De(){return at.lFrame.lView}function Et(){return at.lFrame.tView}function Nc(i){return at.lFrame.contextLView=i,i[8]}function nn(){let i=Lc();for(;null!==i&&64===i.type;)i=i.parent;return i}function Lc(){return at.lFrame.currentTNode}function Ii(i,s){const a=at.lFrame;a.currentTNode=i,a.isParent=s}function D2(){return at.lFrame.isParent}function Do(){at.lFrame.isParent=!1}function No(){return at.isInCheckNoChangesMode}function Lo(i){at.isInCheckNoChangesMode=i}function f1(){return at.lFrame.bindingIndex++}function Ir(i){const s=at.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function Rc(i,s){const a=at.lFrame;a.bindingIndex=a.bindingRootIndex=i,kc(s)}function kc(i){at.lFrame.currentDirectiveIndex=i}function dl(){return at.lFrame.currentQueryIndex}function ba(i){at.lFrame.currentQueryIndex=i}function wa(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Ea(i,s,a){if(a&Ze.SkipSelf){let u=s,f=i;for(;!(u=u.parent,null!==u||a&Ze.Host||(u=wa(f),null===u||(f=f[15],10&u.type))););if(null===u)return!1;s=u,i=f}const l=at.lFrame=F1();return l.currentTNode=s,l.lView=i,!0}function Ma(i){const s=F1(),a=i[1];at.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function F1(){const i=at.lFrame,s=null===i?null:i.child;return null===s?fl(i):s}function fl(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function pl(){const i=at.lFrame;return at.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ml=pl;function H1(){const i=pl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ar(){return at.lFrame.selectedIndex}function Ia(i){at.lFrame.selectedIndex=i}function Gn(){const i=at.lFrame;return S2(i.tView,i.selectedIndex)}function ko(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:_,ngAfterViewInit:w,ngAfterViewChecked:A,ngOnDestroy:D}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),_&&((i.contentHooks||(i.contentHooks=[])).push(a,_),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,_)),w&&(i.viewHooks||(i.viewHooks=[])).push(-a,w),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=D&&(i.destroyHooks||(i.destroyHooks=[])).push(a,D)}}function Po(i,s,a){Vc(i,s,3,a)}function Aa(i,s,a,l){(3&i[2])===a&&Vc(i,s,a,l)}function qn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Vc(i,s,a,l){const f=null!=l?l:-1,v=s.length-1;let _=0;for(let w=void 0!==l?65535&i[18]:0;w<v;w++)if("number"==typeof s[w+1]){if(_=s[w],null!=l&&_>=l)break}else s[w]<0&&(i[18]+=65536),(_<f||-1==f)&&(Fc(i,a,s,w),i[18]=(4294901760&i[18])+w+2),w++}function Fc(i,s,a,l){const u=a[l]<0,f=a[l+1],_=i[u?-a[l]:a[l]];if(u){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(_)}finally{}}}else try{f.call(_)}finally{}}class N2{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function ds(i,s,a){const l=on(i);let u=0;for(;u<a.length;){const f=a[u];if("number"==typeof f){if(0!==f)break;u++;const v=a[u++],_=a[u++],w=a[u++];l?i.setAttribute(s,_,w,v):s.setAttributeNS(v,_,w)}else{const v=f,_=a[++u];fs(v)?l&&i.setProperty(s,v,_):l?i.setAttribute(s,v,_):s.setAttribute(v,_),u++}}return u}function vl(i){return 3===i||4===i||6===i}function fs(i){return 64===i.charCodeAt(0)}function Os(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const u=s[l];"number"==typeof u?a=u:0===a||yl(i,a,u,null,-1===a||2===a?s[++l]:null)}}return i}function yl(i,s,a,l,u){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const _=i[f++];if("number"==typeof _){if(_===s){v=-1;break}if(_>s){v=f-1;break}}}for(;f<i.length;){const _=i[f];if("number"==typeof _)break;if(_===a){if(null===l)return void(null!==u&&(i[f+1]=u));if(l===i[f+1])return void(i[f+2]=u)}f++,null!==l&&f++,null!==u&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==u&&i.splice(f++,0,u)}function En(i){return-1!==i}function Vs(i){return 32767&i}function B1(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Sa=!0;function zo(i){const s=Sa;return Sa=i,s}let jc=0;function Fs(i,s){const a=yn(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,j1(l.data,i),j1(s,null),j1(l.blueprint,null));const u=cn(i,s),f=i.injectorIndex;if(En(u)){const v=Vs(u),_=B1(u,s),w=_[1].data;for(let A=0;A<8;A++)s[f+A]=_[v+A]|w[v+A]}return s[f+8]=u,f}function j1(i,s){i.push(0,0,0,0,0,0,0,0,s)}function yn(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function cn(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,u=s;for(;null!==u;){const f=u[1],v=f.type;if(l=2===v?f.declTNode:1===v?u[6]:null,null===l)return-1;if(a++,u=u[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function p1(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(tn)&&(l=a[tn]),null==l&&(l=a[tn]=jc++);const u=255&l;s.data[i+(u>>5)]|=1<<u}(i,s,a)}function xa(i,s,a){if(a&Ze.Optional)return i;mt(s,"NodeInjector")}function Da(i,s,a,l){if(a&Ze.Optional&&void 0===l&&(l=null),0==(a&(Ze.Self|Ze.Host))){const u=i[9],f=Hr(void 0);try{return u?u.get(s,l,a&Ze.Optional):it(s,l,a&Ze.Optional)}finally{Hr(f)}}return xa(l,s,a)}function $1(i,s,a,l=Ze.Default,u){if(null!==i){const f=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(tn)?i[tn]:void 0;return"number"==typeof s?s>=0?255&s:Hs:s}(a);if("function"==typeof f){if(!Ea(s,i,l))return l&Ze.Host?xa(u,a,l):Da(s,a,l,u);try{const v=f(l);if(null!=v||l&Ze.Optional)return v;mt(a)}finally{ml()}}else if("number"==typeof f){let v=null,_=yn(i,s),w=-1,A=l&Ze.Host?s[16][6]:null;for((-1===_||l&Ze.SkipSelf)&&(w=-1===_?cn(i,s):s[_+8],-1!==w&&R2(l,!1)?(v=s[1],_=Vs(w),s=B1(w,s)):_=-1);-1!==_;){const D=s[1];if(L2(f,_,D.data)){const R=m1(_,s,a,v,l,A);if(R!==G1)return R}w=s[_+8],-1!==w&&R2(l,s[1].data[_+8]===A)&&L2(f,_,s)?(v=D,_=Vs(w),s=B1(w,s)):_=-1}}}return Da(s,a,l,u)}const G1={};function Hs(){return new Tr(nn(),De())}function m1(i,s,a,l,u,f){const v=s[1],_=v.data[i+8],D=g1(_,v,a,null==l?A2(_)&&Sa:l!=v&&0!=(3&_.type),u&Ze.Host&&f===_);return null!==D?Oo(s,v,D,_):G1}function g1(i,s,a,l,u){const f=i.providerIndexes,v=s.data,_=1048575&f,w=i.directiveStart,D=f>>20,P=u?_+D:i.directiveEnd;for(let j=l?_:_+D;j<P;j++){const Z=v[j];if(j<w&&a===Z||j>=w&&Z.type===a)return j}if(u){const j=v[w];if(j&&$r(j)&&j.type===a)return w}return null}function Oo(i,s,a,l){let u=i[a];const f=s.data;if(function(i){return i instanceof N2}(u)){const v=u;v.resolving&&function(i,s){throw new we("200",`Circular dependency in DI detected for ${i}`)}(he(f[a]));const _=zo(v.canSeeViewProviders);v.resolving=!0;const w=v.injectImpl?Hr(v.injectImpl):null;Ea(i,l,Ze.Default);try{u=i[a]=v.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:u,ngDoCheck:f}=s.type.prototype;if(l){const v=a1(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}u&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,u),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==w&&Hr(w),zo(_),v.resolving=!1,ml()}}return u}function L2(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function R2(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class Tr{constructor(s,a){this._tNode=s,this._lView=a}get(s,a){return $1(this._tNode,this._lView,s,void 0,a)}}function ps(i){return Pt(()=>{const s=i.prototype.constructor,a=s[zt]||q1(s),l=Object.prototype;let u=Object.getPrototypeOf(i.prototype).constructor;for(;u&&u!==l;){const f=u[zt]||q1(u);if(f&&f!==a)return f;u=Object.getPrototypeOf(u)}return f=>new f})}function q1(i){return ie(i)?()=>{const s=q1(B(i));return s&&s()}:ks(i)}function Qn(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let u=0;for(;u<l;){const f=a[u];if(vl(f))break;if(0===f)u+=2;else if("number"==typeof f)for(u++;u<l&&"string"==typeof a[u];)u++;else{if(f===s)return a[u+1];u+=2}}}return null}(nn(),i)}const Us="__parameters__";function ms(i,s,a){return Pt(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const u in l)this[u]=l[u]}}}(s);function u(...f){if(this instanceof u)return l.apply(this,f),this;const v=new u(...f);return _.annotation=v,_;function _(w,A,D){const R=w.hasOwnProperty(Us)?w[Us]:Object.defineProperty(w,Us,{value:[]})[Us];for(;R.length<=D;)R.push(null);return(R[D]=R[D]||[]).push(v),w}}return a&&(u.prototype=Object.create(a.prototype)),u.prototype.ngMetadataName=i,u.annotationCls=u,u})}class jt{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const qc=new jt("AnalyzeForEntryComponents"),gi=Function;function fn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),fn(l,s)):s!==i&&s.push(l)}return s}function cr(i,s){i.forEach(a=>Array.isArray(a)?cr(a,s):s(a))}function Z1(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Si(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function v1(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}function qr(i,s,a){let l=Y1(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let u=i.length;if(u==s)i.push(a,l);else if(1===u)i.push(l,i[0]),i[0]=a;else{for(u--,i.push(i[u-1],i[u]);u>s;)i[u]=i[u-2],u--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Yc(i,s){const a=Y1(i,s);if(a>=0)return i[1|a]}function Y1(i,s){return function(i,s,a){let l=0,u=i.length>>a;for(;u!==l;){const f=l+(u-l>>1),v=i[f<<a];if(s===v)return f<<a;v>s?u=f:l=f+1}return~(u<<a)}(i,s,1)}const Mt={},Qt="__NG_DI_FLAG__",zn="ngTempTokenPath",lr=/\n/gm,Pa="__source",xi=J({provide:String,useValue:J});let Wr;function _1(i){const s=Wr;return Wr=i,s}function bl(i,s=Ze.Default){if(void 0===Wr)throw new Error("inject() must be called from an injection context");return null===Wr?it(i,void 0,s):Wr.get(i,s&Ze.Optional?null:void 0,s)}function On(i,s=Ze.Default){return(kn||bl)(B(i),s)}function gs(i){const s=[];for(let a=0;a<i.length;a++){const l=B(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let u,f=Ze.Default;for(let v=0;v<l.length;v++){const _=l[v],w=Oa(_);"number"==typeof w?-1===w?u=_.token:f|=w:u=_}s.push(On(u,f))}else s.push(On(l))}return s}function Ho(i,s){return i[Qt]=s,i.prototype[Qt]=s,i}function Oa(i){return i[Qt]}function Uo(i,s,a,l){const u=i[zn];throw s[Pa]&&u.unshift(s[Pa]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let u=ee(s);if(Array.isArray(s))u=s.map(ee).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let _=s[v];f.push(v+":"+("string"==typeof _?JSON.stringify(_):ee(_)))}u=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${u}]: ${i.replace(lr,"\n  ")}`}("\n"+i.message,u,a,l),i.ngTokenPath=u,i[zn]=null,i}const Va=Ho(ms("Inject",i=>({token:i})),-1),$i=Ho(ms("Optional"),8),C1=Ho(ms("SkipSelf"),4);let H2,R0;function $s(i){var s;return(null===(s=function(){if(void 0===H2&&(H2=null,en.trustedTypes))try{H2=en.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return H2}())||void 0===s?void 0:s.createHTML(i))||i}function a8(i){var s;return(null===(s=function(){if(void 0===R0&&(R0=null,en.trustedTypes))try{R0=en.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return R0}())||void 0===s?void 0:s.createHTML(i))||i}class w1{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class k0 extends w1{getTypeName(){return"HTML"}}class l8 extends w1{getTypeName(){return"Style"}}class P0 extends w1{getTypeName(){return"Script"}}class Md extends w1{getTypeName(){return"URL"}}class Ha extends w1{getTypeName(){return"ResourceURL"}}function X1(i){return i instanceof w1?i.changingThisBreaksApplicationSecurity:i}function eo(i,s){const a=Bo(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function Bo(i){return i instanceof w1&&i.getTypeName()||null}function z0(i){return new k0(i)}function u8(i){return new l8(i)}function O0(i){return new P0(i)}function Ua(i){return new Md(i)}function V0(i){return new Ha(i)}class Id{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString($s(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class e4{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=$s(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=$s(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let u=a.length-1;0<u;u--){const v=a.item(u).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&s.removeAttribute(v)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Td=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Sd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function El(i){return(i=String(i)).match(Td)||i.match(Sd)?i:"unsafe:"+i}function E1(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function j2(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const Il=E1("area,br,col,hr,img,wbr"),Al=E1("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),U0=E1("rp,rt"),j0=j2(Il,j2(Al,E1("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),j2(U0,E1("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),j2(U0,Al)),t4=E1("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ba=E1("srcset"),d8=j2(t4,Ba,E1("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),E1("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$0=E1("script,style,template");class Dd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let u=this.checkClobberedElement(a,a.nextSibling);if(u){a=u;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!j0.hasOwnProperty(a))return this.sanitizedSomething=!0,!$0.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let u=0;u<l.length;u++){const f=l.item(u),v=f.name,_=v.toLowerCase();if(!d8.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let w=f.value;t4[_]&&(w=El(w)),Ba[_]&&(i=w,w=(i=String(i)).split(",").map(s=>El(s.trim())).join(", ")),this.buf.push(" ",v,'="',G0(w),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();j0.hasOwnProperty(a)&&!Il.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(G0(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const f8=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Nd=/([^\#-~ |!])/g;function G0(i){return i.replace(/&/g,"&amp;").replace(f8,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(Nd,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $2;function Ld(i,s){let a=null;try{$2=$2||function(i){const s=new e4(i);return function(){try{return!!(new window.DOMParser).parseFromString($s(""),"text/html")}catch(i){return!1}}()?new Id(s):s}(i);let l=s?String(s):"";a=$2.getInertBodyElement(l);let u=5,f=l;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,l=f,f=a.innerHTML,a=$2.getInertBodyElement(l)}while(l!==f);return $s((new Dd).sanitizeChildren(q0(a)||a))}finally{if(a){const l=q0(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function q0(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Vn=(()=>((Vn=Vn||{})[Vn.NONE=0]="NONE",Vn[Vn.HTML=1]="HTML",Vn[Vn.STYLE=2]="STYLE",Vn[Vn.SCRIPT=3]="SCRIPT",Vn[Vn.URL=4]="URL",Vn[Vn.RESOURCE_URL=5]="RESOURCE_URL",Vn))();function W0(i){const s=Tl();return s?a8(s.sanitize(Vn.HTML,i)||""):eo(i,"HTML")?a8(X1(i)):Ld(l1(),te(i))}function ja(i){const s=Tl();return s?s.sanitize(Vn.URL,i)||"":eo(i,"URL")?X1(i):El(te(i))}function Tl(){const i=De();return i&&i[12]}const st="__ngContext__";function Tt(i,s){i[st]=s}function Sl(i){const s=function(i){return i[st]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function t3(i){return i.ngOriginalError}function p(i,...s){i.error(...s)}class g{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=this._findContext(s),u=(i=s)&&i.ngErrorLogger||p;var i;u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a),l&&u(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(t3(s)):null}_findOriginalError(s){let a=s&&t3(s);for(;a&&t3(a);)a=t3(a);return a||null}}const i4=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(en))();function Di(i){return i instanceof Function?i():i}var qi=(()=>((qi=qi||{})[qi.Important=1]="Important",qi[qi.DashCase=2]="DashCase",qi))();function kd(i,s){return undefined(i,s)}function q2(i){const s=i[3];return Er(s)?s[3]:s}function s3(i){return zd(i[13])}function Ci(i){return zd(i[4])}function zd(i){for(;null!==i&&!Er(i);)i=i[4];return i}function W2(i,s,a,l,u){if(null!=l){let f,v=!1;Er(l)?f=l:ss(l)&&(v=!0,l=l[0]);const _=an(l);0===i&&null!==a?null==u?Ud(s,a,_):Ga(s,a,_,u||null,!0):1===i&&null!==a?Ga(s,a,_,u||null,!0):2===i?function(i,s,a){const l=Nr(i,s);l&&function(i,s,a,l){on(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,_,v):3===i&&s.destroyNode(_),null!=f&&function(i,s,a,l,u){const f=a[7];f!==an(a)&&W2(s,i,l,f,u);for(let _=10;_<a.length;_++){const w=a[_];Ol(w[1],w,i,s,l,f)}}(s,i,f,a,u)}}function o3(i,s,a){return on(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function Mm(i,s){const a=i[9],l=a.indexOf(s),u=s[3];1024&s[2]&&(s[2]&=-1025,d1(u,-1)),a.splice(l,1)}function w8(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const u=l[17];null!==u&&u!==i&&Mm(u,l),s>0&&(i[a-1][4]=l[4]);const f=Si(i,10+s);!function(i,s){Ol(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const v=f[19];null!==v&&v.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function a3(i,s){if(!(256&s[2])){const a=s[11];on(a)&&a.destroyNode&&Ol(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return c3(i[1],i);for(;s;){let a=null;if(ss(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)ss(s)&&c3(s[1],s),s=s[3];null===s&&(s=i),ss(s)&&c3(s[1],s),a=s&&s[4]}s=a}}(s)}}function c3(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const u=s[a[l]];if(!(u instanceof N2)){const f=a[l+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const _=u[f[v]],w=f[v+1];try{w.call(_)}finally{}}else try{f.call(u)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let u=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+1],_="function"==typeof v?v(s):an(s[v]),w=l[u=a[f+2]],A=a[f+3];"boolean"==typeof A?_.removeEventListener(a[f],w,A):A>=0?l[u=A]():l[u=-A].unsubscribe(),f+=2}else{const v=l[u=a[f+1]];a[f].call(v)}if(null!==l){for(let f=u+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&on(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Er(s[3])){a!==s[3]&&Mm(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function Im(i,s,a){return function(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const u=i.data[l.directiveStart].encapsulation;if(u===He.None||u===He.Emulated)return null}return Mr(l,a)}(i,s.parent,a)}function Ga(i,s,a,l,u){on(i)?i.insertBefore(s,a,l,u):s.insertBefore(a,l,u)}function Ud(i,s,a){on(i)?i.appendChild(s,a):s.appendChild(a)}function Tm(i,s,a,l,u){null!==l?Ga(i,s,a,l,u):Ud(i,s,a)}function Nr(i,s){return on(i)?i.parentNode(s):s.parentNode}function Sm(i,s,a){return xm(i,s,a)}let xm=function(i,s,a){return 40&i.type?Mr(i,a):null};function s4(i,s,a,l){const u=Im(i,l,s),f=s[11],_=Sm(l.parent||s[6],l,s);if(null!=u)if(Array.isArray(a))for(let w=0;w<a.length;w++)Tm(f,u,a[w],_,!1);else Tm(f,u,a,_,!1)}function zl(i,s){if(null!==s){const a=s.type;if(3&a)return Mr(s,i);if(4&a)return h3(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return zl(i,l);{const u=i[s.index];return Er(u)?h3(-1,u):an(u)}}if(32&a)return kd(s,i)()||an(i[s.index]);{const l=E8(i,s);return null!==l?Array.isArray(l)?l[0]:zl(q2(i[16]),l):zl(i,s.next)}}return null}function E8(i,s){return null!==s?i[16][6].projection[s.projection]:null}function h3(i,s){const a=10+i+1;if(a<s.length){const l=s[a],u=l[1].firstChild;if(null!==u)return zl(l,u)}return s[7]}function I8(i,s,a,l,u,f,v){for(;null!=a;){const _=l[a.index],w=a.type;if(v&&0===s&&(_&&Tt(an(_),l),a.flags|=4),64!=(64&a.flags))if(8&w)I8(i,s,a.child,l,u,f,!1),W2(s,i,u,_,f);else if(32&w){const A=kd(a,l);let D;for(;D=A();)W2(s,i,u,D,f);W2(s,i,u,_,f)}else 16&w?jd(i,s,l,a,u,f):W2(s,i,u,_,f);a=v?a.projectionNext:a.next}}function Ol(i,s,a,l,u,f){I8(a,l,i.firstChild,s,u,f,!1)}function jd(i,s,a,l,u,f){const v=a[16],w=v[6].projection[l.projection];if(Array.isArray(w))for(let A=0;A<w.length;A++)W2(s,i,u,w[A],f);else I8(i,s,w,v[3],u,f,!0)}function Gd(i,s,a){on(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function qd(i,s,a){on(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function A8(i,s,a){let l=i.length;for(;;){const u=i.indexOf(s,a);if(-1===u)return u;if(0===u||i.charCodeAt(u-1)<=32){const f=s.length;if(u+f===l||i.charCodeAt(u+f)<=32)return u}a=u+1}}const T8="ng-template";function Yr(i,s,a){let l=0;for(;l<i.length;){let u=i[l++];if(a&&"class"===u){if(u=i[l],-1!==A8(u.toLowerCase(),s,0))return!0}else if(1===u){for(;l<i.length&&"string"==typeof(u=i[l++]);)if(u.toLowerCase()===s)return!0;return!1}}return!1}function Qr(i){return 4===i.type&&i.value!==T8}function S8(i,s,a){return s===(4!==i.type||a?i.value:T8)}function Wd(i,s,a){let l=4;const u=i.attrs||[],f=function(i){for(let s=0;s<i.length;s++)if(vl(i[s]))return s;return i.length}(u);let v=!1;for(let _=0;_<s.length;_++){const w=s[_];if("number"!=typeof w){if(!v)if(4&l){if(l=2|1&l,""!==w&&!S8(i,w,a)||""===w&&1===s.length){if(ro(l))return!1;v=!0}}else{const A=8&l?w:s[++_];if(8&l&&null!==i.attrs){if(!Yr(i.attrs,A,a)){if(ro(l))return!1;v=!0}continue}const R=BC(8&l?"class":w,u,Qr(i),a);if(-1===R){if(ro(l))return!1;v=!0;continue}if(""!==A){let P;P=R>f?"":u[R+1].toLowerCase();const j=8&l?P:null;if(j&&-1!==A8(j,A,0)||2&l&&A!==P){if(ro(l))return!1;v=!0}}}}else{if(!v&&!ro(l)&&!ro(w))return!1;if(v&&ro(w))continue;v=!1,l=w|1&l}}return ro(l)||v}function ro(i){return 0==(1&i)}function BC(i,s,a,l){if(null===s)return-1;let u=0;if(l||!a){let f=!1;for(;u<s.length;){const v=s[u];if(v===i)return u;if(3===v||6===v)f=!0;else{if(1===v||2===v){let _=s[++u];for(;"string"==typeof _;)_=s[++u];continue}if(4===v)break;if(0===v){u+=4;continue}}u+=f?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function Zd(i,s,a=!1){for(let l=0;l<s.length;l++)if(Wd(i,s[l],a))return!0;return!1}function Yd(i,s){e:for(let a=0;a<s.length;a++){const l=s[a];if(i.length===l.length){for(let u=0;u<i.length;u++)if(i[u]!==l[u])continue e;return!0}}return!1}function Lm(i,s){return i?":not("+s.trim()+")":s}function Qd(i){let s=i[0],a=1,l=2,u="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&l){const _=i[++a];u+="["+v+(_.length>0?'="'+_+'"':"")+"]"}else 8&l?u+="."+v:4&l&&(u+=" "+v);else""!==u&&!ro(v)&&(s+=Lm(f,u),u=""),l=v,f=f||!ro(l);a++}return""!==u&&(s+=Lm(f,u)),s}const ft={};function x8(i){D8(Et(),De(),Ar()+i,No())}function D8(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Po(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Aa(s,f,0,a)}Ia(a)}function d3(i,s){return i<<17|s<<2}function io(i){return i>>17&32767}function N8(i){return 2|i}function jo(i){return(131068&i)>>2}function Fl(i,s){return-131069&i|s<<2}function Jd(i){return 1|i}function K2(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const u=a[l],f=a[l+1];if(-1!==f){const v=i.data[f];ba(u),v.contentQueries(2,s[f],f)}}}function so(i,s,a,l,u,f,v,_,w,A){const D=s.blueprint.slice();return D[0]=u,D[2]=140|l,xo(D),D[3]=D[15]=i,D[8]=a,D[10]=v||i&&i[10],D[11]=_||i&&i[11],D[12]=w||i&&i[12]||null,D[9]=A||i&&i[9]||null,D[6]=f,D[16]=2==s.type?i[16]:D,D}function _s(i,s,a,l,u){let f=i.data[s];if(null===f)f=function(i,s,a,l,u){const f=Lc(),v=D2(),w=i.data[s]=function(i,s,a,l,u,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,l,u);return null===i.firstChild&&(i.firstChild=w),null!==f&&(v?null==f.child&&null!==w.parent&&(f.child=w):null===f.next&&(f.next=w)),w}(i,s,a,l,u),at.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=u;const v=function(){const i=at.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return Ii(f,!0),f}function Wa(i,s,a,l){if(0===a)return-1;const u=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return u}function Y2(i,s,a){Ma(s);try{const l=i.viewQuery;null!==l&&E3(1,l,a);const u=i.template;null!==u&&v3(i,s,u,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&K2(i,s),i.staticViewQueries&&E3(2,i.viewQuery,a);const f=i.components;null!==f&&function(i,s){for(let a=0;a<s.length;a++)lg(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,H1()}}function c4(i,s,a,l){const u=s[2];if(256==(256&u))return;Ma(s);const f=No();try{xo(s),function(i){at.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&v3(i,s,a,2,l);const v=3==(3&u);if(!f)if(v){const A=i.preOrderCheckHooks;null!==A&&Po(s,A,null)}else{const A=i.preOrderHooks;null!==A&&Aa(s,A,0,null),qn(s,0)}if(function(i){for(let s=s3(i);null!==s;s=Ci(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const u=a[l],f=u[3];0==(1024&u[2])&&d1(f,1),u[2]|=1024}}}(s),function(i){for(let s=s3(i);null!==s;s=Ci(s))for(let a=10;a<s.length;a++){const l=s[a],u=l[1];Dc(l)&&c4(u,l,u.template,l[8])}}(s),null!==i.contentQueries&&K2(i,s),!f)if(v){const A=i.contentCheckHooks;null!==A&&Po(s,A)}else{const A=i.contentHooks;null!==A&&Aa(s,A,1),qn(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const u=a[l];if(u<0)Ia(~u);else{const f=u,v=a[++l],_=a[++l];Rc(v,f),_(2,s[f])}}}finally{Ia(-1)}}(i,s);const _=i.components;null!==_&&function(i,s){for(let a=0;a<s.length;a++)ib(i,s[a])}(s,_);const w=i.viewQuery;if(null!==w&&E3(2,w,l),!f)if(v){const A=i.viewCheckHooks;null!==A&&Po(s,A)}else{const A=i.viewHooks;null!==A&&Aa(s,A,2),qn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,d1(s[3],-1))}finally{H1()}}function Fn(i,s,a,l){const u=s[10],f=!No(),v=ga(s);try{f&&!v&&u.begin&&u.begin(),v&&Y2(i,s,l),c4(i,s,a,l)}finally{f&&!v&&u.end&&u.end()}}function v3(i,s,a,l,u){const f=Ar(),v=2&l;try{Ia(-1),v&&s.length>20&&D8(i,s,20,No()),a(l,u)}finally{Ia(f)}}function of(i,s,a){!ya()||(function(i,s,a,l){const u=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Fs(a,s),Tt(l,s);const v=a.initialInputs;for(let _=u;_<f;_++){const w=i.data[_],A=$r(w);A&&ag(s,a,w);const D=Oo(s,i,_,a);Tt(D,s),null!==v&&eb(0,_-u,D,w,0,v),A&&(Gr(a.index,s)[8]=D)}}(i,s,a,Mr(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,u=a.directiveEnd,v=a.index,_=at.lFrame.currentDirectiveIndex;try{Ia(v);for(let w=l;w<u;w++){const A=i.data[w],D=s[w];kc(w),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&sg(A,D)}}finally{Ia(-1),kc(_)}}(i,s,a))}function l4(i,s,a=Mr){const l=s.localNames;if(null!==l){let u=s.index+1;for(let f=0;f<l.length;f+=2){const v=l[f+1],_=-1===v?a(s,i):i[v];i[u++]=_}}}function Bl(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=H8(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function H8(i,s,a,l,u,f,v,_,w,A){const D=20+l,R=D+u,P=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:ft);return a}(D,R),j="function"==typeof A?A():A;return P[1]={type:i,blueprint:P,template:a,queries:null,viewQuery:_,declTNode:s,data:P.slice().fill(null,D),bindingStartIndex:D,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:w,consts:j,incompleteFirstPass:!1}}function Jm(i,s,a,l){const u=Z8(s);null===a?u.push(l):(u.push(a),i.firstCreatePass&&M3(i).push(l,u.length-1))}function Za(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const u=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,u):a[l]=[s,u]}return a}function Cs(i,s,a,l,u,f,v,_){const w=Mr(s,a);let D,A=s.inputs;!_&&null!=A&&(D=A[l])?($l(i,a,D,l,u),A2(s)&&function(i,s){const a=Gr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),u=null!=v?v(u,s.value||"",l):u,on(f)?f.setProperty(w,l,u):fs(l)||(w.setProperty?w.setProperty(l,u):w[l]=u))}function _3(i,s,a,l){let u=!1;if(ya()){const f=function(i,s,a){const l=i.directiveRegistry;let u=null;if(l)for(let f=0;f<l.length;f++){const v=l[f];Zd(a,v.selectors,!1)&&(u||(u=[]),p1(Fs(a,s),i,v.type),$r(v)?(og(i,a),u.unshift(v)):u.push(v))}return u}(i,s,a),v=null===l?null:{"":-1};if(null!==f){u=!0,b3(a,i.data.length,f.length);for(let D=0;D<f.length;D++){const R=f[D];R.providersResolver&&R.providersResolver(R)}let _=!1,w=!1,A=Wa(i,s,f.length,null);for(let D=0;D<f.length;D++){const R=f[D];a.mergedAttrs=Os(a.mergedAttrs,R.hostAttrs),j8(i,a,s,A,R),C3(A,R,v),null!==R.contentQueries&&(a.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=128);const P=R.type.prototype;!_&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),_=!0),!w&&(P.ngOnChanges||P.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),w=!0),A++}!function(i,s){const l=s.directiveEnd,u=i.data,f=s.attrs,v=[];let _=null,w=null;for(let A=s.directiveStart;A<l;A++){const D=u[A],R=D.inputs,P=null===f||Qr(s)?null:vr(R,f);v.push(P),_=Za(R,A,_),w=Za(D.outputs,A,w)}null!==_&&(_.hasOwnProperty("class")&&(s.flags|=16),_.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=_,s.outputs=w}(i,a)}v&&function(i,s,a){if(s){const l=i.localNames=[];for(let u=0;u<s.length;u+=2){const f=a[s[u+1]];if(null==f)throw new we("301",`Export of name '${s[u+1]}' not found!`);l.push(s[u],f)}}}(a,l,v)}return a.mergedAttrs=Os(a.mergedAttrs,a.attrs),u}function U8(i,s,a,l,u,f){const v=f.hostBindings;if(v){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const w=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(_)!=w&&_.push(w),_.push(l,u,v)}}function sg(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function og(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function C3(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;$r(s)&&(a[""]=i)}}function b3(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function j8(i,s,a,l,u){i.data[l]=u;const f=u.factory||(u.factory=ks(u.type)),v=new N2(f,$r(u),null);i.blueprint[l]=v,a[l]=v,U8(i,s,0,l,Wa(i,a,u.hostVars,ft),u)}function ag(i,s,a){const l=Mr(s,i),u=Bl(a),f=i[10],v=h4(i,so(i,u,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=v}function bs(i,s,a,l,u,f){const v=Mr(i,s);!function(i,s,a,l,u,f,v){if(null==f)on(i)?i.removeAttribute(s,u,a):s.removeAttribute(u);else{const _=null==v?te(f):v(f,l||"",u);on(i)?i.setAttribute(s,u,_,a):a?s.setAttributeNS(a,u,_):s.setAttribute(u,_)}}(s[11],v,f,i.value,a,l,u)}function eb(i,s,a,l,u,f){const v=f[s];if(null!==v){const _=l.setInput;for(let w=0;w<v.length;){const A=v[w++],D=v[w++],R=v[w++];null!==_?l.setInput(a,R,A,D):a[D]=R}}}function vr(i,s){let a=null,l=0;for(;l<s.length;){const u=s[l];if(0!==u)if(5!==u){if("number"==typeof u)break;i.hasOwnProperty(u)&&(null===a&&(a=[]),a.push(u,i[u],s[l+1])),l+=2}else l+=2;else l+=4}return a}function cg(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function ib(i,s){const a=Gr(s,i);if(Dc(a)){const l=a[1];80&a[2]?c4(l,a,l.template,a[8]):a[5]>0&&$8(a)}}function $8(i){for(let l=s3(i);null!==l;l=Ci(l))for(let u=10;u<l.length;u++){const f=l[u];if(1024&f[2]){const v=f[1];c4(v,f,v.template,f[8])}else f[5]>0&&$8(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const u=Gr(a[l],i);Dc(u)&&u[5]>0&&$8(u)}}function lg(i,s){const a=Gr(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Y2(l,a,a[8])}function h4(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function G8(i){for(;i;){i[2]|=64;const s=q2(i);if($n(i)&&!s)return i;i=s}return null}function cf(i,s,a){const l=s[10];l.begin&&l.begin();try{c4(i,s,i.template,a)}catch(u){throw uf(s,u),u}finally{l.end&&l.end()}}function W8(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Sl(a),u=l[1];Fn(u,l,u.template,a)}}(i[8])}function E3(i,s,a){ba(0),s(i,a)}const dg=(()=>Promise.resolve(null))();function Z8(i){return i[7]||(i[7]=[])}function M3(i){return i.cleanup||(i.cleanup=[])}function uf(i,s){const a=i[9],l=a?a.get(g,null):null;l&&l.handleError(s)}function $l(i,s,a,l,u){for(let f=0;f<a.length;){const v=a[f++],_=a[f++],w=s[v],A=i.data[v];null!==A.setInput?A.setInput(w,u,l,_):w[_]=u}}function $o(i,s,a){const l=u1(s,i);!function(i,s,a){on(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function I3(i,s,a){let l=a?i.styles:null,u=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const _=s[v];"number"==typeof _?f=_:1==f?u=W(u,_):2==f&&(l=W(l,_+": "+s[++v]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=u:i.classesWithoutHost=u}const Ya=new jt("INJECTOR",-1);class ff{get(s,a=Mt){if(a===Mt){const l=new Error(`NullInjectorError: No provider for ${ee(s)}!`);throw l.name="NullInjectorError",l}return a}}const Gl=new jt("Set Injector scope."),oo={},pg={};let K8;function pf(){return void 0===K8&&(K8=new ff),K8}function A3(i,s=null,a=null,l){return new Gs(i,a,s||pf(),l)}class Gs{constructor(s,a,l,u=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&cr(a,_=>this.processProvider(_,s,a)),cr([s],_=>this.processInjectorType(_,[],f)),this.records.set(Ya,Wl(void 0,this));const v=this.records.get(Gl);this.scope=null!=v?v.value:null,this.source=u||("object"==typeof s?null:ee(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Mt,l=Ze.Default){this.assertNotDestroyed();const u=_1(this),f=Hr(void 0);try{if(!(l&Ze.SkipSelf)){let _=this.records.get(s);if(void 0===_){const w=("function"==typeof(i=s)||"object"==typeof i&&i instanceof jt)&&rr(s);_=w&&this.injectableDefInScope(w)?Wl(Y8(s),oo):null,this.records.set(s,_)}if(null!=_)return this.hydrate(s,_)}return(l&Ze.Self?pf():this.parent).get(s,a=l&Ze.Optional&&a===Mt?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[zn]=v[zn]||[]).unshift(ee(s)),u)throw v;return Uo(v,s,"R3InjectorError",this.source)}throw v}finally{Hr(f),_1(u)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,u)=>s.push(ee(u))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=B(s)))return!1;let u=e1(s);const f=null==u&&s.ngModule||void 0,v=void 0===f?s:f,_=-1!==l.indexOf(v);if(void 0!==f&&(u=e1(f)),null==u)return!1;if(null!=u.imports&&!_){let D;l.push(v);try{cr(u.imports,R=>{this.processInjectorType(R,a,l)&&(void 0===D&&(D=[]),D.push(R))})}finally{}if(void 0!==D)for(let R=0;R<D.length;R++){const{ngModule:P,providers:j}=D[R];cr(j,Z=>this.processProvider(Z,P,j||$))}}this.injectorDefTypes.add(v);const w=ks(v)||(()=>new v);this.records.set(v,Wl(w,oo));const A=u.providers;if(null!=A&&!_){const D=s;cr(A,R=>this.processProvider(R,D,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let u=d4(s=B(s))?s:B(s&&s.provide);const f=Q8(i=s)?Wl(void 0,i.useValue):Wl(vg(i),oo);var i;if(d4(s)||!0!==s.multi)this.records.get(u);else{let v=this.records.get(u);v||(v=Wl(void 0,oo,!0),v.factory=()=>gs(v.multi),this.records.set(u,v)),u=s,v.multi.push(s)}this.records.set(u,f)}hydrate(s,a){return a.value===oo&&(a.value=pg,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=B(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Y8(i){const s=rr(i),a=null!==s?s.factory:ks(i);if(null!==a)return a;if(i instanceof jt)throw new Error(`Token ${ee(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=v1(s,"?");throw new Error(`Can't resolve all parameters for ${ee(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[xs]||i[zi]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function vg(i,s,a){let l;if(d4(i)){const u=B(i);return ks(u)||Y8(u)}if(Q8(i))l=()=>B(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...gs(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>On(B(i.useExisting));else{const u=B(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return ks(u)||Y8(u);l=()=>new u(...gs(i.deps))}return l}function Wl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Q8(i){return null!==i&&"object"==typeof i&&xi in i}function d4(i){return"function"==typeof i}const Qa=function(i,s,a){return function(i,s=null,a=null,l){const u=A3(i,s,a,l);return u._resolveInjectorDefTypes(),u}({name:a},s,i,a)};let In=(()=>{class i{static create(a,l){return Array.isArray(a)?Qa(a,l,""):Qa(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=Mt,i.NULL=new ff,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>On(Ya)}),i.__NG_ELEMENT_ID__=-1,i})();function v4(i,s){ko(Sl(i)[1],nn())}function Ye(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let u;if($r(i))u=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");u=s.\u0275dir}if(u){if(a){l.push(u);const v=i;v.inputs=I1(i.inputs),v.declaredInputs=I1(i.declaredInputs),v.outputs=I1(i.outputs);const _=u.hostBindings;_&&Tg(i,_);const w=u.viewQuery,A=u.contentQueries;if(w&&D3(i,w),A&&Ql(i,A),be(i.inputs,u.inputs),be(i.declaredInputs,u.declaredInputs),be(i.outputs,u.outputs),$r(u)&&u.data.animation){const D=i.data;D.animation=(D.animation||[]).concat(u.data.animation)}}const f=u.features;if(f)for(let v=0;v<f.length;v++){const _=f[v];_&&_.ngInherit&&_(i),_===Ye&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const u=i[l];u.hostVars=s+=u.hostVars,u.hostAttrs=Os(u.hostAttrs,a=Os(a,u.hostAttrs))}}(l)}function I1(i){return i===G?{}:i===$?[]:i}function D3(i,s){const a=i.viewQuery;i.viewQuery=a?(l,u)=>{s(l,u),a(l,u)}:s}function Ql(i,s){const a=i.contentQueries;i.contentQueries=a?(l,u,f)=>{s(l,u,f),a(l,u,f)}:s}function Tg(i,s){const a=i.hostBindings;i.hostBindings=a?(l,u)=>{s(l,u),a(l,u)}:s}let Jl=null;function Q2(){if(!Jl){const i=en.Symbol;if(i&&i.iterator)Jl=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Jl=l)}}}return Jl}function J2(i){return!!nh(i)&&(Array.isArray(i)||!(i instanceof Map)&&Q2()in i)}function nh(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ei(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Xl(i,s,a,l){const u=De();return Ei(u,f1(),s)&&(Et(),bs(Gn(),u,i,s,a,l)),Xl}function t6(i,s,a,l,u,f){const _=function(i,s,a,l){const u=Ei(i,s,a);return Ei(i,s+1,l)||u}(i,at.lFrame.bindingIndex,a,u);return Ir(2),_?s+te(a)+l+te(u)+f:ft}function k3(i,s,a,l,u,f,v,_){const w=De(),A=Et(),D=i+20,R=A.firstCreatePass?function(i,s,a,l,u,f,v,_,w){const A=s.consts,D=_s(s,i,4,v||null,Ps(A,_));_3(s,a,D,Ps(A,w)),ko(s,D);const R=D.tViews=H8(2,D,l,u,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,D),R.queries=s.queries.embeddedTView(D)),D}(D,A,w,s,a,l,u,f,v):A.data[D];Ii(R,!1);const P=w[11].createComment("");s4(A,w,P,R),Tt(P,w),h4(w,w[D]=cg(P,w,P,R)),Eo(R)&&of(A,w,R),null!=v&&l4(w,R,_)}function dr(i,s=Ze.Default){const a=De();return null===a?On(i,s):$1(nn(),a,B(i),s)}function hh(i,s,a){const l=De();return Ei(l,f1(),s)&&Cs(Et(),Gn(),l,i,s,l[11],a,!1),hh}function Vf(i,s,a,l,u){const v=u?"class":"style";$l(i,a,s.inputs[v],v,l)}function Ff(i,s,a,l){const u=De(),f=Et(),v=20+i,_=u[11],w=u[v]=o3(_,s,at.lFrame.currentNamespace),A=f.firstCreatePass?function(i,s,a,l,u,f,v){const _=s.consts,A=_s(s,i,2,u,Ps(_,f));return _3(s,a,A,Ps(_,v)),null!==A.attrs&&I3(A,A.attrs,!1),null!==A.mergedAttrs&&I3(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(v,f,u,0,s,a,l):f.data[v];Ii(A,!0);const D=A.mergedAttrs;null!==D&&ds(_,w,D);const R=A.classes;null!==R&&qd(_,w,R);const P=A.styles;null!==P&&Gd(_,w,P),64!=(64&A.flags)&&s4(f,u,w,A),0===at.lFrame.elementDepthCount&&Tt(w,u),at.lFrame.elementDepthCount++,Eo(A)&&(of(f,u,A),function(i,s,a){if(I2(s)){const u=s.directiveEnd;for(let f=s.directiveStart;f<u;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}(f,A,u)),null!==l&&l4(u,A)}function U3(){let i=nn();D2()?Do():(i=i.parent,Ii(i,!1));const s=i;at.lFrame.elementDepthCount--;const a=Et();a.firstCreatePass&&(ko(a,i),I2(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&Vf(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&Vf(a,s,De(),s.stylesWithoutHost,!1)}function Og(i,s,a,l){Ff(i,s,a,l),U3()}function d6(){return De()}function w4(i){return!!i&&"function"==typeof i.then}function B3(i){return!!i&&"function"==typeof i.subscribe}const fh=B3;function ph(i,s,a,l){const u=De(),f=Et(),v=nn();return function(i,s,a,l,u,f,v,_){const w=Eo(l),D=i.firstCreatePass&&M3(i),R=s[8],P=Z8(s);let j=!0;if(3&l.type||_){const q=Mr(l,s),Pe=_?_(q):q,Ie=P.length,Qe=_?Xe=>_(an(Xe[l.index])):l.index;if(on(a)){let Xe=null;if(!_&&w&&(Xe=function(i,s,a,l){const u=i.cleanup;if(null!=u)for(let f=0;f<u.length-1;f+=2){const v=u[f];if(v===a&&u[f+1]===l){const _=s[7],w=u[f+2];return _.length>w?_[w]:null}"string"==typeof v&&(f+=2)}return null}(i,s,u,l.index)),null!==Xe)(Xe.__ngLastListenerFn__||Xe).__ngNextListenerFn__=f,Xe.__ngLastListenerFn__=f,j=!1;else{f=jf(l,s,R,f,!1);const kt=a.listen(Pe,u,f);P.push(f,kt),D&&D.push(u,Qe,Ie,Ie+1)}}else f=jf(l,s,R,f,!0),Pe.addEventListener(u,f,v),P.push(f),D&&D.push(u,Qe,Ie,v)}else f=jf(l,s,R,f,!1);const Z=l.outputs;let ue;if(j&&null!==Z&&(ue=Z[u])){const q=ue.length;if(q)for(let Pe=0;Pe<q;Pe+=2){const mn=s[ue[Pe]][ue[Pe+1]].subscribe(f),k1=P.length;P.push(f,mn),D&&D.push(u,l.index,k1,-(k1+1))}}}(f,u,u[11],v,i,s,!!a,l),ph}function Bf(i,s,a,l){try{return!1!==a(l)}catch(u){return uf(i,u),!1}}function jf(i,s,a,l,u){return function f(v){if(v===Function)return l;const _=2&i.flags?Gr(i.index,s):s;0==(32&s[2])&&G8(_);let w=Bf(s,0,l,v),A=f.__ngNextListenerFn__;for(;A;)w=Bf(s,0,A,v)&&w,A=A.__ngNextListenerFn__;return u&&!1===w&&(v.preventDefault(),v.returnValue=!1),w}}function Fg(i=1){return function(i){return(at.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,at.lFrame.contextLView))[8]}(i)}function Ib(i,s){let a=null;const l=function(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let u=0;u<s.length;u++){const f=s[u];if("*"!==f){if(null===l?Zd(i,f,!0):Yd(l,f))return u}else a=u}return a}function f6(i){const s=De()[16][6];if(!s.projection){const l=s.projection=v1(i?i.length:1,null),u=l.slice();let f=s.child;for(;null!==f;){const v=i?Ib(f,i):0;null!==v&&(u[v]?u[v].projectionNext=f:l[v]=f,u[v]=f),f=f.next}}}function $f(i,s=0,a){const l=De(),u=Et(),f=_s(u,20+i,16,null,a||null);null===f.projection&&(f.projection=s),Do(),64!=(64&f.flags)&&function(i,s,a){jd(s[11],0,s,a,Im(i,a,s),Sm(a.parent||s[6],a,s))}(u,l,f)}function Bg(i,s,a,l,u){const f=i[a+1],v=null===s;let _=l?io(f):jo(f),w=!1;for(;0!==_&&(!1===w||v);){const D=i[_+1];vh(i[_],s)&&(w=!0,i[_+1]=l?Jd(D):N8(D)),_=l?io(D):jo(D)}w&&(i[a+1]=l?N8(f):Jd(f))}function vh(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Y1(i,s)>=0}function yh(i,s){return function(i,s,a,l){const u=De(),f=Et(),v=Ir(2);f.firstUpdatePass&&function(i,s,a,l){const u=i.data;if(null===u[a+1]){const f=u[Ar()],v=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!v&&(s=!1),s=function(i,s,a,l){const u=function(i){const s=at.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===u)0===(l?s.classBindings:s.styleBindings)&&(a=Xr(a=x1(null,i,s,a,l),s.attrs,l),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==u)if(a=x1(u,i,s,a,l),null===f){let w=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==jo(l))return i[io(l)]}(i,s,l);void 0!==w&&Array.isArray(w)&&(w=x1(null,i,s,w[1],l),w=Xr(w,s.attrs,l),function(i,s,a,l){i[io(a?s.classBindings:s.styleBindings)]=l}(i,s,l,w))}else f=function(i,s,a){let l;const u=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<u;f++)l=Xr(l,i[f].hostAttrs,a);return Xr(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(u,f,s,l),function(i,s,a,l,u,f){let v=f?s.classBindings:s.styleBindings,_=io(v),w=jo(v);i[l]=a;let D,A=!1;if(Array.isArray(a)){const R=a;D=R[1],(null===D||Y1(R,D)>0)&&(A=!0)}else D=a;if(u)if(0!==w){const P=io(i[_+1]);i[l+1]=d3(P,_),0!==P&&(i[P+1]=Fl(i[P+1],l)),i[_+1]=function(i,s){return 131071&i|s<<17}(i[_+1],l)}else i[l+1]=d3(_,0),0!==_&&(i[_+1]=Fl(i[_+1],l)),_=l;else i[l+1]=d3(w,0),0===_?_=l:i[w+1]=Fl(i[w+1],l),w=l;A&&(i[l+1]=N8(i[l+1])),Bg(i,D,l,!0),Bg(i,D,l,!1),function(i,s,a,l,u){const f=u?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Y1(f,s)>=0&&(a[l+1]=Jd(a[l+1]))}(s,D,i,l,f),v=d3(_,w),f?s.classBindings=v:s.styleBindings=v}(u,f,s,a,v,l)}}(f,i,v,l),s!==ft&&Ei(u,v,s)&&function(i,s,a,l,u,f,v,_){if(!(3&s.type))return;const w=i.data,A=w[_+1];e2(function(i){return 1==(1&i)}(A)?A4(w,s,a,u,jo(A),v):void 0)||(e2(f)||function(i){return 2==(2&i)}(A)&&(f=A4(w,null,a,u,_,v)),function(i,s,a,l,u){const f=on(i);if(s)u?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:qi.DashCase;if(null==u)f?i.removeStyle(a,l,v):a.style.removeProperty(l);else{const _="string"==typeof u&&u.endsWith("!important");_&&(u=u.slice(0,-10),v|=qi.Important),f?i.setStyle(a,l,u,v):a.style.setProperty(l,u,_?"important":"")}}}(l,v,u1(Ar(),a),u,f))}(f,f.data[Ar()],u,u[11],i,u[v+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ee(X1(i)))),i}(s,a),l,v)}(i,s,null,!0),yh}function x1(i,s,a,l,u){let f=null;const v=a.directiveEnd;let _=a.directiveStylingLast;for(-1===_?_=a.directiveStart:_++;_<v&&(f=s[_],l=Xr(l,f.hostAttrs,u),f!==i);)_++;return null!==i&&(a.directiveStylingLast=_),l}function Xr(i,s,a){const l=a?1:2;let u=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?u=v:u===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),qr(i,v,!!a||s[++f]))}return void 0===i?null:i}function A4(i,s,a,l,u,f){const v=null===s;let _;for(;u>0;){const w=i[u],A=Array.isArray(w),D=A?w[1]:w,R=null===D;let P=a[u+1];P===ft&&(P=R?$:void 0);let j=R?Yc(P,l):D===l?P:void 0;if(A&&!e2(j)&&(j=Yc(w,l)),e2(j)&&(_=j,v))return _;const Z=i[u+1];u=v?io(Z):jo(Z)}if(null!==s){let w=f?s.residualClasses:s.residualStyles;null!=w&&(_=Yc(w,l))}return _}function e2(i){return void 0!==i}function Jf(i,s=""){const a=De(),l=Et(),u=i+20,f=l.firstCreatePass?_s(l,u,1,s,null):l.data[u],v=a[u]=function(i,s){return on(i)?i.createText(s):i.createTextNode(s)}(a[11],s);s4(l,a,v,f),Ii(f,!1)}function Le(i){return v6("",i,""),Le}function v6(i,s,a){const l=De(),u=function(i,s,a,l){return Ei(i,f1(),a)?s+te(a)+l:ft}(l,i,s,a);return u!==ft&&$o(l,Ar(),u),v6}function qs(i,s,a,l,u){const f=De(),v=t6(f,i,s,a,l,u);return v!==ft&&$o(f,Ar(),v),qs}function G3(i,s,a){const l=De();return Ei(l,f1(),s)&&Cs(Et(),Gn(),l,i,s,l[11],a,!0),G3}const Is=void 0;var sv=["en",[["a","p"],["AM","PM"],Is],[["AM","PM"],Is,Is],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Is,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Is,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Is,"{1} 'at' {0}",Is],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let D1={};function rc(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ic(s);if(a)return a;const l=s.split("-")[0];if(a=ic(l),a)return a;if("en"===l)return sv;throw new Error(`Missing locale data for the locale "${i}".`)}function t2(i){return rc(i)[ct.PluralCase]}function ic(i){return i in D1||(D1[i]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[i]),D1[i]}var ct=(()=>((ct=ct||{})[ct.LocaleId=0]="LocaleId",ct[ct.DayPeriodsFormat=1]="DayPeriodsFormat",ct[ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",ct[ct.DaysFormat=3]="DaysFormat",ct[ct.DaysStandalone=4]="DaysStandalone",ct[ct.MonthsFormat=5]="MonthsFormat",ct[ct.MonthsStandalone=6]="MonthsStandalone",ct[ct.Eras=7]="Eras",ct[ct.FirstDayOfWeek=8]="FirstDayOfWeek",ct[ct.WeekendRange=9]="WeekendRange",ct[ct.DateFormat=10]="DateFormat",ct[ct.TimeFormat=11]="TimeFormat",ct[ct.DateTimeFormat=12]="DateTimeFormat",ct[ct.NumberSymbols=13]="NumberSymbols",ct[ct.NumberFormats=14]="NumberFormats",ct[ct.CurrencyCode=15]="CurrencyCode",ct[ct.CurrencySymbol=16]="CurrencySymbol",ct[ct.CurrencyName=17]="CurrencyName",ct[ct.Currencies=18]="Currencies",ct[ct.Directionality=19]="Directionality",ct[ct.PluralCase=20]="PluralCase",ct[ct.ExtraData=21]="ExtraData",ct))();const bh="en-US";let u7=bh;function Wo(i){wt(i,"Expected localeId to be defined"),"string"==typeof i&&(u7=i.toLowerCase().replace(/_/g,"-"))}function eu(i,s,a,l,u){if(i=B(i),Array.isArray(i))for(let f=0;f<i.length;f++)eu(i[f],s,a,l,u);else{const f=Et(),v=De();let _=d4(i)?i:B(i.provide),w=vg(i);const A=nn(),D=1048575&A.providerIndexes,R=A.directiveStart,P=A.providerIndexes>>20;if(d4(i)||!i.multi){const j=new N2(w,u,dr),Z=x7(_,s,u?D:D+P,R);-1===Z?(p1(Fs(A,v),f,_),S7(f,i,s.length),s.push(_),A.directiveStart++,A.directiveEnd++,u&&(A.providerIndexes+=1048576),a.push(j),v.push(j)):(a[Z]=j,v[Z]=j)}else{const j=x7(_,s,D+P,R),Z=x7(_,s,D,D+P),ue=j>=0&&a[j],q=Z>=0&&a[Z];if(u&&!q||!u&&!ue){p1(Fs(A,v),f,_);const Pe=function(i,s,a,l,u){const f=new N2(i,a,dr);return f.multi=[],f.index=s,f.componentProviders=0,Fh(f,u,l&&!a),f}(u?Hh:D7,a.length,u,l,w);!u&&q&&(a[Z].providerFactory=Pe),S7(f,i,s.length,0),s.push(_),A.directiveStart++,A.directiveEnd++,u&&(A.providerIndexes+=1048576),a.push(Pe),v.push(Pe)}else S7(f,i,j>-1?j:Z,Fh(a[u?Z:j],w,!u&&l));!u&&l&&q&&a[Z].componentProviders++}}}function S7(i,s,a,l){const u=d4(s);if(u||function(i){return!!i.useClass}(s)){const v=(s.useClass||s).prototype.ngOnDestroy;if(v){const _=i.destroyHooks||(i.destroyHooks=[]);if(!u&&s.multi){const w=_.indexOf(a);-1===w?_.push(a,[l,v]):_[w+1].push(l,v)}else _.push(a,v)}}}function Fh(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function x7(i,s,a,l){for(let u=a;u<l;u++)if(s[u]===i)return u;return-1}function D7(i,s,a,l){return tu(this.multi,[])}function Hh(i,s,a,l){const u=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,_=Oo(a,a[1],this.providerFactory.index,l);f=_.slice(0,v),tu(u,f);for(let w=v;w<_.length;w++)f.push(_[w])}else f=[],tu(u,f);return f}function tu(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function S4(i,s=[]){return a=>{a.providersResolver=(l,u)=>function(i,s,a){const l=Et();if(l.firstCreatePass){const u=$r(i);eu(a,l.data,l.blueprint,u,!0),eu(s,l.data,l.blueprint,u,!1)}}(l,u?u(i):i,s)}}class Iv{}const L7="ngComponent";class ew{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${ee(i)}. Did you add it to @NgModule.entryComponents?`);return s[L7]=i,s}(s)}}let oc=(()=>{class i{}return i.NULL=new ew,i})();function Uh(...i){}function S6(i,s){return new Yi(Mr(i,s))}const P7=function(){return S6(nn(),De())};let Yi=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=P7,i})();function r2(i){return i instanceof Yi?i.nativeElement:i}class i2{}let x6=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>tw(),i})();const tw=function(){const i=De(),a=Gr(nn().index,i);return function(i){return i[11]}(ss(a)?a:i)};let iu=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class Bh{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const su=new Bh("12.2.10");class Dv{constructor(){}supports(s){return J2(s)}create(s){return new O7(s)}}const rw=(i,s)=>s;class O7{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||rw}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,u=0,f=null;for(;a||l;){const v=!l||a&&a.currentIndex<V7(l,u,f)?a:l,_=V7(v,u,f),w=v.currentIndex;if(v===l)u--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)u++;else{f||(f=[]);const A=_-u,D=w-u;if(A!=D){for(let P=0;P<A;P++){const j=P<f.length?f[P]:f[P]=0,Z=j+P;D<=Z&&Z<A&&(f[P]=j+1)}f[v.previousIndex]=D-A}}_!==w&&s(v,_,w)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!J2(s))throw new Error(`Error trying to diff '${ee(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let u,f,v,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let _=0;_<this.length;_++)f=s[_],v=this._trackByFn(_,f),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,f,v,_)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,_),l=!0),a=a._next}else u=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Q2()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,_=>{v=this._trackByFn(u,_),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,_,v,u)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,v,u),l=!0),a=a._next,u++}),this.length=u;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,u){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,u)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,u))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,u)):s=this._addAfter(new iw(a,l),f,u),s}_verifyReinsertion(s,a,l,u){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,u):s.currentIndex!=u&&(s.currentIndex=u,this._addToMoves(s,u)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const u=s._prevRemoved,f=s._nextRemoved;return null===u?this._removalsHead=f:u._nextRemoved=f,null===f?this._removalsTail=u:f._prevRemoved=u,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const u=null===a?this._itHead:a._next;return s._next=u,s._prev=a,null===u?this._itTail=s:u._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Rv),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Rv),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class iw{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Lv{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Rv{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Lv,this.map.set(a,l)),l.add(s)}get(s,a){const u=this.map.get(s);return u?u.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function V7(i,s,a){const l=i.previousIndex;if(null===l)return l;let u=0;return a&&l<a.length&&(u=a[l]),l+s+u}class F7{constructor(){}supports(s){return s instanceof Map||nh(s)}create(){return new kv}}class kv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||nh(s)))throw new Error(`Error trying to diff '${ee(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,u)=>{if(a&&a.key===u)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(u,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const u=this._records.get(s);this._maybeAddToChanges(u,a);const f=u._prev,v=u._next;return f&&(f._next=v),v&&(v._prev=f),u._next=null,u._prev=null,u}const l=new Pv(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Pv{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zv(){return new jh([new Dv])}let jh=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const u=l.factories.slice();a=a.concat(u)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||zv()),deps:[[i,new C1,new $i]]}}find(a){const l=this.factories.find(u=>u.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:zv}),i})();function Ov(){return new D6([new F7])}let D6=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const u=l.factories.slice();a=a.concat(u)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Ov()),deps:[[i,new C1,new $i]]}}find(a){const l=this.factories.find(u=>u.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Ov}),i})();function N6(i,s,a,l,u=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(an(f)),Er(f))for(let _=10;_<f.length;_++){const w=f[_],A=w[1].firstChild;null!==A&&N6(w[1],w,A,l)}const v=a.type;if(8&v)N6(i,s,a.child,l);else if(32&v){const _=kd(a,s);let w;for(;w=_();)l.push(w)}else if(16&v){const _=E8(s,a);if(Array.isArray(_))l.push(..._);else{const w=q2(s[16]);N6(w[1],w,_,l,!0)}}a=u?a.projectionNext:a.next}return l}class x4{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return N6(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Er(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(w8(s,l),Si(a,l))}this._attachedToViewContainer=!1}a3(this._lView[1],this._lView)}onDestroy(s){Jm(this._lView[1],this._lView,null,s)}markForCheck(){G8(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){Lo(!0);try{cf(i,s,a)}finally{Lo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Ol(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class ow extends x4{constructor(s){super(s),this._view=s}detectChanges(){W8(this._view)}checkNoChanges(){!function(i){Lo(!0);try{W8(i)}finally{Lo(!1)}}(this._view)}get context(){return null}}const U7=function(i){return function(i,s,a){if(A2(i)&&!a){const l=Gr(i.index,s);return new x4(l,l)}return 47&i.type?new x4(s[16],s):null}(nn(),De(),16==(16&i))};let Vv=(()=>{class i{}return i.__NG_ELEMENT_ID__=U7,i})();const aw=[new F7],cw=new jh([new Dv]),$7=new D6(aw),uw=function(){return ou(nn(),De())};let D4=(()=>{class i{}return i.__NG_ELEMENT_ID__=uw,i})();const G7=D4,q7=class extends G7{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=so(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),Y2(a,l,s),new x4(l)}};function ou(i,s){return 4&i.type?new q7(s,i,S6(i,s)):null}class s2{}class Uv{}const Z7=function(){return qh(nn(),De())};let $h=(()=>{class i{}return i.__NG_ELEMENT_ID__=Z7,i})();const hw=$h,Bv=class extends hw{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return S6(this._hostTNode,this._hostLView)}get injector(){return new Tr(this._hostTNode,this._hostLView)}get parentInjector(){const s=cn(this._hostTNode,this._hostLView);if(En(s)){const a=B1(s,this._hostLView),l=Vs(s);return new Tr(a[1].data[l+8],a)}return new Tr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Gh(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const u=s.createEmbeddedView(a||{});return this.insert(u,l),u}createComponent(s,a,l,u,f){const v=l||this.parentInjector;if(!f&&null==s.ngModule&&v){const w=v.get(s2,null);w&&(f=w)}const _=s.create(v,u,void 0,f);return this.insert(_.hostView,a),_}insert(s,a){const l=s._lView,u=l[1];if(Er(l[3])){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const R=l[3],P=new Bv(R,R[6],R[3]);P.detach(P.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function(i,s,a,l){const u=10+l,f=a.length;l>0&&(a[u-1][4]=s),l<f-10?(s[4]=a[u],Z1(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const _=s[19];null!==_&&_.insertView(i),s[2]|=128}(u,l,v,f);const _=h3(f,v),w=l[11],A=Nr(w,v[7]);return null!==A&&function(i,s,a,l,u,f){l[0]=u,l[6]=s,Ol(i,l,a,1,u,f)}(u,v[6],w,l,A,_),s.attachToViewContainerRef(),Z1(Y7(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Gh(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=w8(this._lContainer,a);l&&(Si(Y7(this._lContainer),a),a3(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=w8(this._lContainer,a);return l&&null!=Si(Y7(this._lContainer),a)?new x4(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Gh(i){return i[8]}function Y7(i){return i[8]||(i[8]=[])}function qh(i,s){let a;const l=s[i.index];if(Er(l))a=l;else{let u;if(8&i.type)u=an(l);else{const f=s[11];u=f.createComment("");const v=Mr(i,s);Ga(f,Nr(f,v),u,function(i,s){return on(i)?i.nextSibling(s):s.nextSibling}(f,v),!1)}s[i.index]=a=cg(l,s,u,i),h4(s,a)}return new Bv(a,i,s)}const z4={};class z6 extends oc{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=sr(s);return new O6(a,this.ngModule)}}function oy(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const O4=new jt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>i4});class O6 extends Iv{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(Qd).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return oy(this.componentDef.inputs)}get outputs(){return oy(this.componentDef.outputs)}create(s,a,l,u){const f=(u=u||this.ngModule)?function(i,s){return{get:(a,l,u)=>{const f=i.get(a,z4,u);return f!==z4||l===z4?f:s.get(a,l,u)}}}(s,u.injector):s,v=f.get(i2,ji),_=f.get(iu,null),w=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",D=l?function(i,s,a){if(on(i))return i.selectRootElement(s,a===He.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(w,l,this.componentDef.encapsulation):o3(v.createRenderer(null,this.componentDef),A,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(A)),R=this.componentDef.onPush?576:528,P=function(i,s){return{components:[],scheduler:i||i4,clean:dg,playerHandler:s||null,flags:0}}(),j=H8(0,null,null,1,0,null,null,null,null,null),Z=so(null,j,P,R,null,null,v,w,_,f);let ue,q;Ma(Z);try{const Pe=function(i,s,a,l,u,f){const v=a[1];a[20]=i;const w=_s(v,20,2,"#host",null),A=w.mergedAttrs=s.hostAttrs;null!==A&&(I3(w,A,!0),null!==i&&(ds(u,i,A),null!==w.classes&&qd(u,i,w.classes),null!==w.styles&&Gd(u,i,w.styles)));const D=l.createRenderer(i,s),R=so(a,Bl(s),null,s.onPush?64:16,a[20],w,l,D,f||null,null);return v.firstCreatePass&&(p1(Fs(w,a),v,s.type),og(v,w),b3(w,a.length,1)),h4(a,R),a[20]=R}(D,this.componentDef,Z,v,w);if(D)if(l)ds(w,D,["ng-version",su.full]);else{const{attrs:Ie,classes:Qe}=function(i){const s=[],a=[];let l=1,u=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===u?""!==f&&s.push(f,i[++l]):8===u&&a.push(f);else{if(!ro(u))break;u=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&ds(w,D,Ie),Qe&&Qe.length>0&&qd(w,D,Qe.join(" "))}if(q=S2(j,20),void 0!==a){const Ie=q.projection=[];for(let Qe=0;Qe<this.ngContentSelectors.length;Qe++){const Xe=a[Qe];Ie.push(null!=Xe?Array.from(Xe):null)}}ue=function(i,s,a,l,u){const f=a[1],v=function(i,s,a){const l=nn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),j8(i,l,s,Wa(i,s,1,null),a));const u=Oo(s,i,l.directiveStart,l);Tt(u,s);const f=Mr(l,s);return f&&Tt(f,s),u}(f,a,s);if(l.components.push(v),i[8]=v,u&&u.forEach(w=>w(v,s)),s.contentQueries){const w=nn();s.contentQueries(1,v,w.directiveStart)}const _=nn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ia(_.index),U8(a[1],_,0,_.directiveStart,_.directiveEnd,s),sg(s,v)),v}(Pe,this.componentDef,Z,P,[v4]),Y2(j,Z,null)}finally{H1()}return new ay(this.componentType,ue,S6(q,Z),Z,q)}}class ay extends class{}{constructor(s,a,l,u,f){super(),this.location=l,this._rootLView=u,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new ow(u),this.componentType=s}get injector(){return new Tr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Qo=new Map;class hy extends s2{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new z6(this);const l=Fi(s),u=s[ut]||null;u&&Wo(u),this._bootstrapComponents=Di(l.bootstrap),this._r3Injector=A3(s,a,[{provide:s2,useValue:this},{provide:oc,useValue:this.componentFactoryResolver}],ee(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=In.THROW_IF_NOT_FOUND,l=Ze.Default){return s===In||s===s2||s===Ya?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class p9 extends Uv{constructor(s){super(),this.moduleType=s,null!==Fi(s)&&function(i){const s=new Set;!function a(l){const u=Fi(l,!0),f=u.id;null!==f&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ee(s)} vs ${ee(s.name)}`)}(f,Qo.get(f),l),Qo.set(f,l));const v=Di(u.imports);for(const _ of v)s.has(_)||(s.add(_),a(_))}(i)}(s)}create(s){return new hy(this.moduleType,s)}}function dy(i,s,a){const l=function(){const i=at.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}()+i,u=De();return u[l]===ft?function(i,s,a){return i[s]=a}(u,l,a?s.call(a):s()):function(i,s){return i[s]}(u,l)}function g9(i){return s=>{setTimeout(i,void 0,s)}}const po=class extends d.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var u,f,v;let _=s,w=a||(()=>null),A=l;if(s&&"object"==typeof s){const R=s;_=null===(u=R.next)||void 0===u?void 0:u.bind(R),w=null===(f=R.error)||void 0===f?void 0:f.bind(R),A=null===(v=R.complete)||void 0===v?void 0:v.bind(R)}this.__isAsync&&(w=g9(w),_&&(_=g9(_)),A&&(A=g9(A)));const D=super.subscribe({next:_,error:w,complete:A});return s instanceof ne.w&&s.add(D),D}};function Zw(){return this._results[Q2()]()}class u2{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Q2(),l=u2.prototype;l[a]||(l[a]=Zw)}get changes(){return this._changes||(this._changes=new po)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const u=fn(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let u=i[l],f=s[l];if(a&&(u=a(u),f=a(f)),f!==u)return!1}return!0}(l._results,u,a))&&(l._results=u,l.length=u.length,l.last=u[this.length-1],l.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class y9{constructor(s){this.queryList=s,this.matches=null}clone(){return new y9(this.queryList)}setDirty(){this.queryList.setDirty()}}class _9{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,u=[];for(let f=0;f<l;f++){const v=a.getByIndex(f);u.push(this.queries[v.indexInDeclarationView].clone())}return new _9(u)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==M9(s,a).matches&&this.queries[a].setDirty()}}class _y{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class C9{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const u=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,u);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new C9(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class b9{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new b9(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let u=0;u<l.length;u++){const f=l[u];this.matchTNodeWithReadOption(s,a,NA(a,f)),this.matchTNodeWithReadOption(s,a,g1(a,s,f,!1,!1))}else l===D4?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,g1(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const u=this.metadata.read;if(null!==u)if(u===Yi||u===$h||u===D4&&4&a.type)this.addMatch(a.index,-2);else{const f=g1(a,s,u,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function NA(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Qw(i,s,a,l){return-1===a?function(i,s){return 11&i.type?S6(i,s):4&i.type?ou(i,s):null}(s,i):-2===a?function(i,s,a){return a===Yi?S6(s,i):a===D4?ou(s,i):a===$h?qh(s,i):void 0}(i,s,l):Oo(i,i[1],a,s)}function h5(i,s,a,l){const u=s[19].queries[l];if(null===u.matches){const f=i.data,v=a.matches,_=[];for(let w=0;w<v.length;w+=2){const A=v[w];_.push(A<0?null:Qw(s,f[A],v[w+1],a.metadata.read))}u.matches=_}return u.matches}function d5(i,s,a,l){const u=i.queries.getByIndex(a),f=u.matches;if(null!==f){const v=h5(i,s,u,a);for(let _=0;_<f.length;_+=2){const w=f[_];if(w>0)l.push(v[_/2]);else{const A=f[_+1],D=s[-w];for(let R=10;R<D.length;R++){const P=D[R];P[17]===P[3]&&d5(P[1],P,A,l)}if(null!==D[9]){const R=D[9];for(let P=0;P<R.length;P++){const j=R[P];d5(j[1],j,A,l)}}}}}return l}function w9(i){const s=De(),a=Et(),l=dl();ba(l+1);const u=M9(a,l);if(i.dirty&&ga(s)===(2==(2&u.metadata.flags))){if(null===u.matches)i.reset([]);else{const f=u.crossesNgTemplate?d5(a,s,l,[]):h5(a,s,u,l);i.reset(f,r2),i.notifyOnChanges()}return!0}return!1}function f5(i,s,a,l){const u=Et();if(u.firstCreatePass){const f=nn();(function(i,s,a){null===i.queries&&(i.queries=new C9),i.queries.track(new b9(s,a))})(u,new _y(s,a,l),f.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(u,i),2==(2&a)&&(u.staticContentQueries=!0)}!function(i,s,a){const l=new u2(4==(4&a));Jm(i,s,l,l.destroy),null===s[19]&&(s[19]=new _9),s[19].queries.push(new y9(l))}(u,De(),a)}function Cy(){return i=De(),s=dl(),i[19].queries[s].queryList;var i,s}function M9(i,s){return i.queries.getByIndex(s)}const L9=new jt("Application Initializer");let G6=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Uh,this.reject=Uh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,u)=>{this.resolve=l,this.reject=u})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const f=this.appInits[u]();if(w4(f))a.push(f);else if(fh(f)){const v=new Promise((_,w)=>{f.subscribe({complete:_,error:w})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(u=>{this.reject(u)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(On(L9,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();const As=new jt("AppId"),Fy={provide:As,useFactory:function(){return`${R9()}${R9()}${R9()}`},deps:[]};function R9(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const k9=new jt("Platform Initializer"),C5=new jt("Platform ID"),Hy=new jt("appBootstrapListener");let Uy=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();const b5=new jt("LocaleId"),q6=new jt("DefaultCurrencyCode");class bE{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const E5=function(i){return new p9(i)},z9=E5,ME=function(i){return Promise.resolve(E5(i))},V9=function(i){const s=E5(i),l=Di(Fi(i).declarations).reduce((u,f)=>{const v=sr(f);return v&&u.push(new O6(v)),u},[]);return new bE(s,l)},IE=V9,Gy=function(i){return Promise.resolve(V9(i))};let B4=(()=>{class i{constructor(){this.compileModuleSync=z9,this.compileModuleAsync=ME,this.compileModuleAndAllComponentsSync=IE,this.compileModuleAndAllComponentsAsync=Gy}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();const xE=(()=>Promise.resolve(0))();function W6(i){"undefined"==typeof Zone?xE.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ts{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new po(!1),this.onMicrotaskEmpty=new po(!1),this.onStable=new po(!1),this.onError=new po(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!l&&a,u.shouldCoalesceRunChangeDetection=l,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){let i=en.requestAnimationFrame,s=en.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(en,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,B9(i),i.isCheckStableRunning=!0,U9(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),B9(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,u,f,v,_)=>{try{return Wy(i),a.invokeTask(u,f,v,_)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Zy(i)}},onInvoke:(a,l,u,f,v,_,w)=>{try{return Wy(i),a.invoke(u,f,v,_,w)}finally{i.shouldCoalesceRunChangeDetection&&s(),Zy(i)}},onHasTask:(a,l,u,f)=>{a.hasTask(u,f),l===u&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,B9(i),U9(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,u,f)=>(a.handleError(u,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(u)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ts.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ts.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,u){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+u,s,H9,Uh,Uh);try{return f.runTask(v,a,l)}finally{f.cancelTask(v)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const H9={};function U9(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function B9(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Wy(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Zy(i){i._nesting--,U9(i)}class DE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new po,this.onMicrotaskEmpty=new po,this.onStable=new po,this.onError=new po}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,u){return s.apply(a,l)}}let Ky=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ts.assertNotInAngularZone(),W6(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())W6(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,u){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:u})}whenStable(a,l,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,u){return[]}}return i.\u0275fac=function(a){return new(a||i)(On(Ts))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),Yy=(()=>{class i{constructor(){this._applications=new Map,j9.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return j9.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();class NE{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function LE(i){j9=i}let j9=new NE,M5=!0,$9=!1;function G9(){return $9=!0,M5}function Qy(){if($9)throw new Error("Cannot enable prod mode after platform setup.");M5=!1}let L1;const W9=new jt("AllowMultipleToken");class Z9{constructor(s,a){this.name=s,this.token=a}}function zE(i,s,a=[]){const l=`Platform: ${s}`,u=new jt(l);return(f=[])=>{let v=Jy();if(!v||v.injector.get(W9,!1))if(i)i(a.concat(f).concat({provide:u,useValue:!0}));else{const _=a.concat(f).concat({provide:u,useValue:!0},{provide:Gl,useValue:"platform"});!function(i){if(L1&&!L1.destroyed&&!L1.injector.get(W9,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");L1=i.get(OE);const s=i.get(k9,null);s&&s.forEach(a=>a())}(In.create({providers:_,name:l}))}return function(i){const s=Jy();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(u)}}function Jy(){return L1&&!L1.destroyed?L1:null}let OE=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const _=function(i,s){let a;return a="noop"===i?new DE:("zone.js"===i?void 0:i)||new Ts({enableLongStackTrace:G9(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),w=[{provide:Ts,useValue:_}];return _.run(()=>{const A=In.create({providers:w,parent:this.injector,name:a.moduleType.name}),D=a.create(A),R=D.injector.get(g,null);if(!R)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return _.runOutsideAngular(()=>{const P=_.onError.subscribe({next:j=>{R.handleError(j)}});D.onDestroy(()=>{Y9(this._modules,D),P.unsubscribe()})}),function(i,s,a){try{const l=a();return w4(l)?l.catch(u=>{throw s.runOutsideAngular(()=>i.handleError(u)),u}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(R,_,()=>{const P=D.injector.get(G6);return P.runInitializers(),P.donePromise.then(()=>(Wo(D.injector.get(b5,bh)||bh),this._moduleDoBootstrap(D),D))})})}bootstrapModule(a,l=[]){const u=HE({},l);return function(i,s,a){const l=new p9(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,u))}_moduleDoBootstrap(a){const l=a.injector.get(A5);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(u=>l.bootstrap(u));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${ee(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(On(In))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();function HE(i,s){return Array.isArray(s)?s.reduce(HE,i):Object.assign(Object.assign({},i),s)}let A5=(()=>{class i{constructor(a,l,u,f,v){this._zone=a,this._injector=l,this._exceptionHandler=u,this._componentFactoryResolver=f,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),w=new O.y(A=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Ts.assertNotInAngularZone(),W6(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Ts.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{D.unsubscribe(),R.unsubscribe()}});this.isStable=(0,pe.T)(_,w.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let u;u=a instanceof Iv?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(u.componentType);const f=function(i){return i.isBoundToModule}(u)?void 0:this._injector.get(s2),_=u.create(In.NULL,[],l||u.selector,f),w=_.location.nativeElement,A=_.injector.get(Ky,null),D=A&&_.injector.get(Yy);return A&&D&&D.registerApplication(w,A),_.onDestroy(()=>{this.detachView(_.hostView),Y9(this.components,_),D&&D.unregisterApplication(w)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Y9(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Hy,[]).concat(this._bootstrapListeners).forEach(u=>u(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(On(Ts),On(In),On(g),On(oc),On(G6))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();function Y9(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class ZA{}class J9{}const X9={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ep=(()=>{class i{constructor(a,l){this._compiler=a,this._config=l||X9}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[l,u]=a.split("#");return void 0===u&&(u="default"),F(8255)(l).then(f=>f[u]).then(f=>S5(f,l,u)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(a){let[l,u]=a.split("#"),f="NgFactory";return void 0===u&&(u="default",f=""),F(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(v=>v[u+f]).then(v=>S5(v,l,u))}}return i.\u0275fac=function(a){return new(a||i)(On(B4),On(J9,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();function S5(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const GE=function(i){return null},WE=zE(null,"core",[{provide:C5,useValue:"unknown"},{provide:OE,deps:[In]},{provide:Yy,deps:[]},{provide:Uy,deps:[]}]),YE=[{provide:A5,useClass:A5,deps:[Ts,In,g,oc,G6]},{provide:O4,deps:[Ts],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:G6,useClass:G6,deps:[[new $i,L9]]},{provide:B4,useClass:B4,deps:[]},Fy,{provide:jh,useFactory:function(){return cw},deps:[]},{provide:D6,useFactory:function(){return $7},deps:[]},{provide:b5,useFactory:function(i){return Wo(i=i||"undefined"!=typeof $localize&&$localize.locale||bh),i},deps:[[new Va(b5),new $i,new C1]]},{provide:q6,useValue:"USD"}];let o_=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(On(A5))},i.\u0275mod=Co({type:i}),i.\u0275inj=It({providers:YE}),i})()},8939:(Ke,Se,F)=>{"use strict";F.d(Se,{hO:()=>ie,xv:()=>W,Dh:()=>ee,GT:()=>J,cc:()=>oe,on:()=>z,pX:()=>re});var d=F(7716),ne=F(7841),O=F(6643);Ke=F.hmd(Ke);const pe=["ngOnDestroy"],re=(te,he,Ce,Ae={})=>new Proxy(te,{get:(Ve,mt)=>Ce.runOutsideAngular(()=>{var bt;if(te[mt])return(null===(bt=null==Ae?void 0:Ae.spy)||void 0===bt?void 0:bt.get)&&Ae.spy.get(mt,te[mt]),te[mt];if(pe.indexOf(mt)>-1)return()=>{};const dt=he.toPromise().then(xe=>{const se=xe&&xe[mt];return"function"==typeof se?se.bind(xe):se&&se.then?se.then(ce=>Ce.run(()=>ce)):Ce.run(()=>se)});return new Proxy(()=>{},{get:(xe,se)=>dt[se],apply:(xe,se,ce)=>dt.then(Me=>{var me;const ze=Me&&Me(...ce);return(null===(me=null==Ae?void 0:Ae.spy)||void 0===me?void 0:me.apply)&&Ae.spy.apply(mt,ce,ze),ze})})})}),J=(te,he)=>{he.forEach(Ce=>{Object.getOwnPropertyNames(Ce.prototype||Ce).forEach(Ae=>{Object.defineProperty(te.prototype,Ae,Object.getOwnPropertyDescriptor(Ce.prototype||Ce,Ae))})})};class be{constructor(he){return he}}const ee=new d.OlP("angularfire2.app.options"),W=new d.OlP("angularfire2.app.name");function z(te,he,Ce){const Ve="object"==typeof Ce&&Ce||{};Ve.name=Ve.name||"string"==typeof Ce&&Ce||"[DEFAULT]";const bt=ne.Z.apps.filter(dt=>dt&&dt.name===Ve.name)[0]||he.runOutsideAngular(()=>ne.Z.initializeApp(te,Ve));try{JSON.stringify(te)!==JSON.stringify(bt.options)&&H("error",`${bt.name} Firebase App already initialized with different options${Ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(dt){}return new be(bt)}const H=(te,...he)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[te](...he)},B={provide:be,useFactory:z,deps:[ee,d.R0b,[new d.FiY,W]]};let ie=(()=>{class te{constructor(Ce){ne.Z.registerVersion("angularfire",O.q4.full,"core"),ne.Z.registerVersion("angularfire",O.q4.full,"app-compat"),ne.Z.registerVersion("angular",d.q4F.full,Ce.toString())}static initializeApp(Ce,Ae){return{ngModule:te,providers:[{provide:ee,useValue:Ce},{provide:W,useValue:Ae}]}}}return te.\u0275fac=function(Ce){return new(Ce||te)(d.LFG(d.Lbi))},te.\u0275mod=d.oAB({type:te}),te.\u0275inj=d.cJS({providers:[B]}),te})();function oe(te,he,Ce,Ae,Ve){const[,mt,bt]=globalThis.\u0275AngularfireInstanceCache.find(dt=>dt[0]===te)||[];if(mt)return function(te,he){try{return te.toString()===he.toString()}catch(Ce){return te===he}}(Ve,bt)||(le("error",`${he} was already initialized on the ${Ce} Firebase App with different settings.${_e?" You may need to reload as Firebase is not HMR aware.":""}`),le("warn",{is:Ve,was:bt})),mt;{const dt=Ae();return globalThis.\u0275AngularfireInstanceCache.push([te,dt,Ve]),dt}}const _e=!!Ke.hot,le=(te,...he)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[te](...he)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:(Ke,Se,F)=>{"use strict";F.d(Se,{q4:()=>D0,iC:()=>Yc,HU:()=>y1,vb:()=>Z1,JM:()=>cr});var d=F(7716),ne=F(2329),O=F(8239),pe=F(5452),re=F(3854),J=F(6034),be=F(5601),ee=F(6676);const W="@firebase/installations",z="0.5.2",B=`w:${z}`,ie="FIS_v2",he=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ce(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Ae({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ve(I){return{token:I.token,requestStatus:2,expiresIn:Me(I.expiresIn),creationTime:Date.now()}}function mt(I,S){return bt.apply(this,arguments)}function bt(){return(bt=(0,O.Z)(function*(I,S){const U=(yield S.json()).error;return he.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function dt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function xe(I,{refreshToken:S}){const L=dt(I);return L.append("Authorization",function(I){return`${ie} ${I}`}(S)),L}function se(I){return ce.apply(this,arguments)}function ce(){return(ce=(0,O.Z)(function*(I){const S=yield I();return S.status>=500&&S.status<600?I():S})).apply(this,arguments)}function Me(I){return Number(I.replace("s","000"))}function ze(I,S){return ge.apply(this,arguments)}function ge(){return(ge=(0,O.Z)(function*(I,{fid:S}){const L=Ae(I),fe={method:"POST",headers:dt(I),body:JSON.stringify({fid:S,authVersion:ie,appId:I.appId,sdkVersion:B})},Ne=yield se(()=>fetch(L,fe));if(Ne.ok){const qe=yield Ne.json();return{fid:qe.fid||S,registrationStatus:2,refreshToken:qe.refreshToken,authToken:Ve(qe.authToken)}}throw yield mt("Create Installation",Ne)})).apply(this,arguments)}function lt(I){return new Promise(S=>{setTimeout(S,I)})}const xn=/^[cdef][\w-]{21}$/;function wt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const L=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return xn.test(L)?L:""}catch(I){return""}}function Jt(I){return`${I.appName}!${I.appId}`}const nr=new Map;function Vr(I,S){const L=Jt(I);It(L,S),function(I,S){const L=(!ir&&"BroadcastChannel"in self&&(ir=new BroadcastChannel("[Firebase] FID Change"),ir.onmessage=I=>{It(I.data.key,I.data.fid)}),ir);L&&L.postMessage({key:I,fid:S}),0===nr.size&&ir&&(ir.close(),ir=null)}(L,S)}function It(I,S){const L=nr.get(I);if(L)for(const U of L)U(S)}let ir=null;const Fr="firebase-installations-store";let zi=null;function Ds(){return zi||(zi=(0,ee.openDb)("firebase-installations-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(Fr)}})),zi}function Ze(I,S){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(I,S){const L=Jt(I),X=(yield Ds()).transaction(Fr,"readwrite"),fe=X.objectStore(Fr),Ne=yield fe.get(L);return yield fe.put(S,L),yield X.complete,(!Ne||Ne.fid!==S.fid)&&Vr(I,S.fid),S})).apply(this,arguments)}function ui(I){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,O.Z)(function*(I){const S=Jt(I),U=(yield Ds()).transaction(Fr,"readwrite");yield U.objectStore(Fr).delete(S),yield U.complete})).apply(this,arguments)}function it(I,S){return et.apply(this,arguments)}function et(){return(et=(0,O.Z)(function*(I,S){const L=Jt(I),X=(yield Ds()).transaction(Fr,"readwrite"),fe=X.objectStore(Fr),Ne=yield fe.get(L),qe=S(Ne);return void 0===qe?yield fe.delete(L):yield fe.put(qe,L),yield X.complete,qe&&(!Ne||Ne.fid!==qe.fid)&&Vr(I,qe.fid),qe})).apply(this,arguments)}function Pt(I){return St.apply(this,arguments)}function St(){return(St=(0,O.Z)(function*(I){let S;const L=yield it(I,U=>{const X=mr(U),fe=Wt(I,X);return S=fe.registrationPromise,fe.installationEntry});return""===L.fid?{installationEntry:yield S}:{installationEntry:L,registrationPromise:S}})).apply(this,arguments)}function mr(I){return en(I||{fid:wt(),registrationStatus:0})}function Wt(I,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(he.create("app-offline"))};const L={fid:S.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:L,registrationPromise:function(I,S){return tt.apply(this,arguments)}(I,L)}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Oi(I)}:{installationEntry:S}}function tt(){return(tt=(0,O.Z)(function*(I,S){try{return Ze(I,yield ze(I,S))}catch(L){throw Ce(L)&&409===L.customData.serverCode?yield ui(I):yield Ze(I,{fid:S.fid,registrationStatus:0}),L}})).apply(this,arguments)}function Oi(I){return rs.apply(this,arguments)}function rs(){return(rs=(0,O.Z)(function*(I){let S=yield Vi(I);for(;1===S.registrationStatus;)yield lt(100),S=yield Vi(I);if(0===S.registrationStatus){const{installationEntry:L,registrationPromise:U}=yield Pt(I);return U||L}return S})).apply(this,arguments)}function Vi(I){return it(I,S=>{if(!S)throw he.create("installation-not-found");return en(S)})}function en(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function _o(I,S){return G.apply(this,arguments)}function G(){return(G=(0,O.Z)(function*({appConfig:I,platformLoggerProvider:S},L){const U=$(I,L),X=xe(I,L),fe=S.getImmediate({optional:!0});fe&&X.append("x-firebase-client",fe.getPlatformInfoString());const qe={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:B}})},$e=yield se(()=>fetch(U,qe));if($e.ok)return Ve(yield $e.json());throw yield mt("Generate Auth Token",$e)})).apply(this,arguments)}function $(I,{fid:S}){return`${Ae(I)}/${S}/authTokens:generate`}function K(I){return Te.apply(this,arguments)}function Te(){return(Te=(0,O.Z)(function*(I,S=!1){let L;const U=yield it(I.appConfig,fe=>{if(!gn(fe))throw he.create("not-registered");const Ne=fe.authToken;if(!S&&Ur(Ne))return fe;if(1===Ne.requestStatus)return L=ae(I,S),fe;{if(!navigator.onLine)throw he.create("app-offline");const qe=Kn(fe);return L=zt(I,qe),qe}});return L?yield L:U.authToken})).apply(this,arguments)}function ae(I,S){return We.apply(this,arguments)}function We(){return(We=(0,O.Z)(function*(I,S){let L=yield ut(I.appConfig);for(;1===L.authToken.requestStatus;)yield lt(100),L=yield ut(I.appConfig);const U=L.authToken;return 0===U.requestStatus?K(I,S):U})).apply(this,arguments)}function ut(I){return it(I,S=>{if(!gn(S))throw he.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function zt(I,S){return tn.apply(this,arguments)}function tn(){return(tn=(0,O.Z)(function*(I,S){try{const L=yield _o(I,S),U=Object.assign(Object.assign({},S),{authToken:L});return yield Ze(I.appConfig,U),L}catch(L){if(!Ce(L)||401!==L.customData.serverCode&&404!==L.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Ze(I.appConfig,U)}else yield ui(I.appConfig);throw L}})).apply(this,arguments)}function gn(I){return void 0!==I&&2===I.registrationStatus}function Ur(I){return 2===I.requestStatus&&!function(I){const S=Date.now();return S<I.creationTime||I.creationTime+I.expiresIn<S+36e5}(I)}function Kn(I){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:S})}function Co(){return(Co=(0,O.Z)(function*(I){const S=I,{installationEntry:L,registrationPromise:U}=yield Pt(S.appConfig);return U?U.catch(console.error):K(S).catch(console.error),L.fid})).apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(I,S=!1){const L=I;return yield E2(L.appConfig),(yield K(L,S)).token})).apply(this,arguments)}function E2(I){return t1.apply(this,arguments)}function t1(){return(t1=(0,O.Z)(function*(I){const{registrationPromise:S}=yield Pt(I);S&&(yield S)})).apply(this,arguments)}function Zt(I){return he.create("missing-app-config-values",{valueName:I})}const jr="installations";(0,pe._registerComponent)(new J.wA(jr,I=>{const S=I.getProvider("app").getImmediate();return{app:S,appConfig:function(I){if(!I||!I.options)throw Zt("App Configuration");if(!I.name)throw Zt("App Name");const S=["projectId","apiKey","appId"];for(const L of S)if(!I.options[L])throw Zt(L);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(S),platformLoggerProvider:(0,pe._getProvider)(S,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,pe._registerComponent)(new J.wA("installations-internal",I=>{const S=I.getProvider("app").getImmediate(),L=(0,pe._getProvider)(S,jr).getImmediate();return{getId:()=>function(I){return Co.apply(this,arguments)}(L),getToken:X=>function(I){return oa.apply(this,arguments)}(L,X)}},"PRIVATE")),(0,pe.registerVersion)(W,z),(0,pe.registerVersion)(W,z,"esm2017");const z1="@firebase/remote-config",Yn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Eo{constructor(S,L,U,X){this.client=S,this.storage=L,this.storageCache=U,this.logger=X}isCachedDataFresh(S,L){if(!L)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-L,X=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var L=this;return(0,O.Z)(function*(){const[U,X]=yield Promise.all([L.storage.getLastSuccessfulFetchTimestampMillis(),L.storage.getLastSuccessfulFetchResponse()]);if(X&&L.isCachedDataFresh(S.cacheMaxAgeMillis,U))return X;S.eTag=X&&X.eTag;const fe=yield L.client.fetch(S),Ne=[L.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===fe.status&&Ne.push(L.storage.setLastSuccessfulFetchResponse(fe)),yield Promise.all(Ne),fe})()}}function $r(I=navigator){return I.languages&&I.languages[0]||I.language}class $n{constructor(S,L,U,X,fe,Ne){this.firebaseInstallations=S,this.sdkVersion=L,this.namespace=U,this.projectId=X,this.apiKey=fe,this.appId=Ne}fetch(S){var L=this;return(0,O.Z)(function*(){const[U,X]=yield Promise.all([L.firebaseInstallations.getId(),L.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${L.projectId}/namespaces/${L.namespace}:fetch?key=${L.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},$e={sdk_version:L.sdkVersion,app_instance_id:U,app_instance_id_token:X,app_id:L.appId,language_code:$r()},Mt={method:"POST",headers:qe,body:JSON.stringify($e)},Qt=fetch(Ne,Mt),zn=new Promise((xi,Wr)=>{S.signal.addEventListener(()=>{const _1=new Error("The operation was aborted.");_1.name="AbortError",Wr(_1)})});let yi;try{yield Promise.race([Qt,zn]),yi=yield Qt}catch(xi){let Wr="fetch-client-network";throw"AbortError"===xi.name&&(Wr="fetch-timeout"),Yn.create(Wr,{originalErrorMessage:xi.message})}let lr=yi.status;const Q1=yi.headers.get("ETag")||void 0;let Pa,za;if(200===yi.status){let xi;try{xi=yield yi.json()}catch(Wr){throw Yn.create("fetch-client-parse",{originalErrorMessage:Wr.message})}Pa=xi.entries,za=xi.state}if("INSTANCE_STATE_UNSPECIFIED"===za?lr=500:"NO_CHANGE"===za?lr=304:("NO_TEMPLATE"===za||"EMPTY_CONFIG"===za)&&(Pa={}),304!==lr&&200!==lr)throw Yn.create("fetch-status",{httpStatus:lr});return{status:lr,eTag:Q1,config:Pa}})()}}class os{constructor(S,L){this.client=S,this.storage=L}fetch(S){var L=this;return(0,O.Z)(function*(){const U=(yield L.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return L.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:L,backoffCount:U}){var X=this;return(0,O.Z)(function*(){yield function(I,S){return new Promise((L,U)=>{const X=Math.max(S-Date.now(),0),fe=setTimeout(L,X);I.addEventListener(()=>{clearTimeout(fe),U(Yn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,L);try{const fe=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),fe}catch(fe){if(!function(I){if(!(I instanceof re.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(fe))throw fe;const Ne={throttleEndTimeMillis:Date.now()+(0,re.$s)(U),backoffCount:U+1};return yield X.storage.setThrottleMetadata(Ne),X.attemptFetch(S,Ne)}})()}}class ju{constructor(S,L,U,X,fe){this.app=S,this._client=L,this._storageCache=U,this._storage=X,this._logger=fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function la(I,S){const L=I.target.error||void 0;return Yn.create(S,{originalErrorMessage:L&&L.message})}const Mo="app_namespace_store";class sl{constructor(S,L,U,X=function(){return new Promise((I,S)=>{try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=U=>{S(la(U,"storage-open"))},L.onsuccess=U=>{I(U.target.result)},L.onupgradeneeded=U=>{const X=U.target.result;switch(U.oldVersion){case 0:X.createObjectStore(Mo,{keyPath:"compositeKey"})}}}catch(L){S(Yn.create("storage-open",{originalErrorMessage:L}))}})}()){this.appId=S,this.appName=L,this.namespace=U,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var L=this;return(0,O.Z)(function*(){const U=yield L.openDbPromise;return new Promise((X,fe)=>{const qe=U.transaction([Mo],"readonly").objectStore(Mo),$e=L.createCompositeKey(S);try{const Mt=qe.get($e);Mt.onerror=Qt=>{fe(la(Qt,"storage-get"))},Mt.onsuccess=Qt=>{const zn=Qt.target.result;X(zn?zn.value:void 0)}}catch(Mt){fe(Yn.create("storage-get",{originalErrorMessage:Mt&&Mt.message}))}})})()}set(S,L){var U=this;return(0,O.Z)(function*(){const X=yield U.openDbPromise;return new Promise((fe,Ne)=>{const $e=X.transaction([Mo],"readwrite").objectStore(Mo),Mt=U.createCompositeKey(S);try{const Qt=$e.put({compositeKey:Mt,value:L});Qt.onerror=zn=>{Ne(la(zn,"storage-set"))},Qt.onsuccess=()=>{fe()}}catch(Qt){Ne(Yn.create("storage-set",{originalErrorMessage:Qt&&Qt.message}))}})})()}delete(S){var L=this;return(0,O.Z)(function*(){const U=yield L.openDbPromise;return new Promise((X,fe)=>{const qe=U.transaction([Mo],"readwrite").objectStore(Mo),$e=L.createCompositeKey(S);try{const Mt=qe.delete($e);Mt.onerror=Qt=>{fe(la(Qt,"storage-delete"))},Mt.onsuccess=()=>{X()}}catch(Mt){fe(Yn.create("storage-delete",{originalErrorMessage:Mt&&Mt.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Io{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,O.Z)(function*(){const L=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),fe=yield L;fe&&(S.lastFetchStatus=fe);const Ne=yield U;Ne&&(S.lastSuccessfulFetchTimestampMillis=Ne);const qe=yield X;qe&&(S.activeConfig=qe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Wu(){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,pe._registerComponent)(new J.wA("remote-config",function(S,{instanceIdentifier:L}){const U=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Yn.create("registration-window");if(!(0,re.hl)())throw Yn.create("indexed-db-unavailable");const{projectId:fe,apiKey:Ne,appId:qe}=U.options;if(!fe)throw Yn.create("registration-project-id");if(!Ne)throw Yn.create("registration-api-key");if(!qe)throw Yn.create("registration-app-id");const $e=new sl(qe,U.name,L=L||"firebase"),Mt=new Io($e),Qt=new be.Yd(z1);Qt.logLevel=be.in.ERROR;const zn=new $n(X,pe.SDK_VERSION,L,fe,Ne,qe),yi=new os(zn,$e),lr=new Eo(yi,$e,Mt,Qt),Q1=new ju(U,lr,Mt,$e,Qt);return function(I){const S=(0,re.m9)(I);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Q1),Q1},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(z1,"0.3.1"),(0,pe.registerVersion)(z1,"0.3.1","esm2017");const as="/firebase-messaging-sw.js",ua="/firebase-cloud-messaging-push-scope",o1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ks="google.c.a.c_id",ol="google.c.a.c_l",Sc="google.c.a.ts",a1="google.c.a.e";var c1=(()=>{return(I=c1||(c1={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",c1;var I})();function Ui(I){const S=new Uint8Array(I);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function al(I){const L=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(L),X=new Uint8Array(U.length);for(let fe=0;fe<U.length;++fe)X[fe]=U.charCodeAt(fe);return X}const So="fcm_token_details_db",cl="fcm_token_object_Store";function Bi(I){return O1.apply(this,arguments)}function O1(){return(O1=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(fe=>fe.name).includes(So))return null;let S=null;return(yield(0,ee.openDb)(So,5,function(){var U=(0,O.Z)(function*(X){var fe;if(X.oldVersion<2||!X.objectStoreNames.contains(cl))return;const Ne=X.transaction.objectStore(cl),qe=yield Ne.index("fcmSenderId").get(I);if(yield Ne.clear(),qe)if(2===X.oldVersion){const $e=qe;if(!$e.auth||!$e.p256dh||!$e.endpoint)return;S={token:$e.fcmToken,createTime:null!==(fe=$e.createTime)&&void 0!==fe?fe:Date.now(),subscriptionOptions:{auth:$e.auth,p256dh:$e.p256dh,endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:"string"==typeof $e.vapidKey?$e.vapidKey:Ui($e.vapidKey)}}}else if(3===X.oldVersion){const $e=qe;S={token:$e.fcmToken,createTime:$e.createTime,subscriptionOptions:{auth:Ui($e.auth),p256dh:Ui($e.p256dh),endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:Ui($e.vapidKey)}}}else if(4===X.oldVersion){const $e=qe;S={token:$e.fcmToken,createTime:$e.createTime,subscriptionOptions:{auth:Ui($e.auth),p256dh:Ui($e.p256dh),endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:Ui($e.vapidKey)}}}});return function(X){return U.apply(this,arguments)}}())).close(),yield(0,ee.deleteDb)(So),yield(0,ee.deleteDb)("fcm_vapid_details_db"),yield(0,ee.deleteDb)("undefined"),ha(S)?S:null})).apply(this,arguments)}function ha(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:S}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const l1="firebase-messaging-store";let fa=null;function on(){return fa||(fa=(0,ee.openDb)("firebase-messaging-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(l1)}})),fa}function pa(I){return ji.apply(this,arguments)}function ji(){return(ji=(0,O.Z)(function*(I){const S=u1(I),U=yield(yield on()).transaction(l1).objectStore(l1).get(S);if(U)return U;{const X=yield Bi(I.appConfig.senderId);if(X)return yield ma(I,X),X}})).apply(this,arguments)}function ma(I,S){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(I,S){const L=u1(I),X=(yield on()).transaction(l1,"readwrite");return yield X.objectStore(l1).put(S,L),yield X.complete,S})).apply(this,arguments)}function xc(I){return T2.apply(this,arguments)}function T2(){return(T2=(0,O.Z)(function*(I){const S=u1(I),U=(yield on()).transaction(l1,"readwrite");yield U.objectStore(l1).delete(S),yield U.complete})).apply(this,arguments)}function u1({appConfig:I}){return I.appId}const Dn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function S2(I,S){return cs.apply(this,arguments)}function cs(){return(cs=(0,O.Z)(function*(I,S){const L=yield xo(I),U=at(S),X={method:"POST",headers:L,body:JSON.stringify(U)};let fe;try{fe=yield(yield fetch(Ps(I.appConfig),X)).json()}catch(Ne){throw Dn.create("token-subscribe-failed",{errorInfo:Ne})}if(fe.error)throw Dn.create("token-subscribe-failed",{errorInfo:fe.error.message});if(!fe.token)throw Dn.create("token-subscribe-no-token");return fe.token})).apply(this,arguments)}function Gr(I,S){return ga.apply(this,arguments)}function ga(){return(ga=(0,O.Z)(function*(I,S){const L=yield xo(I),U=at(S.subscriptionOptions),X={method:"PATCH",headers:L,body:JSON.stringify(U)};let fe;try{fe=yield(yield fetch(`${Ps(I.appConfig)}/${S.token}`,X)).json()}catch(Ne){throw Dn.create("token-update-failed",{errorInfo:Ne})}if(fe.error)throw Dn.create("token-update-failed",{errorInfo:fe.error.message});if(!fe.token)throw Dn.create("token-update-no-token");return fe.token})).apply(this,arguments)}function Dc(I,S){return h1.apply(this,arguments)}function h1(){return(h1=(0,O.Z)(function*(I,S){const U={method:"DELETE",headers:yield xo(I)};try{const fe=yield(yield fetch(`${Ps(I.appConfig)}/${S}`,U)).json();if(fe.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:fe.error.message})}catch(X){throw Dn.create("token-unsubscribe-failed",{errorInfo:X})}})).apply(this,arguments)}function Ps({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function xo(I){return d1.apply(this,arguments)}function d1(){return(d1=(0,O.Z)(function*({appConfig:I,installations:S}){const L=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${L}`})})).apply(this,arguments)}function at({p256dh:I,auth:S,endpoint:L,vapidKey:U}){const X={web:{endpoint:L,auth:S,p256dh:I}};return U!==o1&&(X.web.applicationPubKey=U),X}const x2=6048e5;function _0(I){return va.apply(this,arguments)}function va(){return(va=(0,O.Z)(function*(I){const S=yield Nc(I.swRegistration,I.vapidKey),L={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:S.endpoint,auth:Ui(S.getKey("auth")),p256dh:Ui(S.getKey("p256dh"))},U=yield pa(I.firebaseDependencies);if(U){if(Lc(U.subscriptionOptions,L))return Date.now()>=U.createTime+x2?C0(I,{token:U.token,createTime:Date.now(),subscriptionOptions:L}):U.token;try{yield Dc(I.firebaseDependencies,U.token)}catch(X){console.warn(X)}return De(I.firebaseDependencies,L)}return De(I.firebaseDependencies,L)})).apply(this,arguments)}function ul(I){return ya.apply(this,arguments)}function ya(){return(ya=(0,O.Z)(function*(I){const S=yield pa(I.firebaseDependencies);S&&(yield Dc(I.firebaseDependencies,S.token),yield xc(I.firebaseDependencies));const L=yield I.swRegistration.pushManager.getSubscription();return!L||L.unsubscribe()})).apply(this,arguments)}function C0(I,S){return zs.apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*(I,S){try{const L=yield Gr(I.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:L,createTime:Date.now()});return yield ma(I.firebaseDependencies,U),L}catch(L){throw yield ul(I),L}})).apply(this,arguments)}function De(I,S){return Et.apply(this,arguments)}function Et(){return(Et=(0,O.Z)(function*(I,S){const U={token:yield S2(I,S),createTime:Date.now(),subscriptionOptions:S};return yield ma(I,U),U.token})).apply(this,arguments)}function Nc(I,S){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(I,S){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:al(S)})})).apply(this,arguments)}function Lc(I,S){return S.vapidKey===I.vapidKey&&S.endpoint===I.endpoint&&S.auth===I.auth&&S.p256dh===I.p256dh}function ls(I){const S={from:I.from,collapseKey:I.collapse_key,messageId:I.fcm_message_id};return function(I,S){if(!S.notification)return;I.notification={};const L=S.notification.title;L&&(I.notification.title=L);const U=S.notification.body;U&&(I.notification.body=U);const X=S.notification.image;X&&(I.notification.image=X)}(S,I),function(I,S){!S.data||(I.data=S.data)}(S,I),function(I,S){if(!S.fcmOptions)return;I.fcmOptions={};const L=S.fcmOptions.link;L&&(I.fcmOptions.link=L);const U=S.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(S,I),S}function Ku(I){return"object"==typeof I&&!!I&&ks in I}function hl(I,S){const L=[];for(let U=0;U<I.length;U++)L.push(I.charAt(U)),U<S.length&&L.push(S.charAt(U));return L.join("")}function Lo(I){return Dn.create("missing-app-config-values",{valueName:I})}hl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),hl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Pn{constructor(S,L,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function(I){if(!I||!I.options)throw Lo("App Configuration Object");if(!I.name)throw Lo("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:L}=I;for(const U of S)if(!L[U])throw Lo(U);return{appName:I.name,projectId:L.projectId,apiKey:L.apiKey,appId:L.appId,senderId:L.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:L,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Ai(I){return _a.apply(this,arguments)}function _a(){return(_a=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(as,{scope:ua}),I.swRegistration.update().catch(()=>{})}catch(S){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function f1(I,S){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(I,S){if(!S&&!I.swRegistration&&(yield Ai(I)),S||!I.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");I.swRegistration=S}})).apply(this,arguments)}function Yu(I,S){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(I,S){S?I.vapidKey=S:I.vapidKey||(I.vapidKey=o1)})).apply(this,arguments)}function Ca(){return(Ca=(0,O.Z)(function*(I,S){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield Yu(I,null==S?void 0:S.vapidKey),yield f1(I,null==S?void 0:S.serviceWorkerRegistration),_0(I)})).apply(this,arguments)}function kc(I,S,L){return V1.apply(this,arguments)}function V1(){return(V1=(0,O.Z)(function*(I,S,L){const U=dl(S);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:L[ks],message_name:L[ol],message_time:L[Sc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function dl(I){switch(I){case c1.NOTIFICATION_CLICKED:return"notification_open";case c1.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wa(){return(wa=(0,O.Z)(function*(I,S){const L=S.data;if(!L.isFirebaseMessaging)return;I.onMessageHandler&&L.messageType===c1.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ls(L)):I.onMessageHandler.next(ls(L)));const U=L.data;Ku(U)&&"1"===U[a1]&&(yield kc(I,L.messageType,U))})).apply(this,arguments)}const Ea="@firebase/messaging";function ml(){return H1.apply(this,arguments)}function H1(){return(H1=(0,O.Z)(function*(){return"undefined"!=typeof window&&(0,re.hl)()&&(yield(0,re.eu)())&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,pe._registerComponent)(new J.wA("messaging",I=>{const S=new Pn(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",L=>function(I,S){return wa.apply(this,arguments)}(S,L)),S},"PUBLIC")),(0,pe._registerComponent)(new J.wA("messaging-internal",I=>{const S=I.getProvider("messaging").getImmediate();return{getToken:U=>function(I,S){return Ca.apply(this,arguments)}(S,U)}},"PRIVATE")),(0,pe.registerVersion)(Ea,"0.9.2"),(0,pe.registerVersion)(Ea,"0.9.2","esm2017");const zc="analytics",Oc="firebase_id",Po="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Aa="https://www.googletagmanager.com/gtag/js",qn=new be.Yd("@firebase/analytics");function Vc(I){return Promise.all(I.map(S=>S.catch(L=>L)))}function Fc(I,S){const L=document.createElement("script");L.src=`${Aa}?l=${I}&id=${S}`,L.async=!0,document.head.appendChild(L)}function N2(I,S,L,U,X,fe){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(I,S,L,U,X,fe){const Ne=U[X];try{if(Ne)yield S[Ne];else{const $e=(yield Vc(L)).find(Mt=>Mt.measurementId===X);$e&&(yield S[$e.appId])}}catch(qe){qn.error(qe)}I("config",X,fe)})).apply(this,arguments)}function gl(I,S,L,U,X){return U1.apply(this,arguments)}function U1(){return(U1=(0,O.Z)(function*(I,S,L,U,X){try{let fe=[];if(X&&X.send_to){let Ne=X.send_to;Array.isArray(Ne)||(Ne=[Ne]);const qe=yield Vc(L);for(const $e of Ne){const Mt=qe.find(zn=>zn.measurementId===$e),Qt=Mt&&S[Mt.appId];if(!Qt){fe=[];break}fe.push(Qt)}}0===fe.length&&(fe=Object.values(S)),yield Promise.all(fe),I("event",U,X||{})}catch(fe){qn.error(fe)}})).apply(this,arguments)}function _d(){const I=window.document.getElementsByTagName("script");for(const S of Object.values(I))if(S.src&&S.src.includes(Aa))return S;return null}const hs=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Os=new class{constructor(S={},L=1e3){this.throttleMetadata=S,this.intervalMillis=L}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,L){this.throttleMetadata[S]=L}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function yl(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function En(I){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,O.Z)(function*(I){var S;const{appId:L,apiKey:U}=I,X={method:"GET",headers:yl(U)},fe=Po.replace("{app-id}",L),Ne=yield fetch(fe,X);if(200!==Ne.status&&304!==Ne.status){let qe="";try{const $e=yield Ne.json();(null===(S=$e.error)||void 0===S?void 0:S.message)&&(qe=$e.error.message)}catch($e){}throw hs.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:qe})}return Ne.json()})).apply(this,arguments)}function _l(I){return B1.apply(this,arguments)}function B1(){return(B1=(0,O.Z)(function*(I,S=Os,L){const{appId:U,apiKey:X,measurementId:fe}=I.options;if(!U)throw hs.create("no-app-id");if(!X){if(fe)return{measurementId:fe,appId:U};throw hs.create("no-api-key")}const Ne=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new M0;return setTimeout((0,O.Z)(function*(){qe.abort()}),void 0!==L?L:6e4),Sa({appId:U,apiKey:X,measurementId:fe},Ne,qe,S)})).apply(this,arguments)}function Sa(I,S,L){return zo.apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*(I,{throttleEndTimeMillis:S,backoffCount:L},U,X=Os){const{appId:fe,measurementId:Ne}=I;try{yield Cd(U,S)}catch(qe){if(Ne)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${qe.message}]`),{appId:fe,measurementId:Ne};throw qe}try{const qe=yield En(I);return X.deleteThrottleMetadata(fe),qe}catch(qe){if(!Bc(qe)){if(X.deleteThrottleMetadata(fe),Ne)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${qe.message}]`),{appId:fe,measurementId:Ne};throw qe}const $e=503===Number(qe.customData.httpStatus)?(0,re.$s)(L,X.intervalMillis,30):(0,re.$s)(L,X.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+$e,backoffCount:L+1};return X.setThrottleMetadata(fe,Mt),qn.debug(`Calling attemptFetch again in ${$e} millis`),Sa(I,Mt,U,X)}})).apply(this,arguments)}function Cd(I,S){return new Promise((L,U)=>{const X=Math.max(S-Date.now(),0),fe=setTimeout(L,X);I.addEventListener(()=>{clearTimeout(fe),U(hs.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Bc(I){if(!(I instanceof re.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}class M0{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function jc(){return $c.apply(this,arguments)}function $c(){return($c=(0,O.Z)(function*(){if(!(0,re.hl)())return qn.warn(hs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(I){return qn.warn(hs.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function j1(){return(j1=(0,O.Z)(function*(I,S,L,U,X,fe,Ne){var qe;const $e=_l(I);$e.then(lr=>{L[lr.measurementId]=lr.appId,I.options.measurementId&&lr.measurementId!==I.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${lr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(lr=>qn.error(lr)),S.push($e);const Mt=jc().then(lr=>{if(lr)return U.getId()}),[Qt,zn]=yield Promise.all([$e,Mt]);_d()||Fc(fe,Qt.measurementId),X("js",new Date);const yi=null!==(qe=null==Ne?void 0:Ne.config)&&void 0!==qe?qe:{};return yi.origin="firebase",yi.update=!0,null!=zn&&(yi[Oc]=zn),X("config",Qt.measurementId,yi),Qt.measurementId})).apply(this,arguments)}class yn{constructor(S){this.app=S}_delete(){return delete cn[this.app.options.appId],Promise.resolve()}}let cn={},p1=[];const Je={};let $1,G1,xa="dataLayer",Hs=!1;function Oo(I,S,L){!function(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const S=I.map((U,X)=>`(${X+1}) ${U}`).join(" "),L=hs.create("invalid-analytics-context",{errorInfo:S});qn.warn(L.message)}}();const U=I.options.appId;if(!U)throw hs.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw hs.create("no-api-key");qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=cn[U])throw hs.create("already-exists",{id:U});if(!Hs){!function(I){let S=[];Array.isArray(window[I])?S=window[I]:window[I]=S}(xa);const{wrappedGtag:fe,gtagCore:Ne}=function(I,S,L,U,X){let fe=function(...Ne){window[U].push(arguments)};return window[X]&&"function"==typeof window[X]&&(fe=window[X]),window[X]=function(I,S,L,U){function fe(){return(fe=(0,O.Z)(function*(Ne,qe,$e){try{"event"===Ne?yield gl(I,S,L,qe,$e):"config"===Ne?yield N2(I,S,L,U,qe,$e):I("set",qe)}catch(Mt){qn.error(Mt)}})).apply(this,arguments)}return function(Ne,qe,$e){return fe.apply(this,arguments)}}(fe,I,S,L),{gtagCore:fe,wrappedGtag:window[X]}}(cn,p1,Je,xa,"gtag");G1=fe,$1=Ne,Hs=!0}return cn[U]=function(I,S,L,U,X,fe,Ne){return j1.apply(this,arguments)}(I,p1,Je,S,$1,xa,L),new yn(I)}function L2(){return(L2=(0,O.Z)(function*(I,S,L,U,X){if(X&&X.global)I("event",L,U);else{const fe=yield S;I("event",L,Object.assign(Object.assign({},U),{send_to:fe}))}})).apply(this,arguments)}function ms(){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}const qc="@firebase/analytics";(0,pe._registerComponent)(new J.wA(zc,(S,{options:L})=>Oo(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,pe._registerComponent)(new J.wA("analytics-internal",function(S){try{const L=S.getProvider(zc).getImmediate();return{logEvent:(U,X,fe)=>function(I,S,L,U){I=(0,re.m9)(I),function(I,S,L,U,X){return L2.apply(this,arguments)}(G1,cn[I.app.options.appId],S,L,U).catch(X=>qn.error(X))}(L,U,X,fe)}}catch(L){throw hs.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,pe.registerVersion)(qc,"0.7.2"),(0,pe.registerVersion)(qc,"0.7.2","esm2017");var Wc=F(7771),Xu=F(3637),Zc=F(3342),x0=F(3101),z2=F(309);const D0=new d.GfV("7.1.1"),Vo="__angularfire_symbol__analyticsIsSupported",Kc="__angularfire_symbol__remoteConfigIsSupported",gi="__angularfire_symbol__messagingIsSupported";function cr(I,S,L){if(S){if(1===S.length)return S[0];const fe=S.filter(Ne=>Ne.app===L);if(1===fe.length)return fe[0]}return L.container.getProvider(I).getImmediate({optional:!0})}globalThis[Vo]||(globalThis[Vo]=ms().then(I=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=I)),globalThis[gi]||(globalThis[gi]=ml().then(I=>globalThis.__angularfire_symbol__messagingIsSupportedValue=I)),globalThis[Kc]||(globalThis[Kc]=Wu().then(I=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=I));const Z1=(I,S)=>{const L=S?[S]:(0,ne.C6)(),U=[];return L.forEach(X=>{X.container.getProvider(I).instances.forEach(Ne=>{U.includes(Ne)||U.push(Ne)})}),U};function Si(){}class v1{constructor(S,L=Wc.N){this.zone=S,this.delegate=L}now(){return this.delegate.now()}schedule(S,L,U){const X=this.zone;return this.delegate.schedule(function(Ne){X.runGuarded(()=>{S.apply(this,[Ne])})},L,U)}}class K1{constructor(S){this.zone=S,this.task=null}call(S,L){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Si,{},Si,Si)),L.pipe((0,Zc.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let y1=(()=>{class I{constructor(L){this.ngZone=L,this.outsideAngular=L.runOutsideAngular(()=>new v1(Zone.current)),this.insideAngular=L.run(()=>new v1(Zone.current,Xu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(L){return new(L||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function js(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Yc(I){return js(),function(I){return function(L){return(L=L.lift(new K1(I.ngZone))).pipe((0,x0.R)(I.outsideAngular),(0,z2.QV)(I.insideAngular))}}(js())(I)}},4486:(Ke,Se,F)=>{"use strict";F.d(Se,{Z:()=>we});var d=F(3854),ne=F(6034),O=F(5452),pe=F(5601);class re{constructor(le,te){this._delegate=le,this.firebase=te,(0,O._addComponent)(le,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this._delegate.automaticDataCollectionEnabled=le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(le=>{this._delegate.checkDestroyed(),le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(le,te=O._DEFAULT_ENTRY_NAME){var he;this._delegate.checkDestroyed();const Ce=this._delegate.container.getProvider(le);return!Ce.isInitialized()&&"EXPLICIT"===(null===(he=Ce.getComponent())||void 0===he?void 0:he.instantiationMode)&&Ce.initialize(),Ce.getImmediate({identifier:te})}_removeServiceInstance(le,te=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(le).clearInstance(te)}_addComponent(le){(0,O._addComponent)(this._delegate,le)}_addOrOverwriteComponent(le){(0,O._addOrOverwriteComponent)(this._delegate,le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function W(){const _e=function(_e){const le={},te={__esModule:!0,initializeApp:function(dt,xe={}){const se=O.initializeApp(dt,xe);if((0,d.r3)(le,se.name))return le[se.name];const ce=new _e(se,te);return le[se.name]=ce,ce},app:Ce,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(dt){const xe=dt.name,se=xe.replace("-compat","");if(O._registerComponent(dt)&&"PUBLIC"===dt.type){const ce=(Me=Ce())=>{if("function"!=typeof Me[se])throw be.create("invalid-app-argument",{appName:xe});return Me[se]()};void 0!==dt.serviceProps&&(0,d.ZB)(ce,dt.serviceProps),te[se]=ce,_e.prototype[se]=function(...Me){return this._getService.bind(this,xe).apply(this,dt.multipleInstances?Me:[])}}return"PUBLIC"===dt.type?te[se]:null},removeApp:function(dt){delete le[dt]},useAsService:function(dt,xe){return"serverAuth"===xe?null:xe},modularAPIs:O}};function Ce(dt){if(!(0,d.r3)(le,dt=dt||O._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:dt});return le[dt]}return te.default=te,Object.defineProperty(te,"apps",{get:function(){return Object.keys(le).map(dt=>le[dt])}}),Ce.App=_e,te}(re);return _e.INTERNAL=Object.assign(Object.assign({},_e.INTERNAL),{createFirebaseNamespace:W,extendNamespace:function(te){(0,d.ZB)(_e,te)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),_e}(),H=new pe.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const _e=self.firebase.SDK_VERSION;_e&&_e.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=z;(0,O.registerVersion)("@firebase/app-compat","0.1.5",undefined)},5452:(Ke,Se,F)=>{"use strict";F.r(Se),F.d(Se,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>li,_DEFAULT_ENTRY_NAME:()=>xn,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>nr,_apps:()=>wt,_clearComponents:()=>It,_components:()=>vt,_getProvider:()=>Xt,_registerComponent:()=>Vr,_removeServiceInstance:()=>dn,deleteApp:()=>zi,getApp:()=>xs,getApps:()=>Fr,initializeApp:()=>e1,onLog:()=>kn,registerVersion:()=>Ze,setLogLevel:()=>ui});var d=F(8239),ne=F(6034),O=F(5601),pe=F(3854);class re{constructor(et){this.container=et}getPlatformInfoString(){return this.container.getProviders().map(Pt=>{if(function(it){const et=it.getComponent();return"VERSION"===(null==et?void 0:et.type)}(Pt)){const St=Pt.getImmediate();return`${St.library}/${St.version}`}return null}).filter(Pt=>Pt).join(" ")}}const be="@firebase/app",W=new O.Yd("@firebase/app"),xn="[DEFAULT]",gt={[be]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wt=new Map,vt=new Map;function Jt(it,et){try{it.container.addComponent(et)}catch(Pt){W.debug(`Component ${et.name} failed to register with FirebaseApp ${it.name}`,Pt)}}function nr(it,et){it.container.addOrOverwriteComponent(et)}function Vr(it){const et=it.name;if(vt.has(et))return W.debug(`There were multiple attempts to register component ${et}.`),!1;vt.set(et,it);for(const Pt of wt.values())Jt(Pt,it);return!0}function Xt(it,et){return it.container.getProvider(et)}function dn(it,et,Pt=xn){Xt(it,et).clearInstance(Pt)}function It(){vt.clear()}const ir=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Xs{constructor(et,Pt,St){this._isDeleted=!1,this._options=Object.assign({},et),this._config=Object.assign({},Pt),this._name=Pt.name,this._automaticDataCollectionEnabled=Pt.automaticDataCollectionEnabled,this._container=St,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this.checkDestroyed(),this._automaticDataCollectionEnabled=et}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(et){this._isDeleted=et}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}const li="9.1.3";function e1(it,et={}){"object"!=typeof et&&(et={name:et});const Pt=Object.assign({name:xn,automaticDataCollectionEnabled:!1},et),St=Pt.name;if("string"!=typeof St||!St)throw ir.create("bad-app-name",{appName:String(St)});const mr=wt.get(St);if(mr){if((0,pe.vZ)(it,mr.options)&&(0,pe.vZ)(Pt,mr.config))return mr;throw ir.create("duplicate-app",{appName:St})}const Wt=new ne.H0(St);for(const tt of vt.values())Wt.addComponent(tt);const He=new Xs(it,Pt,Wt);return wt.set(St,He),He}function xs(it=xn){const et=wt.get(it);if(!et)throw ir.create("no-app",{appName:it});return et}function Fr(){return Array.from(wt.values())}function zi(it){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(it){const et=it.name;wt.has(et)&&(wt.delete(et),yield Promise.all(it.container.getProviders().map(Pt=>Pt.delete())),it.isDeleted=!0)})).apply(this,arguments)}function Ze(it,et,Pt){var St;let mr=null!==(St=gt[it])&&void 0!==St?St:it;Pt&&(mr+=`-${Pt}`);const Wt=mr.match(/\s|\//),He=et.match(/\s|\//);if(Wt||He){const tt=[`Unable to register library "${mr}" with version "${et}":`];return Wt&&tt.push(`library name "${mr}" contains illegal characters (whitespace or "/")`),Wt&&He&&tt.push("and"),He&&tt.push(`version name "${et}" contains illegal characters (whitespace or "/")`),void W.warn(tt.join(" "))}Vr(new ne.wA(`${mr}-version`,()=>({library:mr,version:et}),"VERSION"))}function kn(it,et){if(null!==it&&"function"!=typeof it)throw ir.create("invalid-log-argument");(0,O.Am)(it,et)}function ui(it){(0,O.Ub)(it)}Vr(new ne.wA("platform-logger",et=>new re(et),"PRIVATE")),Ze(be,"0.7.4",""),Ze(be,"0.7.4","esm2017"),Ze("fire-js","")},6034:(Ke,Se,F)=>{"use strict";F.d(Se,{wA:()=>O,H0:()=>ee,zt:()=>re});var d=F(4762),ne=F(3854),O=function(){function W(z,H,B){this.name=z,this.instanceFactory=H,this.type=B,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return W.prototype.setInstantiationMode=function(z){return this.instantiationMode=z,this},W.prototype.setMultipleInstances=function(z){return this.multipleInstances=z,this},W.prototype.setServiceProps=function(z){return this.serviceProps=z,this},W.prototype.setInstanceCreatedCallback=function(z){return this.onInstanceCreated=z,this},W}(),pe="[DEFAULT]",re=function(){function W(z,H){this.name=z,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return W.prototype.get=function(z){var H=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(H)){var B=new ne.BH;if(this.instancesDeferred.set(H,B),this.isInitialized(H)||this.shouldAutoInitialize())try{var ie=this.getOrInitializeService({instanceIdentifier:H});ie&&B.resolve(ie)}catch(oe){}}return this.instancesDeferred.get(H).promise},W.prototype.getImmediate=function(z){var H,B=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),ie=null!==(H=null==z?void 0:z.optional)&&void 0!==H&&H;if(!this.isInitialized(B)&&!this.shouldAutoInitialize()){if(ie)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:B})}catch(oe){if(ie)return null;throw oe}},W.prototype.getComponent=function(){return this.component},W.prototype.setComponent=function(z){var H,B;if(z.name!==this.name)throw Error("Mismatching Component "+z.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=z,this.shouldAutoInitialize()){if(function(W){return"EAGER"===W.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:pe})}catch(Ce){}try{for(var ie=(0,d.XA)(this.instancesDeferred.entries()),oe=ie.next();!oe.done;oe=ie.next()){var we=(0,d.CR)(oe.value,2),le=we[1],te=this.normalizeInstanceIdentifier(we[0]);try{var he=this.getOrInitializeService({instanceIdentifier:te});le.resolve(he)}catch(Ce){}}}catch(Ce){H={error:Ce}}finally{try{oe&&!oe.done&&(B=ie.return)&&B.call(ie)}finally{if(H)throw H.error}}}},W.prototype.clearInstance=function(z){void 0===z&&(z=pe),this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)},W.prototype.delete=function(){return(0,d.mG)(this,void 0,void 0,function(){var z;return(0,d.Jh)(this,function(H){switch(H.label){case 0:return z=Array.from(this.instances.values()),[4,Promise.all((0,d.ev)((0,d.ev)([],(0,d.CR)(z.filter(function(B){return"INTERNAL"in B}).map(function(B){return B.INTERNAL.delete()}))),(0,d.CR)(z.filter(function(B){return"_delete"in B}).map(function(B){return B._delete()}))))];case 1:return H.sent(),[2]}})})},W.prototype.isComponentSet=function(){return null!=this.component},W.prototype.isInitialized=function(z){return void 0===z&&(z=pe),this.instances.has(z)},W.prototype.getOptions=function(z){return void 0===z&&(z=pe),this.instancesOptions.get(z)||{}},W.prototype.initialize=function(z){var H,B;void 0===z&&(z={});var ie=z.options,oe=void 0===ie?{}:ie,we=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(we))throw Error(this.name+"("+we+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var _e=this.getOrInitializeService({instanceIdentifier:we,options:oe});try{for(var le=(0,d.XA)(this.instancesDeferred.entries()),te=le.next();!te.done;te=le.next()){var he=(0,d.CR)(te.value,2),Ae=he[1];we===this.normalizeInstanceIdentifier(he[0])&&Ae.resolve(_e)}}catch(mt){H={error:mt}}finally{try{te&&!te.done&&(B=le.return)&&B.call(le)}finally{if(H)throw H.error}}return _e},W.prototype.onInit=function(z,H){var B,ie=this.normalizeInstanceIdentifier(H),oe=null!==(B=this.onInitCallbacks.get(ie))&&void 0!==B?B:new Set;oe.add(z),this.onInitCallbacks.set(ie,oe);var we=this.instances.get(ie);return we&&z(we,ie),function(){oe.delete(z)}},W.prototype.invokeOnInitCallbacks=function(z,H){var B,ie,oe=this.onInitCallbacks.get(H);if(oe)try{for(var we=(0,d.XA)(oe),_e=we.next();!_e.done;_e=we.next()){var le=_e.value;try{le(z,H)}catch(te){}}}catch(te){B={error:te}}finally{try{_e&&!_e.done&&(ie=we.return)&&ie.call(we)}finally{if(B)throw B.error}}},W.prototype.getOrInitializeService=function(z){var H=z.instanceIdentifier,B=z.options,ie=void 0===B?{}:B,oe=this.instances.get(H);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:J(H),options:ie}),this.instances.set(H,oe),this.instancesOptions.set(H,ie),this.invokeOnInitCallbacks(oe,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,oe)}catch(we){}return oe||null},W.prototype.normalizeInstanceIdentifier=function(z){return void 0===z&&(z=pe),this.component?this.component.multipleInstances?z:pe:z},W.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},W}();function J(W){return W===pe?void 0:W}var ee=function(){function W(z){this.name=z,this.providers=new Map}return W.prototype.addComponent=function(z){var H=this.getProvider(z.name);if(H.isComponentSet())throw new Error("Component "+z.name+" has already been registered with "+this.name);H.setComponent(z)},W.prototype.addOrOverwriteComponent=function(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)},W.prototype.getProvider=function(z){if(this.providers.has(z))return this.providers.get(z);var H=new re(z,this);return this.providers.set(z,H),H},W.prototype.getProviders=function(){return Array.from(this.providers.values())},W}()},5601:(Ke,Se,F)=>{"use strict";F.d(Se,{in:()=>ne,Yd:()=>be,Ub:()=>ee,Am:()=>W});const d=[];var ne=(()=>{return(z=ne||(ne={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",ne;var z})();const O={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},pe=ne.INFO,re={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},J=(z,H,...B)=>{if(H<z.logLevel)return;const ie=(new Date).toISOString(),oe=re[H];if(!oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[oe](`[${ie}]  ${z.name}:`,...B)};class be{constructor(H){this.name=H,this._logLevel=pe,this._logHandler=J,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in ne))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...H),this._logHandler(this,ne.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...H),this._logHandler(this,ne.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...H),this._logHandler(this,ne.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...H),this._logHandler(this,ne.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...H),this._logHandler(this,ne.ERROR,...H)}}function ee(z){d.forEach(H=>{H.setLogLevel(z)})}function W(z,H){for(const B of d){let ie=null;H&&H.level&&(ie=O[H.level]),B.userLogHandler=null===z?null:(oe,we,..._e)=>{const le=_e.map(te=>{if(null==te)return null;if("string"==typeof te)return te;if("number"==typeof te||"boolean"==typeof te)return te.toString();if(te instanceof Error)return te.message;try{return JSON.stringify(te)}catch(he){return null}}).filter(te=>te).join(" ");we>=(null!=ie?ie:oe.logLevel)&&z({level:ne[we].toLowerCase(),message:le,args:_e,type:oe.name})}}}},3854:(Ke,Se,F)=>{"use strict";F.d(Se,{BH:()=>ie,LL:()=>ge,ZR:()=>ze,gQ:()=>Fr,zI:()=>ce,hu:()=>ne,g5:()=>O,US:()=>J,tV:()=>W,h$:()=>be,$s:()=>Vi,r3:()=>Xt,Sg:()=>oe,ne:()=>zi,p$:()=>z,vZ:()=>ir,ZB:()=>H,gK:()=>it,pd:()=>xs,m9:()=>_o,z$:()=>we,GJ:()=>Vr,jU:()=>te,ru:()=>he,d:()=>Ae,xb:()=>It,w1:()=>Ve,hl:()=>xe,uI:()=>_e,UG:()=>le,Yr:()=>bt,b$:()=>Ce,G6:()=>dt,Mn:()=>mt,w9:()=>nr,cI:()=>xn,UI:()=>rr,xO:()=>li,zd:()=>e1,DV:()=>dn,ug:()=>Wt,dS:()=>mr,Pz:()=>gt,Dv:()=>Hr,Wj:()=>Pt,lb:()=>St,eu:()=>se});const ne=function(G,$){if(!G)throw O($)},O=function(G){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+G)},pe=function(G){const $=[];let K=0;for(let Te=0;Te<G.length;Te++){let ae=G.charCodeAt(Te);ae<128?$[K++]=ae:ae<2048?($[K++]=ae>>6|192,$[K++]=63&ae|128):55296==(64512&ae)&&Te+1<G.length&&56320==(64512&G.charCodeAt(Te+1))?(ae=65536+((1023&ae)<<10)+(1023&G.charCodeAt(++Te)),$[K++]=ae>>18|240,$[K++]=ae>>12&63|128,$[K++]=ae>>6&63|128,$[K++]=63&ae|128):($[K++]=ae>>12|224,$[K++]=ae>>6&63|128,$[K++]=63&ae|128)}return $},J={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,$){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let ae=0;ae<G.length;ae+=3){const We=G[ae],ut=ae+1<G.length,zt=ut?G[ae+1]:0,tn=ae+2<G.length,gn=tn?G[ae+2]:0;let Kn=(15&zt)<<2|gn>>6,di=63&gn;tn||(di=64,ut||(Kn=64)),Te.push(K[We>>2],K[(3&We)<<4|zt>>4],K[Kn],K[di])}return Te.join("")},encodeString(G,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(G):this.encodeByteArray(pe(G),$)},decodeString(G,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(G):function(G){const $=[];let K=0,Te=0;for(;K<G.length;){const ae=G[K++];if(ae<128)$[Te++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const We=G[K++];$[Te++]=String.fromCharCode((31&ae)<<6|63&We)}else if(ae>239&&ae<365){const tn=((7&ae)<<18|(63&G[K++])<<12|(63&G[K++])<<6|63&G[K++])-65536;$[Te++]=String.fromCharCode(55296+(tn>>10)),$[Te++]=String.fromCharCode(56320+(1023&tn))}else{const We=G[K++],ut=G[K++];$[Te++]=String.fromCharCode((15&ae)<<12|(63&We)<<6|63&ut)}}return $.join("")}(this.decodeStringToByteArray(G,$))},decodeStringToByteArray(G,$){this.init_();const K=$?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let ae=0;ae<G.length;){const We=K[G.charAt(ae++)],zt=ae<G.length?K[G.charAt(ae)]:0;++ae;const gn=ae<G.length?K[G.charAt(ae)]:64;++ae;const Rt=ae<G.length?K[G.charAt(ae)]:64;if(++ae,null==We||null==zt||null==gn||null==Rt)throw Error();Te.push(We<<2|zt>>4),64!==gn&&(Te.push(zt<<4&240|gn>>2),64!==Rt&&Te.push(gn<<6&192|Rt))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},be=function(G){const $=pe(G);return J.encodeByteArray($,!0)},ee=function(G){return be(G).replace(/\./g,"")},W=function(G){try{return J.decodeString(G,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function z(G){return H(void 0,G)}function H(G,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return $}for(const K in $)!$.hasOwnProperty(K)||!B(K)||(G[K]=H(G[K],$[K]));return G}function B(G){return"__proto__"!==G}class ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,K)=>{this.resolve=$,this.reject=K})}wrapCallback($){return(K,Te)=>{K?this.reject(K):this.resolve(Te),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(K):$(K,Te))}}}function oe(G,$){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=$||"demo-project",ae=G.iat||0,We=G.sub||G.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:ae,exp:ae+3600,auth_time:ae,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},G);return[ee(JSON.stringify({alg:"none",type:"JWT"})),ee(JSON.stringify(ut)),""].join(".")}function we(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _e(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function le(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(G){return!1}}function te(){return"object"==typeof self&&self.self===self}function he(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return we().indexOf("Electron/")>=0}function Ve(){const G=we();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function mt(){return we().indexOf("MSAppHost/")>=0}function bt(){return!1}function dt(){return!le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xe(){return"object"==typeof indexedDB}function se(){return new Promise((G,$)=>{try{let K=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(Te);ae.onsuccess=()=>{ae.result.close(),K||self.indexedDB.deleteDatabase(Te),G(!0)},ae.onupgradeneeded=()=>{K=!1},ae.onerror=()=>{var We;$((null===(We=ae.error)||void 0===We?void 0:We.message)||"")}}catch(K){$(K)}})}function ce(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ze extends Error{constructor($,K,Te){super(K),this.code=$,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ge.prototype.create)}}class ge{constructor($,K,Te){this.service=$,this.serviceName=K,this.errors=Te}create($,...K){const Te=K[0]||{},ae=`${this.service}/${$}`,We=this.errors[$],ut=We?function(G,$){return G.replace(qt,(K,Te)=>{const ae=$[Te];return null!=ae?String(ae):`<${Te}?>`})}(We,Te):"Error";return new ze(ae,`${this.serviceName}: ${ut} (${ae}).`,Te)}}const qt=/\{\$([^}]+)}/g;function xn(G){return JSON.parse(G)}function gt(G){return JSON.stringify(G)}const wt=function(G){let $={},K={},Te={},ae="";try{const We=G.split(".");$=xn(W(We[0])||""),K=xn(W(We[1])||""),ae=We[2],Te=K.d||{},delete K.d}catch(We){}return{header:$,claims:K,data:Te,signature:ae}},nr=function(G){const K=wt(G).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},Vr=function(G){const $=wt(G).claims;return"object"==typeof $&&!0===$.admin};function Xt(G,$){return Object.prototype.hasOwnProperty.call(G,$)}function dn(G,$){if(Object.prototype.hasOwnProperty.call(G,$))return G[$]}function It(G){for(const $ in G)if(Object.prototype.hasOwnProperty.call(G,$))return!1;return!0}function rr(G,$,K){const Te={};for(const ae in G)Object.prototype.hasOwnProperty.call(G,ae)&&(Te[ae]=$.call(K,G[ae],ae,G));return Te}function ir(G,$){if(G===$)return!0;const K=Object.keys(G),Te=Object.keys($);for(const ae of K){if(!Te.includes(ae))return!1;const We=G[ae],ut=$[ae];if(Xs(We)&&Xs(ut)){if(!ir(We,ut))return!1}else if(We!==ut)return!1}for(const ae of Te)if(!K.includes(ae))return!1;return!0}function Xs(G){return null!==G&&"object"==typeof G}function li(G){const $=[];for(const[K,Te]of Object.entries(G))Array.isArray(Te)?Te.forEach(ae=>{$.push(encodeURIComponent(K)+"="+encodeURIComponent(ae))}):$.push(encodeURIComponent(K)+"="+encodeURIComponent(Te));return $.length?"&"+$.join("&"):""}function e1(G){const $={};return G.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[ae,We]=Te.split("=");$[decodeURIComponent(ae)]=decodeURIComponent(We)}}),$}function xs(G){const $=G.indexOf("?");if(!$)return"";const K=G.indexOf("#",$);return G.substring($,K>0?K:void 0)}class Fr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,K){K||(K=0);const Te=this.W_;if("string"==typeof $)for(let Rt=0;Rt<16;Rt++)Te[Rt]=$.charCodeAt(K)<<24|$.charCodeAt(K+1)<<16|$.charCodeAt(K+2)<<8|$.charCodeAt(K+3),K+=4;else for(let Rt=0;Rt<16;Rt++)Te[Rt]=$[K]<<24|$[K+1]<<16|$[K+2]<<8|$[K+3],K+=4;for(let Rt=16;Rt<80;Rt++){const Kn=Te[Rt-3]^Te[Rt-8]^Te[Rt-14]^Te[Rt-16];Te[Rt]=4294967295&(Kn<<1|Kn>>>31)}let gn,Ur,ae=this.chain_[0],We=this.chain_[1],ut=this.chain_[2],zt=this.chain_[3],tn=this.chain_[4];for(let Rt=0;Rt<80;Rt++){Rt<40?Rt<20?(gn=zt^We&(ut^zt),Ur=1518500249):(gn=We^ut^zt,Ur=1859775393):Rt<60?(gn=We&ut|zt&(We|ut),Ur=2400959708):(gn=We^ut^zt,Ur=3395469782);const Kn=(ae<<5|ae>>>27)+gn+tn+Ur+Te[Rt]&4294967295;tn=zt,zt=ut,ut=4294967295&(We<<30|We>>>2),We=ae,ae=Kn}this.chain_[0]=this.chain_[0]+ae&4294967295,this.chain_[1]=this.chain_[1]+We&4294967295,this.chain_[2]=this.chain_[2]+ut&4294967295,this.chain_[3]=this.chain_[3]+zt&4294967295,this.chain_[4]=this.chain_[4]+tn&4294967295}update($,K){if(null==$)return;void 0===K&&(K=$.length);const Te=K-this.blockSize;let ae=0;const We=this.buf_;let ut=this.inbuf_;for(;ae<K;){if(0===ut)for(;ae<=Te;)this.compress_($,ae),ae+=this.blockSize;if("string"==typeof $){for(;ae<K;)if(We[ut]=$.charCodeAt(ae),++ut,++ae,ut===this.blockSize){this.compress_(We),ut=0;break}}else for(;ae<K;)if(We[ut]=$[ae],++ut,++ae,ut===this.blockSize){this.compress_(We),ut=0;break}}this.inbuf_=ut,this.total_+=K}digest(){const $=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ae=this.blockSize-1;ae>=56;ae--)this.buf_[ae]=255&K,K/=256;this.compress_(this.buf_);let Te=0;for(let ae=0;ae<5;ae++)for(let We=24;We>=0;We-=8)$[Te]=this.chain_[ae]>>We&255,++Te;return $}}function zi(G,$){const K=new Ds(G,$);return K.subscribe.bind(K)}class Ds{constructor($,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{$(this)}).catch(Te=>{this.error(Te)})}next($){this.forEachObserver(K=>{K.next($)})}error($){this.forEachObserver(K=>{K.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,K,Te){let ae;if(void 0===$&&void 0===K&&void 0===Te)throw new Error("Missing Observer.");ae=function(G,$){if("object"!=typeof G||null===G)return!1;for(const K of["next","error","complete"])if(K in G&&"function"==typeof G[K])return!0;return!1}($)?$:{next:$,error:K,complete:Te},void 0===ae.next&&(ae.next=ui),void 0===ae.error&&(ae.error=ui),void 0===ae.complete&&(ae.complete=ui);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch(ut){}}),this.observers.push(ae),We}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,$)}sendOne($,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{K(this.observers[$])}catch(Te){"undefined"!=typeof console&&console.error&&console.error(Te)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ui(){}const Hr=function(G,$,K,Te){let ae;if(Te<$?ae="at least "+$:Te>K&&(ae=0===K?"none":"no more than "+K),ae)throw new Error(G+" failed: Was called with "+Te+(1===Te?" argument.":" arguments.")+" Expects "+ae+".")};function it(G,$){return`${G} failed: ${$} argument `}function Pt(G,$,K,Te){if((!Te||K)&&"function"!=typeof K)throw new Error(it(G,$)+"must be a valid function.")}function St(G,$,K,Te){if((!Te||K)&&("object"!=typeof K||null===K))throw new Error(it(G,$)+"must be a valid context object.")}const mr=function(G){const $=[];let K=0;for(let Te=0;Te<G.length;Te++){let ae=G.charCodeAt(Te);if(ae>=55296&&ae<=56319){const We=ae-55296;Te++,ne(Te<G.length,"Surrogate pair missing trail surrogate."),ae=65536+(We<<10)+(G.charCodeAt(Te)-56320)}ae<128?$[K++]=ae:ae<2048?($[K++]=ae>>6|192,$[K++]=63&ae|128):ae<65536?($[K++]=ae>>12|224,$[K++]=ae>>6&63|128,$[K++]=63&ae|128):($[K++]=ae>>18|240,$[K++]=ae>>12&63|128,$[K++]=ae>>6&63|128,$[K++]=63&ae|128)}return $},Wt=function(G){let $=0;for(let K=0;K<G.length;K++){const Te=G.charCodeAt(K);Te<128?$++:Te<2048?$+=2:Te>=55296&&Te<=56319?($+=4,K++):$+=3}return $};function Vi(G,$=1e3,K=2){const Te=$*Math.pow(K,G),ae=Math.round(.5*Te*(Math.random()-.5)*2);return Math.min(144e5,Te+ae)}function _o(G){return G&&G._delegate?G._delegate:G}},2329:(Ke,Se,F)=>{"use strict";F.d(Se,{Mq:()=>d.getApp,C6:()=>d.getApps});var d=F(5452);(0,d.registerVersion)("firebase","9.1.3","app")},7841:(Ke,Se,F)=>{"use strict";F.d(Se,{Z:()=>d.Z});var d=F(4486);d.Z.registerVersion("firebase","9.1.3","app-compat")},4671:(Ke,Se,F)=>{"use strict";F.r(Se);var d=F(8239),ne=F(4486),O=F(3854),pe=F(5452),re=F(4762),J=F(5601),be=F(6034);const we=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},_e=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},le=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),he=new J.Yd("@firebase/auth");function Ce(C,...p){he.logLevel<=J.in.ERROR&&he.error(`Auth (${pe.SDK_VERSION}): ${C}`,...p)}function Ae(C,...p){throw dt(C,...p)}function Ve(C,...p){return dt(C,...p)}function mt(C,p,g){const b=Object.assign(Object.assign({},_e()),{[p]:g});return new O.LL("auth","Firebase",b).create(p,{appName:C.name})}function bt(C,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Ae(C,"argument-error"),mt(C,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dt(C,...p){if("string"!=typeof C){const g=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=C.name),C._errorFactory.create(g,...b)}return le.create(C,...p)}function xe(C,p,...g){if(!C)throw dt(p,...g)}function se(C){const p="INTERNAL ASSERTION FAILED: "+C;throw Ce(p),new Error(p)}function ce(C,p){C||se(p)}const Me=new Map;function me(C){ce(C instanceof Function,"Expected a class definition");let p=Me.get(C);return p?(ce(p instanceof C,"Instance stored in cache mismatched with class"),p):(p=new C,Me.set(C,p),p)}function lt(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function qt(){return"http:"===xn()||"https:"===xn()}function xn(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class vt{constructor(p,g){this.shortDelay=p,this.longDelay=g,ce(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(qt()||(0,O.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Jt(C,p){ce(C.emulator,"Emulator should always be set here");const{url:g}=C.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class nr{static initialize(p,g,b){this.fetchImpl=p,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void se("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void se("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void se("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xt=new vt(3e4,6e4);function dn(C,p){return C.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:C.tenantId}):p}function It(C,p,g,b){return rr.apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(C,p,g,b,N={}){return ir(C,N,()=>{let M={},Q={};b&&("GET"===p?Q=b:M={body:JSON.stringify(b)});const ve=(0,O.xO)(Object.assign({key:C.config.apiKey},Q)).slice(1),de=new(nr.headers());return de.set("Content-Type","application/json"),de.set("X-Client-Version",C._getSdkClientVersion()),C.languageCode&&de.set("X-Firebase-Locale",C.languageCode),nr.fetch()(xs(C,C.config.apiHost,g,ve),Object.assign({method:p,headers:de,referrerPolicy:"no-referrer"},M))})})).apply(this,arguments)}function ir(C,p,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,d.Z)(function*(C,p,g){C._canInitEmulator=!1;const b=Object.assign(Object.assign({},Vr),p);try{const N=new Fr(C),M=yield Promise.race([g(),N.promise]);N.clearNetworkTimeout();const Q=yield M.json();if("needConfirmation"in Q)throw zi(C,"account-exists-with-different-credential",Q);if(M.ok&&!("errorMessage"in Q))return Q;{const ve=M.ok?Q.errorMessage:Q.error.message,[de,je]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===de)throw zi(C,"credential-already-in-use",Q);if("EMAIL_EXISTS"===de)throw zi(C,"email-already-in-use",Q);const Oe=b[de]||de.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw mt(C,Oe,je);Ae(C,Oe)}}catch(N){if(N instanceof O.ZR)throw N;Ae(C,"network-request-failed")}})).apply(this,arguments)}function li(C,p,g,b){return e1.apply(this,arguments)}function e1(){return(e1=(0,d.Z)(function*(C,p,g,b,N={}){const M=yield It(C,p,g,b,N);return"mfaPendingCredential"in M&&Ae(C,"multi-factor-auth-required",{serverResponse:M}),M})).apply(this,arguments)}function xs(C,p,g,b){const N=`${p}${g}?${b}`;return C.config.emulator?Jt(C.config,N):`${C.config.apiScheme}://${N}`}class Fr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(Ve(this.auth,"timeout")),Xt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zi(C,p,g){const b={appName:C.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const N=Ve(C,p,b);return N.customData._tokenResponse=g,N}function Ze(){return(Ze=(0,d.Z)(function*(C,p){return It(C,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function kn(C,p){return ui.apply(this,arguments)}function ui(){return(ui=(0,d.Z)(function*(C,p){return It(C,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Hr(C,p){return it.apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(C,p){return It(C,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function et(C){if(C)try{const p=new Date(Number(C));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function mr(){return(mr=(0,d.Z)(function*(C,p=!1){const g=(0,O.m9)(C),b=yield g.getIdToken(p),N=He(b);xe(N&&N.exp&&N.auth_time&&N.iat,g.auth,"internal-error");const M="object"==typeof N.firebase?N.firebase:void 0,Q=null==M?void 0:M.sign_in_provider;return{claims:N,token:b,authTime:et(Wt(N.auth_time)),issuedAtTime:et(Wt(N.iat)),expirationTime:et(Wt(N.exp)),signInProvider:Q||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Wt(C){return 1e3*Number(C)}function He(C){const[p,g,b]=C.split(".");if(void 0===p||void 0===g||void 0===b)return Ce("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,O.tV)(g);return N?JSON.parse(N):(Ce("Failed to decode base64 JWT payload"),null)}catch(N){return Ce("Caught error parsing JWT payload as JSON",N),null}}function Oi(C,p){return rs.apply(this,arguments)}function rs(){return(rs=(0,d.Z)(function*(C,p,g=!1){if(g)return p;try{return yield p}catch(b){throw b instanceof O.ZR&&Vi(b)&&C.auth.currentUser===C&&(yield C.auth.signOut()),b}})).apply(this,arguments)}function Vi({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class en{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const N=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),b)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&p.schedule(!0))}p.schedule()})()}}class hi{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=et(this.lastLoginAt),this.creationTime=et(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _o(C){return G.apply(this,arguments)}function G(){return(G=(0,d.Z)(function*(C){var p;const g=C.auth,b=yield C.getIdToken(),N=yield Oi(C,Hr(g,{idToken:b}));xe(null==N?void 0:N.users.length,g,"internal-error");const M=N.users[0];C._notifyReloadListener(M);const Q=(null===(p=M.providerUserInfo)||void 0===p?void 0:p.length)?ae(M.providerUserInfo):[],ve=Te(C.providerData,Q),Oe=!!C.isAnonymous&&!(C.email&&M.passwordHash||(null==ve?void 0:ve.length)),nt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ve,metadata:new hi(M.createdAt,M.lastLoginAt),isAnonymous:Oe};Object.assign(C,nt)})).apply(this,arguments)}function K(){return(K=(0,d.Z)(function*(C){const p=(0,O.m9)(C);yield _o(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Te(C,p){return[...C.filter(b=>!p.some(N=>N.providerId===b.providerId)),...p]}function ae(C){return C.map(p=>{var{providerId:g}=p,b=(0,re._T)(p,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function ut(){return(ut=(0,d.Z)(function*(C,p){const g=yield ir(C,{},()=>{const b=(0,O.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:N,apiKey:M}=C.config,Q=xs(C,N,"/v1/token",`key=${M}`);return nr.fetch()(Q,{method:"POST",headers:{"X-Client-Version":C._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:b})});return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class zt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){xe(p.idToken,"internal-error"),xe(void 0!==p.idToken,"internal-error"),xe(void 0!==p.refreshToken,"internal-error");const g="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(C){const p=He(C);return xe(p,"internal-error"),xe(void 0!==p.exp,"internal-error"),xe(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var b=this;return(0,d.Z)(function*(){return xe(!b.accessToken||b.refreshToken,p,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var b=this;return(0,d.Z)(function*(){const{accessToken:N,refreshToken:M,expiresIn:Q}=yield function(C,p){return ut.apply(this,arguments)}(p,g);b.updateTokensAndExpiration(N,M,Number(Q))})()}updateTokensAndExpiration(p,g,b){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,g){const{refreshToken:b,accessToken:N,expirationTime:M}=g,Q=new zt;return b&&(xe("string"==typeof b,"internal-error",{appName:p}),Q.refreshToken=b),N&&(xe("string"==typeof N,"internal-error",{appName:p}),Q.accessToken=N),M&&(xe("number"==typeof M,"internal-error",{appName:p}),Q.expirationTime=M),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new zt,this.toJSON())}_performRefresh(){return se("not implemented")}}function tn(C,p){xe("string"==typeof C||void 0===C,"internal-error",{appName:p})}class gn{constructor(p){var{uid:g,auth:b,stsTokenManager:N}=p,M=(0,re._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new en(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.metadata=new hi(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,d.Z)(function*(){const b=yield Oi(g,g.stsTokenManager.getToken(g.auth,p));return xe(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(p){return function(C){return mr.apply(this,arguments)}(this,p)}reload(){return function(C){return K.apply(this,arguments)}(this)}_assign(p){this!==p&&(xe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new gn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var b=this;return(0,d.Z)(function*(){let N=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),N=!0),g&&(yield _o(b)),yield b.auth._persistUserIfCurrent(b),N&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,d.Z)(function*(){const g=yield p.getIdToken();return yield Oi(p,function(C,p){return Ze.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var b,N,M,Q,ve,de,je,Oe;const nt=null!==(b=g.displayName)&&void 0!==b?b:void 0,Wn=null!==(N=g.email)&&void 0!==N?N:void 0,Kr=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,n3=null!==(Q=g.photoURL)&&void 0!==Q?Q:void 0,i4=null!==(ve=g.tenantId)&&void 0!==ve?ve:void 0,r3=null!==(de=g._redirectEventId)&&void 0!==de?de:void 0,y8=null!==(je=g.createdAt)&&void 0!==je?je:void 0,_8=null!==(Oe=g.lastLoginAt)&&void 0!==Oe?Oe:void 0,{uid:Mn,emailVerified:Di,isAnonymous:Dr,providerData:no,stsTokenManager:i3}=g;xe(Mn&&i3,p,"internal-error");const _m=zt.fromJSON(this.name,i3);xe("string"==typeof Mn,p,"internal-error"),tn(nt,p.name),tn(Wn,p.name),xe("boolean"==typeof Di,p,"internal-error"),xe("boolean"==typeof Dr,p,"internal-error"),tn(Kr,p.name),tn(n3,p.name),tn(i4,p.name),tn(r3,p.name),tn(y8,p.name),tn(_8,p.name);const qi=new gn({uid:Mn,auth:p,email:Wn,emailVerified:Di,displayName:nt,isAnonymous:Dr,photoURL:n3,phoneNumber:Kr,tenantId:i4,stsTokenManager:_m,createdAt:y8,lastLoginAt:_8});return no&&Array.isArray(no)&&(qi.providerData=no.map(Rl=>Object.assign({},Rl))),r3&&(qi._redirectEventId=r3),qi}static _fromIdTokenResponse(p,g,b=!1){return(0,d.Z)(function*(){const N=new zt;N.updateFromServerResponse(g);const M=new gn({uid:g.localId,auth:p,stsTokenManager:N,isAnonymous:b});return yield _o(M),M})()}}const Rt=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,b){var N=this;return(0,d.Z)(function*(){N.storage[g]=b})()}_get(g){var b=this;return(0,d.Z)(function*(){const N=b.storage[g];return void 0===N?null:N})()}_remove(g){var b=this;return(0,d.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return C.type="NONE",C})();function Kn(C,p,g){return`firebase:${C}:${p}:${g}`}class di{constructor(p,g,b){this.persistence=p,this.auth=g,this.userKey=b;const{config:N,name:M}=this.auth;this.fullUserKey=Kn(this.userKey,N.apiKey,M),this.fullPersistenceKey=Kn("persistence",N.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?gn._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,d.Z)(function*(){if(g.persistence===p)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,b="authUser"){return(0,d.Z)(function*(){if(!g.length)return new di(me(Rt),p,b);const N=(yield Promise.all(g.map(function(){var je=(0,d.Z)(function*(Oe){if(yield Oe._isAvailable())return Oe});return function(Oe){return je.apply(this,arguments)}}()))).filter(je=>je);let M=N[0]||me(Rt);const Q=Kn(b,p.config.apiKey,p.name);let ve=null;for(const je of g)try{const Oe=yield je._get(Q);if(Oe){const nt=gn._fromJSON(p,Oe);je!==M&&(ve=nt),M=je;break}}catch(Oe){}const de=N.filter(je=>je._shouldAllowMigration);return M._shouldAllowMigration&&de.length?(M=de[0],ve&&(yield M._set(Q,ve.toJSON())),yield Promise.all(g.map(function(){var je=(0,d.Z)(function*(Oe){if(Oe!==M)try{yield Oe._remove(Q)}catch(nt){}});return function(Oe){return je.apply(this,arguments)}}())),new di(M,p,b)):new di(M,p,b)})()}}function sa(C){const p=C.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(E2(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Co(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(sr(p))return"Blackberry";if(Br(p))return"Webos";if(w2(p))return"Safari";if((p.includes("chrome/")||oa(p))&&!p.includes("edge/"))return"Chrome";if(t1(p))return"Android";{const b=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Co(C=(0,O.z$)()){return/firefox\//i.test(C)}function w2(C=(0,O.z$)()){const p=C.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function oa(C=(0,O.z$)()){return/crios\//i.test(C)}function E2(C=(0,O.z$)()){return/iemobile/i.test(C)}function t1(C=(0,O.z$)()){return/android/i.test(C)}function sr(C=(0,O.z$)()){return/blackberry/i.test(C)}function Br(C=(0,O.z$)()){return/webos/i.test(C)}function gr(C=(0,O.z$)()){return/iphone|ipad|ipod/i.test(C)}function Ue(C=(0,O.z$)()){return gr(C)||t1(C)||Br(C)||sr(C)||/windows phone/i.test(C)||E2(C)}function Zt(C,p=[]){let g;switch(C){case"Browser":g=sa((0,O.z$)());break;case"Worker":g=`${sa((0,O.z$)())}-${C}`;break;default:g=C}const b=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${pe.SDK_VERSION}/${b}`}class jr{constructor(p,g){this.app=p,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jn(this),this.idTokenSubscription=new jn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(p,g){var b=this;return g&&(this._popupRedirectResolver=me(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var N;b._deleted||(b.persistenceManager=yield di.create(b,p),!b._deleted&&((null===(N=b._popupRedirectResolver)||void 0===N?void 0:N._shouldInitProactively)&&(yield b._popupRedirectResolver._initialize(b)),yield b.initializeCurrentUser(g),!b._deleted&&(b._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g)}})()}initializeCurrentUser(p){var g=this;return(0,d.Z)(function*(){var b;let N=yield g.assertedPersistence.getCurrentUser();if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const M=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,Q=null==N?void 0:N._redirectEventId,ve=yield g.tryRedirectSignIn(p);(!M||M===Q)&&(null==ve?void 0:ve.user)&&(N=ve.user)}return N?N._redirectEventId?(xe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)):g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var g=this;return(0,d.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch(N){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,d.Z)(function*(){try{yield _o(p)}catch(b){if("auth/network-request-failed"!==b.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,d.Z)(function*(){const b=p?(0,O.m9)(p):null;return b&&xe(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(p){var g=this;return(0,d.Z)(function*(){if(!g._deleted)return p&&xe(g.tenantId===p.tenantId,g,"tenant-id-mismatch"),g.queue((0,d.Z)(function*(){yield g.directlySetCurrentUser(p),g.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(me(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new O.LL("auth","Firebase",p())}onAuthStateChanged(p,g,b){return this.registerStateListener(this.authStateSubscription,p,g,b)}onIdTokenChanged(p,g,b){return this.registerStateListener(this.idTokenSubscription,p,g,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var b=this;return(0,d.Z)(function*(){const N=yield b.getOrInitRedirectPersistenceManager(g);return null===p?N.removeCurrentUser():N.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const b=p&&me(p)||g._popupRedirectResolver;xe(b,g,"argument-error"),g.redirectPersistenceManager=yield di.create(g,[me(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,d.Z)(function*(){var b,N;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===p?g._currentUser:(null===(N=g.redirectUser)||void 0===N?void 0:N._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,d.Z)(function*(){if(p===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,b,N){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return xe(Q,this,"internal-error"),Q.then(()=>M(this.currentUser)),"function"==typeof g?p.addObserver(g,b,N):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==p&&(g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh()),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Zt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function vn(C){return(0,O.m9)(C)}class jn{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wn(C){const p=C.indexOf(":");return p<0?"":C.substr(0,p+1)}function n1(C){if(!C)return null;const p=Number(C);return isNaN(p)?null:p}class pi{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return se("not implemented")}_getIdTokenResponse(p){return se("not implemented")}_linkToIdToken(p,g){return se("not implemented")}_getReauthenticationResolver(p){return se("not implemented")}}function r1(C,p){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(C,p){return It(C,"POST","/v1/accounts:resetPassword",dn(C,p))})).apply(this,arguments)}function bo(C,p){return or.apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(C,p){return It(C,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function aa(C,p){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,d.Z)(function*(C,p){return It(C,"POST","/v1/accounts:update",dn(C,p))})).apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(C,p){return li(C,"POST","/v1/accounts:signInWithPassword",dn(C,p))})).apply(this,arguments)}function M2(C,p){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,d.Z)(function*(C,p){return It(C,"POST","/v1/accounts:sendOobCode",dn(C,p))})).apply(this,arguments)}function Rs(C,p){return ca.apply(this,arguments)}function ca(){return(ca=(0,d.Z)(function*(C,p){return M2(C,p)})).apply(this,arguments)}function wo(C,p){return is.apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(C,p){return M2(C,p)})).apply(this,arguments)}function s1(C,p){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(C,p){return M2(C,p)})).apply(this,arguments)}function Uu(C,p){return ss.apply(this,arguments)}function ss(){return(ss=(0,d.Z)(function*(C,p){return M2(C,p)})).apply(this,arguments)}function I2(){return(I2=(0,d.Z)(function*(C,p){return li(C,"POST","/v1/accounts:signInWithEmailLink",dn(C,p))})).apply(this,arguments)}function Eo(){return(Eo=(0,d.Z)(function*(C,p){return li(C,"POST","/v1/accounts:signInWithEmailLink",dn(C,p))})).apply(this,arguments)}class $r extends pi{constructor(p,g,b,N=null){super("password",b),this._email=p,this._password=g,this._tenantId=N}static _fromEmailAndPassword(p,g){return new $r(p,g,"password")}static _fromEmailAndCode(p,g,b=null){return new $r(p,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,d.Z)(function*(){switch(g.signInMethod){case"password":return function(C,p){return Ft.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(C,p){return I2.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Ae(p,"internal-error")}})()}_linkToIdToken(p,g){var b=this;return(0,d.Z)(function*(){switch(b.signInMethod){case"password":return bo(p,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(C,p){return Eo.apply(this,arguments)}(p,{idToken:g,email:b._email,oobCode:b._password});default:Ae(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function $n(C,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(C,p){return li(C,"POST","/v1/accounts:signInWithIdp",dn(C,p))})).apply(this,arguments)}class os extends pi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new os(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Ae("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:N}=g,M=(0,re._T)(g,["providerId","signInMethod"]);if(!b||!N)return null;const Q=new os(b,N);return Q.idToken=M.idToken||void 0,Q.accessToken=M.accessToken||void 0,Q.secret=M.secret,Q.nonce=M.nonce,Q.pendingToken=M.pendingToken||null,Q}_getIdTokenResponse(p){return $n(p,this.buildRequest())}_linkToIdToken(p,g){const b=this.buildRequest();return b.idToken=g,$n(p,b)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,$n(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,O.xO)(g)}return p}}function Bu(C,p){return rl.apply(this,arguments)}function rl(){return(rl=(0,d.Z)(function*(C,p){return It(C,"POST","/v1/accounts:sendVerificationCode",dn(C,p))})).apply(this,arguments)}function la(){return(la=(0,d.Z)(function*(C,p){return li(C,"POST","/v1/accounts:signInWithPhoneNumber",dn(C,p))})).apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(C,p){const g=yield li(C,"POST","/v1/accounts:signInWithPhoneNumber",dn(C,p));if(g.temporaryProof)throw zi(C,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const $u={USER_NOT_FOUND:"user-not-found"};function sl(){return(sl=(0,d.Z)(function*(C,p){return li(C,"POST","/v1/accounts:signInWithPhoneNumber",dn(C,Object.assign(Object.assign({},p),{operation:"REAUTH"})),$u)})).apply(this,arguments)}class Io extends pi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Io({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Io({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function(C,p){return la.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function(C,p){return il.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(C,p){return sl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:b,verificationCode:N}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:b,code:N}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:b,phoneNumber:N,temporaryProof:M}=p;return b||g||N||M?new Io({verificationId:g,verificationCode:b,phoneNumber:N,temporaryProof:M}):null}}class Ao{constructor(p){var g,b,N,M,Q,ve;const de=(0,O.zd)((0,O.pd)(p)),je=null!==(g=de.apiKey)&&void 0!==g?g:null,Oe=null!==(b=de.oobCode)&&void 0!==b?b:null,nt=function(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=de.mode)&&void 0!==N?N:null);xe(je&&Oe&&nt,"argument-error"),this.apiKey=je,this.operation=nt,this.code=Oe,this.continueUrl=null!==(M=de.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(Q=de.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(ve=de.tenantId)&&void 0!==ve?ve:null}static parseLink(p){const g=function(C){const p=(0,O.zd)((0,O.pd)(C)).link,g=p?(0,O.zd)((0,O.pd)(p)).deep_link_id:null,b=(0,O.zd)((0,O.pd)(C)).deep_link_id;return(b?(0,O.zd)((0,O.pd)(b)).link:null)||b||g||p||C}(p);try{return new Ao(g)}catch(b){return null}}}let To=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(g,b){return $r._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const N=Ao.parseLink(b);return xe(N,"argument-error"),$r._fromEmailAndCode(g,N.code,N.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class as{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ua extends as{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class o1 extends ua{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return xe("providerId"in g&&"signInMethod"in g,"argument-error"),os._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return xe(p.idToken||p.accessToken,"argument-error"),os._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return o1.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return o1.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:N,pendingToken:M,nonce:Q,providerId:ve}=p;if(!b&&!N&&!g&&!M||!ve)return null;try{return new o1(ve)._credential({idToken:g,accessToken:b,nonce:Q,pendingToken:M})}catch(de){return null}}}let Tc=(()=>{class C extends ua{constructor(){super("facebook.com")}static credential(g){return os._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return C.credentialFromTaggedObject(g)}static credentialFromError(g){return C.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return C.credential(g.oauthAccessToken)}catch(b){return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),ks=(()=>{class C extends ua{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return os._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return C.credentialFromTaggedObject(g)}static credentialFromError(g){return C.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:N}=g;if(!b&&!N)return null;try{return C.credential(b,N)}catch(M){return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),ol=(()=>{class C extends ua{constructor(){super("github.com")}static credential(g){return os._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return C.credentialFromTaggedObject(g)}static credentialFromError(g){return C.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return C.credential(g.oauthAccessToken)}catch(b){return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class a1 extends pi{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return $n(p,this.buildRequest())}_linkToIdToken(p,g){const b=this.buildRequest();return b.idToken=g,$n(p,b)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,$n(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:N,pendingToken:M}=g;return b&&N&&M&&b===N?new a1(b,M):null}static _create(p,g){return new a1(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Ui=(()=>{class C extends ua{constructor(){super("twitter.com")}static credential(g,b){return os._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return C.credentialFromTaggedObject(g)}static credentialFromError(g){return C.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:N}=g;if(!b||!N)return null;try{return C.credential(b,N)}catch(M){return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function al(C,p){return So.apply(this,arguments)}function So(){return(So=(0,d.Z)(function*(C,p){return li(C,"POST","/v1/accounts:signUp",dn(C,p))})).apply(this,arguments)}class mi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,b,N=!1){return(0,d.Z)(function*(){const M=yield gn._fromIdTokenResponse(p,b,N),Q=cl(b);return new mi({user:M,providerId:Q,_tokenResponse:b,operationType:g})})()}static _forOperation(p,g,b){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const N=cl(b);return new mi({user:p,providerId:N,_tokenResponse:b,operationType:g})})()}}function cl(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function O1(){return(O1=(0,d.Z)(function*(C){var p;const g=vn(C);if(yield g._initializationPromise,null===(p=g.currentUser)||void 0===p?void 0:p.isAnonymous)return new mi({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield al(g,{returnSecureToken:!0}),N=yield mi._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(N.user),N})).apply(this,arguments)}class ha extends O.ZR{constructor(p,g,b,N){var M;super(g.code,g.message),this.operationType=b,this.user=N,this.name="FirebaseError",Object.setPrototypeOf(this,ha.prototype),this.appName=p.name,this.code=g.code,this.tenantId=null!==(M=p.tenantId)&&void 0!==M?M:void 0,this.serverResponse=g.customData.serverResponse}static _fromErrorAndOperation(p,g,b,N){return new ha(p,g,b,N)}}function da(C,p,g,b){return("reauthenticate"===p?g._getReauthenticationResolver(C):g._getIdTokenResponse(C)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ha._fromErrorAndOperation(C,M,p,b):M})}function ll(C){return new Set(C.map(({providerId:p})=>p).filter(p=>!!p))}function fa(){return(fa=(0,d.Z)(function*(C,p){const g=(0,O.m9)(C);yield ji(!0,g,p);const{providerUserInfo:b}=yield kn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),N=ll(b||[]);return g.providerData=g.providerData.filter(M=>N.has(M.providerId)),N.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function on(C,p){return pa.apply(this,arguments)}function pa(){return(pa=(0,d.Z)(function*(C,p,g=!1){const b=yield Oi(C,p._linkToIdToken(C.auth,yield C.getIdToken()),g);return mi._forOperation(C,"link",b)})).apply(this,arguments)}function ji(C,p,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(C,p,g){yield _o(p);const N=!1===C?"provider-already-linked":"no-such-provider";xe(ll(p.providerData).has(g)===C,p.auth,N)})).apply(this,arguments)}function an(C,p){return xc.apply(this,arguments)}function xc(){return(xc=(0,d.Z)(function*(C,p,g=!1){const{auth:b}=C,N="reauthenticate";try{const M=yield Oi(C,da(b,N,p,C),g);xe(M.idToken,b,"internal-error");const Q=He(M.idToken);xe(Q,b,"internal-error");const{sub:ve}=Q;return xe(C.uid===ve,b,"user-mismatch"),mi._forOperation(C,N,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Ae(b,"user-mismatch"),M}})).apply(this,arguments)}function T2(C,p){return u1.apply(this,arguments)}function u1(){return(u1=(0,d.Z)(function*(C,p,g=!1){const b="signIn",N=yield da(C,b,p),M=yield mi._fromIdTokenResponse(C,b,N);return g||(yield C._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Mr(C,p){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(C,p){return T2(vn(C),p)})).apply(this,arguments)}function S2(C,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(C,p){const g=(0,O.m9)(C);return yield ji(!1,g,p.providerId),on(g,p)})).apply(this,arguments)}function Gr(C,p){return ga.apply(this,arguments)}function ga(){return(ga=(0,d.Z)(function*(C,p){return an((0,O.m9)(C),p)})).apply(this,arguments)}function Dc(C,p){return h1.apply(this,arguments)}function h1(){return(h1=(0,d.Z)(function*(C,p){return li(C,"POST","/v1/accounts:signInWithCustomToken",dn(C,p))})).apply(this,arguments)}function xo(){return(xo=(0,d.Z)(function*(C,p){const g=vn(C),b=yield Dc(g,{token:p,returnSecureToken:!0}),N=yield mi._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(N.user),N})).apply(this,arguments)}class d1{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?at._fromServerResponse(p,g):Ae(p,"internal-error")}}class at extends d1{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new at(g)}}function x2(C,p,g){var b;xe((null===(b=g.url)||void 0===b?void 0:b.length)>0,C,"invalid-continue-uri"),xe(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(xe(g.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(xe(g.android.packageName.length>0,C,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function va(){return(va=(0,d.Z)(function*(C,p,g){const b=(0,O.m9)(C),N={requestType:"PASSWORD_RESET",email:p};g&&x2(b,N,g),yield wo(b,N)})).apply(this,arguments)}function ya(){return(ya=(0,d.Z)(function*(C,p,g){yield r1((0,O.m9)(C),{oobCode:p,newPassword:g})})).apply(this,arguments)}function zs(){return(zs=(0,d.Z)(function*(C,p){yield aa((0,O.m9)(C),{oobCode:p})})).apply(this,arguments)}function De(C,p){return Et.apply(this,arguments)}function Et(){return(Et=(0,d.Z)(function*(C,p){const g=(0,O.m9)(C),b=yield r1(g,{oobCode:p}),N=b.requestType;switch(xe(N,g,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":xe(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":xe(b.mfaInfo,g,"internal-error");default:xe(b.email,g,"internal-error")}let M=null;return b.mfaInfo&&(M=d1._fromServerResponse(vn(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:M},operation:N}})).apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(C,p){const{data:g}=yield De((0,O.m9)(C),p);return g.email})).apply(this,arguments)}function ls(){return(ls=(0,d.Z)(function*(C,p,g){const b=vn(C),N=yield al(b,{returnSecureToken:!0,email:p,password:g}),M=yield mi._fromIdTokenResponse(b,"signIn",N);return yield b._updateCurrentUser(M.user),M})).apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(C,p,g){const b=(0,O.m9)(C),N={requestType:"EMAIL_SIGNIN",email:p};xe(g.handleCodeInApp,b,"argument-error"),g&&x2(b,N,g),yield s1(b,N)})).apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(C,p,g){const b=(0,O.m9)(C),N=To.credentialWithLink(p,g||lt());return xe(N._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Mr(b,N)})).apply(this,arguments)}function Lo(C,p){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(C,p){return It(C,"POST","/v1/accounts:createAuthUri",dn(C,p))})).apply(this,arguments)}function _a(){return(_a=(0,d.Z)(function*(C,p){const b={identifier:p,continueUri:qt()?lt():"http://localhost"},{signinMethods:N}=yield Lo((0,O.m9)(C),b);return N||[]})).apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(C,p){const g=(0,O.m9)(C),N={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};p&&x2(g.auth,N,p);const{email:M}=yield Rs(g.auth,N);M!==C.email&&(yield C.reload())})).apply(this,arguments)}function Ro(){return(Ro=(0,d.Z)(function*(C,p,g){const b=(0,O.m9)(C),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:p};g&&x2(b.auth,M,g);const{email:Q}=yield Uu(b.auth,M);Q!==C.email&&(yield C.reload())})).apply(this,arguments)}function Rc(C,p){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,d.Z)(function*(C,p){return It(C,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function V1(){return(V1=(0,d.Z)(function*(C,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const b=(0,O.m9)(C),M={idToken:yield b.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},Q=yield Oi(b,Rc(b.auth,M));b.displayName=Q.displayName||null,b.photoURL=Q.photoUrl||null;const ve=b.providerData.find(({providerId:de})=>"password"===de);ve&&(ve.displayName=b.displayName,ve.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Q)})).apply(this,arguments)}function wa(C,p,g){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(C,p,g){const{auth:b}=C,M={idToken:yield C.getIdToken(),returnSecureToken:!0};p&&(M.email=p),g&&(M.password=g);const Q=yield Oi(C,bo(b,M));yield C._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class F1{constructor(p,g,b={}){this.isNewUser=p,this.providerId=g,this.profile=b}}class fl extends F1{constructor(p,g,b,N){super(p,g,b),this.username=N}}class pl extends F1{constructor(p,g){super(p,"facebook.com",g)}}class ml extends fl{constructor(p,g){super(p,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class H1 extends F1{constructor(p,g){super(p,"google.com",g)}}class b0 extends fl{constructor(p,g,b){super(p,"twitter.com",g,b)}}function Pc(C){const{user:p,_tokenResponse:g}=C;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(C){var p,g;if(!C)return null;const{providerId:b}=C,N=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},M=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!b&&(null==C?void 0:C.idToken)){const Q=null===(g=null===(p=He(C.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(Q)return new F1(M,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!b)return null;switch(b){case"facebook.com":return new pl(M,N);case"github.com":return new ml(M,N);case"google.com":return new H1(M,N);case"twitter.com":return new b0(M,N,C.screenName||null);case"custom":case"anonymous":return new F1(M,null);default:return new F1(M,b,N)}}(g)}class Ti{constructor(p,g){this.type=p,this.credential=g}static _fromIdtoken(p){return new Ti("enroll",p)}static _fromMfaPendingCredential(p){return new Ti("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,b;if(null==p?void 0:p.multiFactorSession){if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ti._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(b=p.multiFactorSession)||void 0===b?void 0:b.idToken)return Ti._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ko{constructor(p,g,b){this.session=p,this.hints=g,this.signInResolver=b}static _fromError(p,g){const b=vn(p),N=(g.serverResponse.mfaInfo||[]).map(Q=>d1._fromServerResponse(b,Q));xe(g.serverResponse.mfaPendingCredential,b,"internal-error");const M=Ti._fromMfaPendingCredential(g.serverResponse.mfaPendingCredential);return new ko(M,N,function(){var Q=(0,d.Z)(function*(ve){const de=yield ve._process(b,M);delete g.serverResponse.mfaInfo,delete g.serverResponse.mfaPendingCredential;const je=Object.assign(Object.assign({},g.serverResponse),{idToken:de.idToken,refreshToken:de.refreshToken});switch(g.operationType){case"signIn":const Oe=yield mi._fromIdTokenResponse(b,g.operationType,je);return yield b._updateCurrentUser(Oe.user),Oe;case"reauthenticate":return xe(g.user,b,"internal-error"),mi._forOperation(g.user,g.operationType,je);default:Ae(b,"internal-error")}});return function(ve){return Q.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,d.Z)(function*(){return g.signInResolver(p)})()}}function Aa(C,p){return It(C,"POST","/v2/accounts/mfaEnrollment:start",dn(C,p))}class Fc{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>d1._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Fc(p)}getSession(){var p=this;return(0,d.Z)(function*(){return Ti._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,g){var b=this;return(0,d.Z)(function*(){const N=p,M=yield b.getSession(),Q=yield Oi(b.user,N._process(b.user.auth,M,g));return yield b.user._updateTokensIfNecessary(Q),b.user.reload()})()}unenroll(p){var g=this;return(0,d.Z)(function*(){const b="string"==typeof p?p:p.uid,N=yield g.user.getIdToken(),M=yield Oi(g.user,function(C,p){return It(C,"POST","/v2/accounts/mfaEnrollment:withdraw",dn(C,p))}(g.user.auth,{idToken:N,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Q})=>Q!==b),yield g.user._updateTokensIfNecessary(M);try{yield g.user.reload()}catch(Q){if("auth/user-token-expired"!==Q.code)throw Q}})()}}const us=new WeakMap,Ta="__sak";class gl{constructor(p,g){this.storage=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ta,"1"),this.storage.removeItem(Ta),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}}const Uc=(()=>{class C extends gl{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const C=(0,O.z$)();return w2(C)||gr(C)}()&&function(){try{return!(!window||window===window.top)}catch(C){return!1}}(),this.fallbackToPolling=Ue(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const N=this.storage.getItem(b),M=this.localCache[b];N!==M&&g(b,M,N)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((ve,de,je)=>{this.notifyListeners(ve,je)});const N=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(N);if(g.newValue!==ve)null!==g.newValue?this.storage.setItem(N,g.newValue):this.storage.removeItem(N);else if(this.localCache[N]===g.newValue&&!b)return}const M=()=>{const ve=this.storage.getItem(N);!b&&this.localCache[N]===ve||this.notifyListeners(N,ve)},Q=this.storage.getItem(N);(0,O.w1)()&&10===document.documentMode&&Q!==g.newValue&&g.newValue!==g.oldValue?setTimeout(M,10):M()}notifyListeners(g,b){this.localCache[g]=b;const N=this.listeners[g];if(N)for(const M of Array.from(N))M(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var N=()=>super._set,M=this;return(0,d.Z)(function*(){yield N().call(M,g,b),M.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,N=this;return(0,d.Z)(function*(){const M=yield b().call(N,g);return N.localCache[g]=JSON.stringify(M),M})()}_remove(g){var b=()=>super._remove,N=this;return(0,d.Z)(function*(){yield b().call(N,g),delete N.localCache[g]})()}}return C.type="LOCAL",C})(),ds=(()=>{class C extends gl{constructor(){super(window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return C.type="SESSION",C})();let fs=(()=>{class C{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(M=>M.isListeningto(g));if(b)return b;const N=new C(g);return this.receivers.push(N),N}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,d.Z)(function*(){const N=g,{eventId:M,eventType:Q,data:ve}=N.data,de=b.handlersMap[Q];if(!(null==de?void 0:de.size))return;N.ports[0].postMessage({status:"ack",eventId:M,eventType:Q});const je=Array.from(de).map(function(){var nt=(0,d.Z)(function*(Wn){return Wn(N.origin,ve)});return function(Wn){return nt.apply(this,arguments)}}()),Oe=yield function(C){return Promise.all(C.map(function(){var p=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return p.apply(this,arguments)}}()))}(je);N.ports[0].postMessage({status:"done",eventId:M,eventType:Q,response:Oe})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function Os(C="",p=10){let g="";for(let b=0;b<p;b++)g+=Math.floor(10*Math.random());return C+g}class yl{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,b=50){var N=this;return(0,d.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let Q,ve;return new Promise((de,je)=>{const Oe=Os("",20);M.port1.start();const nt=setTimeout(()=>{je(new Error("unsupported_event"))},b);ve={messageChannel:M,onMessage(Wn){const Kr=Wn;if(Kr.data.eventId===Oe)switch(Kr.data.status){case"ack":clearTimeout(nt),Q=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),de(Kr.data.response);break;default:clearTimeout(nt),clearTimeout(Q),je(new Error("invalid_response"))}}},N.handlers.add(ve),M.port1.addEventListener("message",ve.onMessage),N.target.postMessage({eventType:p,eventId:Oe,data:g},[M.port2])}).finally(()=>{ve&&N.removeMessageHandler(ve)})})()}}function En(){return window}function _l(){return void 0!==En().WorkerGlobalScope&&"function"==typeof En().importScripts}function Sa(){return(Sa=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(C){return null}})).apply(this,arguments)}const Bc="firebaseLocalStorageDb",jc="firebaseLocalStorage",$c="fbase_key";class Fs{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function j1(C,p){return C.transaction([jc],p?"readwrite":"readonly").objectStore(jc)}function cn(){const C=indexedDB.open(Bc,1);return new Promise((p,g)=>{C.addEventListener("error",()=>{g(C.error)}),C.addEventListener("upgradeneeded",()=>{const b=C.result;try{b.createObjectStore(jc,{keyPath:$c})}catch(N){g(N)}}),C.addEventListener("success",(0,d.Z)(function*(){const b=C.result;b.objectStoreNames.contains(jc)?p(b):(b.close(),yield function(){const C=indexedDB.deleteDatabase(Bc);return new Fs(C).toPromise()}(),p(yield cn()))}))})}function p1(C,p,g){return Je.apply(this,arguments)}function Je(){return(Je=(0,d.Z)(function*(C,p,g){const b=j1(C,!0).put({[$c]:p,value:g});return new Fs(b).toPromise()})).apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(C,p){const g=j1(C,!1).get(p),b=yield new Fs(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function $1(C,p){const g=j1(C,!0).delete(p);return new Fs(g).toPromise()}const g1=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield cn()),g.db})()}_withRetries(g){var b=this;return(0,d.Z)(function*(){let N=0;for(;;)try{const M=yield b._openDb();return yield g(M)}catch(M){if(N++>3)throw M;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return _l()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=fs._getInstance(_l()?self:null),g.receiver._subscribe("keyChanged",function(){var b=(0,d.Z)(function*(N,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(N,M){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,d.Z)(function*(N,M){return["keyChanged"]});return function(N,M){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var b,N;if(g.activeServiceWorker=yield function(){return Sa.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new yl(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(b=M[0])||void 0===b?void 0:b.fulfilled)&&(null===(N=M[0])||void 0===N?void 0:N.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,d.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(N){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield cn();return yield p1(g,Ta,"1"),yield $1(g,Ta),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,d.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var N=this;return(0,d.Z)(function*(){return N._withPendingWrite((0,d.Z)(function*(){return yield N._withRetries(M=>p1(M,g,b)),N.localCache[g]=b,N.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,d.Z)(function*(){const N=yield b._withRetries(M=>function(C,p){return Da.apply(this,arguments)}(M,g));return b.localCache[g]=N,N})()}_remove(g){var b=this;return(0,d.Z)(function*(){return b._withPendingWrite((0,d.Z)(function*(){return yield b._withRetries(N=>$1(N,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const b=yield g._withRetries(Q=>{const ve=j1(Q,!1).getAll();return new Fs(ve).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const N=[],M=new Set;for(const{fbase_key:Q,value:ve}of b)M.add(Q),JSON.stringify(g.localCache[Q])!==JSON.stringify(ve)&&(g.notifyListeners(Q,ve),N.push(Q));for(const Q of Object.keys(g.localCache))g.localCache[Q]&&!M.has(Q)&&(g.notifyListeners(Q,null),N.push(Q));return N})()}notifyListeners(g,b){this.localCache[g]=b;const N=this.listeners[g];if(N)for(const M of Array.from(N))M(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function Oo(C,p){return It(C,"POST","/v2/accounts/mfaSignIn:start",dn(C,p))}function R2(){return(R2=(0,d.Z)(function*(C){return(yield It(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ps(C){return new Promise((p,g)=>{const b=document.createElement("script");b.setAttribute("src",C),b.onload=p,b.onerror=N=>{const M=Ve("internal-error");M.customData=N,g(M)},b.type="text/javascript",b.charset="UTF-8",function(){var C,p;return null!==(p=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==p?p:document}().appendChild(b)})}function q1(C){return`__${C}${Math.floor(1e6*Math.random())}`}const Us=1e12;class W1{constructor(p){this.auth=p,this.counter=Us,this._widgets=new Map}render(p,g){const b=this.counter;return this._widgets.set(b,new Na(p,this.auth.name,g||{})),this.counter++,b}reset(p){var g;const b=p||Us;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Us))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,d.Z)(function*(){var b;return null===(b=g._widgets.get(p||Us))||void 0===b||b.execute(),""})()}}class Na{constructor(p,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof p?document.getElementById(p):p;xe(N,"argument-error",{appName:g}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(C){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}();const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ms=q1("rcb"),Gc=new vt(3e4,6e4);class A0{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!En().grecaptcha}load(p,g=""){return xe((C=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(En().grecaptcha):new Promise((b,N)=>{const M=En().setTimeout(()=>{N(Ve(p,"network-request-failed"))},Gc.get());En()[ms]=()=>{En().clearTimeout(M),delete En()[ms];const ve=En().grecaptcha;if(!ve)return void N(Ve(p,"internal-error"));const de=ve.render;ve.render=(je,Oe)=>{const nt=de(je,Oe);return this.counter++,nt},this.hostLanguage=g,b(ve)},ps(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:ms,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),N(Ve(p,"internal-error"))})});var C}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!En().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class T0{load(p){return(0,d.Z)(function*(){return new W1(p)})()}clearedOneInstance(){}}const jt="recaptcha",qc={theme:"light",type:"image"};class P2{constructor(p,g=Object.assign({},qc),b){this.parameters=g,this.type=jt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(b),this.isInvisible="invisible"===this.parameters.size,xe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof p?document.getElementById(p):p;xe(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new T0:new A0,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(g)||new Promise(M=>{const Q=ve=>{!ve||(p.tokenChangeListeners.delete(Q),M(ve))};p.tokenChangeListeners.add(Q),p.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){xe(!this.parameters.sitekey,this.auth,"argument-error"),xe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof p)p(g);else if("string"==typeof p){const b=En()[p];"function"==typeof b&&b(g)}}}assertNotDestroyed(){xe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){xe(qt()&&!_l(),p.auth,"internal-error"),yield function(){let C=null;return new Promise(p=>{"complete"!==document.readyState?(C=()=>p(),window.addEventListener("load",C)):p()}).catch(p=>{throw C&&window.removeEventListener("load",C),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function(C){return R2.apply(this,arguments)}(p.auth);xe(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return xe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Wc{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Io._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function Zc(){return(Zc=(0,d.Z)(function*(C,p,g){const b=vn(C),N=yield Vo(b,p,(0,O.m9)(g));return new Wc(N,M=>Mr(b,M))})).apply(this,arguments)}function z2(){return(z2=(0,d.Z)(function*(C,p,g){const b=(0,O.m9)(C);yield ji(!1,b,"phone");const N=yield Vo(b.auth,p,(0,O.m9)(g));return new Wc(N,M=>S2(b,M))})).apply(this,arguments)}function La(){return(La=(0,d.Z)(function*(C,p,g){const b=(0,O.m9)(C),N=yield Vo(b.auth,p,(0,O.m9)(g));return new Wc(N,M=>Gr(b,M))})).apply(this,arguments)}function Vo(C,p,g){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(C,p,g){var b;const N=yield g.verify();try{let M;if(xe("string"==typeof N,C,"argument-error"),xe(g.type===jt,C,"argument-error"),M="string"==typeof p?{phoneNumber:p}:p,"session"in M){const Q=M.session;if("phoneNumber"in M)return xe("enroll"===Q.type,C,"internal-error"),(yield Aa(C,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{xe("signin"===Q.type,C,"internal-error");const ve=(null===(b=M.multiFactorHint)||void 0===b?void 0:b.uid)||M.multiFactorUid;return xe(ve,C,"missing-multi-factor-info"),(yield Oo(C,{mfaPendingCredential:Q.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield Bu(C,{phoneNumber:M.phoneNumber,recaptchaToken:N});return Q}}finally{g._reset()}})).apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(C,p){yield on((0,O.m9)(C),p)})).apply(this,arguments)}let gi=(()=>{class C{constructor(g){this.providerId=C.PROVIDER_ID,this.auth=vn(g)}verifyPhoneNumber(g,b){return Vo(this.auth,g,(0,O.m9)(b))}static credential(g,b){return Io._fromVerification(g,b)}static credentialFromResult(g){return C.credentialFromTaggedObject(g)}static credentialFromError(g){return C.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:N}=g;return b&&N?Io._fromTokenResponse(b,N):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function vi(C,p){return p?me(p):(xe(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class Cl extends pi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return $n(p,this._buildIdpRequest())}_linkToIdToken(p,g){return $n(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return $n(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function N0(C){return T2(C.auth,new Cl(C),C.bypassAuthState)}function fn(C){const{auth:p,user:g}=C;return xe(g,p,"internal-error"),an(g,new Cl(C),C.bypassAuthState)}function cr(C){return Z1.apply(this,arguments)}function Z1(){return(Z1=(0,d.Z)(function*(C){const{auth:p,user:g}=C;return xe(g,p,"internal-error"),on(g,new Cl(C),C.bypassAuthState)})).apply(this,arguments)}class Si{constructor(p,g,b,N,M=!1){this.auth=p,this.resolver=b,this.user=N,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,d.Z)(function*(b,N){p.pendingPromise={resolve:b,reject:N};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(M){p.reject(M)}});return function(b,N){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,d.Z)(function*(){const{urlResponse:b,sessionId:N,postBody:M,tenantId:Q,error:ve,type:de}=p;if(ve)return void g.reject(ve);const je={auth:g.auth,requestUri:b,sessionId:N,tenantId:Q||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(de)(je))}catch(Oe){g.reject(Oe)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return N0;case"linkViaPopup":case"linkViaRedirect":return cr;case"reauthViaPopup":case"reauthViaRedirect":return fn;default:Ae(this.auth,"internal-error")}}resolve(p){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const v1=new vt(2e3,1e4);function y1(){return(y1=(0,d.Z)(function*(C,p,g){const b=vn(C);bt(C,p,as);const N=vi(b,g);return new qr(b,"signInViaPopup",p,N).executeNotNull()})).apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(C,p,g){const b=(0,O.m9)(C);bt(b.auth,p,as);const N=vi(b.auth,g);return new qr(b.auth,"reauthViaPopup",p,N,b).executeNotNull()})).apply(this,arguments)}function ka(){return(ka=(0,d.Z)(function*(C,p,g){const b=(0,O.m9)(C);bt(b.auth,p,as);const N=vi(b.auth,g);return new qr(b.auth,"linkViaPopup",p,N,b).executeNotNull()})).apply(this,arguments)}let qr=(()=>{class C extends Si{constructor(g,b,N,M,Q){super(g,b,M,Q),this.provider=N,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const b=yield g.execute();return xe(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,d.Z)(function*(){ce(1===g.filter.length,"Popup operations only handle one event");const b=Os();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(N=>{g.reject(N)}),g.resolver._isIframeWebStorageSupported(g.auth,N=>{N||g.reject(Ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,N;this.pollId=(null===(N=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===N?void 0:N.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,v1.get())};g()}}return C.currentPopupAction=null,C})();const Y1=new Map;class bd extends Si{constructor(p,g,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,d.Z)(function*(){let b=Y1.get(g.auth._key());if(!b){try{const M=(yield function(C,p){return I.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;b=()=>Promise.resolve(M)}catch(N){b=()=>Promise.reject(N)}Y1.set(g.auth._key(),b)}return b()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,b=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(b,p);if("unknown"!==p.type){if(p.eventId){const N=yield b.auth._redirectUserForId(p.eventId);if(N)return b.user=N,g().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function I(){return(I=(0,d.Z)(function*(C,p){const g=fe(p),b="true"===(yield X(C)._get(g));return yield X(C)._remove(g),b})).apply(this,arguments)}function S(C,p){return L.apply(this,arguments)}function L(){return(L=(0,d.Z)(function*(C,p){return X(C)._set(fe(p),"true")})).apply(this,arguments)}function X(C){return me(C._redirectPersistence)}function fe(C){return Kn("pendingRedirect",C.config.apiKey,C.name)}function $e(){return($e=(0,d.Z)(function*(C,p,g){const b=vn(C);bt(C,p,as);const N=vi(b,g);return yield S(N,b),N._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(C,p,g){const b=(0,O.m9)(C);bt(b.auth,p,as);const N=vi(b.auth,g);yield S(N,b.auth);const M=yield _1(b);return N._openRedirect(b.auth,p,"reauthViaRedirect",M)})).apply(this,arguments)}function Q1(){return(Q1=(0,d.Z)(function*(C,p,g){const b=(0,O.m9)(C);bt(b.auth,p,as);const N=vi(b.auth,g);yield ji(!1,b,p.providerId),yield S(N,b.auth);const M=yield _1(b);return N._openRedirect(b.auth,p,"linkViaRedirect",M)})).apply(this,arguments)}function za(){return(za=(0,d.Z)(function*(C,p){return yield vn(C)._initializationPromise,xi(C,p,!1)})).apply(this,arguments)}function xi(C,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,d.Z)(function*(C,p,g=!1){const b=vn(C),N=vi(b,p),Q=yield new bd(b,N,g).execute();return Q&&!g&&(delete Q.user._redirectEventId,yield b._persistUserIfCurrent(Q.user),yield b._setRedirectUser(null,p)),Q})).apply(this,arguments)}function _1(C){return bl.apply(this,arguments)}function bl(){return(bl=(0,d.Z)(function*(C){const p=Os(`${C.uid}:::`);return C._redirectEventId=p,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),p})).apply(this,arguments)}class O2{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(g=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gs(C);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var b;if(p.error&&!gs(p)){const N=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(Ve(this.auth,N))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const b=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lm(p))}saveEventToCache(p){this.cachedEventUids.add(lm(p)),this.lastProcessedEventTime=Date.now()}}function lm(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(p=>p).join("-")}function gs({type:C,error:p}){return"unknown"===C&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Oa(C){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,d.Z)(function*(C,p={}){return It(C,"GET","/v1/projects",p)})).apply(this,arguments)}const t8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n8=/^https?/;function $i(){return($i=(0,d.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:p}=yield Oa(C);for(const g of p)try{if(Qc(g))return}catch(b){}Ae(C,"unauthorized-domain")})).apply(this,arguments)}function Qc(C){const p=lt(),{protocol:g,hostname:b}=new URL(p);if(C.startsWith("chrome-extension://")){const Q=new URL(C);return""===Q.hostname&&""===b?"chrome-extension:"===g&&C.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&Q.hostname===b}if(!n8.test(g))return!1;if(t8.test(C))return b===C;const N=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(b)}const C1=new vt(3e4,6e4);function wl(){const C=En().___jsl;if(null==C?void 0:C.H)for(const p of Object.keys(C.H))if(C.H[p].r=C.H[p].r||[],C.H[p].L=C.H[p].L||[],C.H[p].r=[...C.H[p].L],C.CP)for(let g=0;g<C.CP.length;g++)C.CP[g]=null}let b1=null;function V2(C){return b1=b1||function(C){return new Promise((p,g)=>{var b,N,M;function Q(){wl(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{wl(),g(Ve(C,"network-request-failed"))},timeout:C1.get()})}if(null===(N=null===(b=En().gapi)||void 0===b?void 0:b.iframes)||void 0===N?void 0:N.Iframe)p(gapi.iframes.getContext());else{if(!(null===(M=En().gapi)||void 0===M?void 0:M.load)){const ve=q1("iframefcb");return En()[ve]=()=>{gapi.load?Q():g(Ve(C,"network-request-failed"))},ps(`https://apis.google.com/js/api.js?onload=${ve}`)}Q()}}).catch(p=>{throw b1=null,p})}(C),b1}const r8=new vt(5e3,15e3),J1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},F2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hm(C){const p=C.config;xe(p.authDomain,C,"auth-domain-config-required");const g=p.emulator?Jt(p,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:C.name,v:pe.SDK_VERSION},N=F2.get(C.config.apiHost);N&&(b.eid=N);const M=C._getFrameworks();return M.length&&(b.fw=M.join(",")),`${g}?${(0,O.xO)(b).slice(1)}`}function L0(){return(L0=(0,d.Z)(function*(C){const p=yield V2(C),g=En().gapi;return xe(g,C,"internal-error"),p.open({where:document.body,url:hm(C),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J1,dontclear:!0},b=>new Promise(function(){var N=(0,d.Z)(function*(M,Q){yield b.restyle({setHideOnLeave:!1});const ve=Ve(C,"network-request-failed"),de=En().setTimeout(()=>{Q(ve)},r8.get());function je(){En().clearTimeout(de),M(b)}b.ping(je).then(je,()=>{Q(ve)})});return function(M,Q){return N.apply(this,arguments)}}()))})).apply(this,arguments)}const dm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class H2{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function o8(C,p,g,b,N,M){xe(C.config.authDomain,C,"auth-domain-config-required"),xe(C.config.apiKey,C,"invalid-api-key");const Q={apiKey:C.config.apiKey,appName:C.name,authType:g,redirectUrl:b,v:pe.SDK_VERSION,eventId:N};if(p instanceof as){p.setDefaultLanguage(C.languageCode),Q.providerId=p.providerId||"",(0,O.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[de,je]of Object.entries(M||{}))Q[de]=je}if(p instanceof ua){const de=p.getScopes().filter(je=>""!==je);de.length>0&&(Q.scopes=de.join(","))}C.tenantId&&(Q.tid=C.tenantId);const ve=Q;for(const de of Object.keys(ve))void 0===ve[de]&&delete ve[de];return`${function({config:C}){return C.emulator?Jt(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,O.xO)(ve).slice(1)}`}const U2="webStorageSupport";class w1 extends class{constructor(p){this.factorId=p}_process(p,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,b);case"signin":return this._finalizeSignIn(p,g.credential);default:return se("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new w1(p)}_finalizeEnroll(p,g,b){return function(C,p){return It(C,"POST","/v2/accounts/mfaEnrollment:finalize",dn(C,p))}(p,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function(C,p){return It(C,"POST","/v2/accounts/mfaSignIn:finalize",dn(C,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let k0=(()=>{class C{constructor(){}static assertion(g){return w1._fromCredential(g)}}return C.FACTOR_ID="phone",C})();var C,l8="@firebase/auth";class Md{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(b=>{var N;p((null===(N=b)||void 0===N?void 0:N.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Bo(){return window}function O0(){return(O0=(0,d.Z)(function*(C,p,g){var b;const{BuildInfo:N}=Bo();ce(p.sessionId,"AuthEvent did not contain a session ID");const M=yield Td(p.sessionId),Q={};return gr()?Q.ibi=N.packageName:t1()?Q.apn=N.packageName:Ae(C,"operation-not-supported-in-this-environment"),N.displayName&&(Q.appDisplayName=N.displayName),Q.sessionId=M,o8(C,g,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,Q)})).apply(this,arguments)}function V0(){return(V0=(0,d.Z)(function*(C){const{BuildInfo:p}=Bo(),g={};gr()?g.iosBundleId=p.packageName:t1()?g.androidPackageName=p.packageName:Ae(C,"operation-not-supported-in-this-environment"),yield Oa(C,g)})).apply(this,arguments)}function e4(){return(e4=(0,d.Z)(function*(C,p,g){const{cordova:b}=Bo();let N=()=>{};try{yield new Promise((M,Q)=>{let ve=null;function de(){var nt;M();const Wn=null===(nt=b.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof Wn&&Wn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function je(){ve||(ve=window.setTimeout(()=>{Q(Ve(C,"redirect-cancelled-by-user"))},2e3))}function Oe(){"visible"===(null==document?void 0:document.visibilityState)&&je()}p.addPassiveListener(de),document.addEventListener("resume",je,!1),t1()&&document.addEventListener("visibilitychange",Oe,!1),N=()=>{p.removePassiveListener(de),document.removeEventListener("resume",je,!1),document.removeEventListener("visibilitychange",Oe,!1),ve&&window.clearTimeout(ve)}})}finally{N()}})).apply(this,arguments)}function Td(C){return H0.apply(this,arguments)}function H0(){return(H0=(0,d.Z)(function*(C){const p=Sd(C),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(N=>N.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Sd(C){if(ce(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(C);const p=new ArrayBuffer(C.length),g=new Uint8Array(p);for(let b=0;b<C.length;b++)g[b]=C.charCodeAt(b);return g}C="Browser",(0,pe._registerComponent)(new be.wA("auth",(p,{options:g})=>{const b=p.getProvider("app").getImmediate(),{apiKey:N,authDomain:M}=b.options;return(Q=>{xe(N&&!N.includes(":"),"invalid-api-key",{appName:Q.name}),xe(!(null==M?void 0:M.includes(":")),"argument-error",{appName:Q.name});const ve={apiKey:N,authDomain:M,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zt(C)},de=new jr(Q,ve);return function(C,p){const g=(null==p?void 0:p.persistence)||[],b=(Array.isArray(g)?g:[g]).map(me);(null==p?void 0:p.errorMap)&&C._updateErrorMap(p.errorMap),C._initializeWithPersistence(b,null==p?void 0:p.popupRedirectResolver)}(de,g),de})(b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,b)=>{p.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new be.wA("auth-internal",p=>{const g=vn(p.getProvider("auth").getImmediate());return new Md(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(l8,"0.18.3",void 0),(0,pe.registerVersion)(l8,"0.18.3","esm2017");class Ml extends O2{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function Il(C){return Al.apply(this,arguments)}function Al(){return(Al=(0,d.Z)(function*(C){const p=yield B0()._get(h8(C));return p&&(yield B0()._remove(h8(C))),p})).apply(this,arguments)}function mm(){const C=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*p.length);C.push(p.charAt(b))}return C.join("")}function B0(){return me(Uc)}function h8(C){return Kn("authEvent",C.config.apiKey,C.name)}function Ba(C){if(!(null==C?void 0:C.includes("?")))return{};const[p,...g]=C.split("?");return(0,O.zd)(g.join("?"))}function $0(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ve("no-auth-event")}}function $2(){var C;return(null===(C=null==self?void 0:self.location)||void 0===C?void 0:C.protocol)||null}function q0(C=(0,O.z$)()){return!("file:"!==$2()&&"ionic:"!==$2()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function ja(){try{const C=self.localStorage,p=Os();if(C)return C.setItem(p,"1"),C.removeItem(p),!function(C=(0,O.z$)()){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)||function(C=(0,O.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,O.hl)()}catch(C){return Z0()&&(0,O.hl)()}return!1}function Z0(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function K0(){return("http:"===$2()||"https:"===$2()||(0,O.ru)()||q0())&&!((0,O.b$)()||(0,O.UG)())&&ja()&&!Z0()}function Y0(){return q0()&&"undefined"!=typeof document}function m8(){return(m8=(0,d.Z)(function*(){return!!Y0()&&new Promise(C=>{const p=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),C(!0)})})})).apply(this,arguments)}const vs={LOCAL:"local",NONE:"none",SESSION:"session"},Q0=xe,vm="persistence";function Zr(C){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(C){yield C._initializationPromise;const p=st(),g=Kn(vm,C.config.apiKey,C.name);(null==p?void 0:p.sessionStorage)&&p.sessionStorage.setItem(g,C._getPersistence())})).apply(this,arguments)}function st(){return"undefined"!=typeof window?window:null}const Tt=xe;class _i{constructor(){this.browserResolver=me(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ds,this._completeRedirectFn=xi}_openPopup(p,g,b,N){var M=this;return(0,d.Z)(function*(){var Q;ce(null===(Q=M.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const ve=o8(p,g,b,lt(),N);return function(C,p,g,b=500,N=600){const M=Math.max((window.screen.availHeight-N)/2,0).toString(),Q=Math.max((window.screen.availWidth-b)/2,0).toString();let ve="";const de=Object.assign(Object.assign({},dm),{width:b.toString(),height:N.toString(),top:M,left:Q}),je=(0,O.z$)().toLowerCase();g&&(ve=oa(je)?"_blank":g),Co(je)&&(p=p||"http://localhost",de.scrollbars="yes");const Oe=Object.entries(de).reduce((Wn,[Kr,n3])=>`${Wn}${Kr}=${n3},`,"");if(function(C=(0,O.z$)()){var p;return gr(C)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(je)&&"_self"!==ve)return function(C,p){const g=document.createElement("a");g.href=C,g.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(p||"",ve),new H2(null);const nt=window.open(p||"",ve,Oe);xe(nt,C,"popup-blocked");try{nt.focus()}catch(Wn){}return new H2(nt)}(p,ve,Os())})()}_openRedirect(p,g,b,N){var M=this;return(0,d.Z)(function*(){return yield M._originValidation(p),C=o8(p,g,b,lt(),N),En().location.href=C,new Promise(()=>{});var C})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:N,promise:M}=this.eventManagers[g];return N?Promise.resolve(N):(ce(M,"If manager is not set, promise should be"),M)}const b=this.initAndGetManager(p);return this.eventManagers[g]={promise:b},b}initAndGetManager(p){var g=this;return(0,d.Z)(function*(){const b=yield function(C){return L0.apply(this,arguments)}(p),N=new O2(p);return b.register("authEvent",M=>(xe(null==M?void 0:M.authEvent,p,"invalid-auth-event"),{status:N.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:N},g.iframes[p._key()]=b,N})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(U2,{type:U2},N=>{var M;const Q=null===(M=null==N?void 0:N[0])||void 0===M?void 0:M[U2];void 0!==Q&&g(!!Q),Ae(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(C){return $i.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ue()||w2()||gr()}}),this.cordovaResolver=me(class{constructor(){this._redirectPersistence=ds,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xi}_initialize(p){var g=this;return(0,d.Z)(function*(){const b=p._key();let N=g.eventManagers.get(b);return N||(N=new Ml(p),g.eventManagers.set(b,N),g.attachCallbackListeners(p,N)),N})()}_openPopup(p){Ae(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,b,N){var M=this;return(0,d.Z)(function*(){!function(C){var p,g,b,N,M,Q,ve,de,je,Oe;const nt=Bo();xe("function"==typeof(null===(p=null==nt?void 0:nt.universalLinks)||void 0===p?void 0:p.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),xe(void 0!==(null===(g=null==nt?void 0:nt.BuildInfo)||void 0===g?void 0:g.packageName),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),xe("function"==typeof(null===(M=null===(N=null===(b=null==nt?void 0:nt.cordova)||void 0===b?void 0:b.plugins)||void 0===N?void 0:N.browsertab)||void 0===M?void 0:M.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xe("function"==typeof(null===(de=null===(ve=null===(Q=null==nt?void 0:nt.cordova)||void 0===Q?void 0:Q.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===de?void 0:de.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xe("function"==typeof(null===(Oe=null===(je=null==nt?void 0:nt.cordova)||void 0===je?void 0:je.InAppBrowser)||void 0===Oe?void 0:Oe.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Q=yield M._initialize(p);yield Q.initialized(),Q.resetRedirect(),Y1.clear(),yield M._originValidation(p);const ve=function(C,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:mm(),postBody:null,tenantId:C.tenantId,error:Ve(C,"no-auth-event")}}(p,b,N);yield function(C,p){return B0()._set(h8(C),p)}(p,ve);const de=yield function(C,p,g){return O0.apply(this,arguments)}(p,ve,g),je=yield function(C){const{cordova:p}=Bo();return new Promise(g=>{p.plugins.browsertab.isAvailable(b=>{let N=null;b?p.plugins.browsertab.openUrl(C):N=p.InAppBrowser.open(C,function(C=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),g(N)})})}(de);return function(C,p,g){return e4.apply(this,arguments)}(p,Q,je)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(C){return V0.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:b,handleOpenURL:N,BuildInfo:M}=Bo(),Q=setTimeout((0,d.Z)(function*(){yield Il(p),g.onEvent($0())}),500),ve=function(){var Oe=(0,d.Z)(function*(nt){clearTimeout(Q);const Wn=yield Il(p);let Kr=null;Wn&&(null==nt?void 0:nt.url)&&(Kr=function(C,p){var g,b;const N=function(C){const p=Ba(C),g=p.link?decodeURIComponent(p.link):void 0,b=Ba(g).link,N=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Ba(N).link||N||b||g||C}(p);if(N.includes("/__/auth/callback")){const M=Ba(N),Q=M.firebaseError?function(C){try{return JSON.parse(C)}catch(p){return null}}(decodeURIComponent(M.firebaseError)):null,ve=null===(b=null===(g=null==Q?void 0:Q.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],de=ve?Ve(ve):null;return de?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:de,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:N,postBody:null}}return null}(Wn,nt.url)),g.onEvent(Kr||$0())});return function(Wn){return Oe.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,ve);const de=N,je=`${M.packageName.toLowerCase()}://`;Bo().handleOpenURL=function(){var Oe=(0,d.Z)(function*(nt){if(nt.toLowerCase().startsWith(je)&&ve({url:nt}),"function"==typeof de)try{de(nt)}catch(Wn){console.error(Wn)}});return function(nt){return Oe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ds,this._completeRedirectFn=xi}_initialize(p){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,b,N){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(p,g,b,N)})()}_openRedirect(p,g,b,N){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(p,g,b,N)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Y0()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const g=yield function(){return m8.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function Sl(C){return C.unwrap()}function g8(C){return Gi(C)}function Gi(C){const{_tokenResponse:p}=C instanceof O.ZR?C.customData:C;if(!p)return null;if(!(C instanceof O.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return gi.credentialFromResult(C);const g=p.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=ks;break;case"facebook.com":b=Tc;break;case"github.com":b=ol;break;case"twitter.com":b=Ui;break;default:const{oauthIdToken:N,oauthAccessToken:M,oauthTokenSecret:Q,pendingToken:ve,nonce:de}=p;return M||Q||N||ve?ve?g.startsWith("saml.")?a1._create(g,ve):os._fromParams({providerId:g,signInMethod:g,pendingToken:ve,idToken:N,accessToken:M}):new o1(g).credential({idToken:N,accessToken:M,rawNonce:de}):null}return C instanceof O.ZR?b.credentialFromError(C):b.credentialFromResult(C)}function xr(C,p){return p.catch(g=>{throw g instanceof O.ZR&&function(C,p){var g;const b=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new $a(C,function(C,p){var g;const b=(0,O.m9)(C),N=p;return xe(p.operationType,b,"argument-error"),xe(null===(g=N.serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),ko._fromError(b,N)}(C,p));else if(b){const N=Gi(p),M=p;N&&(M.credential=N,M.tenantId=b.tenantId||void 0,M.email=b.email||void 0,M.phoneNumber=b.phoneNumber||void 0)}}(C,g),g}).then(g=>{const N=g.user;return{operationType:g.operationType,credential:g8(g),additionalUserInfo:Pc(g),user:to.getOrCreate(N)}})}function e3(C,p){return xl.apply(this,arguments)}function xl(){return(xl=(0,d.Z)(function*(C,p){const g=yield p;return{verificationId:g.verificationId,confirm:b=>xr(C,g.confirm(b))}})).apply(this,arguments)}class $a{constructor(p,g){this.resolver=g,this.auth=function(C){return C.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return xr(Sl(this.auth),this.resolver.resolveSignIn(p))}}class to{constructor(p){this._delegate=p,this.multiFactor=function(C){const p=(0,O.m9)(C);return us.has(p)||us.set(p,Fc._fromUser(p)),us.get(p)}(p)}static getOrCreate(p){return to.USER_MAP.has(p)||to.USER_MAP.set(p,new to(p)),to.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,d.Z)(function*(){return xr(g.auth,S2(g._delegate,p))})()}linkWithPhoneNumber(p,g){var b=this;return(0,d.Z)(function*(){return e3(b.auth,function(C,p,g){return z2.apply(this,arguments)}(b._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,d.Z)(function*(){return xr(g.auth,function(C,p,g){return ka.apply(this,arguments)}(g._delegate,p,_i))})()}linkWithRedirect(p){var g=this;return(0,d.Z)(function*(){return yield Zr(vn(g.auth)),function(C,p,g){return function(C,p,g){return Q1.apply(this,arguments)}(C,p,g)}(g._delegate,p,_i)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,d.Z)(function*(){return xr(g.auth,Gr(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return e3(this.auth,function(C,p,g){return La.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return xr(this.auth,function(C,p,g){return Ra.apply(this,arguments)}(this._delegate,p,_i))}reauthenticateWithRedirect(p){var g=this;return(0,d.Z)(function*(){return yield Zr(vn(g.auth)),function(C,p,g){return function(C,p,g){return zn.apply(this,arguments)}(C,p,g)}(g._delegate,p,_i)})()}sendEmailVerification(p){return function(C,p){return Ir.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,d.Z)(function*(){return yield function(C,p){return fa.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function(C,p){return wa((0,O.m9)(C),p,null)}(this._delegate,p)}updatePassword(p){return function(C,p){return wa((0,O.m9)(C),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function(C,p){return _n.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function(C,p){return V1.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function(C,p,g){return Ro.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}to.USER_MAP=new WeakMap;const r4=xe;let Dl=(()=>{class C{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:N}=g.options;r4(N,"invalid-api-key",{appName:g.name});let M=[Rt];if("undefined"!=typeof window){M=function(C,p){const g=st();if(!(null==g?void 0:g.sessionStorage))return[];const b=Kn(vm,C,p);switch(g.sessionStorage.getItem(b)){case vs.NONE:return[Rt];case vs.LOCAL:return[g1,ds];case vs.SESSION:return[ds];default:return[]}}(N,g.name);for(const ve of[g1,Uc,ds])M.includes(ve)||M.push(ve)}r4(N,"invalid-api-key",{appName:g.name});const Q="undefined"!=typeof window?_i:void 0;this._delegate=b.initialize({options:{persistence:M,popupRedirectResolver:Q}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?to.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function(C,p,g){const b=vn(C);xe(b._canInitEmulator,b,"emulator-config-failed"),xe(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const N=!!(null==g?void 0:g.disableWarnings),M=wn(p),{host:Q,port:ve}=function(C){const p=wn(C),g=/(\/\/)?([^?#/]+)/.exec(C.substr(p.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(b);if(N){const M=N[1];return{host:M,port:n1(b.substr(M.length+1))}}{const[M,Q]=b.split(":");return{host:M,port:n1(Q)}}}(p);b.config.emulator={url:`${M}//${Q}${null===ve?"":`:${ve}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Q,port:ve,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function(){function C(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,g,b)}applyActionCode(g){return function(C,p){return zs.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return De(this._delegate,g)}confirmPasswordReset(g,b){return function(C,p,g){return ya.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var N=this;return(0,d.Z)(function*(){return xr(N._delegate,function(C,p,g){return ls.apply(this,arguments)}(N._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(C,p){return _a.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(C,p){const g=Ao.parseLink(p);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){r4(K0(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function(C,p){return za.apply(this,arguments)}(g._delegate,_i);return b?xr(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(C,p){vn(C)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,b,N){const{next:M,error:Q,complete:ve}=Nl(g,b,N);return this._delegate.onAuthStateChanged(M,Q,ve)}onIdTokenChanged(g,b,N){const{next:M,error:Q,complete:ve}=Nl(g,b,N);return this._delegate.onIdTokenChanged(M,Q,ve)}sendSignInLinkToEmail(g,b){return function(C,p,g){return Do.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function(C,p,g){return va.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,d.Z)(function*(){let N;switch(function(C,p){Q0(Object.values(vs).includes(p),C,"invalid-persistence-type"),(0,O.b$)()?Q0(p!==vs.SESSION,C,"unsupported-persistence-type"):(0,O.UG)()?Q0(p===vs.NONE,C,"unsupported-persistence-type"):Z0()?Q0(p===vs.NONE||p===vs.LOCAL&&(0,O.hl)(),C,"unsupported-persistence-type"):Q0(p===vs.NONE||ja(),C,"unsupported-persistence-type")}(b._delegate,g),g){case vs.SESSION:N=ds;break;case vs.LOCAL:N=(yield me(g1)._isAvailable())?g1:Uc;break;case vs.NONE:N=Rt;break;default:return Ae("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(N)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return xr(this._delegate,function(C){return O1.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return xr(this._delegate,Mr(this._delegate,g))}signInWithCustomToken(g){return xr(this._delegate,function(C,p){return xo.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return xr(this._delegate,function(C,p,g){return Mr((0,O.m9)(C),To.credential(p,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return xr(this._delegate,function(C,p,g){return No.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return e3(this._delegate,function(C,p,g){return Zc.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,d.Z)(function*(){return r4(K0(),b._delegate,"operation-not-supported-in-this-environment"),xr(b._delegate,function(C,p,g){return y1.apply(this,arguments)}(b._delegate,g,_i))})()}signInWithRedirect(g){var b=this;return(0,d.Z)(function*(){return r4(K0(),b._delegate,"operation-not-supported-in-this-environment"),yield Zr(b._delegate),function(C,p,g){return function(C,p,g){return $e.apply(this,arguments)}(C,p,g)}(b._delegate,g,_i)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(C,p){return nn.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=vs,C})();function Nl(C,p,g){let b=C;"function"!=typeof C&&({next:b,error:p,complete:g}=C);const N=b;return{next:Q=>N(Q&&to.getOrCreate(Q)),error:p,complete:g}}class Ll{constructor(){this.providerId="phone",this._delegate=new gi(Sl(ne.Z.auth()))}static credential(p,g){return gi.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}Ll.PHONE_SIGN_IN_METHOD=gi.PHONE_SIGN_IN_METHOD,Ll.PROVIDER_ID=gi.PROVIDER_ID;const M1=xe;class ym{constructor(p,g,b=ne.Z.app()){var N;M1(null===(N=b.options)||void 0===N?void 0:N.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new P2(p,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(C){C.INTERNAL.registerComponent(new be.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new Dl(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:To,FacebookAuthProvider:Tc,GithubAuthProvider:ol,GoogleAuthProvider:ks,OAuthProvider:o1,PhoneAuthProvider:Ll,PhoneMultiFactorGenerator:k0,RecaptchaVerifier:ym,TwitterAuthProvider:Ui,Auth:Dl,AuthCredential:pi,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.1.6")}(ne.Z)},6676:function(Ke,Se){!function(F){"use strict";function d(le){return Array.prototype.slice.call(le)}function ne(le){return new Promise(function(te,he){le.onsuccess=function(){te(le.result)},le.onerror=function(){he(le.error)}})}function O(le,te,he){var Ce,Ae=new Promise(function(Ve,mt){ne(Ce=le[te].apply(le,he)).then(Ve,mt)});return Ae.request=Ce,Ae}function pe(le,te,he){var Ce=O(le,te,he);return Ce.then(function(Ae){if(Ae)return new z(Ae,Ce.request)})}function re(le,te,he){he.forEach(function(Ce){Object.defineProperty(le.prototype,Ce,{get:function(){return this[te][Ce]},set:function(Ae){this[te][Ce]=Ae}})})}function J(le,te,he,Ce){Ce.forEach(function(Ae){Ae in he.prototype&&(le.prototype[Ae]=function(){return O(this[te],Ae,arguments)})})}function be(le,te,he,Ce){Ce.forEach(function(Ae){Ae in he.prototype&&(le.prototype[Ae]=function(){return this[te][Ae].apply(this[te],arguments)})})}function ee(le,te,he,Ce){Ce.forEach(function(Ae){Ae in he.prototype&&(le.prototype[Ae]=function(){return pe(this[te],Ae,arguments)})})}function W(le){this._index=le}function z(le,te){this._cursor=le,this._request=te}function H(le){this._store=le}function B(le){this._tx=le,this.complete=new Promise(function(te,he){le.oncomplete=function(){te()},le.onerror=function(){he(le.error)},le.onabort=function(){he(le.error)}})}function ie(le,te,he){this._db=le,this.oldVersion=te,this.transaction=new B(he)}function oe(le){this._db=le}re(W,"_index",["name","keyPath","multiEntry","unique"]),J(W,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ee(W,"_index",IDBIndex,["openCursor","openKeyCursor"]),re(z,"_cursor",["direction","key","primaryKey","value"]),J(z,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(le){le in IDBCursor.prototype&&(z.prototype[le]=function(){var te=this,he=arguments;return Promise.resolve().then(function(){return te._cursor[le].apply(te._cursor,he),ne(te._request).then(function(Ce){if(Ce)return new z(Ce,te._request)})})})}),H.prototype.createIndex=function(){return new W(this._store.createIndex.apply(this._store,arguments))},H.prototype.index=function(){return new W(this._store.index.apply(this._store,arguments))},re(H,"_store",["name","keyPath","indexNames","autoIncrement"]),J(H,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ee(H,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),be(H,"_store",IDBObjectStore,["deleteIndex"]),B.prototype.objectStore=function(){return new H(this._tx.objectStore.apply(this._tx,arguments))},re(B,"_tx",["objectStoreNames","mode"]),be(B,"_tx",IDBTransaction,["abort"]),ie.prototype.createObjectStore=function(){return new H(this._db.createObjectStore.apply(this._db,arguments))},re(ie,"_db",["name","version","objectStoreNames"]),be(ie,"_db",IDBDatabase,["deleteObjectStore","close"]),oe.prototype.transaction=function(){return new B(this._db.transaction.apply(this._db,arguments))},re(oe,"_db",["name","version","objectStoreNames"]),be(oe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(le){[H,W].forEach(function(te){le in te.prototype&&(te.prototype[le.replace("open","iterate")]=function(){var he=d(arguments),Ce=he[he.length-1],Ae=this._store||this._index,Ve=Ae[le].apply(Ae,he.slice(0,-1));Ve.onsuccess=function(){Ce(Ve.result)}})})}),[W,H].forEach(function(le){le.prototype.getAll||(le.prototype.getAll=function(te,he){var Ce=this,Ae=[];return new Promise(function(Ve){Ce.iterateCursor(te,function(mt){mt?(Ae.push(mt.value),void 0===he||Ae.length!=he?mt.continue():Ve(Ae)):Ve(Ae)})})})}),F.openDb=function(le,te,he){var Ce=O(indexedDB,"open",[le,te]),Ae=Ce.request;return Ae&&(Ae.onupgradeneeded=function(Ve){he&&he(new ie(Ae.result,Ve.oldVersion,Ae.transaction))}),Ce.then(function(Ve){return new oe(Ve)})},F.deleteDb=function(le){return O(indexedDB,"deleteDatabase",[le])},Object.defineProperty(F,"__esModule",{value:!0})}(Se)},7574:(Ke,Se,F)=>{"use strict";F.d(Se,{y:()=>H});var d=F(7393),O=F(9181),pe=F(6490),J=F(6554),be=F(4487);var z=F(2494);let H=(()=>{class ie{constructor(we){this._isScalar=!1,we&&(this._subscribe=we)}lift(we){const _e=new ie;return _e.source=this,_e.operator=we,_e}subscribe(we,_e,le){const{operator:te}=this,he=function(ie,oe,we){if(ie){if(ie instanceof d.L)return ie;if(ie[O.b])return ie[O.b]()}return ie||oe||we?new d.L(ie,oe,we):new d.L(pe.c)}(we,_e,le);if(he.add(te?te.call(he,this.source):this.source||z.v.useDeprecatedSynchronousErrorHandling&&!he.syncErrorThrowable?this._subscribe(he):this._trySubscribe(he)),z.v.useDeprecatedSynchronousErrorHandling&&he.syncErrorThrowable&&(he.syncErrorThrowable=!1,he.syncErrorThrown))throw he.syncErrorValue;return he}_trySubscribe(we){try{return this._subscribe(we)}catch(_e){z.v.useDeprecatedSynchronousErrorHandling&&(we.syncErrorThrown=!0,we.syncErrorValue=_e),function(ie){for(;ie;){const{closed:oe,destination:we,isStopped:_e}=ie;if(oe||_e)return!1;ie=we&&we instanceof d.L?we:null}return!0}(we)?we.error(_e):console.warn(_e)}}forEach(we,_e){return new(_e=B(_e))((le,te)=>{let he;he=this.subscribe(Ce=>{try{we(Ce)}catch(Ae){te(Ae),he&&he.unsubscribe()}},te,le)})}_subscribe(we){const{source:_e}=this;return _e&&_e.subscribe(we)}[J.L](){return this}pipe(...we){return 0===we.length?this:function(ie){return 0===ie.length?be.y:1===ie.length?ie[0]:function(we){return ie.reduce((_e,le)=>le(_e),we)}}(we)(this)}toPromise(we){return new(we=B(we))((_e,le)=>{let te;this.subscribe(he=>te=he,he=>le(he),()=>_e(te))})}}return ie.create=oe=>new ie(oe),ie})();function B(ie){if(ie||(ie=z.v.Promise||Promise),!ie)throw new Error("no Promise impl found");return ie}},6490:(Ke,Se,F)=>{"use strict";F.d(Se,{c:()=>O});var d=F(2494),ne=F(4449);const O={closed:!0,next(pe){},error(pe){if(d.v.useDeprecatedSynchronousErrorHandling)throw pe;(0,ne.z)(pe)},complete(){}}},9765:(Ke,Se,F)=>{"use strict";F.d(Se,{Yc:()=>be,xQ:()=>ee});var d=F(7574),ne=F(7393),O=F(5319),pe=F(7971),re=F(8858),J=F(9181);class be extends ne.L{constructor(H){super(H),this.destination=H}}let ee=(()=>{class z extends d.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[J.b](){return new be(this)}lift(B){const ie=new W(this,this);return ie.operator=B,ie}next(B){if(this.closed)throw new pe.N;if(!this.isStopped){const{observers:ie}=this,oe=ie.length,we=ie.slice();for(let _e=0;_e<oe;_e++)we[_e].next(B)}}error(B){if(this.closed)throw new pe.N;this.hasError=!0,this.thrownError=B,this.isStopped=!0;const{observers:ie}=this,oe=ie.length,we=ie.slice();for(let _e=0;_e<oe;_e++)we[_e].error(B);this.observers.length=0}complete(){if(this.closed)throw new pe.N;this.isStopped=!0;const{observers:B}=this,ie=B.length,oe=B.slice();for(let we=0;we<ie;we++)oe[we].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(B){if(this.closed)throw new pe.N;return super._trySubscribe(B)}_subscribe(B){if(this.closed)throw new pe.N;return this.hasError?(B.error(this.thrownError),O.w.EMPTY):this.isStopped?(B.complete(),O.w.EMPTY):(this.observers.push(B),new re.W(this,B))}asObservable(){const B=new d.y;return B.source=this,B}}return z.create=(H,B)=>new W(H,B),z})();class W extends ee{constructor(H,B){super(),this.destination=H,this.source=B}next(H){const{destination:B}=this;B&&B.next&&B.next(H)}error(H){const{destination:B}=this;B&&B.error&&this.destination.error(H)}complete(){const{destination:H}=this;H&&H.complete&&this.destination.complete()}_subscribe(H){const{source:B}=this;return B?this.source.subscribe(H):O.w.EMPTY}}},8858:(Ke,Se,F)=>{"use strict";F.d(Se,{W:()=>ne});var d=F(5319);class ne extends d.w{constructor(pe,re){super(),this.subject=pe,this.subscriber=re,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const pe=this.subject,re=pe.observers;if(this.subject=null,!re||0===re.length||pe.isStopped||pe.closed)return;const J=re.indexOf(this.subscriber);-1!==J&&re.splice(J,1)}}},7393:(Ke,Se,F)=>{"use strict";F.d(Se,{L:()=>be});var d=F(9105),ne=F(6490),O=F(5319),pe=F(9181),re=F(2494),J=F(4449);class be extends O.w{constructor(z,H,B){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ne.c;break;case 1:if(!z){this.destination=ne.c;break}if("object"==typeof z){z instanceof be?(this.syncErrorThrowable=z.syncErrorThrowable,this.destination=z,z.add(this)):(this.syncErrorThrowable=!0,this.destination=new ee(this,z));break}default:this.syncErrorThrowable=!0,this.destination=new ee(this,z,H,B)}}[pe.b](){return this}static create(z,H,B){const ie=new be(z,H,B);return ie.syncErrorThrowable=!1,ie}next(z){this.isStopped||this._next(z)}error(z){this.isStopped||(this.isStopped=!0,this._error(z))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(z){this.destination.next(z)}_error(z){this.destination.error(z),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:z}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=z,this}}class ee extends be{constructor(z,H,B,ie){super(),this._parentSubscriber=z;let oe,we=this;(0,d.m)(H)?oe=H:H&&(oe=H.next,B=H.error,ie=H.complete,H!==ne.c&&(we=Object.create(H),(0,d.m)(we.unsubscribe)&&this.add(we.unsubscribe.bind(we)),we.unsubscribe=this.unsubscribe.bind(this))),this._context=we,this._next=oe,this._error=B,this._complete=ie}next(z){if(!this.isStopped&&this._next){const{_parentSubscriber:H}=this;re.v.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?this.__tryOrSetError(H,this._next,z)&&this.unsubscribe():this.__tryOrUnsub(this._next,z)}}error(z){if(!this.isStopped){const{_parentSubscriber:H}=this,{useDeprecatedSynchronousErrorHandling:B}=re.v;if(this._error)B&&H.syncErrorThrowable?(this.__tryOrSetError(H,this._error,z),this.unsubscribe()):(this.__tryOrUnsub(this._error,z),this.unsubscribe());else if(H.syncErrorThrowable)B?(H.syncErrorValue=z,H.syncErrorThrown=!0):(0,J.z)(z),this.unsubscribe();else{if(this.unsubscribe(),B)throw z;(0,J.z)(z)}}}complete(){if(!this.isStopped){const{_parentSubscriber:z}=this;if(this._complete){const H=()=>this._complete.call(this._context);re.v.useDeprecatedSynchronousErrorHandling&&z.syncErrorThrowable?(this.__tryOrSetError(z,H),this.unsubscribe()):(this.__tryOrUnsub(H),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(z,H){try{z.call(this._context,H)}catch(B){if(this.unsubscribe(),re.v.useDeprecatedSynchronousErrorHandling)throw B;(0,J.z)(B)}}__tryOrSetError(z,H,B){if(!re.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{H.call(this._context,B)}catch(ie){return re.v.useDeprecatedSynchronousErrorHandling?(z.syncErrorValue=ie,z.syncErrorThrown=!0,!0):((0,J.z)(ie),!0)}return!1}_unsubscribe(){const{_parentSubscriber:z}=this;this._context=null,this._parentSubscriber=null,z.unsubscribe()}}},5319:(Ke,Se,F)=>{"use strict";F.d(Se,{w:()=>J});var d=F(9796),ne=F(1555),O=F(9105);const re=(()=>{function ee(W){return Error.call(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((z,H)=>`${H+1}) ${z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W,this}return ee.prototype=Object.create(Error.prototype),ee})();class J{constructor(W){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,W&&(this._ctorUnsubscribe=!0,this._unsubscribe=W)}unsubscribe(){let W;if(this.closed)return;let{_parentOrParents:z,_ctorUnsubscribe:H,_unsubscribe:B,_subscriptions:ie}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,z instanceof J)z.remove(this);else if(null!==z)for(let oe=0;oe<z.length;++oe)z[oe].remove(this);if((0,O.m)(B)){H&&(this._unsubscribe=void 0);try{B.call(this)}catch(oe){W=oe instanceof re?be(oe.errors):[oe]}}if((0,d.k)(ie)){let oe=-1,we=ie.length;for(;++oe<we;){const _e=ie[oe];if((0,ne.K)(_e))try{_e.unsubscribe()}catch(le){W=W||[],le instanceof re?W=W.concat(be(le.errors)):W.push(le)}}}if(W)throw new re(W)}add(W){let z=W;if(!W)return J.EMPTY;switch(typeof W){case"function":z=new J(W);case"object":if(z===this||z.closed||"function"!=typeof z.unsubscribe)return z;if(this.closed)return z.unsubscribe(),z;if(!(z instanceof J)){const ie=z;z=new J,z._subscriptions=[ie]}break;default:throw new Error("unrecognized teardown "+W+" added to Subscription.")}let{_parentOrParents:H}=z;if(null===H)z._parentOrParents=this;else if(H instanceof J){if(H===this)return z;z._parentOrParents=[H,this]}else{if(-1!==H.indexOf(this))return z;H.push(this)}const B=this._subscriptions;return null===B?this._subscriptions=[z]:B.push(z),z}remove(W){const z=this._subscriptions;if(z){const H=z.indexOf(W);-1!==H&&z.splice(H,1)}}}var ee;function be(ee){return ee.reduce((W,z)=>W.concat(z instanceof re?z.errors:z),[])}J.EMPTY=((ee=new J).closed=!0,ee)},2494:(Ke,Se,F)=>{"use strict";F.d(Se,{v:()=>ne});let d=!1;const ne={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const pe=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+pe.stack)}else d&&console.log("RxJS: Back to a better error behavior. Thank you. <3");d=O},get useDeprecatedSynchronousErrorHandling(){return d}}},5345:(Ke,Se,F)=>{"use strict";F.d(Se,{IY:()=>pe,Ds:()=>J,ft:()=>ee});var d=F(7393),ne=F(7574),O=F(7444);class pe extends d.L{constructor(z){super(),this.parent=z}_next(z){this.parent.notifyNext(z)}_error(z){this.parent.notifyError(z),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class J extends d.L{notifyNext(z){this.destination.next(z)}notifyError(z){this.destination.error(z)}notifyComplete(){this.destination.complete()}}function ee(W,z){if(z.closed)return;if(W instanceof ne.y)return W.subscribe(z);let H;try{H=(0,O.s)(W)(z)}catch(B){z.error(B)}return H}},2441:(Ke,Se,F)=>{"use strict";F.d(Se,{c:()=>re,N:()=>J});var d=F(9765),ne=F(7574),O=F(5319),pe=F(1307);class re extends ne.y{constructor(H,B){super(),this.source=H,this.subjectFactory=B,this._refCount=0,this._isComplete=!1}_subscribe(H){return this.getSubject().subscribe(H)}getSubject(){const H=this._subject;return(!H||H.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let H=this._connection;return H||(this._isComplete=!1,H=this._connection=new O.w,H.add(this.source.subscribe(new be(this.getSubject(),this))),H.closed&&(this._connection=null,H=O.w.EMPTY)),H}refCount(){return(0,pe.x)()(this)}}const J=(()=>{const z=re.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:z._subscribe},_isComplete:{value:z._isComplete,writable:!0},getSubject:{value:z.getSubject},connect:{value:z.connect},refCount:{value:z.refCount}}})();class be extends d.Yc{constructor(H,B){super(H),this.connectable=B}_error(H){this._unsubscribe(),super._error(H)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const H=this.connectable;if(H){this.connectable=null;const B=H._connection;H._refCount=0,H._subject=null,H._connection=null,B&&B.unsubscribe()}}}},9193:(Ke,Se,F)=>{"use strict";F.d(Se,{E:()=>ne,c:()=>O});var d=F(7574);const ne=new d.y(re=>re.complete());function O(re){return re?function(re){return new d.y(J=>re.schedule(()=>J.complete()))}(re):ne}},4402:(Ke,Se,F)=>{"use strict";F.d(Se,{D:()=>we});var d=F(7574),ne=F(7444),O=F(5319),pe=F(6554),be=F(4087),ee=F(377),H=F(4072),B=F(9489);function we(_e,le){return le?function(_e,le){if(null!=_e){if(function(_e){return _e&&"function"==typeof _e[pe.L]}(_e))return function(_e,le){return new d.y(te=>{const he=new O.w;return he.add(le.schedule(()=>{const Ce=_e[pe.L]();he.add(Ce.subscribe({next(Ae){he.add(le.schedule(()=>te.next(Ae)))},error(Ae){he.add(le.schedule(()=>te.error(Ae)))},complete(){he.add(le.schedule(()=>te.complete()))}}))})),he})}(_e,le);if((0,H.t)(_e))return function(_e,le){return new d.y(te=>{const he=new O.w;return he.add(le.schedule(()=>_e.then(Ce=>{he.add(le.schedule(()=>{te.next(Ce),he.add(le.schedule(()=>te.complete()))}))},Ce=>{he.add(le.schedule(()=>te.error(Ce)))}))),he})}(_e,le);if((0,B.z)(_e))return(0,be.r)(_e,le);if(function(_e){return _e&&"function"==typeof _e[ee.hZ]}(_e)||"string"==typeof _e)return function(_e,le){if(!_e)throw new Error("Iterable cannot be null");return new d.y(te=>{const he=new O.w;let Ce;return he.add(()=>{Ce&&"function"==typeof Ce.return&&Ce.return()}),he.add(le.schedule(()=>{Ce=_e[ee.hZ](),he.add(le.schedule(function(){if(te.closed)return;let Ae,Ve;try{const mt=Ce.next();Ae=mt.value,Ve=mt.done}catch(mt){return void te.error(mt)}Ve?te.complete():(te.next(Ae),this.schedule())}))})),he})}(_e,le)}throw new TypeError((null!==_e&&typeof _e||_e)+" is not observable")}(_e,le):_e instanceof d.y?_e:new d.y((0,ne.s)(_e))}},6693:(Ke,Se,F)=>{"use strict";F.d(Se,{n:()=>pe});var d=F(7574),ne=F(5015),O=F(4087);function pe(re,J){return J?(0,O.r)(re,J):new d.y((0,ne.V)(re))}},6682:(Ke,Se,F)=>{"use strict";F.d(Se,{T:()=>re});var d=F(7574),ne=F(4869),O=F(3282),pe=F(6693);function re(...J){let be=Number.POSITIVE_INFINITY,ee=null,W=J[J.length-1];return(0,ne.K)(W)?(ee=J.pop(),J.length>1&&"number"==typeof J[J.length-1]&&(be=J.pop())):"number"==typeof W&&(be=J.pop()),null===ee&&1===J.length&&J[0]instanceof d.y?J[0]:(0,O.J)(be)((0,pe.n)(J,ee))}},5917:(Ke,Se,F)=>{"use strict";F.d(Se,{of:()=>pe});var d=F(4869),ne=F(6693),O=F(4087);function pe(...re){let J=re[re.length-1];return(0,d.K)(J)?(re.pop(),(0,O.r)(re,J)):(0,ne.n)(re)}},8002:(Ke,Se,F)=>{"use strict";F.d(Se,{U:()=>ne});var d=F(7393);function ne(re,J){return function(ee){if("function"!=typeof re)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ee.lift(new O(re,J))}}class O{constructor(J,be){this.project=J,this.thisArg=be}call(J,be){return be.subscribe(new pe(J,this.project,this.thisArg))}}class pe extends d.L{constructor(J,be,ee){super(J),this.project=be,this.count=0,this.thisArg=ee||this}_next(J){let be;try{be=this.project.call(this.thisArg,J,this.count++)}catch(ee){return void this.destination.error(ee)}this.destination.next(be)}}},3282:(Ke,Se,F)=>{"use strict";F.d(Se,{J:()=>O});var d=F(9773),ne=F(4487);function O(pe=Number.POSITIVE_INFINITY){return(0,d.zg)(ne.y,pe)}},9773:(Ke,Se,F)=>{"use strict";F.d(Se,{zg:()=>pe});var d=F(8002),ne=F(4402),O=F(5345);function pe(ee,W,z=Number.POSITIVE_INFINITY){return"function"==typeof W?H=>H.pipe(pe((B,ie)=>(0,ne.D)(ee(B,ie)).pipe((0,d.U)((oe,we)=>W(B,oe,ie,we))),z)):("number"==typeof W&&(z=W),H=>H.lift(new re(ee,z)))}class re{constructor(W,z=Number.POSITIVE_INFINITY){this.project=W,this.concurrent=z}call(W,z){return z.subscribe(new J(W,this.project,this.concurrent))}}class J extends O.Ds{constructor(W,z,H=Number.POSITIVE_INFINITY){super(W),this.project=z,this.concurrent=H,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(W){this.active<this.concurrent?this._tryNext(W):this.buffer.push(W)}_tryNext(W){let z;const H=this.index++;try{z=this.project(W,H)}catch(B){return void this.destination.error(B)}this.active++,this._innerSub(z)}_innerSub(W){const z=new O.IY(this),H=this.destination;H.add(z);const B=(0,O.ft)(W,z);B!==z&&H.add(B)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(W){this.destination.next(W)}notifyComplete(){const W=this.buffer;this.active--,W.length>0?this._next(W.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Ke,Se,F)=>{"use strict";F.d(Se,{ht:()=>H,QV:()=>W});var d=F(7393),ne=F(9193),O=F(5917),pe=F(7574);class ee{constructor(oe,we,_e){this.kind=oe,this.value=we,this.error=_e,this.hasValue="N"===oe}observe(oe){switch(this.kind){case"N":return oe.next&&oe.next(this.value);case"E":return oe.error&&oe.error(this.error);case"C":return oe.complete&&oe.complete()}}do(oe,we,_e){switch(this.kind){case"N":return oe&&oe(this.value);case"E":return we&&we(this.error);case"C":return _e&&_e()}}accept(oe,we,_e){return oe&&"function"==typeof oe.next?this.observe(oe):this.do(oe,we,_e)}toObservable(){switch(this.kind){case"N":return(0,O.of)(this.value);case"E":return ie=this.error,new pe.y(we=>we.error(ie));case"C":return(0,ne.c)()}var ie;throw new Error("unexpected notification kind value")}static createNext(oe){return void 0!==oe?new ee("N",oe):ee.undefinedValueNotification}static createError(oe){return new ee("E",void 0,oe)}static createComplete(){return ee.completeNotification}}function W(ie,oe=0){return function(_e){return _e.lift(new z(ie,oe))}}ee.completeNotification=new ee("C"),ee.undefinedValueNotification=new ee("N",void 0);class z{constructor(oe,we=0){this.scheduler=oe,this.delay=we}call(oe,we){return we.subscribe(new H(oe,this.scheduler,this.delay))}}class H extends d.L{constructor(oe,we,_e=0){super(oe),this.scheduler=we,this.delay=_e}static dispatch(oe){const{notification:we,destination:_e}=oe;we.observe(_e),this.unsubscribe()}scheduleMessage(oe){this.destination.add(this.scheduler.schedule(H.dispatch,this.delay,new B(oe,this.destination)))}_next(oe){this.scheduleMessage(ee.createNext(oe))}_error(oe){this.scheduleMessage(ee.createError(oe)),this.unsubscribe()}_complete(){this.scheduleMessage(ee.createComplete()),this.unsubscribe()}}class B{constructor(oe,we){this.notification=oe,this.destination=we}}},1307:(Ke,Se,F)=>{"use strict";F.d(Se,{x:()=>ne});var d=F(7393);function ne(){return function(J){return J.lift(new O(J))}}class O{constructor(J){this.connectable=J}call(J,be){const{connectable:ee}=this;ee._refCount++;const W=new pe(J,ee),z=be.subscribe(W);return W.closed||(W.connection=ee.connect()),z}}class pe extends d.L{constructor(J,be){super(J),this.connectable=be}_unsubscribe(){const{connectable:J}=this;if(!J)return void(this.connection=null);this.connectable=null;const be=J._refCount;if(be<=0)return void(this.connection=null);if(J._refCount=be-1,be>1)return void(this.connection=null);const{connection:ee}=this,W=J._connection;this.connection=null,W&&(!ee||W===ee)&&W.unsubscribe()}}},8819:(Ke,Se,F)=>{"use strict";F.d(Se,{B:()=>be});var d=F(2441);var pe=F(1307),re=F(9765);function J(){return new re.xQ}function be(){return ee=>(0,pe.x)()(function(ee,W){return function(H){let B;B="function"==typeof ee?ee:function(){return ee};const ie=Object.create(H,d.N);return ie.source=H,ie.subjectFactory=B,ie}}(J)(ee))}},3101:(Ke,Se,F)=>{"use strict";F.d(Se,{R:()=>le});var d=F(7574);let ne=1;const O=Promise.resolve(),pe={};function re(he){return he in pe&&(delete pe[he],!0)}const J={setImmediate(he){const Ce=ne++;return pe[Ce]=!0,O.then(()=>re(Ce)&&he()),Ce},clearImmediate(he){re(he)}};var ee=F(6465),z=F(6102);const ie=new class extends z.v{flush(Ce){this.active=!0,this.scheduled=void 0;const{actions:Ae}=this;let Ve,mt=-1,bt=Ae.length;Ce=Ce||Ae.shift();do{if(Ve=Ce.execute(Ce.state,Ce.delay))break}while(++mt<bt&&(Ce=Ae.shift()));if(this.active=!1,Ve){for(;++mt<bt&&(Ce=Ae.shift());)Ce.unsubscribe();throw Ve}}}(class extends ee.o{constructor(Ce,Ae){super(Ce,Ae),this.scheduler=Ce,this.work=Ae}requestAsyncId(Ce,Ae,Ve=0){return null!==Ve&&Ve>0?super.requestAsyncId(Ce,Ae,Ve):(Ce.actions.push(this),Ce.scheduled||(Ce.scheduled=J.setImmediate(Ce.flush.bind(Ce,null))))}recycleAsyncId(Ce,Ae,Ve=0){if(null!==Ve&&Ve>0||null===Ve&&this.delay>0)return super.recycleAsyncId(Ce,Ae,Ve);0===Ce.actions.length&&(J.clearImmediate(Ae),Ce.scheduled=void 0)}});var oe=F(9796);class _e extends d.y{constructor(Ce,Ae=0,Ve=ie){var he;super(),this.source=Ce,this.delayTime=Ae,this.scheduler=Ve,(!(!(0,oe.k)(he=Ae)&&he-parseFloat(he)+1>=0)||Ae<0)&&(this.delayTime=0),(!Ve||"function"!=typeof Ve.schedule)&&(this.scheduler=ie)}static create(Ce,Ae=0,Ve=ie){return new _e(Ce,Ae,Ve)}static dispatch(Ce){const{source:Ae,subscriber:Ve}=Ce;return this.add(Ae.subscribe(Ve))}_subscribe(Ce){return this.scheduler.schedule(_e.dispatch,this.delayTime,{source:this.source,subscriber:Ce})}}function le(he,Ce=0){return function(Ve){return Ve.lift(new te(he,Ce))}}class te{constructor(Ce,Ae){this.scheduler=Ce,this.delay=Ae}call(Ce,Ae){return new _e(Ae,this.delay,this.scheduler).subscribe(Ce)}}},3342:(Ke,Se,F)=>{"use strict";F.d(Se,{b:()=>pe});var d=F(7393);function ne(){}var O=F(9105);function pe(be,ee,W){return function(H){return H.lift(new re(be,ee,W))}}class re{constructor(ee,W,z){this.nextOrObserver=ee,this.error=W,this.complete=z}call(ee,W){return W.subscribe(new J(ee,this.nextOrObserver,this.error,this.complete))}}class J extends d.L{constructor(ee,W,z,H){super(ee),this._tapNext=ne,this._tapError=ne,this._tapComplete=ne,this._tapError=z||ne,this._tapComplete=H||ne,(0,O.m)(W)?(this._context=this,this._tapNext=W):W&&(this._context=W,this._tapNext=W.next||ne,this._tapError=W.error||ne,this._tapComplete=W.complete||ne)}_next(ee){try{this._tapNext.call(this._context,ee)}catch(W){return void this.destination.error(W)}this.destination.next(ee)}_error(ee){try{this._tapError.call(this._context,ee)}catch(W){return void this.destination.error(W)}this.destination.error(ee)}_complete(){try{this._tapComplete.call(this._context)}catch(ee){return void this.destination.error(ee)}return this.destination.complete()}}},4087:(Ke,Se,F)=>{"use strict";F.d(Se,{r:()=>O});var d=F(7574),ne=F(5319);function O(pe,re){return new d.y(J=>{const be=new ne.w;let ee=0;return be.add(re.schedule(function(){ee!==pe.length?(J.next(pe[ee++]),J.closed||be.add(this.schedule())):J.complete()})),be})}},6465:(Ke,Se,F)=>{"use strict";F.d(Se,{o:()=>O});var d=F(5319);class ne extends d.w{constructor(re,J){super()}schedule(re,J=0){return this}}class O extends ne{constructor(re,J){super(re,J),this.scheduler=re,this.work=J,this.pending=!1}schedule(re,J=0){if(this.closed)return this;this.state=re;const be=this.id,ee=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(ee,be,J)),this.pending=!0,this.delay=J,this.id=this.id||this.requestAsyncId(ee,this.id,J),this}requestAsyncId(re,J,be=0){return setInterval(re.flush.bind(re,this),be)}recycleAsyncId(re,J,be=0){if(null!==be&&this.delay===be&&!1===this.pending)return J;clearInterval(J)}execute(re,J){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(re,J);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,J){let ee,be=!1;try{this.work(re)}catch(W){be=!0,ee=!!W&&W||new Error(W)}if(be)return this.unsubscribe(),ee}_unsubscribe(){const re=this.id,J=this.scheduler,be=J.actions,ee=be.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ee&&be.splice(ee,1),null!=re&&(this.id=this.recycleAsyncId(J,re,null)),this.delay=null}}},6102:(Ke,Se,F)=>{"use strict";F.d(Se,{v:()=>ne});let d=(()=>{class O{constructor(re,J=O.now){this.SchedulerAction=re,this.now=J}schedule(re,J=0,be){return new this.SchedulerAction(this,re).schedule(be,J)}}return O.now=()=>Date.now(),O})();class ne extends d{constructor(pe,re=d.now){super(pe,()=>ne.delegate&&ne.delegate!==this?ne.delegate.now():re()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(pe,re=0,J){return ne.delegate&&ne.delegate!==this?ne.delegate.schedule(pe,re,J):super.schedule(pe,re,J)}flush(pe){const{actions:re}=this;if(this.active)return void re.push(pe);let J;this.active=!0;do{if(J=pe.execute(pe.state,pe.delay))break}while(pe=re.shift());if(this.active=!1,J){for(;pe=re.shift();)pe.unsubscribe();throw J}}}},3637:(Ke,Se,F)=>{"use strict";F.d(Se,{z:()=>O});var d=F(6465);const O=new(F(6102).v)(d.o)},7771:(Ke,Se,F)=>{"use strict";F.d(Se,{c:()=>J,N:()=>re});var d=F(6465),O=F(6102);const re=new class extends O.v{}(class extends d.o{constructor(ee,W){super(ee,W),this.scheduler=ee,this.work=W}schedule(ee,W=0){return W>0?super.schedule(ee,W):(this.delay=W,this.state=ee,this.scheduler.flush(this),this)}execute(ee,W){return W>0||this.closed?super.execute(ee,W):this._execute(ee,W)}requestAsyncId(ee,W,z=0){return null!==z&&z>0||null===z&&this.delay>0?super.requestAsyncId(ee,W,z):ee.flush(this)}}),J=re},377:(Ke,Se,F)=>{"use strict";F.d(Se,{hZ:()=>ne});const ne="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ke,Se,F)=>{"use strict";F.d(Se,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ke,Se,F)=>{"use strict";F.d(Se,{b:()=>d});const d="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ke,Se,F)=>{"use strict";F.d(Se,{N:()=>ne});const ne=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(Ke,Se,F)=>{"use strict";function d(ne){setTimeout(()=>{throw ne},0)}F.d(Se,{z:()=>d})},4487:(Ke,Se,F)=>{"use strict";function d(ne){return ne}F.d(Se,{y:()=>d})},9796:(Ke,Se,F)=>{"use strict";F.d(Se,{k:()=>d});const d=Array.isArray||(ne=>ne&&"number"==typeof ne.length)},9489:(Ke,Se,F)=>{"use strict";F.d(Se,{z:()=>d});const d=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},9105:(Ke,Se,F)=>{"use strict";function d(ne){return"function"==typeof ne}F.d(Se,{m:()=>d})},1555:(Ke,Se,F)=>{"use strict";function d(ne){return null!==ne&&"object"==typeof ne}F.d(Se,{K:()=>d})},4072:(Ke,Se,F)=>{"use strict";function d(ne){return!!ne&&"function"!=typeof ne.subscribe&&"function"==typeof ne.then}F.d(Se,{t:()=>d})},4869:(Ke,Se,F)=>{"use strict";function d(ne){return ne&&"function"==typeof ne.schedule}F.d(Se,{K:()=>d})},7444:(Ke,Se,F)=>{"use strict";F.d(Se,{s:()=>H});var d=F(5015),ne=F(4449),pe=F(377),J=F(6554),ee=F(9489),W=F(4072),z=F(1555);const H=B=>{if(B&&"function"==typeof B[J.L])return(B=>ie=>{const oe=B[J.L]();if("function"!=typeof oe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return oe.subscribe(ie)})(B);if((0,ee.z)(B))return(0,d.V)(B);if((0,W.t)(B))return(B=>ie=>(B.then(oe=>{ie.closed||(ie.next(oe),ie.complete())},oe=>ie.error(oe)).then(null,ne.z),ie))(B);if(B&&"function"==typeof B[pe.hZ])return(B=>ie=>{const oe=B[pe.hZ]();for(;;){let we;try{we=oe.next()}catch(_e){return ie.error(_e),ie}if(we.done){ie.complete();break}if(ie.next(we.value),ie.closed)break}return"function"==typeof oe.return&&ie.add(()=>{oe.return&&oe.return()}),ie})(B);{const oe=`You provided ${(0,z.K)(B)?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(oe)}}},5015:(Ke,Se,F)=>{"use strict";F.d(Se,{V:()=>d});const d=ne=>O=>{for(let pe=0,re=ne.length;pe<re&&!O.closed;pe++)O.next(ne[pe]);O.complete()}},5556:(Ke,Se,F)=>{"use strict";var d=F(7716);let ne=null;function O(){return ne}const be=new d.OlP("DocumentToken");let ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:W,token:n,providedIn:"platform"}),n})();function W(){return(0,d.LFG)(H)}const z=new d.OlP("Location Initialized");let H=(()=>{class n extends ee{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){B()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){B()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(be))},n.\u0275prov=(0,d.Yz7)({factory:ie,token:n,providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function ie(){return new H((0,d.LFG)(be))}function oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function _e(n){return n&&"?"!==n[0]?"?"+n:n}let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:te,token:n,providedIn:"root"}),n})();function te(n){const e=(0,d.LFG)(be).location;return new Ce((0,d.LFG)(ee),e&&e.origin||"")}const he=new d.OlP("appBaseHref");let Ce=(()=>{class n extends le{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+_e(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,c){const h=this.prepareExternalUrl(o+_e(c));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,c){const h=this.prepareExternalUrl(o+_e(c));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ee),d.LFG(he,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n extends le{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,c){let h=this.prepareExternalUrl(o+_e(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,c){let h=this.prepareExternalUrl(o+_e(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ee),d.LFG(he,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=we(dt(o)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+_e(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,dt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_e(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_e(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le),d.LFG(ee))},n.normalizeQueryParams=_e,n.joinWithSlash=oe,n.stripTrailingSlash=we,n.\u0275prov=(0,d.Yz7)({factory:mt,token:n,providedIn:"root"}),n})();function mt(){return new Ve((0,d.LFG)(le),(0,d.LFG)(ee))}function dt(n){return n.replace(/\/index.html$/,"")}var ce=(()=>((ce=ce||{})[ce.Zero=0]="Zero",ce[ce.One=1]="One",ce[ce.Two=2]="Two",ce[ce.Few=3]="Few",ce[ce.Many=4]="Many",ce[ce.Other=5]="Other",ce))();const xs=d.kL8;class pi{}let Yn=(()=>{class n extends pi{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(xs(r||this.locale)(t)){case ce.Zero:return"zero";case ce.One:return"one";case ce.Two:return"two";case ce.Few:return"few";case ce.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function or(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(c)}return null}class Hi{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ft=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,c,h)=>{if(null==o.previousIndex){const m=this._viewContainer.createEmbeddedView(this._template,new Hi(null,this._ngForOf,-1,-1),null===h?void 0:h),y=new M2(o,m);r.push(y)}else if(null==h)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const m=this._viewContainer.get(c);this._viewContainer.move(m,h);const y=new M2(o,m);r.push(y)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,c=this._viewContainer.length;o<c;o++){const h=this._viewContainer.get(o);h.context.index=o,h.context.count=c,h.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class M2{constructor(e,t){this.record=e,this.view=t}}let Rs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ca,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){wo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){wo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ca{constructor(){this.$implicit=null,this.ngIf=null}}function wo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Sc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:pi,useClass:Yn}]}),n})();function So(n){return"server"===n}let O1=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new ha((0,d.LFG)(be),window)}),n})();class ha{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const c=o.shadowRoot;if(c){const h=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],o-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=da(this.window.history)||da(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function da(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fa{}class pa extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new pa,ne||(ne=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(ji=ji||document.querySelector("base"),ji?ji.getAttribute("href"):null);return null==t?null:function(n){an=an||document.createElement("a"),an.setAttribute("href",n);const e=an.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ji=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return or(document.cookie,e)}}let an,ji=null;const T2=new d.OlP("TRANSITION_ID"),Mr=[{provide:d.ip1,useFactory:function(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<o.length;c++)r.remove(o[c])})}},deps:[T2,be,d.zs3],multi:!0}];class Dn{static init(){(0,d.VLi)(new Dn)}addToWindow(e){d.dqk.getAngularTestability=(r,o=!0)=>{const c=e.findTestabilityInTree(r,o);if(null==c)throw new Error("Could not find testability for element.");return c},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let c=o.length,h=!1;const m=function(y){h=h||y,c--,0==c&&r(h)};o.forEach(function(y){y.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let S2=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const zs=new d.OlP("EventManagerPlugins");let De=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let c=0;c<o.length;c++){const h=o[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zs),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Et{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Nc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),nn=(()=>{class n extends Nc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Lc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Lc))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(be))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Lc(n){O().remove(n)}const ls={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ii=/%COMP%/g;function Pn(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Pn(n,o,t):(o=o.replace(Ii,n),t.push(o))}return t}function Ai(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let f1=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ir(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Ca(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case d.ifc.ShadowDom:return new kc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Pn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(De),d.LFG(nn),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ir{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(ls[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const c=ls[o];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ls[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,o&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ai(r)):this.eventManager.addEventListener(e,t,Ai(r))}}class Ca extends Ir{constructor(e,t,r,o){super(e),this.component=r;const c=Pn(o+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Ii,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Ii,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class kc extends Ir{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Pn(o.id,o.styles,[]);for(let h=0;h<c.length;h++){const m=document.createElement("style");m.textContent=c[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let V1=(()=>{class n extends Et{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(be))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const H1=["alt","control","meta","shift"],Pc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ar={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yd={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zc=(()=>{class n extends Et{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const c=n._normalizeKey(r.pop());let h="";if(H1.forEach(y=>{const E=r.indexOf(y);E>-1&&(r.splice(E,1),h+=y+".")}),h+=c,0!=r.length||0===c.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ar.hasOwnProperty(e)&&(e=Ar[e]))}return Pc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),H1.forEach(c=>{c!=o&&yd[c](t)&&(r+=c+".")}),r+=o,r}static eventCallback(t,r,o){return c=>{n.getEventFullKey(c)===t&&o.runGuarded(()=>r(c))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(be))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ti=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:function(){return(0,d.LFG)(Po)},token:n,providedIn:"root"}),n})(),Po=(()=>{class n extends Ti{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.yhl)(r),(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(be))},n.\u0275prov=(0,d.Yz7)({factory:function(){return function(n){return new Po(n.get(be))}((0,d.LFG)(d.gxx))},token:n,providedIn:"root"}),n})();const U1=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function(){pa.makeCurrent(),Dn.init()},multi:!0},{provide:be,useFactory:function(){return(0,d.RDi)(document),document},deps:[]}]),Hc=[[],{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function(){return new d.qLn},deps:[]},{provide:zs,useClass:V1,multi:!0,deps:[be,d.R0b,d.Lbi]},{provide:zs,useClass:zc,multi:!0,deps:[be]},[],{provide:f1,useClass:f1,deps:[De,nn,d.AFp]},{provide:d.FYo,useExisting:f1},{provide:Nc,useExisting:nn},{provide:nn,useClass:nn,deps:[be]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:De,useClass:De,deps:[zs,d.R0b]},{provide:fa,useClass:S2,deps:[]},[]];let E0=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:T2,useExisting:d.AFp},Mr]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Hc,imports:[Sc,d.hGG]}),n})();"undefined"!=typeof window&&window;var yn=F(4402),cn=F(7574),p1=F(9796),Je=F(8002),xa=F(1555);function $1(n,e){return new cn.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let c=0,h=0;for(let m=0;m<r;m++){const y=(0,yn.D)(n[m]);let E=!1;t.add(y.subscribe({next:T=>{E||(E=!0,h++),o[m]=T},error:T=>t.error(T),complete:()=>{c++,(c===r||!E)&&(h===r&&t.next(e?e.reduce((T,x,k)=>(T[x]=o[k],T),{}):o),t.complete())}}))}})}let G1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Hs=(()=>{class n extends G1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const m1=new d.OlP("NgValueAccessor"),I0={provide:m1,useExisting:(0,d.Gpc)(()=>Tr),multi:!0},R2=new d.OlP("CompositionEventMode");let Tr=(()=>{class n extends G1{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(R2,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[d._Bn([I0]),d.qOj]}),n})();const Qn=new d.OlP("NgValidators"),Sr=new d.OlP("NgAsyncValidators");function qc(n){return null!=n}function P2(n){const e=(0,d.QGY)(n)?(0,yn.D)(n):n;return(0,d.CqO)(e),e}function S0(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Wc(n,e){return e.map(t=>t(n))}function Zc(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function z2(n){return null!=n?function(n){if(!n)return null;const e=n.filter(qc);return 0==e.length?null:function(t){return S0(Wc(t,e))}}(Zc(n)):null}function La(n){return null!=n?function(n){if(!n)return null;const e=n.filter(qc);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,p1.k)(e))return $1(e,null);if((0,xa.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return $1(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return $1(n=1===n.length&&(0,p1.k)(n[0])?n[0]:n,null).pipe((0,Je.U)(t=>e(...t)))}return $1(n,null)}(Wc(t,e).map(P2)).pipe((0,Je.U)(S0))}}(Zc(n)):null}function Vo(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Bs(n){return n._rawValidators}function Kc(n){return n._rawAsyncValidators}function _n(n){return n?Array.isArray(n)?n:[n]:[]}function gi(n,e){return Array.isArray(n)?n.includes(e):n===e}function vi(n,e){const t=_n(e);return _n(n).forEach(o=>{gi(t,o)||t.push(o)}),t}function Cl(n,e){return _n(e).filter(t=>!gi(n,t))}let N0=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=z2(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=La(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})(),fn=(()=>{class n extends N0{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();class cr extends N0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Z1{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let K1=(()=>{class n extends Z1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(cr,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),y1=(()=>{class n extends Z1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fn,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function U(n,e){return[...e.path,n]}function X(n,e){$e(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&yi(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&yi(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fe(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Mt(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ne(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $e(n,e){const t=Bs(n);null!==e.validator?n.setValidators(Vo(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Kc(n);null!==e.asyncValidator?n.setAsyncValidators(Vo(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Ne(e._rawValidators,o),Ne(e._rawAsyncValidators,o)}function Mt(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Bs(n);if(Array.isArray(o)&&o.length>0){const c=o.filter(h=>h!==e.validator);c.length!==o.length&&(t=!0,n.setValidators(c))}}if(null!==e.asyncValidator){const o=Kc(n);if(Array.isArray(o)&&o.length>0){const c=o.filter(h=>h!==e.asyncValidator);c.length!==o.length&&(t=!0,n.setAsyncValidators(c))}}}const r=()=>{};return Ne(e._rawValidators,r),Ne(e._rawAsyncValidators,r),t}function yi(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Q1(n,e){$e(n,e)}function Wr(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function bl(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function On(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(c=>{c.constructor===Tr?t=c:function(n){return Object.getPrototypeOf(n.constructor)===Hs}(c)?r=c:o=c}),o||r||t||null}function O2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const gs="VALID",Ho="INVALID",Oa="PENDING",Uo="DISABLED";function n8(n){return(C1(n)?n.validators:n)||null}function Va(n){return Array.isArray(n)?z2(n):n||null}function $i(n,e){return(C1(e)?e.asyncValidators:n)||null}function Qc(n){return Array.isArray(n)?La(n):n||null}function C1(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class wl{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Va(this._rawValidators),this._composedAsyncValidatorFn=Qc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gs}get invalid(){return this.status===Ho}get pending(){return this.status==Oa}get disabled(){return this.status===Uo}get enabled(){return this.status!==Uo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Va(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Qc(e)}addValidators(e){this.setValidators(vi(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vi(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Cl(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Cl(e,this._rawAsyncValidators))}hasValidator(e){return gi(this._rawValidators,e)}hasAsyncValidator(e){return gi(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Oa,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Uo,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gs,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gs||this.status===Oa)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Uo:gs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Oa,this._hasOwnPendingAsyncValidator=!0;const t=P2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof b1?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof V2&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Uo:this.errors?Ho:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oa)?Oa:this._anyControlsHaveStatus(Ho)?Ho:gs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){C1(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Fa extends wl{constructor(e=null,t,r){super(n8(t),$i(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){O2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){O2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class b1 extends wl{constructor(e,t,r){super(n8(t),$i(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Fa?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,c)=>{r=t(r,o,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class V2 extends wl{constructor(e,t,r){super(n8(t),$i(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Fa?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const r8={provide:fn,useExisting:(0,d.Gpc)(()=>J1)},Jc=(()=>Promise.resolve(null))();let J1=(()=>{class n extends fn{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new d.vpe,this.form=new b1({},z2(t),La(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Jc.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),X(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Jc.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),O2(this._directives,t)})}addFormGroup(t){Jc.then(()=>{const r=this._findContainer(t.path),o=new b1({});Q1(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Jc.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Jc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,bl(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Qn,10),d.Y36(Sr,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([r8]),d.qOj]}),n})(),F2=(()=>{class n extends fn{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return U(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const wd={provide:cr,useExisting:(0,d.Gpc)(()=>Xc)},H2=(()=>Promise.resolve(null))();let Xc=(()=>{class n extends cr{constructor(t,r,o,c){super(),this.control=new Fa,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=On(0,c)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Wr(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?U(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){X(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){H2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;H2.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fn,9),d.Y36(Qn,10),d.Y36(Sr,10),d.Y36(m1,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([wd]),d.qOj,d.TTD]}),n})(),$s=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const o8={provide:m1,useExisting:(0,d.Gpc)(()=>B2),multi:!0};let U2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),a8=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:function(){return new n},token:n,providedIn:U2}),n})(),B2=(()=>{class n extends Hs{constructor(t,r,o,c){super(t,r),this._registry=o,this._injector=c,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(cr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(a8),d.Y36(d.zs3))},n.\u0275dir=d.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[d._Bn([o8]),d.qOj]}),n})();const k0=new d.OlP("NgModelWithFormControlWarning"),Md={provide:fn,useExisting:(0,d.Gpc)(()=>Ha)};let Ha=(()=>{class n extends fn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return X(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){fe(t.control||null,t,!1),O2(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,bl(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(fe(r||null,t),o instanceof Fa&&(X(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Q1(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return Mt(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$e(this.form,this),this._oldForm&&Mt(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Qn,10),d.Y36(Sr,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Md]),d.qOj,d.TTD]}),n})();const X1={provide:fn,useExisting:(0,d.Gpc)(()=>eo)};let eo=(()=>{class n extends F2{constructor(t,r,o){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(o)}_checkParentType(){u8(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fn,13),d.Y36(Qn,10),d.Y36(Sr,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[d._Bn([X1]),d.qOj]}),n})();const Bo={provide:fn,useExisting:(0,d.Gpc)(()=>z0)};let z0=(()=>{class n extends fn{constructor(t,r,o){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(o)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return U(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){u8(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fn,13),d.Y36(Qn,10),d.Y36(Sr,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[d._Bn([Bo]),d.qOj]}),n})();function u8(n){return!(n instanceof eo||n instanceof Ha||n instanceof z0)}const O0={provide:cr,useExisting:(0,d.Gpc)(()=>Ua)};let Ua=(()=>{class n extends cr{constructor(t,r,o,c,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=On(0,c)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Wr(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return U(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fn,13),d.Y36(Qn,10),d.Y36(Sr,10),d.Y36(m1,10),d.Y36(k0,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([O0]),d.qOj,d.TTD]}),n._ngModelWarningSentOnce=!1,n})(),p8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[U2]]}),n})(),Vn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[p8]}),n})(),W0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:k0,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[p8]}),n})(),ja=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,c=null,h=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(c=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(c=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new b1(o,{asyncValidators:h,updateOn:m,validators:c})}control(t,r,o){return new Fa(t,r,o)}array(t,r,o){const c=t.map(h=>this._createControl(h));return new V2(c,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof Fa||t instanceof b1||t instanceof V2?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:function(){return new n},token:n,providedIn:W0}),n})(),K0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var ur=F(8939),J0=F(3637),st=F(5917),Tt=F(6643),_i=F(3282);function X0(...n){return(0,_i.J)(1)((0,st.of)(...n))}var g8=F(4869);function n4(...n){const e=n[n.length-1];return(0,g8.K)(e)?(n.pop(),t=>X0(n,t,e)):t=>X0(n,t)}var Gi=F(7393);function xr(){return n=>n.lift(new e3)}class e3{call(e,t){return t.subscribe(new xl(e))}}class xl extends Gi.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function $a(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new to(n,e,t))}}class to{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new r4(e,this.accumulator,this.seed,this.hasSeed))}}class r4 extends Gi.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function Dl(n,e){return t=>t.lift(new Nl(n,e))}class Nl{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Ll(e,this.compare,this.keySelector))}}class Ll extends Gi.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}function M1(n,e){return function(r){return r.lift(new ym(n,e))}}class ym{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new v8(e,this.predicate,this.thisArg))}}class v8 extends Gi.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}F(4671);var de,C=F(4486),p=F(8239),g=F(5452),b=F(6034),N=F(5601),M=F(3854),Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ve={},je=je||{},Oe=Q||self;function nt(){}function Wn(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kr(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var i4="closure_uid_"+(1e9*Math.random()>>>0),r3=0;function y8(n,e,t){return n.call.apply(n.bind,arguments)}function _8(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Mn(n,e,t){return(Mn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y8:_8).apply(null,arguments)}function Di(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Dr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,c){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function no(){this.s=this.s,this.o=this.o}var _m={};no.prototype.s=!1,no.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,i4)&&n[i4]||(n[i4]=++r3)}(this);delete _m[n]}},no.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qi=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Rl=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in o&&e.call(t,o[c],c,n)};function Cm(n){return Array.prototype.concat.apply([],arguments)}function C8(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function q2(n){return/^[\s\xa0]*$/.test(n)}var Ci,Pd=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ni(n,e){return-1!=n.indexOf(e)}function s3(n,e){return n<e?-1:n>e?1:0}e:{var zd=Oe.navigator;if(zd){var OC=zd.userAgent;if(OC){Ci=OC;break e}}Ci=""}function W2(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function b8(n){const e={};for(const t in n)e[t]=n[t];return e}var Od="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bm(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let c=0;c<Od.length;c++)t=Od[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function o3(n){return o3[" "](n),n}o3[" "]=nt;var a3,n,FC=Ni(Ci,"Opera"),kl=Ni(Ci,"Trident")||Ni(Ci,"MSIE"),wm=Ni(Ci,"Edge"),Vd=wm||kl,Em=Ni(Ci,"Gecko")&&!(Ni(Ci.toLowerCase(),"webkit")&&!Ni(Ci,"Edge"))&&!(Ni(Ci,"Trident")||Ni(Ci,"MSIE"))&&!Ni(Ci,"Edge"),Mm=Ni(Ci.toLowerCase(),"webkit")&&!Ni(Ci,"Edge");function w8(){var n=Oe.document;return n?n.documentMode:void 0}e:{var c3="",Fd=(n=Ci,Em?/rv:([^\);]+)(\)|;)/.exec(n):wm?/Edge\/([\d\.]+)/.exec(n):kl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Mm?/WebKit\/(\S+)/.exec(n):FC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Fd&&(c3=Fd?Fd[1]:""),kl){var Hd=w8();if(null!=Hd&&Hd>parseFloat(c3)){a3=String(Hd);break e}}a3=c3}var Im={};function Am(){return e=Im,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Pd(String(a3)).split("."),t=Pd("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",c=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;n=s3(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||s3(0==o[2].length,0==c[2].length)||s3(o[2],c[2]),o=o[3],c=c[3]}while(0==n)}return 0<=n}();var e}var Tm=Oe.document&&kl&&(w8()||parseInt(a3,10))||void 0,HC=function(){if(!Oe.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Oe.addEventListener("test",nt,e),Oe.removeEventListener("test",nt,e)}catch(t){}return n}();function Nr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function l3(n,e){if(Nr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Em){e:{try{o3(e.nodeName);var o=!0;break e}catch(c){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Sm[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&l3.Z.h.call(this)}}Nr.prototype.h=function(){this.defaultPrevented=!0},Dr(l3,Nr);var Sm={2:"touch",3:"pen",4:"mouse"};l3.prototype.h=function(){l3.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Pl="closure_listenable_"+(1e6*Math.random()|0),xm=0;function Bd(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++xm,this.ca=this.fa=!1}function u3(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function s4(n){this.src=n,this.g={},this.h=0}function zl(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],o=qi(r,e);(c=0<=o)&&Array.prototype.splice.call(r,o,1),c&&(u3(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function E8(n,e,t,r){for(var o=0;o<n.length;++o){var c=n[o];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return o}return-1}s4.prototype.add=function(n,e,t,r,o){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=E8(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new Bd(e,this.src,c,!!r,o)).fa=t,n.push(e)),e};var h3="closure_lm_"+(1e6*Math.random()|0),M8={};function I8(n,e,t,r,o){if(r&&r.once)return jd(n,e,t,r,o);if(Array.isArray(e)){for(var c=0;c<e.length;c++)I8(n,e[c],t,r,o);return null}return t=T8(t),n&&n[Pl]?n.N(e,t,Kr(r)?!!r.capture:!!r,o):Ol(n,e,t,!1,r,o)}function Ol(n,e,t,r,o,c){if(!e)throw Error("Invalid event type");var h=Kr(o)?!!o.capture:!!o,m=A8(n);if(m||(n[h3]=m=new s4(n)),(t=m.add(e,t,r,h,c)).proxy)return t;if(r=function(){var e=qd;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)HC||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Gd(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function jd(n,e,t,r,o){if(Array.isArray(e)){for(var c=0;c<e.length;c++)jd(n,e[c],t,r,o);return null}return t=T8(t),n&&n[Pl]?n.O(e,t,Kr(r)?!!r.capture:!!r,o):Ol(n,e,t,!0,r,o)}function Dm(n,e,t,r,o){if(Array.isArray(e))for(var c=0;c<e.length;c++)Dm(n,e[c],t,r,o);else r=Kr(r)?!!r.capture:!!r,t=T8(t),n&&n[Pl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=E8(c=n.g[e],t,r,o))&&(u3(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=A8(n))&&(e=n.g[e.toString()],n=-1,e&&(n=E8(e,t,r,o)),(t=-1<n?e[n]:null)&&$d(t))}function $d(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Pl])zl(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Gd(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=A8(e))?(zl(t,n),0==t.h&&(t.src=null,e[h3]=null)):u3(n)}}}function Gd(n){return n in M8?M8[n]:M8[n]="on"+n}function qd(n,e){if(n.ca)n=!0;else{e=new l3(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&$d(n),n=t.call(r,e)}return n}function A8(n){return(n=n[h3])instanceof s4?n:null}var Nm="__closure_events_fn_"+(1e9*Math.random()>>>0);function T8(n){return"function"==typeof n?n:(n[Nm]||(n[Nm]=function(e){return n.handleEvent(e)}),n[Nm])}function Yr(){no.call(this),this.i=new s4(this),this.P=this,this.I=null}function Qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Nr(e,n);else if(e instanceof Nr)e.target=e.target||n;else{var o=e;bm(e=new Nr(r,n),o)}if(o=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];o=S8(h,r,!0,e)&&o}if(o=S8(h=e.g=n,r,!0,e)&&o,o=S8(h,r,!1,e)&&o,t)for(c=0;c<t.length;c++)o=S8(h=e.g=t[c],r,!1,e)&&o}function S8(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.ca&&h.capture==t){var m=h.listener,y=h.ia||h.src;h.fa&&zl(n.i,h),o=!1!==m.call(y,r)&&o}}return o&&!r.defaultPrevented}Dr(Yr,no),Yr.prototype[Pl]=!0,Yr.prototype.removeEventListener=function(n,e,t,r){Dm(this,n,e,t,r)},Yr.prototype.M=function(){if(Yr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)u3(t[r]);delete n.g[e],n.h--}}this.I=null},Yr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Yr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Wd=Oe.JSON.stringify;function ro(){var n=Rm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Yd,Zd=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new jC,n=>n.reset());class jC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $C(n){Oe.setTimeout(()=>{throw n},0)}function Kd(n,e){Yd||function(){var n=Oe.Promise.resolve(void 0);Yd=function(){n.then(GC)}}(),Qd||(Yd(),Qd=!0),Rm.add(n,e)}var Qd=!1,Rm=new class{constructor(){this.h=this.g=null}add(e,t){const r=Zd.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function GC(){for(var n;n=ro();){try{n.h.call(n.g)}catch(t){$C(t)}var e=Zd;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Qd=!1}function ft(n,e){Yr.call(this),this.h=n||1,this.g=e||Oe,this.j=Mn(this.kb,this),this.l=Date.now()}function x8(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function D8(n,e,t){if("function"==typeof n)t&&(n=Mn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Mn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Oe.setTimeout(n,e||0)}function d3(n){n.g=D8(()=>{n.g=null,n.i&&(n.i=!1,d3(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Dr(ft,Yr),(de=ft.prototype).da=!1,de.S=null,de.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qr(this,"tick"),this.da&&(x8(this),this.start()))}},de.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},de.M=function(){ft.Z.M.call(this),x8(this),delete this.g};class io extends no{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:d3(this)}M(){super.M(),this.g&&(Oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vl(n){no.call(this),this.h=n,this.g={}}Dr(Vl,no);var km=[];function N8(n,e,t,r){Array.isArray(t)||(t&&(km[0]=t.toString()),t=km);for(var o=0;o<t.length;o++){var c=I8(e,t[o],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function jo(n){W2(n.g,function(e,t){this.g.hasOwnProperty(t)&&$d(e)},n),n.g={}}function Fl(){this.g=!0}function f3(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var c=o[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<o.length;h++)o[h]=""}}}return Wd(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Vl.prototype.M=function(){Vl.Z.M.call(this),jo(this)},Vl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fl.prototype.Aa=function(){this.g=!1},Fl.prototype.info=function(){};var Wi={},p3=null;function o4(){return p3=p3||new Yr}function L8(n){Nr.call(this,Wi.Ma,n)}function R8(n){const e=o4();Qr(e,new L8(e,n))}function Om(n,e){Nr.call(this,Wi.STAT_EVENT,n),this.stat=e}function Li(n){const e=o4();Qr(e,new Om(e,n))}function qC(n,e){Nr.call(this,Wi.Na,n),this.size=e}function m3(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Oe.setTimeout(function(){n()},e)}Wi.Ma="serverreachability",Dr(L8,Nr),Wi.STAT_EVENT="statevent",Dr(Om,Nr),Wi.Na="timingevent",Dr(qC,Nr);var Xd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ef={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function k8(){}function P8(){}k8.prototype.h=null;var Um,z8={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Fm(){Nr.call(this,"d")}function Hm(){Nr.call(this,"c")}function tf(){}function O8(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Vl(this),this.P=uA,this.W=new ft(n=Vd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new WC}function WC(){this.i=null,this.g="",this.h=!1}Dr(Fm,Nr),Dr(Hm,Nr),Dr(tf,k8),tf.prototype.g=function(){return new XMLHttpRequest},tf.prototype.i=function(){return{}},Um=new tf;var uA=45e3,Bm={},nf={};function jm(n,e,t){n.K=1,n.v=v3(_s(e)),n.s=t,n.U=!0,qa(n,null)}function qa(n,e){n.F=Date.now(),a4(n),n.A=_s(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Cs(t.h,"t",r),n.C=0,t=n.l.H,n.h=new WC,n.g=pf(n.l,t?e:null,!n.s),0<n.O&&(n.L=new io(Mn(n.Ia,n,n.g),n.O)),N8(n.V,n.g,"readystatechange",n.gb),e=n.H?b8(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),R8(1),function(n,e,t,r,o,c){n.info(function(){if(n.g)if(c)for(var h="",m=c.split("&"),y=0;y<m.length;y++){var E=m[y].split("=");if(1<E.length){var T=E[0];E=E[1];var x=T.split("_");h=2<=x.length&&"type"==x[1]?h+(T+"=")+E+"&":h+(T+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function V8(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function $m(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Gm(n,t),o==nf){4==e&&(n.o=4,Li(14),r=!1),f3(n.j,n.m,null,"[Incomplete Response]");break}if(o==Bm){n.o=4,Li(15),f3(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}f3(n.j,n.m,o,null),F8(n,o)}V8(n)&&o!=nf&&o!=Bm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Li(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),df(e),e.L=!0,Li(11))):(f3(n.j,n.m,t,"[Invalid Chunked Response]"),ys(n),g3(n))}function Gm(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?nf:(t=Number(e.substring(t,r)),isNaN(t)?Bm:(r+=1)+t>e.length?nf:(e=e.substr(r,t),n.C=r+t,e))}function a4(n){n.Y=Date.now()+n.P,rf(n,n.P)}function rf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=m3(Mn(n.eb,n),e)}function Hl(n){n.B&&(Oe.clearTimeout(n.B),n.B=null)}function g3(n){0==n.l.G||n.I||ff(n.l,n)}function ys(n){Hl(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,x8(n.W),jo(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function F8(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||_3(t.i,n)))if(t.I=n.N,!n.J&&_3(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=m3(Mn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ya(t),lf(t)}hf(t),Li(18)}if(1>=ng(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else oo(t,11)}else if((n.J||t.g==n)&&Ya(t),!q2(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let E=o[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const T=E[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const x=E[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const k=E[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const Y=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var c=r.i;!c.g&&(Ni(Y,"spdy")||Ni(Y,"quic")||Ni(Y,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(U8(c,c.h),c.h=null))}if(r.D){const Ee=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;Ee&&(r.sa=Ee,Fn(r.F,r.D,Ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=K8(r,r.H?r.la:null,r.W),h.J){rg(r.i,h);var m=h,y=r.K;y&&m.setTimeout(y),m.B&&(Hl(m),a4(m)),r.g=h}else I3(r);0<t.l.length&&M3(t)}else"stop"!=E[0]&&"close"!=E[0]||oo(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?oo(t,7):E3(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}R8(4)}catch(E){}}function qm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Wn(n)||"string"==typeof n)Rl(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Wn(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Wn(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var c=0;c<o;c++)e.call(void 0,r[c],t&&t[c],n)}}function Z2(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Z2)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function sf(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];K2(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)K2(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function K2(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(de=O8.prototype).setTimeout=function(n){this.P=n},de.gb=function(n){n=n.target;const e=this.L;e&&3==Ka(n)?e.l():this.Ia(n)},de.Ia=function(n){try{if(n==this.g)e:{const T=Ka(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>T)&&(3!=T||Vd||this.g&&(this.h.h||this.g.ga()||q8(this.g)))){this.I||4!=T||7==e||R8(8==e||0>=x?3:2),Hl(this);var t=this.g.ba();this.N=t;t:if(V8(this)){var r=q8(this.g);n="";var o=r.length,c=4==Ka(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ys(this),g3(this);var h="";break t}this.h.i=new Oe.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,c,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,y=this.g;if((m=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q2(m)){var E=m;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Li(12),ys(this),g3(this);break e}f3(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,F8(this,t)}this.U?($m(this,T,h),Vd&&this.i&&3==T&&(N8(this.V,this.W,"tick",this.fb),this.W.start())):(f3(this.j,this.m,h,null),F8(this,h)),4==T&&ys(this),this.i&&!this.I&&(4==T?ff(this.l,this):(this.i=!1,a4(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Li(12)):(this.o=0,Li(13)),ys(this),g3(this)}}}catch(T){}},de.fb=function(){if(this.g){var n=Ka(this.g),e=this.g.ga();this.C<e.length&&(Hl(this),$m(this,n,e),this.i&&4!=n&&a4(this))}},de.cancel=function(){this.I=!0,ys(this)},de.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(R8(3),Li(17)),ys(this),this.o=2,g3(this)):rf(this,this.Y-n)},(de=Z2.prototype).R=function(){sf(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},de.T=function(){return sf(this),this.g.concat()},de.get=function(n,e){return K2(this.h,n)?this.h[n]:e},de.set=function(n,e){K2(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},de.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],c=this.get(o);n.call(e,c,o,this)}};var Wm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function so(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof so){this.g=void 0!==e?e:n.g,Ul(this,n.j),this.s=n.s,Wa(this,n.i),Y2(this,n.m),this.l=n.l,e=n.h;var t=new y3;t.i=e.i,e.g&&(t.g=new Z2(e.g),t.h=e.h),c4(this,t),this.o=n.o}else n&&(t=String(n).match(Wm))?(this.g=!!e,Ul(this,t[1]||"",!0),this.s=l4(t[2]||""),Wa(this,t[3]||"",!0),Y2(this,t[4]),this.l=l4(t[5]||"",!0),c4(this,t[6]||"",!0),this.o=l4(t[7]||"")):(this.g=!!e,this.h=new y3(null,this.g))}function _s(n){return new so(n)}function Ul(n,e,t){n.j=t?l4(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Wa(n,e,t){n.i=t?l4(e,!0):e}function Y2(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function c4(n,e,t){e instanceof y3?(n.h=e,function(n,e){e&&!n.j&&(Za(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Xm(this,r),Cs(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Bl(e,Qm)),n.h=new y3(e,n.g))}function Fn(n,e,t){n.h.set(e,t)}function v3(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function l4(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Bl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,H8),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function H8(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}so.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Bl(e,Km,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Bl(e,Km,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Bl(t,"/"==t.charAt(0)?hA:Ym,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Bl(t,Jm)),n.join("")};var Km=/[#\/\?@]/g,Ym=/[#\?:]/g,hA=/[#\?]/g,Qm=/[#\?@]/g,Jm=/#/g;function y3(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Za(n){n.g||(n.g=new Z2,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var c=n[t].substring(0,r);o=n[t].substring(r+1)}else c=n[t];e(c,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Xm(n,e){Za(n),e=jl(n,e),K2(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,K2((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&sf(n)))}function eg(n,e){return Za(n),e=jl(n,e),K2(n.g.h,e)}function Cs(n,e,t){Xm(n,e),0<t.length&&(n.i=null,n.g.set(jl(n,e),C8(t)),n.h+=t.length)}function jl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function QC(n){this.l=n||tg,n=Oe.PerformanceNavigationTiming?0<(n=Oe.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Oe.g&&Oe.g.Ea&&Oe.g.Ea()&&Oe.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(de=y3.prototype).add=function(n,e){Za(this),this.i=null,n=jl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},de.forEach=function(n,e){Za(this),this.g.forEach(function(t,r){Rl(t,function(o){n.call(e,o,r,this)},this)},this)},de.T=function(){Za(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],c=0;c<o.length;c++)t.push(e[r]);return t},de.R=function(n){Za(this);var e=[];if("string"==typeof n)eg(this,n)&&(e=Cm(e,this.g.get(jl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Cm(e,n[t])}return e},de.set=function(n,e){return Za(this),this.i=null,eg(this,n=jl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},de.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},de.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var h=o;""!==r[c]&&(h+="="+encodeURIComponent(String(r[c]))),n.push(h)}}return this.i=n.join("&")};var tg=10;function JC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ng(n){return n.h?1:n.g?n.g.size:0}function _3(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function U8(n,e){n.g?n.g.add(e):n.h=e}function rg(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ig(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return C8(n.i)}function af(){}function sg(){this.g=new af}function XC(n,e,t){const r=t||"";try{qm(n,function(o,c){let h=o;Kr(o)&&(h=Wd(o)),e.push(r+c+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function B8(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(c){}}function C3(n){this.l=n.$b||null,this.j=n.ib||!1}function b3(n,e){Yr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=j8,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}QC.prototype.cancel=function(){if(this.i=ig(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},af.prototype.stringify=function(n){return Oe.JSON.stringify(n,void 0)},af.prototype.parse=function(n){return Oe.JSON.parse(n,void 0)},Dr(C3,k8),C3.prototype.g=function(){return new b3(this.l,this.j)},C3.prototype.i=function(n){return function(){return n}}({}),Dr(b3,Yr);var j8=0;function ag(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function bs(n){n.readyState=4,n.l=null,n.j=null,n.A=null,u4(n)}function u4(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(de=b3.prototype).open=function(n,e){if(this.readyState!=j8)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,u4(this)},de.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Oe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},de.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bs(this)),this.readyState=j8},de.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,u4(this)),this.g&&(this.readyState=3,u4(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Oe.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ag(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},de.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?bs(this):u4(this),3==this.readyState&&ag(this)}},de.Ua=function(n){this.g&&(this.response=this.responseText=n,bs(this))},de.Ta=function(n){this.g&&(this.response=n,bs(this))},de.ha=function(){this.g&&bs(this)},de.setRequestHeader=function(n,e){this.v.append(n,e)},de.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},de.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(b3.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var eb=Oe.JSON.parse;function vr(n){Yr.call(this),this.headers=new Z2,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tb,this.K=this.L=!1}Dr(vr,Yr);var tb="",cg=/^https?$/i,nb=["POST","PUT"];function ib(n){return"content-type"==n.toLowerCase()}function $8(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lg(n),h4(n)}function lg(n){n.D||(n.D=!0,Qr(n,"complete"),Qr(n,"error"))}function ug(n){if(n.h&&void 0!==je&&(!n.C[1]||4!=Ka(n)||2!=n.ba()))if(n.v&&4==Ka(n))D8(n.Fa,0,n);else if(Qr(n,"readystatechange"),4==Ka(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Wm)[1]||null;if(!o&&Oe.self&&Oe.self.location){var c=Oe.self.location.protocol;o=c.substr(0,c.length-1)}r=!cg.test(o?o.toLowerCase():"")}t=r}if(t)Qr(n,"complete"),Qr(n,"success");else{n.m=6;try{var h=2<Ka(n)?n.g.statusText:""}catch(y){h=""}n.j=h+" ["+n.ba()+"]",lg(n)}}finally{h4(n)}}}function h4(n,e){if(n.g){G8(n);const t=n.g,r=n.C[0]?nt:null;n.g=null,n.C=null,e||Qr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function G8(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Oe.clearTimeout(n.A),n.A=null)}function Ka(n){return n.g?n.g.readyState:0}function q8(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case tb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function W8(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return W2(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function w3(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hg(n){this.za=0,this.l=[],this.h=new Fl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=w3("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=w3("baseRetryDelayMs",5e3,n),this.$a=w3("retryDelaySeedMs",1e4,n),this.Ya=w3("forwardChannelMaxRetries",2,n),this.ra=w3("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new QC(n&&n.concurrentRequestLimit),this.Ca=new sg,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function E3(n){if(dg(n),3==n.G){var e=n.V++,t=_s(n.F);Fn(t,"SID",n.J),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),$l(n,t),(e=new O8(n,n.h,e,void 0)).K=2,e.v=v3(_s(t)),t=!1,Oe.navigator&&Oe.navigator.sendBeacon&&(t=Oe.navigator.sendBeacon(e.v.toString(),"")),!t&&Oe.Image&&((new Image).src=e.v,t=!0),t||(e.g=pf(e.l,null),e.g.ea(e.v)),e.F=Date.now(),a4(e)}pg(n)}function lf(n){n.g&&(df(n),n.g.cancel(),n.g=null)}function dg(n){lf(n),n.u&&(Oe.clearTimeout(n.u),n.u=null),Ya(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Oe.clearTimeout(n.m),n.m=null)}function Z8(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&M3(n)}function M3(n){JC(n.i)||n.m||(n.m=!0,Kd(n.Ha,n),n.C=0)}function uf(n,e){var t;t=e?e.m:n.V++;const r=_s(n.F);Fn(r,"SID",n.J),Fn(r,"RID",t),Fn(r,"AID",n.U),$l(n,r),n.o&&n.s&&W8(r,n.o,n.s),t=new O8(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=$o(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),U8(n.i,t),jm(t,r,e)}function $l(n,e){n.j&&qm({},function(t,r){Fn(e,r,t)})}function $o(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Mn(n.j.Oa,n.j,n):null;e:{var o=n.l;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=o[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let m=!0;for(let y=0;y<t;y++){let E=o[y].h;const T=o[y].g;if(E-=c,0>E)c=Math.max(0,o[y].h-100),m=!1;else try{XC(T,h,"req"+E+"_")}catch(x){r&&r(T)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function I3(n){n.g||n.u||(n.Y=1,Kd(n.Ga,n),n.A=0)}function hf(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=m3(Mn(n.Ga,n),Gl(n,n.A)),n.A++,0))}function df(n){null!=n.B&&(Oe.clearTimeout(n.B),n.B=null)}function sb(n){n.g=new O8(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=_s(n.oa);Fn(e,"RID","rpc"),Fn(e,"SID",n.J),Fn(e,"CI",n.N?"0":"1"),Fn(e,"AID",n.U),$l(n,e),Fn(e,"TYPE","xmlhttp"),n.o&&n.s&&W8(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=v3(_s(e)),t.s=null,t.U=!0,qa(t,n)}function Ya(n){null!=n.v&&(Oe.clearTimeout(n.v),n.v=null)}function ff(n,e){var t=null;if(n.g==e){Ya(n),df(n),n.g=null;var r=2}else{if(!_3(n.i,e))return;t=e.D,rg(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Qr(r=o4(),new qC(r,t,e,o)),M3(n)}else I3(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(ng(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=m3(Mn(n.Ha,n,e),Gl(n,n.C)),n.C++,0)))}(n,e)||2==r&&hf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:oo(n,5);break;case 4:oo(n,10);break;case 3:oo(n,6);break;default:oo(n,2)}}function Gl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function oo(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Mn(n.jb,n);t||(t=new so("//www.google.com/images/cleardot.gif"),Oe.location&&"http"==Oe.location.protocol||Ul(t,"https"),v3(t)),function(n,e){const t=new Fl;if(Oe.Image){const r=new Image;r.onload=Di(B8,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Di(B8,t,r,"TestLoadImage: error",!1,e),r.onabort=Di(B8,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Di(B8,t,r,"TestLoadImage: timeout",!1,e),Oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Li(2);n.G=0,n.j&&n.j.va(e),pg(n),dg(n)}function pg(n){n.G=0,n.I=-1,n.j&&((0!=ig(n.i).length||0!=n.l.length)&&(n.i.i.length=0,C8(n.l),n.l.length=0),n.j.ua())}function K8(n,e,t){let r=function(n){return n instanceof so?_s(n):new so(n,void 0)}(t);if(""!=r.i)e&&Wa(r,e+"."+r.i),Y2(r,r.m);else{const o=Oe.location;r=function(n,e,t,r){var o=new so(null,void 0);return n&&Ul(o,n),e&&Wa(o,e),t&&Y2(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&W2(n.aa,function(o,c){Fn(r,c,o)}),t=n.sa,(e=n.D)&&t&&Fn(r,e,t),Fn(r,"VER",n.ma),$l(n,r),r}function pf(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vr(t&&n.Ba&&!n.qa?new C3({ib:!0}):n.qa)).L=n.H,e}function mg(){}function A3(){if(kl&&!(10<=Number(Tm)))throw Error("Environmental error: no available transport.")}function Gs(n,e){Yr.call(this),this.g=new hg(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!q2(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!q2(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ql(this)}function Y8(n){Fm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function gg(){Hm.call(this),this.status=1}function ql(n){this.g=n}(de=vr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Um.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Um),this.g.onreadystatechange=Mn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void $8(this,c)}n=t||"";const o=new Z2(this.headers);r&&qm(r,function(c,h){o.set(h,c)}),r=function(n){e:{var e=ib;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Oe.FormData&&n instanceof Oe.FormData,!(0<=qi(nb,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(c,h){this.g.setRequestHeader(h,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{G8(this),0<this.B&&((this.K=function(n){return kl&&Am()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mn(this.pa,this)):this.A=D8(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){$8(this,c)}},de.pa=function(){void 0!==je&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))},de.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qr(this,"complete"),Qr(this,"abort"),h4(this))},de.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),h4(this,!0)),vr.Z.M.call(this)},de.Fa=function(){this.s||(this.F||this.v||this.l?ug(this):this.cb())},de.cb=function(){ug(this)},de.ba=function(){try{return 2<Ka(this)?this.g.status:-1}catch(n){return-1}},de.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},de.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),eb(e)}},de.Da=function(){return this.m},de.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(de=hg.prototype).ma=8,de.G=1,de.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},de.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new O8(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=b8(c),bm(c,this.P)):c=this.P),null===this.o&&(o.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$o(this,o,e),Fn(t=_s(this.F),"RID",n),Fn(t,"CVER",22),this.D&&Fn(t,"X-HTTP-Session-Id",this.D),$l(this,t),this.o&&c&&W8(t,this.o,c),U8(this.i,o),this.Ra&&Fn(t,"TYPE","init"),this.ja?(Fn(t,"$req",e),Fn(t,"SID","null"),o.$=!0,jm(o,t,null)):jm(o,t,e),this.G=2}}else 3==this.G&&(n?uf(this,n):0==this.l.length||JC(this.i)||uf(this))},de.Ga=function(){if(this.u=null,sb(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=m3(Mn(this.bb,this),n)}},de.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Li(10),lf(this),sb(this))},de.ab=function(){null!=this.v&&(this.v=null,lf(this),hf(this),Li(19))},de.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Li(2)):(this.h.info("Failed to ping google.com"),Li(1))},(de=mg.prototype).xa=function(){},de.wa=function(){},de.va=function(){},de.ua=function(){},de.Oa=function(){},A3.prototype.g=function(n,e){return new Gs(n,e)},Dr(Gs,Yr),Gs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Kd(Mn(n.hb,n,e))),Li(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=K8(n,null,n.W),M3(n)},Gs.prototype.close=function(){E3(this.g)},Gs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Z8(this.g,e)}else this.v?((e={}).__data__=Wd(n),Z8(this.g,e)):Z8(this.g,n)},Gs.prototype.M=function(){this.g.j=null,delete this.j,E3(this.g),delete this.g,Gs.Z.M.call(this)},Dr(Y8,Fm),Dr(gg,Hm),Dr(ql,mg),ql.prototype.xa=function(){Qr(this.g,"a")},ql.prototype.wa=function(n){Qr(this.g,new Y8(n))},ql.prototype.va=function(n){Qr(this.g,new gg(n))},ql.prototype.ua=function(){Qr(this.g,"b")},A3.prototype.createWebChannel=A3.prototype.g,Gs.prototype.send=Gs.prototype.u,Gs.prototype.open=Gs.prototype.m,Gs.prototype.close=Gs.prototype.close,Xd.NO_ERROR=0,Xd.TIMEOUT=8,Xd.HTTP_ERROR=6,ef.COMPLETE="complete",P8.EventType=z8,z8.OPEN="a",z8.CLOSE="b",z8.ERROR="c",z8.MESSAGE="d",Yr.prototype.listen=Yr.prototype.N,vr.prototype.listenOnce=vr.prototype.O,vr.prototype.getLastError=vr.prototype.La,vr.prototype.getLastErrorCode=vr.prototype.Da,vr.prototype.getStatus=vr.prototype.ba,vr.prototype.getResponseJson=vr.prototype.Qa,vr.prototype.getResponseText=vr.prototype.ga,vr.prototype.send=vr.prototype.ea;var vg=ve.createWebChannelTransport=function(){return new A3},Wl=ve.getStatEventTarget=function(){return o4()},Q8=ve.ErrorCode=Xd,ob=ve.EventType=ef,ab=ve.Event=Wi,d4=ve.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},cb=ve.FetchXmlHttpFactory=C3,J8=ve.WebChannel=P8,lb=ve.XhrIo=vr;const yg="@firebase/firestore";class Ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");let Zl="9.1.3";const Qa=new N.Yd("@firebase/firestore");function In(){return Qa.logLevel}function Fe(n,...e){if(Qa.logLevel<=N.in.DEBUG){const t=e.map(T3);Qa.debug(`Firestore (${Zl}): ${n}`,...t)}}function Cn(n,...e){if(Qa.logLevel<=N.in.ERROR){const t=e.map(T3);Qa.error(`Firestore (${Zl}): ${n}`,...t)}}function f4(n,...e){if(Qa.logLevel<=N.in.WARN){const t=e.map(T3);Qa.warn(`Firestore (${Zl}): ${n}`,...t)}}function T3(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Zl}) INTERNAL ASSERTION FAILED: `+n;throw Cn(e),new Error(e)}function pt(n,e){n||rt()}function Be(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _g{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class hb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ri.UNAUTHENTICATED))}shutdown(){}}class S3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gf{constructor(e){this.t=e,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const c=E=>this.i!==o?(o=this.i,t(E)):Promise.resolve();let h=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Lr,e.enqueueRetryable(()=>c(this.currentUser))};const m=()=>{const E=h;e.enqueueRetryable((0,p.Z)(function*(){yield E.promise,yield c(r.currentUser)}))},y=E=>{Fe("FirebaseCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(E=>y(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(Fe("FirebaseCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt("string"==typeof r.accessToken),new _g(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new Ri(e)}}class Cg{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ri.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class bg{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Cg(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ws{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.g(r),this.p=r=>t.writeSequenceNumber(r))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function wg(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ws.T=-1;class Eg{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=wg(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Kl(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Mg(n){return n+"\0"}class Rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Rr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function vf(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function p4(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ig(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class X8{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===X8.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof X8?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=e.get(o),h=t.get(o);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends X8{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const yf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bi extends X8{construct(e,t,r){return new bi(e,t,r)}static isValidIdentifier(e){return yf.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bi(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(0===r.length)throw new ke(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new ke(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new ke(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(c(),o++)}if(c(),h)throw new ke(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bi(t)}static emptyPath(){return new bi([])}}class m4{constructor(e){this.fields=e,e.sort(bi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wi(t)}static fromUint8Array(e){const t=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(e);return new wi(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wi.EMPTY_BYTE_STRING=new wi("");const ao=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function g4(n){if(pt(!!n),"string"==typeof n){let e=0;const t=ao.exec(n);if(pt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kr(n.seconds),nanos:kr(n.nanos)}}function kr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function x3(n){return"string"==typeof n?wi.fromBase64String(n):wi.fromUint8Array(n)}function eh(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _f(n){const e=n.mapValue.fields.__previous_value__;return eh(e)?_f(e):e}function Yl(n){const e=g4(n.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}function v4(n){return null==n}function Cf(n){return 0===n&&1/n==-1/0}function bf(n){return"number"==typeof n&&Number.isInteger(n)&&!Cf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(ln.fromString(e))}static fromName(e){return new Ye(ln.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new ln(e.slice()))}}function y4(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eh(n)?4:10:rt()}function I1(n,e){const t=y4(n);if(t!==y4(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yl(n).isEqual(Yl(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=g4(r.timestampValue),h=g4(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,x3(n.bytesValue).isEqual(x3(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return kr(r.geoPointValue.latitude)===kr(o.geoPointValue.latitude)&&kr(r.geoPointValue.longitude)===kr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return kr(r.integerValue)===kr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=kr(r.doubleValue),h=kr(o.doubleValue);return c===h?Cf(c)===Cf(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Kl(n.arrayValue.values||[],e.arrayValue.values||[],I1);case 10:return function(r,o){const c=r.mapValue.fields||{},h=o.mapValue.fields||{};if(vf(c)!==vf(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(void 0===h[m]||!I1(c[m],h[m])))return!1;return!0}(n,e);default:return rt()}var o}function D3(n,e){return void 0!==(n.values||[]).find(t=>I1(t,e))}function Ql(n,e){const t=y4(n),r=y4(e);if(t!==r)return Ht(t,r);switch(t){case 0:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(o,c){const h=kr(o.integerValue||o.doubleValue),m=kr(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return Tg(n.timestampValue,e.timestampValue);case 4:return Tg(Yl(n),Yl(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(o,c){const h=x3(o),m=x3(c);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const h=o.split("/"),m=c.split("/");for(let y=0;y<h.length&&y<m.length;y++){const E=Ht(h[y],m[y]);if(0!==E)return E}return Ht(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const h=Ht(kr(o.latitude),kr(c.latitude));return 0!==h?h:Ht(kr(o.longitude),kr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,c){const h=o.values||[],m=c.values||[];for(let y=0;y<h.length&&y<m.length;++y){const E=Ql(h[y],m[y]);if(E)return E}return Ht(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,c){const h=o.fields||{},m=Object.keys(h),y=c.fields||{},E=Object.keys(y);m.sort(),E.sort();for(let T=0;T<m.length&&T<E.length;++T){const x=Ht(m[T],E[T]);if(0!==x)return x;const k=Ql(h[m[T]],y[E[T]]);if(0!==k)return k}return Ht(m.length,E.length)}(n.mapValue,e.mapValue);default:throw rt()}}function Tg(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=g4(n),r=g4(e),o=Ht(t.seconds,r.seconds);return 0!==o?o:Ht(t.nanos,r.nanos)}function wf(n){return Ef(n)}function Ef(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=g4(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?x3(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",c=!0;for(const h of r.values||[])c?c=!1:o+=",",o+=Ef(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const m of o)h?h=!1:c+=",",c+=`${m}:${Ef(r.fields[m])}`;return c+"}"}(n.mapValue):rt();var e}function th(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jl(n){return!!n&&"integerValue"in n}function Q2(n){return!!n&&"arrayValue"in n}function Mf(n){return!!n&&"nullValue"in n}function A1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function J2(n){return!!n&&"mapValue"in n}function N3(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return p4(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=N3(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=N3(n.arrayValue.values[t]);return e}return Object.assign({},n)}class ki{constructor(e){this.value=e}static empty(){return new ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!J2(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=N3(t)}setAll(e){let t=bi.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=N3(h):o.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());J2(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return I1(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];J2(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){p4(t,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new ki(N3(this.value))}}function nh(n){const e=[];return p4(n.fields,(t,r)=>{const o=new bi([t]);if(J2(r)){const c=nh(r.mapValue).fields;if(0===c.length)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)}),new m4(e)}class Kt{constructor(e,t,r,o,c){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Kt(e,0,xt.min(),ki.empty(),0)}static newFoundDocument(e,t,r){return new Kt(e,1,t,r,0)}static newNoDocument(e,t){return new Kt(e,2,t,ki.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,ki.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Kt(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class L3{constructor(e,t=null,r=[],o=[],c=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.A=null}}function Ei(n,e=null,t=[],r=[],o=null,c=null,h=null){return new L3(n,e,t,r,o,c,h)}function co(n){const e=Be(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+wf(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),v4(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=R3(e.startAt)),e.endAt&&(t+="|ub:",t+=R3(e.endAt)),e.A=t}return e.A}function Zi(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!xg(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!I1(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Af(n.startAt,e.startAt)&&Af(n.endAt,e.endAt)}function Xl(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class yr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new t6(e,t,r):"array-contains"===t?new i6(e,r):"in"===t?new s6(e,r):"not-in"===t?new o6(e,r):"array-contains-any"===t?new Sg(e,r):new yr(e,t,r)}static R(e,t,r){return"in"===t?new n6(e,r):new r6(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Ql(t,this.value)):null!==t&&y4(this.value)===y4(t)&&this.P(Ql(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class t6 extends yr{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.P(t)}}class n6 extends yr{constructor(e,t){super(e,"in",t),this.keys=_4(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class r6 extends yr{constructor(e,t){super(e,"not-in",t),this.keys=_4(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function _4(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class i6 extends yr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Q2(t)&&D3(t.arrayValue,this.value)}}class s6 extends yr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&D3(this.value.arrayValue,t)}}class o6 extends yr{constructor(e,t){super(e,"not-in",t)}matches(e){if(D3(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!D3(this.value.arrayValue,t)}}class Sg extends yr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Q2(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>D3(this.value.arrayValue,r))}}class a6{constructor(e,t){this.position=e,this.before=t}}function R3(n){return`${n.before?"b":"a"}:${n.position.map(e=>wf(e)).join(",")}`}class C4{constructor(e,t="asc"){this.field=e,this.dir=t}}function xg(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function If(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const c=e[o],h=n.position[o];if(r=c.field.isKeyField()?Ye.comparator(Ye.fromName(h.referenceValue),t.key):Ql(h,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function Af(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!I1(n.position[t],e.position[t]))return!1;return!0}class Go{constructor(e,t=null,r=[],o=[],c=null,h="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=y,this.V=null,this.S=null}}function Tf(n,e,t,r,o,c,h,m){return new Go(n,e,t,r,o,c,h,m)}function c6(n){return new Go(n)}function k3(n){return!v4(n.limit)&&"F"===n.limitType}function ih(n){return!v4(n.limit)&&"L"===n.limitType}function Sf(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sh(n){for(const e of n.filters)if(e.v())return e.field;return null}function xf(n){return null!==n.collectionGroup}function P3(n){const e=Be(n);if(null===e.V){e.V=[];const t=sh(e),r=Sf(e);if(null!==t&&null===r)t.isKeyField()||e.V.push(new C4(t)),e.V.push(new C4(bi.keyField(),"asc"));else{let o=!1;for(const c of e.explicitOrderBy)e.V.push(c),c.field.isKeyField()&&(o=!0);if(!o){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new C4(bi.keyField(),c))}}}return e.V}function T1(n){const e=Be(n);if(!e.S)if("F"===e.limitType)e.S=Ei(e.path,e.collectionGroup,P3(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of P3(e))t.push(new C4(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new a6(e.endAt.position,!e.endAt.before):null,o=e.startAt?new a6(e.startAt.position,!e.startAt.before):null;e.S=Ei(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.S}function Df(n,e,t){return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function z3(n,e){return Zi(T1(n),T1(e))&&n.limitType===e.limitType}function Nf(n){return`${co(T1(n))}|lt:${n.limitType}`}function Lf(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${wf(r.value)}`;var r}).join(", ")}]`),v4(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+R3(n.startAt)),n.endAt&&(e+=", endAt: "+R3(n.endAt)),`Target(${e})`}(T1(n))}; limitType=${n.limitType})`}function O3(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ye.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!If(t.startAt,P3(t),r)||t.endAt&&If(t.endAt,P3(t),r)));var t,r}function db(n){return(e,t)=>{let r=!1;for(const o of P3(n)){const c=fb(o,e,t);if(0!==c)return c;r=r||o.field.isKeyField()}return 0}}function fb(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(o,c,h){const m=c.data.field(o),y=h.data.field(o);return null!==m&&null!==y?Ql(m,y):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function Rf(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cf(e)?"-0":e}}function pb(n){return{integerValue:""+n}}function mb(n,e){return bf(e)?pb(e):Rf(n,e)}class kf{constructor(){this._=void 0}}function gb(n,e,t){return n instanceof l6?function(r,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof Ja?oh(n,e):n instanceof b4?vb(n,e):function(r,o){const c=Dg(r,o),h=yb(c)+yb(r.C);return Jl(c)&&Jl(r.C)?pb(h):Rf(r.N,h)}(n,e)}function fA(n,e,t){return n instanceof Ja?oh(n,e):n instanceof b4?vb(n,e):t}function Dg(n,e){return n instanceof V3?Jl(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class l6 extends kf{}class Ja extends kf{constructor(e){super(),this.elements=e}}function oh(n,e){const t=Ng(e);for(const r of n.elements)t.some(o=>I1(o,r))||t.push(r);return{arrayValue:{values:t}}}class b4 extends kf{constructor(e){super(),this.elements=e}}function vb(n,e){let t=Ng(e);for(const r of n.elements)t=t.filter(o=>!I1(o,r));return{arrayValue:{values:t}}}class V3 extends kf{constructor(e,t){super(),this.N=e,this.C=t}}function yb(n){return kr(n.integerValue||n.doubleValue)}function Ng(n){return Q2(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class u6{constructor(e,t){this.field=e,this.transform=t}}class _b{constructor(e,t){this.version=e,this.transformResults=t}}class Nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class F3{}function Cb(n,e,t){n instanceof H3?function(r,o,c){const h=r.value.clone(),m=kg(r.fieldTransforms,o,c.transformResults);h.setAll(m),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof X2?function(r,o,c){if(!ah(r.precondition,o))return void o.convertToUnknownDocument(c.version);const h=kg(r.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(Rg(r)),m.setAll(h),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ch(n,e,t){var o;n instanceof H3?function(r,o,c){if(!ah(r.precondition,o))return;const h=r.value.clone(),m=Pg(r.fieldTransforms,c,o);h.setAll(m),o.convertToFoundDocument(Pf(o),h).setHasLocalMutations()}(n,e,t):n instanceof X2?function(r,o,c){if(!ah(r.precondition,o))return;const h=Pg(r.fieldTransforms,c,o),m=o.data;m.setAll(Rg(r)),m.setAll(h),o.convertToFoundDocument(Pf(o),m).setHasLocalMutations()}(n,e,t):ah(n.precondition,o=e)&&o.convertToNoDocument(xt.min())}function lh(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),c=Dg(r.transform,o||null);null!=c&&(null==t&&(t=ki.empty()),t.set(r.field,c))}return t||null}function Lg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Kl(t,r,(o,c)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ja&&r instanceof Ja||t instanceof b4&&r instanceof b4?Kl(t.elements,r.elements,I1):t instanceof V3&&r instanceof V3?I1(t.C,r.C):t instanceof l6&&r instanceof l6);var t,r}(o,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Pf(n){return n.isFoundDocument()?n.version:xt.min()}class H3 extends F3{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class X2 extends F3{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}}function Rg(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kg(n,e,t){const r=new Map;pt(n.length===t.length);for(let o=0;o<t.length;o++){const c=n[o],h=c.transform,m=e.data.field(c.field);r.set(c.field,fA(h,m,t[o]))}return r}function Pg(n,e,t){const r=new Map;for(const o of n){const c=o.transform,h=t.data.field(o.field);r.set(o.field,gb(c,h,e))}return r}class h6 extends F3{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class zf extends F3{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class zg{constructor(e){this.count=e}}var hr,Ut;function bb(n){switch(n){default:return rt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function uh(n){if(void 0===n)return Cn("GRPC error has no .code"),ye.UNKNOWN;switch(n){case hr.OK:return ye.OK;case hr.CANCELLED:return ye.CANCELLED;case hr.UNKNOWN:return ye.UNKNOWN;case hr.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case hr.INTERNAL:return ye.INTERNAL;case hr.UNAVAILABLE:return ye.UNAVAILABLE;case hr.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case hr.NOT_FOUND:return ye.NOT_FOUND;case hr.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case hr.ABORTED:return ye.ABORTED;case hr.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case hr.DATA_LOSS:return ye.DATA_LOSS;default:return rt()}}(Ut=hr||(hr={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";class Pr{constructor(e,t){this.comparator=e,this.root=t||dr.EMPTY}insert(e,t){return new Pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dr.BLACK,null,null))}remove(e){return new Pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Of(this.root,e,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Of(this.root,e,this.comparator,!0)}}class Of{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dr{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=null!=r?r:dr.RED,this.left=null!=o?o:dr.EMPTY,this.right=null!=c?c:dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new dr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===c?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return dr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}dr.EMPTY=null,dr.RED=!0,dr.BLACK=!1,dr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new dr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jn{constructor(e){this.comparator=e,this.data=new Pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hh(this.data.getIterator())}getIteratorFrom(e){return new hh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Jn(this.comparator);return t.data=e,t}}class hh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Vf=new Pr(Ye.comparator);function S1(){return Vf}const Ff=new Pr(Ye.comparator);function U3(){return Ff}const Og=new Pr(Ye.comparator);function wb(){return Og}const Eb=new Jn(Ye.comparator);function un(...n){let e=Eb;for(const t of n)e=e.add(t);return e}const Vg=new Jn(Ht);function dh(){return Vg}class d6{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,w4.createSynthesizedTargetChangeForCurrentChange(e,t)),new d6(xt.min(),r,dh(),S1(),un())}}class w4{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new w4(wi.EMPTY_BYTE_STRING,t,un(),un(),un())}}class B3{constructor(e,t,r,o){this.k=e,this.removedTargetIds=t,this.key=r,this.$=o}}class fh{constructor(e,t){this.targetId=e,this.O=t}}class ph{constructor(e,t,r=wi.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Hf{constructor(){this.F=0,this.M=Bf(),this.L=wi.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=un(),t=un(),r=un();return this.M.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:rt()}}),new w4(this.L,this.B,e,t,r)}G(){this.U=!1,this.M=Bf()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Mb{constructor(e){this.tt=e,this.et=new Map,this.nt=S1(),this.st=Uf(),this.it=new Jn(Ht)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const r=this.ut(t);switch(e.state){case 0:this.ht(t)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||this.removeTarget(t);break;case 3:this.ht(t)&&(r.Z(),r.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),r.j(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((r,o)=>{this.ht(o)&&t(o)})}ft(e){const t=e.targetId,r=e.O.count,o=this.dt(t);if(o){const c=o.target;if(Xl(c))if(0===r){const h=new Ye(c.path);this.at(t,h,Kt.newNoDocument(h,xt.min()))}else pt(1===r);else this.wt(t)!==r&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((c,h)=>{const m=this.dt(h);if(m){if(c.current&&Xl(m.target)){const y=new Ye(m.target.path);null!==this.nt.get(y)||this.gt(h,y)||this.at(h,y,Kt.newNoDocument(y,e))}c.K&&(t.set(h,c.W()),c.G())}});let r=un();this.st.forEach((c,h)=>{let m=!0;h.forEachWhile(y=>{const E=this.dt(y);return!E||2===E.purpose||(m=!1,!1)}),m&&(r=r.add(c))});const o=new d6(e,t,this.it,this.nt,r);return this.nt=S1(),this.st=Uf(),this.it=new Jn(Ht),o}ot(e,t){if(!this.ht(e))return;const r=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,r),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,r){if(!this.ht(e))return;const o=this.ut(e);this.gt(e,t)?o.H(t,1):o.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),r&&(this.nt=this.nt.insert(t,r))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new Hf,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new Jn(Ht),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new Hf),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function Uf(){return new Pr(Ye.comparator)}function Bf(){return new Pr(Ye.comparator)}const jf={asc:"ASCENDING",desc:"DESCENDING"},Fg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ib{constructor(e,t){this.databaseId=e,this.D=t}}function f6(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $f(n,e){return n.D?e.toBase64():e.toUint8Array()}function Hg(n,e){return f6(n,e.toTimestamp())}function _r(n){return pt(!!n),xt.fromTimestamp(function(e){const t=g4(e);return new Rr(t.seconds,t.nanos)}(n))}function mh(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Gf(n){const e=ln.fromString(n);return pt(yh(e)),e}function p6(n,e){return mh(n.databaseId,e.path)}function lo(n,e){const t=Gf(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(Wf(t))}function gh(n,e){return mh(n.databaseId,e)}function qf(n){const e=Gf(n);return 4===e.length?ln.emptyPath():Wf(e)}function m6(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Wf(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Ab(n,e,t){return{name:p6(n,e),fields:t.value.mapValue.fields}}function Ug(n,e,t){const r=lo(n,e.name),o=_r(e.updateTime),c=new ki({mapValue:{fields:e.fields}}),h=Kt.newFoundDocument(r,o,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function vh(n,e){let t;if(e instanceof H3)t={update:Ab(n,e.key,e.value)};else if(e instanceof h6)t={delete:p6(n,e.key)};else if(e instanceof X2)t={update:Ab(n,e.key,e.data),updateMask:Wg(e.fieldMask)};else{if(!(e instanceof zf))return rt();t={verify:p6(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const h=c.transform;if(h instanceof l6)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ja)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof b4)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof V3)return{fieldPath:c.field.canonicalString(),increment:h.C};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Hg(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:rt()),t;var o}function Cr(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Nn.updateTime(_r(o.updateTime)):void 0!==o.exists?Nn.exists(o.exists):Nn.none():Nn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,h){let m=null;"setToServerValue"in h?(pt("REQUEST_TIME"===h.setToServerValue),m=new l6):"appendMissingElements"in h?m=new Ja(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new b4(h.removeAllFromArray.values||[]):"increment"in h?m=new V3(c,h.increment):rt();const y=bi.fromServerFormat(h.fieldPath);return new u6(y,m)}(n,o)):[];var o;if(e.update){const o=lo(n,e.update.name),c=new ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new m4((e.updateMask.fieldPaths||[]).map(E=>bi.fromServerFormat(E)));return new X2(o,c,h,t,r)}return new H3(o,c,t,r)}if(e.delete){const o=lo(n,e.delete);return new h6(o,t)}if(e.verify){const o=lo(n,e.verify);return new zf(o,t)}return rt()}function $g(n,e){return{documents:[gh(n,e.path)]}}function Gg(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=gh(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=gh(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(m){if(0===m.length)return;const y=m.map(E=>function(T){if("=="===T.op){if(A1(T.value))return{unaryFilter:{field:M4(T.field),op:"IS_NAN"}};if(Mf(T.value))return{unaryFilter:{field:M4(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(A1(T.value))return{unaryFilter:{field:M4(T.field),op:"IS_NOT_NAN"}};if(Mf(T.value))return{unaryFilter:{field:M4(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:M4(T.field),op:Db(T.op),value:T.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);o&&(t.structuredQuery.where=o);const c=function(m){if(0!==m.length)return m.map(y=>{return{field:M4((E=y).field),direction:xb(E.dir)};var E})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(y=e.limit,n.D||v4(y)?y:{value:y});var y;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=Yf(e.startAt)),e.endAt&&(t.structuredQuery.endAt=Yf(e.endAt)),t}function Zf(n){let e=qf(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){pt(1===r);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];t.where&&(c=Kf(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(T=>{return new C4(g6((x=T).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let m=null;t.limit&&(m=function(T){let x;return x="object"==typeof T?T.value:T,v4(x)?null:x}(t.limit));let y=null;t.startAt&&(y=E4(t.startAt));let E=null;return t.endAt&&(E=E4(t.endAt)),Tf(e,o,h,c,m,"F",y,E)}function Kf(n){return n?void 0!==n.unaryFilter?[mA(n)]:void 0!==n.fieldFilter?[qg(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Kf(e)).reduce((e,t)=>e.concat(t)):rt():[]}function Yf(n){return{before:n.before,values:n.position}}function E4(n){return new a6(n.values||[],!!n.before)}function xb(n){return jf[n]}function Db(n){return Fg[n]}function M4(n){return{fieldPath:n.canonicalString()}}function g6(n){return bi.fromServerFormat(n.fieldPath)}function qg(n){return yr.create(g6(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function mA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=g6(n.unaryFilter.field);return yr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=g6(n.unaryFilter.field);return yr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=g6(n.unaryFilter.field);return yr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=g6(n.unaryFilter.field);return yr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function Wg(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yh(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function br(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Zg(e)),e=Nb(n.get(t),e);return Zg(e)}function Nb(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const c=n.charAt(o);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function Zg(n){return n+"\x01\x01"}function Jr(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,r=[];let o="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&rt(),n.charAt(h+1)){case"\x01":const m=n.substring(c,h);let y;0===o.length?y=m:(o+=m,y=o,o=""),r.push(y);break;case"\x10":o+=n.substring(c,h),o+="\0";break;case"\x11":o+=n.substring(c,h+1);break;default:rt()}c=h+2}return new ln(r)}class uo{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Zn{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Zn.store="owner",Zn.key="owner";class Xa{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Xa.store="mutationQueues",Xa.keyPath="userId";class An{constructor(e,t,r,o,c){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=c}}An.store="mutations",An.keyPath="batchId",An.userMutationsIndex="userMutationsIndex",An.userMutationsKeyPath=["userId","batchId"];class Pi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,br(t)]}static key(e,t,r){return[e,br(t),r]}}Pi.store="documentMutations",Pi.PLACEHOLDER=new Pi;class Lb{constructor(e,t){this.path=e,this.readTime=t}}class Rb{constructor(e,t){this.path=e,this.version=t}}class Xn{constructor(e,t,r,o,c,h){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=c,this.parentPath=h}}Xn.store="remoteDocuments",Xn.readTimeIndex="readTimeIndex",Xn.readTimeIndexPath="readTime",Xn.collectionReadTimeIndex="collectionReadTimeIndex",Xn.collectionReadTimeIndexPath=["parentPath","readTime"];class x1{constructor(e){this.byteSize=e}}x1.store="remoteDocumentGlobal",x1.key="remoteDocumentGlobalKey";class Xr{constructor(e,t,r,o,c,h,m){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=h,this.query=m}}Xr.store="targets",Xr.keyPath="targetId",Xr.queryTargetsIndexName="queryTargetsIndex",Xr.queryTargetsKeyPath=["canonicalId","targetId"];class Mi{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Mi.store="targetDocuments",Mi.keyPath=["targetId","path"],Mi.documentTargetsIndex="documentTargetsIndex",Mi.documentTargetsKeyPath=["path","targetId"];class Es{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Es.key="targetGlobalKey",Es.store="targetGlobal";class I4{constructor(e,t){this.collectionId=e,this.parent=t}}I4.store="collectionParents",I4.keyPath=["collectionId","parent"];class qo{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}qo.store="clientMetadata",qo.keyPath="clientId";class A4{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}A4.store="bundles",A4.keyPath="bundleId";class e2{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}e2.store="namedQueries",e2.keyPath="name";const kb=[Xa.store,An.store,Pi.store,Xn.store,Xr.store,Zn.store,Es.store,Mi.store,qo.store,x1.store,I4.store,A4.store,e2.store],Qf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Le((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Le?t:Le.resolve(t)}catch(t){return Le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Le.reject(t)}static resolve(e){return new Le((t,r)=>{t(e)})}static reject(e){return new Le((t,r)=>{r(e)})}static waitFor(e){return new Le((t,r)=>{let o=0,c=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++c,h&&c===o&&t()},y=>r(y))}),h=!0,c===o&&t()})}static or(e){let t=Le.resolve(!1);for(const r of e)t=t.next(o=>o?Le.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,c)=>{r.push(t.call(this,o,c))}),this.waitFor(r)}}class v6{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new Lr,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new y6(e,t.error)):this.Et.resolve()},this.transaction.onerror=r=>{const o=_h(r.target.error);this.Et.reject(new y6(e,o))}}static open(e,t,r,o){try{return new v6(t,e.transaction(o,r))}catch(c){throw new y6(t,c)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Yg(t)}}class qs{constructor(e,t,r){this.name=e,this.version=t,this.At=r,12.2===qs.Rt((0,M.z$)())&&Cn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),tc(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,M.hl)())return!1;if(qs.Pt())return!0;const e=(0,M.z$)(),t=qs.Rt(e),r=0<t&&t<10,o=qs.vt(e),c=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Dt(e){var t=this;return(0,p.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{r(h.target.result)},c.onblocked=()=>{o(new y6(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new ke(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new ke(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new y6(e,m))},c.onupgradeneeded=h=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.At.Ct(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=r=>t.Nt(r)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var c=this;return(0,p.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{c.db=yield c.Dt(e);const y=v6.open(c.db,e,h?"readonly":"readwrite",r),E=o(y).catch(T=>(y.abort(T),Le.reject(T))).toPromise();return E.catch(()=>{}),yield y.It,E}catch(y){const E="FirebaseError"!==y.name&&m<3;if(Fe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),c.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Kg{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return tc(this.kt.delete())}}class y6 extends ke{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ec(n){return"IndexedDbTransactionError"===n.name}class Yg{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),tc(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),tc(this.store.add(e))}get(e){return tc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),tc(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),tc(this.store.count())}Lt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Bt(r,(c,h)=>{o.push(h)}).next(()=>o)}Ut(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.qt=!1;const o=this.cursor(r);return this.Bt(o,(c,h,m)=>m.delete())}Kt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Bt(o,t)}jt(e){const t=this.cursor({});return new Le((r,o)=>{t.onerror=c=>{const h=_h(c.target.error);o(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Bt(e,t){const r=[];return new Le((o,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const y=new Kg(m),E=t(m.primaryKey,m.value,y);if(E instanceof Le){const T=E.catch(x=>(y.done(),Le.reject(x)));r.push(T)}y.isDone?o():null===y.Ft?m.continue():m.continue(y.Ft)}}).next(()=>Le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.qt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function tc(n){return new Le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=_h(r.target.error);t(o)}})}let Xf=!1;function _h(n){const e=qs.Rt((0,M.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xf||(Xf=!0,setTimeout(()=>{throw r},0)),r}}return n}class Qg extends Jf{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Ms(n,e){const t=Be(n);return qs.St(t.Qt,e)}class e7{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&Cb(c,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ch(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ch(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&Kl(this.mutations,e.mutations,(t,r)=>Lg(t,r))&&Kl(this.baseMutations,e.baseMutations,(t,r)=>Lg(t,r))}}class t7{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){pt(e.mutations.length===r.length);let o=wb();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new t7(e,t,r,o)}}class nc{constructor(e,t,r,o,c=xt.min(),h=xt.min(),m=wi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Jg{constructor(e){this.Wt=e}}function n7(n,e){if(e.document)return Ug(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Ye.fromSegments(e.noDocument.path),r=C6(e.noDocument.readTime),o=Kt.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=Ye.fromSegments(e.unknownDocument.path),r=C6(e.unknownDocument.version);return Kt.newUnknownDocument(t,r)}return rt()}function Xg(n,e,t){const r=r7(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const c={name:p6(m=n.Wt,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:f6(m,y.version.toTimestamp())};return new Xn(null,null,c,e.hasCommittedMutations,r,o)}var m,y;if(e.isNoDocument()){const c=e.key.path.toArray(),h=_6(e.version),m=e.hasCommittedMutations;return new Xn(null,new Lb(c,h),null,m,r,o)}if(e.isUnknownDocument()){const c=e.key.path.toArray(),h=_6(e.version);return new Xn(new Rb(c,h),null,null,!0,r,o)}return rt()}function r7(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ev(n){const e=new Rr(n[0],n[1]);return xt.fromTimestamp(e)}function _6(n){const e=n.toTimestamp();return new uo(e.seconds,e.nanoseconds)}function C6(n){const e=new Rr(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function b6(n,e){const t=(e.baseMutations||[]).map(c=>Cr(n.Wt,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>Cr(n.Wt,c)),o=Rr.fromMillis(e.localWriteTimeMs);return new e7(e.batchId,o,t,r)}function j3(n){const e=C6(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?C6(n.lastLimboFreeSnapshotVersion):xt.min();let r;var o;return void 0!==n.query.documents?(pt(1===(o=n.query).documents.length),r=T1(c6(qf(o.documents[0])))):r=T1(Zf(n.query)),new nc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,wi.fromBase64String(n.resumeToken))}function tv(n,e){const t=_6(e.snapshotVersion),r=_6(e.lastLimboFreeSnapshotVersion);let o;o=Xl(e.target)?$g(n.Wt,e.target):Gg(n.Wt,e.target);const c=e.resumeToken.toBase64();return new Xr(e.targetId,co(e.target),t,c,e.sequenceNumber,r,o)}function i7(n){const e=Zf({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Df(e,e.limit,"L"):e}class Pb{getBundleMetadata(e,t){return nv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:C6(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return nv(e).put({bundleId:(r=t).id,createTime:_6(_r(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return s7(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:i7(o.bundledQuery),readTime:C6(o.readTime)};var o})}saveNamedQuery(e,t){return s7(e).put({name:(r=t).name,readTime:_6(_r(r.readTime)),bundledQuery:r.bundledQuery});var r}}function nv(n){return Ms(n,A4.store)}function s7(n){return Ms(n,e2.store)}class rv{constructor(){this.Gt=new Ch}addToCollectionParentIndex(e,t){return this.Gt.add(t),Le.resolve()}getCollectionParents(e,t){return Le.resolve(this.Gt.getEntries(t))}}class Ch{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Jn(ln.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Jn(ln.comparator)).toArray()}}class iv{constructor(){this.zt=new Ch}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const c={collectionId:r,parent:br(o)};return o7(e).put(c)}return Le.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Mg(t),""],!1,!0);return o7(e).Lt(o).next(c=>{for(const h of c){if(h.collectionId!==t)break;r.push(Jr(h.parent))}return r})}}function o7(n){return Ms(n,I4.store)}const a7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ki{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ki(e,Ki.DEFAULT_COLLECTION_PERCENTILE,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function c7(n,e,t){const r=n.store(An.store),o=n.store(Pi.store),c=[],h=IDBKeyRange.only(t.batchId);let m=0;const y=r.Kt({range:h},(T,x,k)=>(m++,k.delete()));c.push(y.next(()=>{pt(1===m)}));const E=[];for(const T of t.mutations){const x=Pi.key(e,T.key.path,t.batchId);c.push(o.delete(x)),E.push(T.key)}return Le.waitFor(c).next(()=>E)}function $3(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Ki.DEFAULT_COLLECTION_PERCENTILE=10,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ki.DEFAULT=new Ki(41943040,Ki.DEFAULT_COLLECTION_PERCENTILE,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ki.DISABLED=new Ki(-1,0,0);class G3{constructor(e,t,r,o){this.userId=e,this.N=t,this.Ht=r,this.referenceDelegate=o,this.Jt={}}static Yt(e,t,r,o){pt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new G3(c,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Is(e).Kt({index:An.userMutationsIndex,range:r},(o,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const c=w6(e),h=Is(e);return h.add({}).next(m=>{pt("number"==typeof m);const y=new e7(m,t,r,o),E=function(k,V,Y){const Ee=Y.baseMutations.map(Ge=>vh(k.Wt,Ge)),Re=Y.mutations.map(Ge=>vh(k.Wt,Ge));return new An(V,Y.batchId,Y.localWriteTime.toMillis(),Ee,Re)}(this.N,this.userId,y),T=[];let x=new Jn((k,V)=>Ht(k.canonicalString(),V.canonicalString()));for(const k of o){const V=Pi.key(this.userId,k.key.path,m);x=x.add(k.key.path.popLast()),T.push(h.put(E)),T.push(c.put(V,Pi.PLACEHOLDER))}return x.forEach(k=>{T.push(this.Ht.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.Jt[m]=y.keys()}),Le.waitFor(T).next(()=>y)})}lookupMutationBatch(e,t){return Is(e).get(t).next(r=>r?(pt(r.userId===this.userId),b6(this.N,r)):null)}Xt(e,t){return this.Jt[t]?Le.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Jt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Is(e).Kt({index:An.userMutationsIndex,range:o},(h,m,y)=>{m.userId===this.userId&&(pt(m.batchId>=r),c=b6(this.N,m)),y.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Is(e).Kt({index:An.userMutationsIndex,range:t,reverse:!0},(o,c,h)=>{r=c.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Is(e).Lt(An.userMutationsIndex,t).next(r=>r.map(o=>b6(this.N,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Pi.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),c=[];return w6(e).Kt({range:o},(h,m,y)=>{const[E,T,x]=h,k=Jr(T);if(E===this.userId&&t.path.isEqual(k))return Is(e).get(x).next(V=>{if(!V)throw rt();pt(V.userId===this.userId),c.push(b6(this.N,V))});y.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jn(Ht);const o=[];return t.forEach(c=>{const h=Pi.prefixForPath(this.userId,c.path),m=IDBKeyRange.lowerBound(h),y=w6(e).Kt({range:m},(E,T,x)=>{const[k,V,Y]=E,Ee=Jr(V);k===this.userId&&c.path.isEqual(Ee)?r=r.add(Y):x.done()});o.push(y)}),Le.waitFor(o).next(()=>this.Zt(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,c=Pi.prefixForPath(this.userId,r),h=IDBKeyRange.lowerBound(c);let m=new Jn(Ht);return w6(e).Kt({range:h},(y,E,T)=>{const[x,k,V]=y,Y=Jr(k);x===this.userId&&r.isPrefixOf(Y)?Y.length===o&&(m=m.add(V)):T.done()}).next(()=>this.Zt(e,m))}Zt(e,t){const r=[],o=[];return t.forEach(c=>{o.push(Is(e).get(c).next(h=>{if(null===h)throw rt();pt(h.userId===this.userId),r.push(b6(this.N,h))}))}),Le.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return c7(e.Qt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Le.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Le.resolve();const r=IDBKeyRange.lowerBound(Pi.prefixForUser(this.userId)),o=[];return w6(e).Kt({range:r},(c,h,m)=>{if(c[0]===this.userId){const y=Jr(c[1]);o.push(y)}else m.done()}).next(()=>{pt(0===o.length)})})}containsKey(e,t){return l7(e,this.userId,t)}ee(e){return sv(e).get(this.userId).next(t=>t||new Xa(this.userId,-1,""))}}function l7(n,e,t){const r=Pi.prefixForPath(e,t.path),o=r[1],c=IDBKeyRange.lowerBound(r);let h=!1;return w6(n).Kt({range:c,qt:!0},(m,y,E)=>{const[T,x,k]=m;T===e&&x===o&&(h=!0),E.done()}).next(()=>h)}function Is(n){return Ms(n,An.store)}function w6(n){return Ms(n,Pi.store)}function sv(n){return Ms(n,Xa.store)}class D1{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new D1(0)}static ie(){return new D1(-1)}}class gA{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const r=new D1(t.highestTargetId);return t.highestTargetId=r.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>xt.fromTimestamp(new Rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.re(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.oe(e,o)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(r=>(r.targetCount+=1,this.ce(t,r),this.oe(e,r))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rc(e).delete(t.targetId)).next(()=>this.re(e)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.oe(e,r)))}removeTargets(e,t,r){let o=0;const c=[];return rc(e).Kt((h,m)=>{const y=j3(m);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(o++,c.push(this.removeTargetData(e,y)))}).next(()=>Le.waitFor(c)).next(()=>o)}forEachTarget(e,t){return rc(e).Kt((r,o)=>{const c=j3(o);t(c)})}re(e){return zb(e).get(Es.key).next(t=>(pt(null!==t),t))}oe(e,t){return zb(e).put(Es.key,t)}ae(e,t){return rc(e).put(tv(this.N,t))}ce(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const r=co(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return rc(e).Kt({range:o,index:Xr.queryTargetsIndexName},(h,m,y)=>{const E=j3(m);Zi(t,E.target)&&(c=E,y.done())}).next(()=>c)}addMatchingKeys(e,t,r){const o=[],c=t2(e);return t.forEach(h=>{const m=br(h.path);o.push(c.put(new Mi(r,m))),o.push(this.referenceDelegate.addReference(e,r,h))}),Le.waitFor(o)}removeMatchingKeys(e,t,r){const o=t2(e);return Le.forEach(t,c=>{const h=br(c.path);return Le.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=t2(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=t2(e);let c=un();return o.Kt({range:r,qt:!0},(h,m,y)=>{const E=Jr(h[1]),T=new Ye(E);c=c.add(T)}).next(()=>c)}containsKey(e,t){const r=br(t.path),o=IDBKeyRange.bound([r],[Mg(r)],!1,!0);let c=0;return t2(e).Kt({index:Mi.documentTargetsIndex,qt:!0,range:o},([h,m],y,E)=>{0!==h&&(c++,E.done())}).next(()=>c>0)}Tt(e,t){return rc(e).get(t).next(r=>r?j3(r):null)}}function rc(n){return Ms(n,Xr.store)}function zb(n){return Ms(n,Es.store)}function t2(n){return Ms(n,Mi.store)}function ic(n){return ov.apply(this,arguments)}function ov(){return(ov=(0,p.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==Qf)throw n;Fe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function ct([n,e],[t,r]){const o=Ht(n,t);return 0===o?Ht(e,r):o}class Ob{constructor(e){this.ue=e,this.buffer=new Jn(ct),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ct(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Vb{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const r=this.de?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,p.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){ec(o)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ic(o)}yield t._e(e)}))}}class Fb{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Le.resolve(ws.T);const r=new Ob(t);return this.me.forEachTarget(e,o=>r.fe(o.sequenceNumber)).next(()=>this.me.ye(e,o=>r.fe(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.me.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(a7)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a7):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let r,o,c,h,m,y,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,h=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,m=Date.now(),this.removeTargets(e,r,t))).next(x=>(c=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(E=Date.now(),In()<=N.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-T}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${c} targets in `+(y-m)+`ms\n\tRemoved ${x} documents in `+(E-y)+`ms\nTotal Duration: ${E-T}ms`),Le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:x})))}}class bh{constructor(e,t){this.db=e,this.garbageCollector=new Fb(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Te(e){let t=0;return this.ye(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(r,o)=>t(o))}addReference(e,t,r){return wh(e,r)}removeReference(e,t,r){return wh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wh(e,t)}Ie(e,t){return function(r,o){let c=!1;return sv(r).jt(h=>l7(r,h,o).next(m=>(m&&(c=!0),Le.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this.Ee(e,(h,m)=>{if(m<=t){const y=this.Ie(e,h).next(E=>{if(!E)return c++,r.getEntry(e,h).next(()=>(r.removeEntry(h),t2(e).delete([0,br(h.path)])))});o.push(y)}}).next(()=>Le.waitFor(o)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wh(e,t)}Ee(e,t){const r=t2(e);let o,c=ws.T;return r.Kt({index:Mi.documentTargetsIndex},([h,m],{path:y,sequenceNumber:E})=>{0===h?(c!==ws.T&&t(new Ye(Jr(o)),c),c=E,o=y):c=ws.T}).next(()=>{c!==ws.T&&t(new Ye(Jr(o)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wh(n,e){return t2(n).put((r=n.currentSequenceNumber,new Mi(0,br(e.path),r)));var r}class n2{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,c]of r)if(this.equalsFn(o,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){p4(this.inner,(t,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return Ig(this.inner)}}class q3{constructor(){this.changes=new n2(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:xt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Kt.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Le.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class er{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,r){return Wo(e).put(Eh(t),r)}removeEntry(e,t){const r=Wo(e),o=Eh(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Ae(e,r)))}getEntry(e,t){return Wo(e).get(Eh(t)).next(r=>this.Re(t,r))}be(e,t){return Wo(e).get(Eh(t)).next(r=>({document:this.Re(t,r),size:$3(r)}))}getEntries(e,t){let r=S1();return this.Pe(e,t,(o,c)=>{const h=this.Re(o,c);r=r.insert(o,h)}).next(()=>r)}ve(e,t){let r=S1(),o=new Pr(Ye.comparator);return this.Pe(e,t,(c,h)=>{const m=this.Re(c,h);r=r.insert(c,m),o=o.insert(c,$3(h))}).next(()=>({documents:r,Ve:o}))}Pe(e,t,r){if(t.isEmpty())return Le.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),c=t.getIterator();let h=c.getNext();return Wo(e).Kt({range:o},(m,y,E)=>{const T=Ye.fromSegments(m);for(;h&&Ye.comparator(h,T)<0;)r(h,null),h=c.getNext();h&&h.isEqual(T)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?E.Mt(h.path.toArray()):E.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=S1();const c=t.path.length+1,h={};if(r.isEqual(xt.min())){const m=t.path.toArray();h.range=IDBKeyRange.lowerBound(m)}else{const m=t.path.toArray(),y=r7(r);h.range=IDBKeyRange.lowerBound([m,y],!0),h.index=Xn.collectionReadTimeIndex}return Wo(e).Kt(h,(m,y,E)=>{if(m.length!==c)return;const T=n7(this.N,y);t.path.isPrefixOf(T.key.path)?O3(t,T)&&(o=o.insert(T.key,T)):E.done()}).next(()=>o)}newChangeBuffer(e){return new vA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return u7(e).get(x1.key).next(t=>(pt(!!t),t))}Ae(e,t){return u7(e).put(x1.key,t)}Re(e,t){if(t){const r=n7(this.N,t);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return Kt.newInvalidDocument(e)}}class vA extends q3{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new n2(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Jn((c,h)=>Ht(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const m=this.De.get(c);if(h.document.isValidDocument()){const y=Xg(this.Se.N,h.document,this.getReadTime(c));o=o.add(c.path.popLast()),r+=$3(y)-m,t.push(this.Se.addEntry(e,c,y))}else if(r-=m,this.trackRemovals){const y=Xg(this.Se.N,Kt.newNoDocument(c,xt.min()),this.getReadTime(c));t.push(this.Se.addEntry(e,c,y))}else t.push(this.Se.removeEntry(e,c))}),o.forEach(c=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,c))}),t.push(this.Se.updateMetadata(e,r)),Le.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(r=>(this.De.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:r,Ve:o})=>(o.forEach((c,h)=>{this.De.set(c,h)}),r))}}function u7(n){return Ms(n,x1.store)}function Wo(n){return Ms(n,Xn.store)}function Eh(n){return n.path.toArray()}class av{constructor(e){this.N=e}Ct(e,t,r,o){pt(r<o&&r>=0&&o<=11);const c=new v6("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore(Zn.store),(m=e).createObjectStore(Xa.store,{keyPath:Xa.keyPath}),m.createObjectStore(An.store,{keyPath:An.keyPath,autoIncrement:!0}).createIndex(An.userMutationsIndex,An.userMutationsKeyPath,{unique:!0}),m.createObjectStore(Pi.store),h7(e),function(m){m.createObjectStore(Xn.store)}(e));let h=Le.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore(Mi.store),m.deleteObjectStore(Xr.store),m.deleteObjectStore(Es.store)}(e),h7(e)),h=h.next(()=>function(m){const y=m.store(Es.store),E=new Es(0,0,xt.min().toTimestamp(),0);return y.put(Es.key,E)}(c))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,y){return y.store(An.store).Lt().next(E=>{m.deleteObjectStore(An.store),m.createObjectStore(An.store,{keyPath:An.keyPath,autoIncrement:!0}).createIndex(An.userMutationsIndex,An.userMutationsKeyPath,{unique:!0});const T=y.store(An.store),x=E.map(k=>T.put(k));return Le.waitFor(x)})}(e,c))),h=h.next(()=>{!function(m){m.createObjectStore(qo.store,{keyPath:qo.keyPath})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Ce(c))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore(x1.store)}(e),this.Ne(c)))),r<7&&o>=7&&(h=h.next(()=>this.xe(c))),r<8&&o>=8&&(h=h.next(()=>this.ke(e,c))),r<9&&o>=9&&(h=h.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e),function(m){const y=m.objectStore(Xn.store);y.createIndex(Xn.readTimeIndex,Xn.readTimeIndexPath,{unique:!1}),y.createIndex(Xn.collectionReadTimeIndex,Xn.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(h=h.next(()=>this.$e(c))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore(A4.store,{keyPath:A4.keyPath})})(e),function(m){m.createObjectStore(e2.store,{keyPath:e2.keyPath})}(e)})),h}Ne(e){let t=0;return e.store(Xn.store).Kt((r,o)=>{t+=$3(o)}).next(()=>{const r=new x1(t);return e.store(x1.store).put(x1.key,r)})}Ce(e){const t=e.store(Xa.store),r=e.store(An.store);return t.Lt().next(o=>Le.forEach(o,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.Lt(An.userMutationsIndex,h).next(m=>Le.forEach(m,y=>{pt(y.userId===c.userId);const E=b6(this.N,y);return c7(e,c.userId,E).next(()=>{})}))}))}xe(e){const t=e.store(Mi.store),r=e.store(Xn.store);return e.store(Es.store).get(Es.key).next(o=>{const c=[];return r.Kt((h,m)=>{const y=new ln(h),E=[0,br(y)];c.push(t.get(E).next(T=>T?Le.resolve():t.put(new Mi(0,br(y),o.highestListenSequenceNumber))))}).next(()=>Le.waitFor(c))})}ke(e,t){e.createObjectStore(I4.store,{keyPath:I4.keyPath});const r=t.store(I4.store),o=new Ch,c=h=>{if(o.add(h)){const m=h.lastSegment(),y=h.popLast();return r.put({collectionId:m,parent:br(y)})}};return t.store(Xn.store).Kt({qt:!0},(h,m)=>{const y=new ln(h);return c(y.popLast())}).next(()=>t.store(Pi.store).Kt({qt:!0},([h,m,y],E)=>{const T=Jr(m);return c(T.popLast())}))}$e(e){const t=e.store(Xr.store);return t.Kt((r,o)=>{const c=j3(o),h=tv(this.N,c);return t.put(h)})}}function h7(n){n.createObjectStore(Mi.store,{keyPath:Mi.keyPath}).createIndex(Mi.documentTargetsIndex,Mi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Xr.store,{keyPath:Xr.keyPath}).createIndex(Xr.queryTargetsIndexName,Xr.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Es.store)}const Mh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ih{constructor(e,t,r,o,c,h,m,y,E,T){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=c,this.window=h,this.document=m,this.Fe=E,this.Me=T,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=x=>Promise.resolve(),!Ih.bt())throw new ke(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bh(this,o),this.We=t+"main",this.N=new Jg(y),this.Ge=new qs(this.We,11,new av(this.N)),this.ze=new gA(this.referenceDelegate,this.N),this.Ht=new iv,this.He=new er(this.N,this.Ht),this.Je=new Pb,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===T&&Cn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(ye.FAILED_PRECONDITION,Mh);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new ws(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var r=(0,p.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,p.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,p.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ah(e).put(new qo(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(ec(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return W3(e).get(Zn.key).next(t=>Le.resolve(this.cn(t)))}un(e){return Ah(e).delete(this.clientId)}hn(){var e=this;return(0,p.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Ms(r,qo.store);return o.Lt().next(c=>{const h=e.fn(c,18e5),m=c.filter(y=>-1===h.indexOf(y));return Le.forEach(m,y=>o.delete(y.clientId)).next(()=>m)})}).catch(()=>[]);if(e.Ye)for(const r of t)e.Ye.removeItem(e.dn(r.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Le.resolve(!0):W3(e).get(Zn.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new ke(ye.FAILED_PRECONDITION,Mh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ah(e).Lt().next(r=>void 0===this.fn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,p.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[Zn.store,qo.store],t=>{const r=new Qg(t,ws.T);return e.on(r).next(()=>e.un(r))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(r=>this.ln(r.updateTimeMs,t)&&!this.wn(r.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Ah(e).Lt().next(t=>this.fn(t,18e5).map(r=>r.clientId)))}get started(){return this.Be}getMutationQueue(e){return G3.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,r){let c;return Fe("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",kb,h=>(c=new Qg(h,this.Le?this.Le.next():ws.T),"readwrite-primary"===t?this.sn(c).next(m=>!!m||this.rn(c)).next(m=>{if(!m)throw Cn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new ke(ye.FAILED_PRECONDITION,Qf);return r(c)}).next(m=>this.an(c).next(()=>m)):this.Tn(c).next(()=>r(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}Tn(e){return W3(e).get(Zn.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.cn(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(ye.FAILED_PRECONDITION,Mh)})}an(e){const t=new Zn(this.clientId,this.allowTabSynchronization,Date.now());return W3(e).put(Zn.key,t)}static bt(){return qs.bt()}on(e){const t=W3(e);return t.get(Zn.key).next(r=>this.cn(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete(Zn.key)):Le.resolve())}ln(e,t){const r=Date.now();return!(e<r-t||e>r&&(Cn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,M.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const r=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Cn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Cn("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function W3(n){return Ms(n,Zn.store)}function Ah(n){return Ms(n,qo.store)}function d7(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Z3{constructor(e,t){this.progress=e,this.En=t}}class cv{constructor(e,t,r){this.He=e,this.In=t,this.Ht=r}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Rn(e,t,r))}Rn(e,t,r){return this.He.getEntry(e,t).next(o=>{for(const c of r)c.applyToLocalView(o);return o})}bn(e,t){e.forEach((r,o)=>{for(const c of t)c.applyToLocalView(o)})}Pn(e,t){return this.He.getEntries(e,t).next(r=>this.vn(e,r).next(()=>r))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Vn(e,t.path):xf(t)?this.Sn(e,t,r):this.Dn(e,t,r);var o}Vn(e,t){return this.An(e,new Ye(t)).next(r=>{let o=U3();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Sn(e,t,r){const o=t.collectionGroup;let c=U3();return this.Ht.getCollectionParents(e,o).next(h=>Le.forEach(h,m=>{const y=(E=t,T=m.child(o),new Go(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,T;return this.Dn(e,y,r).next(E=>{E.forEach((T,x)=>{c=c.insert(T,x)})})}).next(()=>c))}Dn(e,t,r){let o,c;return this.He.getDocumentsMatchingQuery(e,t,r).next(h=>(o=h,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(h=>(c=h,this.Cn(e,c,o).next(m=>{o=m;for(const y of c)for(const E of y.mutations){const T=E.key;let x=o.get(T);null==x&&(x=Kt.newInvalidDocument(T),o=o.insert(T,x)),ch(E,x,y.localWriteTime),x.isFoundDocument()||(o=o.remove(T))}}))).next(()=>(o.forEach((h,m)=>{O3(t,m)||(o=o.remove(h))}),o))}Cn(e,t,r){let o=un();for(const h of t)for(const m of h.mutations)m instanceof X2&&null===r.get(m.key)&&(o=o.add(m.key));let c=r;return this.He.getEntries(e,o).next(h=>(h.forEach((m,y)=>{y.isFoundDocument()&&(c=c.insert(m,y))}),c))}}class f7{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Nn=r,this.xn=o}static kn(e,t){let r=un(),o=un();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new f7(e,t.fromCache,r,o)}}class lv{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(c=t).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||r.isEqual(xt.min())?this.Fn(e,t):this.On.Pn(e,o).next(c=>{const h=this.Mn(t,c);return(k3(t)||ih(t))&&this.Ln(t.limitType,h,o,r)?this.Fn(e,t):(In()<=N.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lf(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(m=>(h.forEach(y=>{m=m.insert(y.key,y)}),m)))});var c}Mn(e,t){let r=new Jn(db(e));return t.forEach((o,c)=>{O3(e,c)&&(r=r.add(c))}),r}Ln(e,t,r,o){if(r.size!==t.size)return!0;const c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Fn(e,t){return In()<=N.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Lf(t)),this.On.getDocumentsMatchingQuery(e,t,xt.min())}}class Th{constructor(e,t,r,o){this.persistence=e,this.Bn=t,this.N=o,this.Un=new Pr(Ht),this.qn=new n2(c=>co(c),Zi),this.Kn=xt.min(),this.In=e.getMutationQueue(r),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new cv(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function p7(n,e,t,r){return new Th(n,e,t,r)}function m7(n,e){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,p.Z)(function*(n,e){const t=Be(n);let r=t.In,o=t.Qn;const c=yield t.persistence.runTransaction("Handle user change","readonly",h=>{let m;return t.In.getAllMutationBatches(h).next(y=>(m=y,r=t.persistence.getMutationQueue(e),o=new cv(t.jn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(h))).next(y=>{const E=[],T=[];let x=un();for(const k of m){E.push(k.batchId);for(const V of k.mutations)x=x.add(V.key)}for(const k of y){T.push(k.batchId);for(const V of k.mutations)x=x.add(V.key)}return o.Pn(h,x).next(k=>({Wn:k,removedBatchIds:E,addedBatchIds:T}))})});return t.In=r,t.Qn=o,t.Bn.$n(t.Qn),c})).apply(this,arguments)}function Hb(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=t.jn.newChangeBuffer({trackRemovals:!0});return function(h,m,y,E){const T=y.batch,x=T.keys();let k=Le.resolve();return x.forEach(V=>{k=k.next(()=>E.getEntry(m,V)).next(Y=>{const Ee=y.docVersions.get(V);pt(null!==Ee),Y.version.compareTo(Ee)<0&&(T.applyToRemoteDocument(Y,y),Y.isValidDocument()&&E.addEntry(Y,y.commitVersion))})}),k.next(()=>h.In.removeMutationBatch(m,T))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.In.performConsistencyCheck(r)).next(()=>t.Qn.Pn(r,o))})}function E6(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function K3(n,e){const t=Be(n),r=e.snapshotVersion;let o=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.jn.newChangeBuffer({trackRemovals:!0});o=t.Un;const m=[];e.targetChanges.forEach((E,T)=>{const x=o.get(T);if(!x)return;m.push(t.ze.removeMatchingKeys(c,E.removedDocuments,T).next(()=>t.ze.addMatchingKeys(c,E.addedDocuments,T)));const k=E.resumeToken;if(k.approximateByteSize()>0){const V=x.withResumeToken(k,r).withSequenceNumber(c.currentSequenceNumber);o=o.insert(T,V),Y=x,Re=E,pt((Ee=V).resumeToken.approximateByteSize()>0),(0===Y.resumeToken.approximateByteSize()||Ee.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8||Re.addedDocuments.size+Re.modifiedDocuments.size+Re.removedDocuments.size>0)&&m.push(t.ze.updateTargetData(c,V))}var Y,Ee,Re});let y=S1();if(e.documentUpdates.forEach((E,T)=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,E))}),m.push(uv(c,h,e.documentUpdates,r,void 0).next(E=>{y=E})),!r.isEqual(xt.min())){const E=t.ze.getLastRemoteSnapshotVersion(c).next(T=>t.ze.setTargetsMetadata(c,c.currentSequenceNumber,r));m.push(E)}return Le.waitFor(m).next(()=>h.apply(c)).next(()=>t.Qn.vn(c,y)).next(()=>y)}).then(c=>(t.Un=o,c))}function uv(n,e,t,r,o){let c=un();return t.forEach(h=>c=c.add(h)),e.getEntries(n,c).next(h=>{let m=S1();return t.forEach((y,E)=>{const T=h.get(y),x=(null==o?void 0:o.get(y))||r;E.isNoDocument()&&E.version.isEqual(xt.min())?(e.removeEntry(y,x),m=m.insert(y,E)):!T.isValidDocument()||E.version.compareTo(T.version)>0||0===E.version.compareTo(T.version)&&T.hasPendingWrites?(e.addEntry(E,x),m=m.insert(y,E)):Fe("LocalStore","Ignoring outdated watch update for ",y,". Current version:",T.version," Watch version:",E.version)}),m})}function Ub(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(r,e)))}function M6(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ze.getTargetData(r,e).next(c=>c?(o=c,Le.resolve(o)):t.ze.allocateTargetId(r).next(h=>(o=new nc(e,h,0,r.currentSequenceNumber),t.ze.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Un.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Un=t.Un.insert(r.targetId,r),t.qn.set(e,r.targetId)),r})}function T4(n,e,t){return xh.apply(this,arguments)}function xh(){return(xh=(0,p.Z)(function*(n,e,t){const r=Be(n),o=r.Un.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ec(h))throw h;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Un=r.Un.remove(e),r.qn.delete(o.target)})).apply(this,arguments)}function Y3(n,e,t){const r=Be(n);let o=xt.min(),c=un();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,y,E){const T=Be(m),x=T.qn.get(E);return void 0!==x?Le.resolve(T.Un.get(x)):T.ze.getTargetData(y,E)}(r,h,T1(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(h,m.targetId).next(y=>{c=y})}).next(()=>r.Bn.getDocumentsMatchingQuery(h,e,t?o:xt.min(),t?c:un())).next(m=>({documents:m,Gn:c})))}function hv(n,e){const t=Be(n),r=Be(t.ze),o=t.Un.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",c=>r.Tt(c,e).next(h=>h?h.target:null))}function g7(n){const e=Be(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,c){const h=Be(r);let m=S1(),y=r7(c);const E=Wo(o),T=IDBKeyRange.lowerBound(y,!0);return E.Kt({index:Xn.readTimeIndex,range:T},(x,k)=>{const V=n7(h.N,k);m=m.insert(V.key,V),y=k.readTime}).next(()=>({En:m,readTime:ev(y)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:r})=>(e.Kn=r,t))}function v7(){return(v7=(0,p.Z)(function*(n){const e=Be(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=Wo(r);let c=xt.min();return o.Kt({index:Xn.readTimeIndex,reverse:!0},(h,m,y)=>{m.readTime&&(c=ev(m.readTime)),y.done()}).next(()=>c)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function dv(){return(dv=(0,p.Z)(function*(n,e,t,r){const o=Be(n);let c=un(),h=S1(),m=wb();for(const T of t){const x=e.zn(T.metadata.name);T.document&&(c=c.add(x)),h=h.insert(x,e.Hn(T)),m=m.insert(x,e.Jn(T.metadata.readTime))}const y=o.jn.newChangeBuffer({trackRemovals:!0}),E=yield M6(o,(T=r,T1(c6(ln.fromString(`__bundle__/docs/${T}`)))));var T;return o.persistence.runTransaction("Apply bundle documents","readwrite",T=>uv(T,y,h,xt.min(),m).next(x=>(y.apply(T),x)).next(x=>o.ze.removeMatchingKeysForTargetId(T,E.targetId).next(()=>o.ze.addMatchingKeys(T,c,E.targetId)).next(()=>o.Qn.vn(T,x)).next(()=>x)))})).apply(this,arguments)}function _A(n,e){return fv.apply(this,arguments)}function fv(){return(fv=(0,p.Z)(function*(n,e,t=un()){const r=yield M6(n,T1(i7(e.bundledQuery))),o=Be(n);return o.persistence.runTransaction("Save named query","readwrite",c=>{const h=_r(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Je.saveNamedQuery(c,e);const m=r.withResumeToken(wi.EMPTY_BYTE_STRING,h);return o.Un=o.Un.insert(m.targetId,m),o.ze.updateTargetData(c,m).next(()=>o.ze.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>o.ze.addMatchingKeys(c,t,r.targetId)).next(()=>o.Je.saveNamedQuery(c,e))})})).apply(this,arguments)}class pv{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Le.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var r;return this.Yn.set(t.id,{id:(r=t).id,version:r.version,createTime:_r(r.createTime)}),Le.resolve()}getNamedQuery(e,t){return Le.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:i7(r.bundledQuery),readTime:_r(r.readTime)}),Le.resolve();var r}}class I6{constructor(){this.Zn=new Jn(ei.ts),this.es=new Jn(ei.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new ei(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new ei(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}cs(e){const t=new Ye(new ln([])),r=new ei(t,e),o=new ei(t,e+1),c=[];return this.es.forEachInRange([r,o],h=>{this.rs(h),c.push(h.key)}),c}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ye(new ln([])),r=new ei(t,e),o=new ei(t,e+1);let c=un();return this.es.forEachInRange([r,o],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new ei(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ei{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ye.comparator(e.key,t.key)||Ht(e.ls,t.ls)}static ns(e,t){return Ht(e.ls,t.ls)||Ye.comparator(e.key,t.key)}}class jb{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new Jn(ei.ts)}checkEmpty(e){return Le.resolve(0===this.In.length)}addMutationBatch(e,t,r,o){const c=this.fs;this.fs++;const h=new e7(c,t,r,o);this.In.push(h);for(const m of o)this.ds=this.ds.add(new ei(m.key,c)),this.Ht.addToCollectionParentIndex(e,m.key.path.popLast());return Le.resolve(h)}lookupMutationBatch(e,t){return Le.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const o=this._s(t+1),c=o<0?0:o;return Le.resolve(this.In.length>c?this.In[c]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Le.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ei(t,0),o=new ei(t,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([r,o],h=>{const m=this.ws(h.ls);c.push(m)}),Le.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jn(Ht);return t.forEach(o=>{const c=new ei(o,0),h=new ei(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([c,h],m=>{r=r.add(m.ls)})}),Le.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;Ye.isDocumentKey(c)||(c=c.child(""));const h=new ei(new Ye(c),0);let m=new Jn(Ht);return this.ds.forEachWhile(y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===o&&(m=m.add(y.ls)),!0)},h),Le.resolve(this.gs(m))}gs(e){const t=[];return e.forEach(r=>{const o=this.ws(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){pt(0===this.ys(t.batchId,"removed")),this.In.shift();let r=this.ds;return Le.forEach(t.mutations,o=>{const c=new ei(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}te(e){}containsKey(e,t){const r=new ei(t,0),o=this.ds.firstAfterOrEqual(r);return Le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return Le.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class mv{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Pr(Ye.comparator),this.size=0}addEntry(e,t,r){const o=t.key,c=this.docs.get(o),h=c?c.size:0,m=this.ps(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:m,readTime:r}),this.size+=m-h,this.Ht.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Le.resolve(r?r.document.clone():Kt.newInvalidDocument(t))}getEntries(e,t){let r=S1();return t.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.clone():Kt.newInvalidDocument(o))}),Le.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=S1();const c=new Ye(t.path.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:m,value:{document:y,readTime:E}}=h.getNext();if(!t.path.isPrefixOf(m.path))break;E.compareTo(r)<=0||O3(t,y)&&(o=o.insert(y.key,y.clone()))}return Le.resolve(o)}Ts(e,t){return Le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Q3(this)}getSize(e){return Le.resolve(this.size)}}class Q3 extends q3{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.Se.addEntry(e,o.document,this.getReadTime(r))):this.Se.removeEntry(r)}),Le.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class $b{constructor(e){this.persistence=e,this.Es=new n2(t=>co(t),Zi),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.Is=0,this.As=new I6,this.targetCount=0,this.Rs=D1.se()}forEachTarget(e,t){return this.Es.forEach((r,o)=>t(o)),Le.resolve()}getLastRemoteSnapshotVersion(e){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Le.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Is&&(this.Is=t),Le.resolve()}ae(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new D1(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Le.resolve()}updateTargetData(e,t){return this.ae(t),Le.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Le.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.Es.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Es.delete(h),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),Le.waitFor(c).next(()=>o)}getTargetCount(e){return Le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Es.get(t)||null;return Le.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),Le.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(h=>{c.push(o.markPotentiallyOrphaned(e,h))}),Le.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return Le.resolve(r)}containsKey(e,t){return Le.resolve(this.As.containsKey(t))}}class Gb{constructor(e,t){this.bs={},this.Le=new ws(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new $b(this),this.Ht=new rv,this.He=new mv(this.Ht,r=>this.referenceDelegate.Ps(r)),this.N=new Jg(t),this.Je=new pv(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new jb(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const o=new qb(this.Le.next());return this.referenceDelegate.vs(),r(o).next(c=>this.referenceDelegate.Vs(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ss(e,t){return Le.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class qb extends Jf{constructor(e){super(),this.currentSequenceNumber=e}}class y7{constructor(e){this.persistence=e,this.Ds=new I6,this.Cs=null}static Ns(e){return new y7(e)}get xs(){if(this.Cs)return this.Cs;throw rt()}addReference(e,t,r){return this.Ds.addReference(r,t),this.xs.delete(r.toString()),Le.resolve()}removeReference(e,t,r){return this.Ds.removeReference(r,t),this.xs.add(r.toString()),Le.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Le.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.xs.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.xs,r=>{const o=Ye.fromPath(r);return this.ks(e,o).next(c=>{c||t.removeEntry(o)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Le.or([()=>Le.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function gv(n,e){return`firestore_clients_${n}_${e}`}function _7(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function C7(n,e){return`firestore_targets_${n}_${e}`}class Dh{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static $s(e,t,r){const o=JSON.parse(r);let c,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(c=new ke(o.error.code,o.error.message))),h?new Dh(e,t,o.state,c):(Cn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zo{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let o,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(o=new ke(r.error.code,r.error.message))),c?new Zo(e,r.state,o):(Cn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,c=dh();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=bf(r.activeTargetIds[h]),c=c.add(r.activeTargetIds[h]);return o?new Nh(e,c):(Cn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Lh{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Lh(t.clientId,t.onlineState):(Cn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class b7{constructor(){this.activeTargetIds=dh()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rh{constructor(e,t,r,o,c){this.window=e,this.Oe=t,this.persistenceKey=r,this.Ls=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Pr(Ht),this.started=!1,this.Ks=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.js=gv(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new b7),this.Ws=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,p.Z)(function*(){const t=yield e.syncEngine.pn();for(const o of t){if(o===e.Ls)continue;const c=e.getItem(gv(e.persistenceKey,o));if(c){const h=Nh.$s(o,c);h&&(e.qs=e.qs.insert(h.clientId,h))}}e.Ys();const r=e.storage.getItem(e.Hs);if(r){const o=e.Xs(r);o&&e.Zs(o)}for(const o of e.Ks)e.Us(o);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,r){this.ei(e,t,r),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(C7(this.persistenceKey,e));if(r){const o=Zo.$s(e,r);o&&(t=o.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(C7(this.persistenceKey,e))}updateQueryState(e,t,r){this.ii(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.ni(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.js)return void Cn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,p.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ws.test(r.key)){if(null==r.newValue){const o=t.ai(r.key);return t.ci(o,null)}{const o=t.ui(r.key,r.newValue);if(o)return t.ci(o.clientId,o)}}else if(t.Gs.test(r.key)){if(null!==r.newValue){const o=t.hi(r.key,r.newValue);if(o)return t.li(o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.fi(r.key,r.newValue);if(o)return t.di(o)}}else if(r.key===t.Hs){if(null!==r.newValue){const o=t.Xs(r.newValue);if(o)return t.Zs(o)}}else if(r.key===t.Qs){const o=function(c){let h=ws.T;if(null!=c)try{const m=JSON.parse(c);pt("number"==typeof m),h=m}catch(m){Cn("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==ws.T&&t.sequenceNumberHandler(o)}else if(r.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(r)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,r){const o=new Dh(this.currentUser,e,t,r),c=_7(this.persistenceKey,this.currentUser,e);this.setItem(c,o.Os())}ni(e){const t=_7(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,r){const o=C7(this.persistenceKey,e),c=new Zo(e,t,r);this.setItem(o,c.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const r=this.ai(e);return Nh.$s(r,t)}hi(e,t){const r=this.Gs.exec(e),o=Number(r[1]);return Dh.$s(new Ri(void 0!==r[2]?r[2]:null),o,t)}fi(e,t){const r=this.zs.exec(e),o=Number(r[1]);return Zo.$s(o,t)}Xs(e){return Lh.$s(e)}li(e){var t=this;return(0,p.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const r=t?this.qs.insert(e,t):this.qs.remove(e),o=this.ti(this.qs),c=this.ti(r),h=[],m=[];return c.forEach(y=>{o.has(y)||h.push(y)}),o.forEach(y=>{c.has(y)||m.push(y)}),this.syncEngine.gi(h,m).then(()=>{this.qs=r})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=dh();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class vv{constructor(){this.yi=new b7,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,r){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new b7,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class yv{Ti(e){}shutdown(){}}class _v{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const w7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Wb{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class Cv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,r,o){const c=this.Bi(e,t);Fe("RestConnection","Sending: ",c,r);const h={};return this.Ui(h,o),this.qi(e,c,h,r).then(m=>(Fe("RestConnection","Received: ",m),m),m=>{throw f4("RestConnection",`${e} failed with error: `,m,"url: ",c,"request:",r),m})}Ki(e,t,r,o){return this.Li(e,t,r,o)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Zl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const r in t.authHeaders)t.authHeaders.hasOwnProperty(r)&&(e[r]=t.authHeaders[r])}Bi(e,t){return`${this.Fi}/v1/${t}:${w7[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,r,o){return new Promise((c,h)=>{const m=new lb;m.listenOnce(ob.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Q8.NO_ERROR:const E=m.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(E)),c(E);break;case Q8.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),h(new ke(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Q8.HTTP_ERROR:const T=m.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',T,"response text:",m.getResponseText()),T>0){const x=m.getResponseJson().error;if(x&&x.status&&x.message){const k=function(V){const Y=V.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(Y)>=0?Y:ye.UNKNOWN}(x.status);h(new ke(k,x.message))}else h(new ke(ye.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ke(ye.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(o);m.send(t,"POST",y,r,15)})}ji(e,t){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vg(),c=Wl(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new cb({})),this.Ui(h.initMessageHeaders,t),(0,M.uI)()||(0,M.b$)()||(0,M.d)()||(0,M.w1)()||(0,M.Mn)()||(0,M.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=r.join("");Fe("Connection","Creating WebChannel: "+m,h);const y=o.createWebChannel(m,h);let E=!1,T=!1;const x=new Wb({vi:V=>{T?Fe("Connection","Not sending because WebChannel is closed:",V):(E||(Fe("Connection","Opening WebChannel transport."),y.open(),E=!0),Fe("Connection","WebChannel sending:",V),y.send(V))},Vi:()=>y.close()}),k=(V,Y,Ee)=>{V.listen(Y,Re=>{try{Ee(Re)}catch(Ge){setTimeout(()=>{throw Ge},0)}})};return k(y,J8.EventType.OPEN,()=>{T||Fe("Connection","WebChannel transport opened.")}),k(y,J8.EventType.CLOSE,()=>{T||(T=!0,Fe("Connection","WebChannel transport closed"),x.$i())}),k(y,J8.EventType.ERROR,V=>{T||(T=!0,f4("Connection","WebChannel transport errored:",V),x.$i(new ke(ye.UNAVAILABLE,"The operation could not be completed")))}),k(y,J8.EventType.MESSAGE,V=>{var Y;if(!T){const Ee=V.data[0];pt(!!Ee);const Re=Ee,Ge=Re.error||(null===(Y=Re[0])||void 0===Y?void 0:Y.error);if(Ge){Fe("Connection","WebChannel received error:",Ge);const ot=Ge.status;let Lt=function(Sn){const Or=hr[Sn];if(void 0!==Or)return uh(Or)}(ot),ht=Ge.message;void 0===Lt&&(Lt=ye.INTERNAL,ht="Unknown error status: "+ot+" with message "+Ge.message),T=!0,x.$i(new ke(Lt,ht)),y.close()}else Fe("Connection","WebChannel received:",Ee),x.Oi(Ee)}}),k(c,ab.STAT_EVENT,V=>{V.stat===d4.PROXY?Fe("Connection","Detected buffering proxy"):V.stat===d4.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.ki()},0),x}}function E7(){return"undefined"!=typeof window?window:null}function kh(){return"undefined"!=typeof document?document:null}function J3(n){return new Ib(n,!0)}class M7{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Oe=e,this.timerId=t,this.Qi=r,this.Wi=o,this.Gi=c,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),o=Math.max(0,t-r);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Ph{constructor(e,t,r,o,c,h){this.Oe=e,this.er=r,this.nr=o,this.credentialsProvider=c,this.listener=h,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new M7(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,p.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,p.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var r=this;return(0,p.Z)(function*(){r._r(),r.rr.cancel(),r.sr++,3!==e?r.rr.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(Cn(t.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),r.rr.Yi()):t&&t.code===ye.UNAUTHENTICATED&&r.credentialsProvider.invalidateToken(),null!==r.stream&&(r.mr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(r=>{this.sr===t&&this.yr(r)},r=>{e(()=>{const o=new ke(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.pr(o)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(r=>{t(()=>this.pr(r))}),this.stream.onMessage(r=>{t(()=>this.onMessage(r))})}ur(){var e=this;this.state=4,this.rr.Xi((0,p.Z)(function*(){e.state=0,e.start()}))}pr(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zb extends Ph{constructor(e,t,r,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,r,c),this.N=o}Tr(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:rt(),o=e.targetChange.targetIds||[],c=function(y,E){return y.D?(pt(void 0===E||"string"==typeof E),wi.fromBase64String(E||"")):(pt(void 0===E||E instanceof Uint8Array),wi.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(y){const E=void 0===y.code?ye.UNKNOWN:uh(y.code);return new ke(E,y.message||"")}(h);t=new ph(r,o,c,m||null)}else if("documentChange"in e){const r=e.documentChange,o=lo(n,r.document.name),c=_r(r.document.updateTime),h=new ki({mapValue:{fields:r.document.fields}}),m=Kt.newFoundDocument(o,c,h);t=new B3(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=lo(n,r.document),c=r.readTime?_r(r.readTime):xt.min(),h=Kt.newNoDocument(o,c);t=new B3([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=lo(n,r.document);t=new B3([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return rt();{const r=e.filter,c=new zg(r.count||0);t=new fh(r.targetId,c)}}var y;return t}(this.N,e),r=function(o){if(!("targetChange"in o))return xt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?xt.min():c.readTime?_r(c.readTime):xt.min()}(e);return this.listener.Er(t,r)}Ir(e){const t={};t.database=m6(this.N),t.addTarget=function(o,c){let h;const m=c.target;return h=Xl(m)?{documents:$g(o,m)}:{query:Gg(o,m)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=$f(o,c.resumeToken):c.snapshotVersion.compareTo(xt.min())>0&&(h.readTime=f6(o,c.snapshotVersion.toTimestamp())),h}(this.N,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.wr(t)}Ar(e){const t={};t.database=m6(this.N),t.removeTarget=e,this.wr(t)}}class bv extends Ph{constructor(e,t,r,o,c){super(e,"write_stream_connection_backoff","write_stream_idle",t,r,c),this.N=o,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Tr(e){return this.nr.ji("Write",e)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(r,o){let c=_r(r.updateTime?r.updateTime:o);return c.isEqual(xt.min())&&(c=_r(o)),new _b(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.vr(r,t)}return pt(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=m6(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vh(this.N,r))};this.wr(t)}}class Kb extends class{}{constructor(e,t,r){super(),this.credentials=e,this.nr=t,this.N=r,this.Dr=!1}Cr(){if(this.Dr)throw new ke(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,r){return this.Cr(),this.credentials.getToken().then(o=>this.nr.Li(e,t,r,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ye.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new ke(ye.UNKNOWN,o.toString())})}Ki(e,t,r){return this.Cr(),this.credentials.getToken().then(o=>this.nr.Ki(e,t,r,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ye.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new ke(ye.UNKNOWN,o.toString())})}terminate(){this.Dr=!0}}class Yb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Cn(t),this.$r=!1):Fe("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Qb{constructor(e,t,r,o,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=c,this.Qr.Ti(m=>{r.enqueueAndForget((0,p.Z)(function*(){var y;sc(h)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,p.Z)(function*(E){const T=Be(E);T.Kr.add(4),yield A6(T),T.Wr.set("Unknown"),T.Kr.delete(4),yield X3(T)}),function(E){return y.apply(this,arguments)})(h))}))}),this.Wr=new Yb(r,o)}}function X3(n){return I7.apply(this,arguments)}function I7(){return(I7=(0,p.Z)(function*(n){if(sc(n))for(const e of n.jr)yield e(!0)})).apply(this,arguments)}function A6(n){return A7.apply(this,arguments)}function A7(){return(A7=(0,p.Z)(function*(n){for(const e of n.jr)yield e(!1)})).apply(this,arguments)}function zh(n,e){const t=Be(n);t.qr.has(e.targetId)||(t.qr.set(e.targetId,e),Vh(t)?T7(t):Yi(t).cr()&&Oh(t,e))}function T6(n,e){const t=Be(n),r=Yi(t);t.qr.delete(e),r.cr()&&wv(t,e),0===t.qr.size&&(r.cr()?r.lr():sc(t)&&t.Wr.set("Unknown"))}function Oh(n,e){n.Gr.Y(e.targetId),Yi(n).Ir(e)}function wv(n,e){n.Gr.Y(e),Yi(n).Ar(e)}function T7(n){n.Gr=new Mb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qr.get(e)||null}),Yi(n).start(),n.Wr.Or()}function Vh(n){return sc(n)&&!Yi(n).ar()&&n.qr.size>0}function sc(n){return 0===Be(n).Kr.size}function Ev(n){n.Gr=void 0}function Jb(n){return eu.apply(this,arguments)}function eu(){return(eu=(0,p.Z)(function*(n){n.qr.forEach((e,t)=>{Oh(n,e)})})).apply(this,arguments)}function S7(n,e){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,p.Z)(function*(n,e){Ev(n),Vh(n)?(n.Wr.Lr(e),T7(n)):n.Wr.set("Unknown")})).apply(this,arguments)}function x7(n,e,t){return D7.apply(this,arguments)}function D7(){return(D7=(0,p.Z)(function*(n,e,t){if(n.Wr.set("Online"),e instanceof ph&&2===e.state&&e.cause)try{yield(r=(0,p.Z)(function*(o,c){const h=c.cause;for(const m of c.targetIds)o.qr.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.qr.delete(m),o.Gr.removeTarget(m))}),function(o,c){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hh(n,r)}else if(e instanceof B3?n.Gr.rt(e):e instanceof fh?n.Gr.ft(e):n.Gr.ct(e),!t.isEqual(xt.min()))try{const r=yield E6(n.localStore);t.compareTo(r)>=0&&(yield function(o,c){const h=o.Gr._t(c);return h.targetChanges.forEach((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const E=o.qr.get(y);E&&o.qr.set(y,E.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach(m=>{const y=o.qr.get(m);if(!y)return;o.qr.set(m,y.withResumeToken(wi.EMPTY_BYTE_STRING,y.snapshotVersion)),wv(o,m);const E=new nc(y.target,m,1,y.sequenceNumber);Oh(o,E)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield Hh(n,r)}var r})).apply(this,arguments)}function Hh(n,e,t){return tu.apply(this,arguments)}function tu(){return(tu=(0,p.Z)(function*(n,e,t){if(!ec(e))throw e;n.Kr.add(1),yield A6(n),n.Wr.set("Offline"),t||(t=()=>E6(n.localStore)),n.asyncQueue.enqueueRetryable((0,p.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Kr.delete(1),yield X3(n)}))})).apply(this,arguments)}function Mv(n,e){return e().catch(t=>Hh(n,t,e))}function S4(n){return N7.apply(this,arguments)}function N7(){return(N7=(0,p.Z)(function*(n){const e=Be(n),t=r2(e);let r=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;Iv(e);)try{const o=yield Ub(e.localStore,r);if(null===o){0===e.Ur.length&&t.lr();break}r=o.batchId,Av(e,o)}catch(o){yield Hh(e,o)}L7(e)&&Xb(e)})).apply(this,arguments)}function Iv(n){return sc(n)&&n.Ur.length<10}function Av(n,e){n.Ur.push(e);const t=r2(n);t.cr()&&t.br&&t.Pr(e.mutations)}function L7(n){return sc(n)&&!r2(n).ar()&&n.Ur.length>0}function Xb(n){r2(n).start()}function ew(n){return oc.apply(this,arguments)}function oc(){return(oc=(0,p.Z)(function*(n){r2(n).Sr()})).apply(this,arguments)}function CA(n){return nu.apply(this,arguments)}function nu(){return(nu=(0,p.Z)(function*(n){const e=r2(n);for(const t of n.Ur)e.Pr(t.mutations)})).apply(this,arguments)}function Uh(n,e,t){return R7.apply(this,arguments)}function R7(){return(R7=(0,p.Z)(function*(n,e,t){const r=n.Ur.shift(),o=t7.from(r,e,t);yield Mv(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield S4(n)})).apply(this,arguments)}function S6(n,e){return k7.apply(this,arguments)}function k7(){return(k7=(0,p.Z)(function*(n,e){var t;e&&r2(n).br&&(yield(t=(0,p.Z)(function*(r,o){if(bb(c=o.code)&&c!==ye.ABORTED){const h=r.Ur.shift();r2(r).hr(),yield Mv(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield S4(r)}var c}),function(r,o){return t.apply(this,arguments)})(n,e)),L7(n)&&Xb(n)})).apply(this,arguments)}function Tv(n,e){return P7.apply(this,arguments)}function P7(){return(P7=(0,p.Z)(function*(n,e){const t=Be(n);e?(t.Kr.delete(2),yield X3(t)):e||(t.Kr.add(2),yield A6(t),t.Wr.set("Unknown"))})).apply(this,arguments)}function Yi(n){return n.zr||(n.zr=function(e,t,r){const o=Be(e);return o.Cr(),new Zb(t,o.nr,o.credentials,o.N,r)}(n.datastore,n.asyncQueue,{Si:Jb.bind(null,n),Ci:S7.bind(null,n),Er:x7.bind(null,n)}),n.jr.push(function(){var e=(0,p.Z)(function*(t){t?(n.zr.hr(),Vh(n)?T7(n):n.Wr.set("Unknown")):(yield n.zr.stop(),Ev(n))});return function(t){return e.apply(this,arguments)}}())),n.zr}function r2(n){return n.Hr||(n.Hr=function(e,t,r){const o=Be(e);return o.Cr(),new bv(t,o.nr,o.credentials,o.N,r)}(n.datastore,n.asyncQueue,{Si:ew.bind(null,n),Ci:S6.bind(null,n),Vr:CA.bind(null,n),vr:Uh.bind(null,n)}),n.jr.push(function(){var e=(0,p.Z)(function*(t){t?(n.Hr.hr(),yield S4(n)):(yield n.Hr.stop(),n.Ur.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Ur.length} pending writes`),n.Ur=[]))});return function(t){return e.apply(this,arguments)}}())),n.Hr}class Sv{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,c){const h=Date.now()+r,m=new Sv(e,t,h,o,c);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i2(n,e){if(Cn("AsyncQueue",`${e}: ${n}`),ec(n))return new ke(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class x6{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=U3(),this.sortedSet=new Pr(this.comparator)}static emptySet(e){return new x6(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof x6)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new x6;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class xv{constructor(){this.Jr=new Pr(Ye.comparator)}track(e){const t=e.doc.key,r=this.Jr.get(t);r?0!==e.type&&3===r.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==r.type?this.Jr=this.Jr.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jr=this.Jr.remove(t):1===e.type&&2===r.type?this.Jr=this.Jr.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):rt():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,r)=>{e.push(r)}),e}}class ru{constructor(e,t,r,o,c,h,m,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new ru(e,t,x6.emptySet(t),c,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&z3(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class tw{constructor(){this.Xr=void 0,this.listeners=[]}}class nw{constructor(){this.queries=new n2(e=>Nf(e),z3),this.onlineState="Unknown",this.Zr=new Set}}function z7(n,e){return iu.apply(this,arguments)}function iu(){return(iu=(0,p.Z)(function*(n,e){const t=Be(n),r=e.query;let o=!1,c=t.queries.get(r);if(c||(o=!0,c=new tw),o)try{c.Xr=yield t.onListen(r)}catch(h){const m=i2(h,`Initialization of query '${Lf(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,c),c.listeners.push(e),e.eo(t.onlineState),c.Xr&&e.no(c.Xr)&&Nv(t)})).apply(this,arguments)}function Bh(n,e){return su.apply(this,arguments)}function su(){return(su=(0,p.Z)(function*(n,e){const t=Be(n),r=e.query;let o=!1;const c=t.queries.get(r);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),o=0===c.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function Dv(n,e){const t=Be(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.no(o)&&(r=!0);h.Xr=o}}r&&Nv(t)}function rw(n,e,t){const r=Be(n),o=r.queries.get(e);if(o)for(const c of o.listeners)c.onError(t);r.queries.delete(e)}function Nv(n){n.Zr.forEach(e=>{e.next()})}class O7{constructor(e,t,r){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=r||{}}no(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new ru(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class iw{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class Lv{constructor(e){this.N=e}zn(e){return lo(this.N,e)}Hn(e){return e.metadata.exists?Ug(this.N,e.document,!1):Kt.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return _r(e)}}class Rv{constructor(e,t,r){this.lo=e,this.localStore=t,this.N=r,this.queries=[],this.documents=[],this.progress=V7(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,r=new Lv(this.N);for(const o of e)if(o.metadata.queries){const c=r.zn(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||un()).add(c);t.set(h,m)}}return t}complete(){var e=this;return(0,p.Z)(function*(){const t=yield function(n,e,t,r){return dv.apply(this,arguments)}(e.localStore,new Lv(e.N),e.documents,e.lo.id),r=e.wo(e.documents);for(const o of e.queries)yield _A(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new Z3(Object.assign({},e.progress),t)})()}}function V7(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class F7{constructor(e){this.key=e}}class kv{constructor(e){this.key=e}}class Pv{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=un(),this.mutatedKeys=un(),this.po=db(e),this.To=new x6(this.po)}get Eo(){return this._o}Io(e,t){const r=t?t.Ao:new xv,o=t?t.To:this.To;let c=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const y=k3(this.query)&&o.size===this.query.limit?o.last():null,E=ih(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,x)=>{const k=o.get(T),V=O3(this.query,x)?x:null,Y=!!k&&this.mutatedKeys.has(k.key),Ee=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Re=!1;k&&V?k.data.isEqual(V.data)?Y!==Ee&&(r.track({type:3,doc:V}),Re=!0):this.Ro(k,V)||(r.track({type:2,doc:V}),Re=!0,(y&&this.po(V,y)>0||E&&this.po(V,E)<0)&&(m=!0)):!k&&V?(r.track({type:0,doc:V}),Re=!0):k&&!V&&(r.track({type:1,doc:k}),Re=!0,(y||E)&&(m=!0)),Re&&(V?(h=h.add(V),c=Ee?c.add(T):c.delete(T)):(h=h.delete(T),c=c.delete(T)))}),k3(this.query)||ih(this.query))for(;h.size>this.query.limit;){const T=k3(this.query)?h.last():h.first();h=h.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{To:h,Ao:r,Ln:m,mutatedKeys:c}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;const c=e.Ao.Yr();c.sort((E,T)=>function(x,k){const V=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return V(x)-V(k)}(E.type,T.type)||this.po(E.doc,T.doc)),this.bo(r);const h=t?this.Po():[],m=0===this.yo.size&&this.current?1:0,y=m!==this.mo;return this.mo=m,0!==c.length||y?{snapshot:new ru(this.query,e.To,o,c,e.mutatedKeys,0===m,y,!1),vo:h}:{vo:h}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({To:this.To,Ao:new xv,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(t=>this._o=this._o.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this._o=this._o.delete(t)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=un(),this.To.forEach(r=>{this.Vo(r.key)&&(this.yo=this.yo.add(r.key))});const t=[];return e.forEach(r=>{this.yo.has(r)||t.push(new kv(r))}),this.yo.forEach(r=>{e.has(r)||t.push(new F7(r))}),t}So(e){this._o=e.Gn,this.yo=un();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return ru.fromInitialDocuments(this.query,this.To,this.mutatedKeys,0===this.mo)}}class zv{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jh{constructor(e){this.key=e,this.Co=!1}}class sw{constructor(e,t,r,o,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.No={},this.xo=new n2(m=>Nf(m),z3),this.ko=new Map,this.$o=new Set,this.Oo=new Pr(Ye.comparator),this.Fo=new Map,this.Mo=new I6,this.Lo={},this.Bo=new Map,this.Uo=D1.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function Ov(n,e){return D6.apply(this,arguments)}function D6(){return(D6=(0,p.Z)(function*(n,e){const t=cc(n);let r,o;const c=t.xo.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),o=c.view.Do();else{const h=yield M6(t.localStore,T1(e)),m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield N6(t,e,r,"current"===m),t.isPrimaryClient&&zh(t.remoteStore,h)}return o})).apply(this,arguments)}function N6(n,e,t,r){return x4.apply(this,arguments)}function x4(){return(x4=(0,p.Z)(function*(n,e,t,r){n.Ko=(T,x,k)=>{return(V=(0,p.Z)(function*(Y,Ee,Re,Ge){let ot=Ee.view.Io(Re);ot.Ln&&(ot=yield Y3(Y.localStore,Ee.query,!1).then(({documents:Sn})=>Ee.view.Io(Sn,ot)));const Lt=Ge&&Ge.targetChanges.get(Ee.targetId),ht=Ee.view.applyChanges(ot,Y.isPrimaryClient,Lt);return s2(Y,Ee.targetId,ht.vo),ht.snapshot}),function(Y,Ee,Re,Ge){return V.apply(this,arguments)})(n,T,x,k);var V};const o=yield Y3(n.localStore,e,!0),c=new Pv(e,o.Gn),h=c.Io(o.documents),m=w4.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=c.applyChanges(h,n.isPrimaryClient,m);s2(n,t,y.vo);const E=new zv(e,t,c);return n.xo.set(e,E),n.ko.has(t)?n.ko.get(t).push(e):n.ko.set(t,[e]),y.snapshot})).apply(this,arguments)}function ow(n,e){return H7.apply(this,arguments)}function H7(){return(H7=(0,p.Z)(function*(n,e){const t=Be(n),r=t.xo.get(e),o=t.ko.get(r.targetId);if(o.length>1)return t.ko.set(r.targetId,o.filter(c=>!z3(c,e))),void t.xo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield T4(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),T6(t.remoteStore,r.targetId),L6(t,r.targetId)}).catch(ic))):(L6(t,r.targetId),yield T4(t.localStore,r.targetId,!0))})).apply(this,arguments)}function U7(){return(U7=(0,p.Z)(function*(n,e,t){const r=L4(n);try{const o=yield function(c,h){const m=Be(c),y=Rr.now(),E=h.reduce((x,k)=>x.add(k.key),un());let T;return m.persistence.runTransaction("Locally write mutations","readwrite",x=>m.Qn.Pn(x,E).next(k=>{T=k;const V=[];for(const Y of h){const Ee=lh(Y,T.get(Y.key));null!=Ee&&V.push(new X2(Y.key,Ee,nh(Ee.value.mapValue),Nn.exists(!0)))}return m.In.addMutationBatch(x,y,V,h)})).then(x=>(x.applyToLocalDocumentSet(T),{batchId:x.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,h,m){let y=c.Lo[c.currentUser.toKey()];y||(y=new Pr(Ht)),y=y.insert(h,m),c.Lo[c.currentUser.toKey()]=y}(r,o.batchId,t),yield ac(r,o.changes),yield S4(r.remoteStore)}catch(o){const c=i2(o,"Failed to persist write");t.reject(c)}})).apply(this,arguments)}function Vv(n,e){return B7.apply(this,arguments)}function B7(){return(B7=(0,p.Z)(function*(n,e){const t=Be(n);try{const r=yield K3(t.localStore,e);e.targetChanges.forEach((o,c)=>{const h=t.Fo.get(c);h&&(pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Co=!0:o.modifiedDocuments.size>0?pt(h.Co):o.removedDocuments.size>0&&(pt(h.Co),h.Co=!1))}),yield ac(t,r,e)}catch(r){yield ic(r)}})).apply(this,arguments)}function Fv(n,e,t){const r=Be(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.xo.forEach((c,h)=>{const m=h.view.eo(e);m.snapshot&&o.push(m.snapshot)}),function(c,h){const m=Be(c);m.onlineState=h;let y=!1;m.queries.forEach((E,T)=>{for(const x of T.listeners)x.eo(h)&&(y=!0)}),y&&Nv(m)}(r.eventManager,e),o.length&&r.No.Er(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function aw(n,e,t){return j7.apply(this,arguments)}function j7(){return(j7=(0,p.Z)(function*(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Fo.get(e),c=o&&o.key;if(c){let h=new Pr(Ye.comparator);h=h.insert(c,Kt.newNoDocument(c,xt.min()));const m=un().add(c),y=new d6(xt.min(),new Map,new Jn(Ht),h,m);yield Vv(r,y),r.Oo=r.Oo.remove(c),r.Fo.delete(e),W7(r)}else yield T4(r.localStore,e,!1).then(()=>L6(r,e,t)).catch(ic)})).apply(this,arguments)}function cw(n,e){return $7.apply(this,arguments)}function $7(){return($7=(0,p.Z)(function*(n,e){const t=Be(n),r=e.batch.batchId;try{const o=yield Hb(t.localStore,e);q7(t,r,null),G7(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ac(t,o)}catch(o){yield ic(o)}})).apply(this,arguments)}function lw(n,e,t){return Hv.apply(this,arguments)}function Hv(){return(Hv=(0,p.Z)(function*(n,e,t){const r=Be(n);try{const o=yield function(c,h){const m=Be(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return m.In.lookupMutationBatch(y,h).next(T=>(pt(null!==T),E=T.keys(),m.In.removeMutationBatch(y,T))).next(()=>m.In.performConsistencyCheck(y)).next(()=>m.Qn.Pn(y,E))})}(r.localStore,e);q7(r,e,t),G7(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ac(r,o)}catch(o){yield ic(o)}})).apply(this,arguments)}function D4(){return(D4=(0,p.Z)(function*(n,e){const t=Be(n);sc(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const h=Be(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.In.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Bo.get(r)||[];o.push(e),t.Bo.set(r,o)}catch(r){const o=i2(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function G7(n,e){(n.Bo.get(e)||[]).forEach(t=>{t.resolve()}),n.Bo.delete(e)}function q7(n,e,t){const r=Be(n);let o=r.Lo[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Lo[r.currentUser.toKey()]=o}}function L6(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ko.get(e))n.xo.delete(r),t&&n.No.jo(r,t);n.ko.delete(e),n.isPrimaryClient&&n.Mo.cs(e).forEach(r=>{n.Mo.containsKey(r)||ou(n,r)})}function ou(n,e){n.$o.delete(e.path.canonicalString());const t=n.Oo.get(e);null!==t&&(T6(n.remoteStore,t),n.Oo=n.Oo.remove(e),n.Fo.delete(t),W7(n))}function s2(n,e,t){for(const r of t)r instanceof F7?(n.Mo.addReference(r.key,e),Uv(n,r)):r instanceof kv?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Mo.removeReference(r.key,e),n.Mo.containsKey(r.key)||ou(n,r.key)):rt()}function Uv(n,e){const t=e.key,r=t.path.canonicalString();n.Oo.get(t)||n.$o.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.$o.add(r),W7(n))}function W7(n){for(;n.$o.size>0&&n.Oo.size<n.maxConcurrentLimboResolutions;){const e=n.$o.values().next().value;n.$o.delete(e);const t=new Ye(ln.fromString(e)),r=n.Uo.next();n.Fo.set(r,new jh(t)),n.Oo=n.Oo.insert(t,r),zh(n.remoteStore,new nc(T1(c6(t.path)),r,2,ws.T))}}function ac(n,e,t){return Z7.apply(this,arguments)}function Z7(){return(Z7=(0,p.Z)(function*(n,e,t){const r=Be(n),o=[],c=[],h=[];var m;r.xo.isEmpty()||(r.xo.forEach((m,y)=>{h.push(r.Ko(y,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,E.fromCache?"not-current":"current"),o.push(E);const T=f7.kn(y.targetId,E);c.push(T)}}))}),yield Promise.all(h),r.No.Er(o),yield(m=(0,p.Z)(function*(y,E){const T=Be(y);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>Le.forEach(E,k=>Le.forEach(k.Nn,V=>T.persistence.referenceDelegate.addReference(x,k.targetId,V)).next(()=>Le.forEach(k.xn,V=>T.persistence.referenceDelegate.removeReference(x,k.targetId,V)))))}catch(x){if(!ec(x))throw x;Fe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of E){const k=x.targetId;if(!x.fromCache){const V=T.Un.get(k),Ee=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);T.Un=T.Un.insert(k,Ee)}}}),function(y,E){return m.apply(this,arguments)})(r.localStore,c))})).apply(this,arguments)}function $h(n,e){return K7.apply(this,arguments)}function K7(){return(K7=(0,p.Z)(function*(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield m7(t.localStore,e);t.currentUser=e,(o=t).Bo.forEach(h=>{h.forEach(m=>{m.reject(new ke(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Bo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ac(t,r.Wn)}var o})).apply(this,arguments)}function hw(n,e){const t=Be(n),r=t.Fo.get(e);if(r&&r.Co)return un().add(r.key);{let o=un();const c=t.ko.get(e);if(!c)return o;for(const h of c){const m=t.xo.get(h);o=o.unionWith(m.view.Eo)}return o}}function Bv(n,e){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,p.Z)(function*(n,e){const t=Be(n),r=yield Y3(t.localStore,e.query,!0),o=e.view.So(r);return t.isPrimaryClient&&s2(t,e.targetId,o.vo),o})).apply(this,arguments)}function Y7(n){return qh.apply(this,arguments)}function qh(){return(qh=(0,p.Z)(function*(n){const e=Be(n);return g7(e.localStore).then(t=>ac(e,t))})).apply(this,arguments)}function jv(n,e,t,r){return Q7.apply(this,arguments)}function Q7(){return(Q7=(0,p.Z)(function*(n,e,t,r){const o=Be(n),c=yield function(h,m){const y=Be(h),E=Be(y.In);return y.persistence.runTransaction("Lookup mutation documents","readonly",T=>E.Xt(T,m).next(x=>x?y.Qn.Pn(T,x):Le.resolve(null)))}(o.localStore,e);var m;null!==c?("pending"===t?yield S4(o.remoteStore):"acknowledged"===t||"rejected"===t?(q7(o,e,r||null),G7(o,e),m=e,Be(Be(o.localStore).In).te(m)):rt(),yield ac(o,c)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Wh(){return(Wh=(0,p.Z)(function*(n,e){const t=Be(n);if(cc(t),L4(t),!0===e&&!0!==t.qo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield $v(t,r.toArray());t.qo=!0,yield Tv(t.remoteStore,!0);for(const c of o)zh(t.remoteStore,c)}else if(!1===e&&!1!==t.qo){const r=[];let o=Promise.resolve();t.ko.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(L6(t,h),T4(t.localStore,h,!0))),T6(t.remoteStore,h)}),yield o,yield $v(t,r),function(c){const h=Be(c);h.Fo.forEach((m,y)=>{T6(h.remoteStore,y)}),h.Mo.us(),h.Fo=new Map,h.Oo=new Pr(Ye.comparator)}(t),t.qo=!1,yield Tv(t.remoteStore,!1)}})).apply(this,arguments)}function $v(n,e,t){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,p.Z)(function*(n,e,t){const r=Be(n),o=[],c=[];for(const h of e){let m;const y=r.ko.get(h);if(y&&0!==y.length){m=yield M6(r.localStore,T1(y[0]));for(const E of y){const T=r.xo.get(E),x=yield Bv(r,T);x.snapshot&&c.push(x.snapshot)}}else{const E=yield hv(r.localStore,h);m=yield M6(r.localStore,E),yield N6(r,au(E),h,!1)}o.push(m)}return r.No.Er(c),o})).apply(this,arguments)}function au(n){return Tf(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Kh(n){const e=Be(n);return Be(Be(e.localStore).persistence).pn()}function wA(n,e,t,r){return N4.apply(this,arguments)}function N4(){return(N4=(0,p.Z)(function*(n,e,t,r){const o=Be(n);if(o.qo)Fe("SyncEngine","Ignoring unexpected query state notification.");else if(o.ko.has(e))switch(t){case"current":case"not-current":{const c=yield g7(o.localStore),h=d6.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ac(o,c,h);break}case"rejected":yield T4(o.localStore,e,!0),L6(o,e,r);break;default:rt()}})).apply(this,arguments)}function hn(n,e,t){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,p.Z)(function*(n,e,t){const r=cc(n);if(r.qo){for(const o of e){if(r.ko.has(o)){Fe("SyncEngine","Adding an already active target "+o);continue}const c=yield hv(r.localStore,o),h=yield M6(r.localStore,c);yield N6(r,au(c),h.targetId,!1),zh(r.remoteStore,h)}for(const o of t)r.ko.has(o)&&(yield T4(r.localStore,o,!1).then(()=>{T6(r.remoteStore,o),L6(r,o)}).catch(ic))}})).apply(this,arguments)}function cc(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aw.bind(null,e),e.No.Er=Dv.bind(null,e.eventManager),e.No.jo=rw.bind(null,e.eventManager),e}function L4(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lw.bind(null,e),e}class Ct{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,p.Z)(function*(){t.N=J3(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return p7(this.persistence,new lv,e.initialUser,this.N)}Go(e){return new Gb(y7.Ns,this.N)}Wo(e){return new vv}terminate(){var e=this;return(0,p.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ws extends Ct{constructor(e,t,r){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,p.Z)(function*(){yield t().call(r,e),yield function(n){return v7.apply(this,arguments)}(r.localStore),yield r.Jo.initialize(r,e),yield L4(r.Jo.syncEngine),yield S4(r.Jo.remoteStore),yield r.persistence.nn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ho(e){return p7(this.persistence,new lv,e.initialUser,this.N)}zo(e){return new Vb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=d7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ki.withCacheSize(this.cacheSizeBytes):Ki.DEFAULT;return new Ih(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,E7(),kh(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new vv}}class J7 extends Ws{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,p.Z)(function*(){yield t().call(r,e);const o=r.Jo.syncEngine;r.sharedClientState instanceof Rh&&(r.sharedClientState.syncEngine={_i:jv.bind(null,o),mi:wA.bind(null,o),gi:hn.bind(null,o),pn:Kh.bind(null,o),wi:Y7.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.nn(function(){var c=(0,p.Z)(function*(h){yield function(n,e){return Wh.apply(this,arguments)}(r.Jo.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}Wo(e){const t=E7();if(!Rh.bt(t))throw new ke(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=d7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rh(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class o2{initialize(e,t){var r=this;return(0,p.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Fv(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=$h.bind(null,r.syncEngine),yield Tv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new nw}createDatastore(e){const t=J3(e.databaseInfo.databaseId),r=new Cv(e.databaseInfo);return new Kb(e.credentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,c=m=>Fv(this.syncEngine,m,0),h=_v.bt()?new _v:new yv,new Qb(t,r,o,c,h);var t,r,o,c,h}createSyncEngine(e,t){return function(r,o,c,h,m,y,E){const T=new sw(r,o,c,h,m,y);return E&&(T.qo=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,p.Z)(function*(t){const r=Be(t);Fe("RemoteStore","RemoteStore shutting down."),r.Kr.add(5),yield A6(r),r.Qr.shutdown(),r.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function fw(n,e=10240){let t=0;return{read:()=>(0,p.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,p.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class cu{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Gv{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(r=>{r&&r.ho()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,p.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,p.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,p.Z)(function*(){const t=yield e.na();if(null===t)return null;const r=e.ta.decode(t),o=Number(r);isNaN(o)&&e.sa(`length string (${r}) is not valid number`);const c=yield e.ia(o);return new iw(JSON.parse(c),t.length+o)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,p.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ia(e){var t=this;return(0,p.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const r=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,p.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class MA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,p.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,p.Z)(function*(c,h){const m=Be(c),y=m6(m.N)+"/documents",E={documents:h.map(V=>p6(m.N,V))},T=yield m.Ki("BatchGetDocuments",y,E),x=new Map;T.forEach(V=>{const Y=function(n,e){return"found"in e?function(t,r){pt(!!r.found);const o=lo(t,r.found.name),c=_r(r.found.updateTime),h=new ki({mapValue:{fields:r.found.fields}});return Kt.newFoundDocument(o,c,h)}(n,e):"missing"in e?function(t,r){pt(!!r.missing),pt(!!r.readTime);const o=lo(t,r.missing),c=_r(r.readTime);return Kt.newNoDocument(o,c)}(n,e):rt()}(m.N,V);x.set(Y.key.toString(),Y)});const k=[];return h.forEach(V=>{const Y=x.get(V.toString());pt(!!Y),k.push(Y)}),k}),function(c,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new h6(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,p.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const c=Ye.fromPath(o);e.mutations.push(new zf(c,e.precondition(c)))}),yield(r=(0,p.Z)(function*(o,c){const h=Be(o),m=m6(h.N)+"/documents",y={writes:c.map(E=>vh(h.N,E))};yield h.Li("Commit",m,y)}),function(o,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Nn.updateTime(t):Nn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xt.min()))throw new ke(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nn.updateTime(t)}return Nn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pw{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.aa=5,this.rr=new M7(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,p.Z)(function*(){const t=new MA(e.datastore),r=e.ua(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(c=>{e.ha(c)}))}).catch(o=>{e.ha(o)})}))}ua(e){try{const t=this.updateFunction(e);return!v4(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!bb(t)}return!1}}class mw{constructor(e,t,r){var o=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=r,this.user=Ri.UNAUTHENTICATED,this.clientId=Eg.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var c=(0,p.Z)(function*(h){Fe("FirestoreClient","Received user=",h.uid),yield o.credentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,p.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(r){const o=i2(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Zs(n,e){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,p.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,p.Z)(function*(c){r.isEqual(c)||(yield m7(e.localStore,c),r=c)});return function(c){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function N1(n,e){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,p.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield X7(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>{return(c=(0,p.Z)(function*(h,m){const y=Be(h);y.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const E=sc(y);y.Kr.add(3),yield A6(y),E&&y.Wr.set("Unknown"),yield y.remoteSyncer.handleCredentialChange(m),y.Kr.delete(3),yield X3(y)}),function(h,m){return c.apply(this,arguments)})(e.remoteStore,o);var c}),n.onlineComponents=e})).apply(this,arguments)}function X7(n){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,p.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield Zs(n,new Ct)),n.offlineComponents})).apply(this,arguments)}function R6(n){return lc.apply(this,arguments)}function lc(){return(lc=(0,p.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield N1(n,new o2)),n.onlineComponents})).apply(this,arguments)}function k6(n){return X7(n).then(e=>e.persistence)}function e9(n){return X7(n).then(e=>e.localStore)}function uc(n){return R6(n).then(e=>e.remoteStore)}function t9(n){return R6(n).then(e=>e.syncEngine)}function R4(n){return lu.apply(this,arguments)}function lu(){return(lu=(0,p.Z)(function*(n){const e=yield R6(n),t=e.eventManager;return t.onListen=Ov.bind(null,e.syncEngine),t.onUnlisten=ow.bind(null,e.syncEngine),t})).apply(this,arguments)}function k4(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(o,c,h,m,y){const E=new cu({next:x=>{c.enqueueAndForget(()=>Bh(o,T));const k=x.docs.has(h);!k&&x.fromCache?y.reject(new ke(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&m&&"server"===m.source?y.reject(new ke(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new O7(c6(h.path),E,{includeMetadataChanges:!0,uo:!0});return z7(o,T)}(yield R4(n),n.asyncQueue,e,t,r)})),r.promise}function hu(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(o,c,h,m,y){const E=new cu({next:x=>{c.enqueueAndForget(()=>Bh(o,T)),x.fromCache&&"server"===m.source?y.reject(new ke(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new O7(h,E,{includeMetadataChanges:!0,uo:!0});return z7(o,T)}(yield R4(n),n.asyncQueue,e,t,r)})),r.promise}class vw{constructor(e,t,r,o,c,h,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=y}}class hc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}const Xh=new Map;function Yv(n,e,t){if(!t)throw new ke(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yw(n,e,t,r){if(!0===e&&!0===r)throw new ke(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _t(n){if(!Ye.isDocumentKey(n))throw new ke(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _w(n){if(Ye.isDocumentKey(n))throw new ke(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dc(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dc(n);throw new ke(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Qv(n,e){if(e<=0)throw new ke(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Jv{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class e5{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jv({}),this._settingsFrozen=!1,e instanceof hc?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ke(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(r.options.projectId)}(e))}get app(){if(!this._app)throw new ke(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jv(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new hb;switch(t.type){case"gapi":const r=t.client;return pt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new bg(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(ye.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xh.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),Xh.delete(e),t.terminate())}(this),Promise.resolve()}}class Rn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class rn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rn(this.firestore,e,this._query)}}class Yo extends rn{constructor(e,t,r){super(e,t,c6(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new Ye(e))}withConverter(e){return new Yo(this.firestore,e,this._path)}}function Xv(n,e,...t){if(n=(0,M.m9)(n),Yv("collection","path",e),n instanceof e5){const r=ln.fromString(e,...t);return _w(r),new Yo(n,null,r)}{if(!(n instanceof Rn||n instanceof Yo))throw new ke(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return _w(r),new Yo(n.firestore,null,r)}}function t5(n,e,...t){if(n=(0,M.m9)(n),1===arguments.length&&(e=Eg.I()),Yv("doc","path",e),n instanceof e5){const r=ln.fromString(e,...t);return _t(r),new Rn(n,null,new Ye(r))}{if(!(n instanceof Rn||n instanceof Yo))throw new ke(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return _t(r),new Rn(n.firestore,n instanceof Yo?n.converter:null,new Ye(r))}}function ey(n,e){return n=(0,M.m9)(n),e=(0,M.m9)(e),(n instanceof Rn||n instanceof Yo)&&(e instanceof Rn||e instanceof Yo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ty(n,e){return n=(0,M.m9)(n),e=(0,M.m9)(e),n instanceof rn&&e instanceof rn&&n.firestore===e.firestore&&z3(n._query,e._query)&&n.converter===e.converter}class Cw{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new M7(this,"async_queue_retry"),this.Ta=()=>{const t=kh();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.rr.tr()};const e=kh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ta)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ea(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=kh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ta)}}enqueue(e){if(this.Ea(),this.wa)return new Promise(()=>{});const t=new Lr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,p.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!ec(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(r=>{throw this.ma=r,this.ga=!1,Cn("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.ga=!1,r))));return this.fa=t,t}enqueueAfterDelay(e,t,r){this.Ea(),this.pa.indexOf(e)>-1&&(t=0);const o=Sv.createAndSchedule(this,e,t,r,c=>this.Ra(c));return this._a.push(o),o}Ea(){this.ma&&rt()}verifyOperationInProgress(){}ba(){var e=this;return(0,p.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function i9(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class bw{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends e5{constructor(e,t){super(e,t),this.type="firestore",this._queue=new Cw,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ny(this),this._firestoreClient.terminate()}}function fr(n){return n._firestoreClient||ny(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ny(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new vw(n._databaseId,c,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var c,m;n._firestoreClient=new mw(n._credentials,n._queue,r)}function ry(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,p.Z)(function*(){try{yield Zs(n,t),yield N1(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(c=o).name?c.code===ye.FAILED_PRECONDITION||c.code===ye.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function o9(n){if(n._initialized||n._terminated)throw new ke(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ks{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ho(wi.fromBase64String(e))}catch(t){throw new ke(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ho(wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class P4{constructor(e){this._methodName=e}}class r5{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const Dw=/^__.*__$/;class Nw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new X2(e,this.data,this.fieldMask,t,this.fieldTransforms):new H3(e,this.data,t,this.fieldTransforms)}}class iy{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new X2(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function a9(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class i5{constructor(e,t,r,o,c,h){this.settings=e,this.databaseId=t,this.N=r,this.ignoreUndefinedProperties=o,void 0===c&&this.Sa(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new i5(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Ca({path:r,xa:!1});return o.ka(e),o}$a(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Ca({path:r,xa:!1});return o.Sa(),o}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return c5(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(a9(this.Da)&&Dw.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class Lw{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=r||J3(e)}Ba(e,t,r,o=!1){return new i5({Da:e,methodName:t,La:r,path:bi.emptyPath(),xa:!1,Ma:o},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function P6(n){const e=n._freezeSettings(),t=J3(n._databaseId);return new Lw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function c9(n,e,t,r,o,c={}){const h=n.Ba(c.merge||c.mergeFields?2:0,e,t,o);ti("Data must be an object, but it was:",h,r);const m=sy(r,h);let y,E;if(c.merge)y=new m4(h.fieldMask),E=h.fieldTransforms;else if(c.mergeFields){const T=[];for(const x of c.mergeFields){const k=a5(e,x,t);if(!h.contains(k))throw new ke(ye.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);f9(T,k)||T.push(k)}y=new m4(T),E=h.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,E=h.fieldTransforms;return new Nw(new ki(m),y,E)}class s5 extends P4{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof s5}}function o5(n,e,t){return new i5({Da:3,La:e.settings.La,methodName:n._methodName,xa:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class l9 extends P4{_toFieldTransform(e){return new u6(e.path,new l6)}isEqual(e){return e instanceof l9}}class Rw extends P4{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=o5(this,e,!0),r=this.Ua.map(c=>a2(c,t)),o=new Ja(r);return new u6(e.path,o)}isEqual(e){return this===e}}class kw extends P4{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=o5(this,e,!0),r=this.Ua.map(c=>a2(c,t)),o=new b4(r);return new u6(e.path,o)}isEqual(e){return this===e}}class Pw extends P4{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new V3(e.N,mb(e.N,this.qa));return new u6(e.path,t)}isEqual(e){return this===e}}function u9(n,e,t,r){const o=n.Ba(1,e,t);ti("Data must be an object, but it was:",o,r);const c=[],h=ki.empty();p4(r,(y,E)=>{const T=du(e,y,t);E=(0,M.m9)(E);const x=o.$a(T);if(E instanceof s5)c.push(T);else{const k=a2(E,x);null!=k&&(c.push(T),h.set(T,k))}});const m=new m4(c);return new iy(h,m,o.fieldTransforms)}function h9(n,e,t,r,o,c){const h=n.Ba(1,e,t),m=[a5(e,r,t)],y=[o];if(c.length%2!=0)throw new ke(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<c.length;k+=2)m.push(a5(e,c[k])),y.push(c[k+1]);const E=[],T=ki.empty();for(let k=m.length-1;k>=0;--k)if(!f9(E,m[k])){const V=m[k];let Y=y[k];Y=(0,M.m9)(Y);const Ee=h.$a(V);if(Y instanceof s5)E.push(V);else{const Re=a2(Y,Ee);null!=Re&&(E.push(V),T.set(V,Re))}}const x=new m4(E);return new iy(T,x,h.fieldTransforms)}function d9(n,e,t,r=!1){return a2(t,n.Ba(r?4:3,e))}function a2(n,e){if(z4(n=(0,M.m9)(n)))return ti("Unsupported field value:",e,n),sy(n,e);if(n instanceof P4)return function(t,r){if(!a9(r.Da))throw r.Fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Fa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(t,r){const o=[];let c=0;for(const h of t){let m=a2(h,r.Oa(c));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,M.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return mb(r.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Rr.fromDate(t);return{timestampValue:f6(r.N,o)}}if(t instanceof Rr){const o=new Rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:f6(r.N,o)}}if(t instanceof r5)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ho)return{bytesValue:$f(r.N,t._byteString)};if(t instanceof Rn){const o=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(o))throw r.Fa(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:mh(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Fa(`Unsupported field value: ${dc(t)}`)}(n,e)}function sy(n,e){const t={};return Ig(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):p4(n,(r,o)=>{const c=a2(o,e.Na(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function z4(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rr||n instanceof r5||n instanceof ho||n instanceof Rn||n instanceof P4)}function ti(n,e,t){if(!z4(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=dc(t);throw e.Fa("an object"===r?n+" a custom object":n+" "+r)}var r}function a5(n,e,t){if((e=(0,M.m9)(e))instanceof Ks)return e._internalPath;if("string"==typeof e)return du(n,e);throw c5("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const fo=new RegExp("[~\\*/\\[\\]]");function du(n,e,t){if(e.search(fo)>=0)throw c5(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ks(...e.split("."))._internalPath}catch(r){throw c5(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function c5(n,e,t,r,o){const c=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||h)&&(y+=" (found",c&&(y+=` in field ${r}`),h&&(y+=` in document ${o}`),y+=")"),new ke(ye.INVALID_ARGUMENT,m+n+y)}function f9(n,e){return n.some(t=>t.isEqual(e))}class z6{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new oy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(l5("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class oy extends z6{data(){return super.data()}}function l5(n,e){return"string"==typeof e?du(n,e):e instanceof Ks?e._internalPath:e._delegate._internalPath}class O4{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class c2 extends z6{constructor(e,t,r,o,c,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new O6(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(l5("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class O6 extends c2{data(e={}){return super.data(e)}}class fc{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new O4(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new O6(this._firestore,this._userDataWriter,r.key,r,new O4(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new O6(r._firestore,r._userDataWriter,h.doc.key,h.doc,new O4(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new O6(r._firestore,r._userDataWriter,h.doc.key,h.doc,new O4(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,E=-1;return 0!==h.type&&(y=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),E=c.indexOf(h.doc.key)),{type:SA(h.type),doc:m,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function SA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function ay(n,e){return n instanceof c2&&e instanceof c2?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fc&&e instanceof fc&&n._firestore===e._firestore&&ty(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function cy(n){if(ih(n)&&0===n.explicitOrderBy.length)throw new ke(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qo{}function V4(n,...e){for(const t of e)n=t._apply(n);return n}class ly extends Qo{constructor(e,t,r){super(),this.Ka=e,this.ja=t,this.Qa=r,this.type="where"}_apply(e){const t=P6(e.firestore),r=function(o,c,h,m,y,E,T){let x;if(y.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new ke(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on FieldPath.documentId().`);if("in"===E||"not-in"===E){vy(T,E);const V=[];for(const Y of T)V.push(gy(m,o,Y));x={arrayValue:{values:V}}}else x=gy(m,o,T)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||vy(T,E),x=d9(h,"where",T,"in"===E||"not-in"===E);const k=yr.create(y,E,x);return function(V,Y){if(Y.v()){const Re=sh(V);if(null!==Re&&!Re.isEqual(Y.field))throw new ke(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Re.toString()}' and '${Y.field.toString()}'`);const Ge=Sf(V);null!==Ge&&V6(0,Y.field,Ge)}const Ee=function(Re,Ge){for(const ot of Re.filters)if(Ge.indexOf(ot.op)>=0)return ot.op;return null}(V,function(Re){switch(Re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==Ee)throw new ke(ye.INVALID_ARGUMENT,Ee===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${Ee.toString()}' filters.`)}(o,k),k}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new rn(e.firestore,e.converter,function(o,c){const h=o.filters.concat([c]);return new Go(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class xA extends Qo{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(r,o,c){if(null!==r.startAt)throw new ke(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new C4(o,c);return function(m,y){if(null===Sf(m)){const E=sh(m);null!==E&&V6(0,E,y.field)}}(r,h),h}(e._query,this.Ka,this.Wa);return new rn(e.firestore,e.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new Go(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class hy extends Qo{constructor(e,t,r){super(),this.type=e,this.Ga=t,this.za=r}_apply(e){return new rn(e.firestore,e.converter,Df(e._query,this.Ga,this.za))}}class fy extends Qo{constructor(e,t,r){super(),this.type=e,this.Ha=t,this.Ja=r}_apply(e){const t=my(e,this.type,this.Ha,this.Ja);return new rn(e.firestore,e.converter,(o=t,new Go((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class py extends Qo{constructor(e,t,r){super(),this.type=e,this.Ha=t,this.Ja=r}_apply(e){const t=my(e,this.type,this.Ha,this.Ja);return new rn(e.firestore,e.converter,(o=t,new Go((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function my(n,e,t,r){if(t[0]=(0,M.m9)(t[0]),t[0]instanceof z6)return function(o,c,h,m,y){if(!m)throw new ke(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const E=[];for(const T of P3(o))if(T.field.isKeyField())E.push(th(c,m.key));else{const x=m.data.field(T.field);if(eh(x))throw new ke(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const k=T.field.canonicalString();throw new ke(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}E.push(x)}return new a6(E,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=P6(n.firestore);return function(c,h,m,y,E,T){const x=c.explicitOrderBy;if(E.length>x.length)throw new ke(ye.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let V=0;V<E.length;V++){const Y=E[V];if(x[V].field.isKeyField()){if("string"!=typeof Y)throw new ke(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Y}`);if(!xf(c)&&-1!==Y.indexOf("/"))throw new ke(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${y}() must be a plain document ID, but '${Y}' contains a slash.`);const Ee=c.path.child(ln.fromString(Y));if(!Ye.isDocumentKey(Ee))throw new ke(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${y}() must result in a valid document path, but '${Ee}' is not because it contains an odd number of segments.`);const Re=new Ye(Ee);k.push(th(h,Re))}else{const Ee=d9(m,y,Y);k.push(Ee)}}return new a6(k,T)}(n._query,n.firestore._databaseId,o,e,t,r)}}function gy(n,e,t){if("string"==typeof(t=(0,M.m9)(t))){if(""===t)throw new ke(ye.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!xf(e)&&-1!==t.indexOf("/"))throw new ke(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ln.fromString(t));if(!Ye.isDocumentKey(r))throw new ke(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return th(n,new Ye(r))}if(t instanceof Rn)return th(n,t._key);throw new ke(ye.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${dc(t)}.`)}function vy(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(ye.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function V6(n,e,t){if(!t.isEqual(e))throw new ke(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class u5{convertValue(e,t="none"){switch(y4(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(x3(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return p4(e.fields,(o,c)=>{r[o]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new r5(kr(e.latitude),kr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_f(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const t=g4(e);return new Rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);pt(yh(r));const o=new hc(r.get(1),r.get(3)),c=new Ye(r.popFirst(5));return o.isEqual(t)||Cn(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function fu(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class yy extends u5{constructor(e){super(),this.firestore=e}convertBytes(e){return new ho(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}class m9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=P6(e)}set(e,t,r){this._verifyNotCommitted();const o=l2(e,this._firestore),c=fu(o.converter,t,r),h=c9(this._dataReader,"WriteBatch.set",o._key,c,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,Nn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const c=l2(e,this._firestore);let h;return h="string"==typeof(t=(0,M.m9)(t))||t instanceof Ks?h9(this._dataReader,"WriteBatch.update",c._key,t,r,o):u9(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,Nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=l2(e,this._firestore);return this._mutations=this._mutations.concat(new h6(t._key,Nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function l2(n,e){if((n=(0,M.m9)(n)).firestore!==e)throw new ke(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class F4 extends u5{constructor(e){super(),this.firestore=e}convertBytes(e){return new ho(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}function F6(n,e,t){n=Yt(n,Rn);const r=Yt(n.firestore,tr),o=fu(n.converter,e,t);return u2(r,[c9(P6(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Nn.none())])}function H6(n,e,t,...r){n=Yt(n,Rn);const o=Yt(n.firestore,tr),c=P6(o);let h;return h="string"==typeof(e=(0,M.m9)(e))||e instanceof Ks?h9(c,"updateDoc",n._key,e,t,r):u9(c,"updateDoc",n._key,e),u2(o,[h.toMutation(n._key,Nn.exists(!0))])}function po(n,...e){var t,r,o;n=(0,M.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||i9(e[h])||(c=e[h],h++);const m={includeMetadataChanges:c.includeMetadataChanges};if(i9(e[h])){const x=e[h];e[h]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[h+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[h+2]=null===(o=x.complete)||void 0===o?void 0:o.bind(x)}let y,E,T;if(n instanceof Rn)E=Yt(n.firestore,tr),T=c6(n._key.path),y={next:x=>{e[h]&&e[h](v9(E,n,x))},error:e[h+1],complete:e[h+2]};else{const x=Yt(n,rn);E=Yt(x.firestore,tr),T=x._query;const k=new F4(E);y={next:V=>{e[h]&&e[h](new fc(E,k,x,V))},error:e[h+1],complete:e[h+2]},cy(n._query)}return function(x,k,V,Y){const Ee=new cu(Y),Re=new O7(k,Ee,V);return x.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return z7(yield R4(x),Re)})),()=>{Ee.Xo(),x.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return Bh(yield R4(x),Re)}))}}(fr(E),T,m,y)}function u2(n,e){return function(t,r){const o=new Lr;return t.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(n,e,t){return U7.apply(this,arguments)}(yield t9(t),r,o)})),o.promise}(fr(n),e)}function v9(n,e,t){const r=t.docs.get(e._key),o=new F4(n);return new c2(n,o,e._key,r,new O4(t.hasPendingWrites,t.fromCache),e.converter)}class Kw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=P6(e)}get(e){const t=l2(e,this._firestore),r=new yy(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return rt();const c=o[0];if(c.isFoundDocument())return new z6(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new z6(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const o=l2(e,this._firestore),c=fu(o.converter,t,r),h=c9(this._dataReader,"Transaction.set",o._key,c,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const c=l2(e,this._firestore);let h;return h="string"==typeof(t=(0,M.m9)(t))||t instanceof Ks?h9(this._dataReader,"Transaction.update",c._key,t,r,o):u9(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=l2(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=l2(e,this._firestore),r=new F4(this._firestore);return super.get(e).then(o=>new c2(this._firestore,r,t._key,o._document,new O4(!1,!1),t.converter))}}function h5(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function d5(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function w9(){if("undefined"==typeof atob)throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(n){Zl=n})(g.SDK_VERSION),(0,g._registerComponent)(new b.wA("firestore",(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=new tr(t,new gf(n.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),r._setSettings(e),r},"PUBLIC")),(0,g.registerVersion)(yg,"3.1.1",void 0),(0,g.registerVersion)(yg,"3.1.1","esm2017");class pu{constructor(e){this._delegate=e}static fromBase64String(e){return w9(),new pu(ho.fromBase64String(e))}static fromUint8Array(e){return d5(),new pu(ho.fromUint8Array(e))}toBase64(){return w9(),this._delegate.toBase64()}toUint8Array(){return d5(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function f5(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class Xw{enableIndexedDbPersistence(e,t){return function(n,e){o9(n=Yt(n,tr));const t=fr(n),r=n._freezeSettings(),o=new o2;return ry(t,o,new Ws(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){o9(n=Yt(n,tr));const e=fr(n),t=n._freezeSettings(),r=new o2;return ry(e,r,new J7(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new ke(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{yield(t=(0,p.Z)(function*(r){if(!qs.bt())return Promise.resolve();const o=r+"main";yield qs.delete(o)}),function(r){return t.apply(this,arguments)})(d7(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class E9{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof hc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&f4("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const c=(n=Yt(n,e5))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&f4("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Ri.MOCK_USER;else{h=(0,M.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ke(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ri(y)}n._credentials=new S3(new _g(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield k6(n),t=yield uc(n);return e.setNetworkEnabled(!0),function(r){const o=Be(r);return o.Kr.delete(0),X3(o)}(t)}))}(fr(n=Yt(n,tr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield k6(n),t=yield uc(n);return e.setNetworkEnabled(!1),(r=(0,p.Z)(function*(o){const c=Be(o);c.Kr.add(0),yield A6(c),c.Wr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(fr(n=Yt(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(n,e){return D4.apply(this,arguments)}(yield t9(e),t)})),t.promise}(fr(n=Yt(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new cu(e);return n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return r=yield R4(n),o=t,Be(r).Zr.add(o),void o.next();var r,o})),()=>{t.Xo(),n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return r=yield R4(n),o=t,void Be(r).Zr.delete(o);var r,o}))}}(fr(n=Yt(n,tr)),i9(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new H4(this,Xv(this._delegate,e))}catch(t){throw wr(t,"collection()","Firestore.collection()")}}doc(e){try{return new Tn(this,t5(this._delegate,e))}catch(t){throw wr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qi(this,function(n,e){if(n=Yt(n,e5),Yv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rn(n,null,(t=e,new Go(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw wr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){const r=yield(o=n,R6(o).then(c=>c.datastore));var o;new pw(n.asyncQueue,r,e,t).run()})),t.promise}(fr(n),t=>e(new Kw(n,t)))}(this._delegate,t=>e(new M9(this,t)))}batch(){return fr(this._delegate),new by(new m9(this._delegate,e=>u2(this._delegate,e)))}loadBundle(e){return function(n,e){const t=fr(n=Yt(n,tr)),r=new bw;return function(n,e,t,r){const o=function(c,h){let m;return m="string"==typeof c?(new TextEncoder).encode(c):c,y=function(y,E){if(y instanceof Uint8Array)return fw(y,E);if(y instanceof ArrayBuffer)return fw(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Gv(y,h);var y}(t,J3(e));n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){!function(n,e,t){const r=Be(n);var o;(o=(0,p.Z)(function*(c,h,m){try{const y=yield h.getMetadata();if(yield function(k,V){const Y=Be(k),Ee=_r(V.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Re=>Y.Je.getBundleMetadata(Re,V.id)).then(Re=>!!Re&&Re.createTime.compareTo(Ee)>=0)}(c.localStore,y))return yield h.close(),void m._completeWith((k=y,{taskState:"Success",documentsLoaded:k.totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}));m._updateProgress(V7(y));const E=new Rv(y,c.localStore,h.N);let T=yield h.Qo();for(;T;){const k=yield E.fo(T);k&&m._updateProgress(k),T=yield h.Qo()}const x=yield E.complete();yield ac(c,x.En,void 0),yield function(k,V){const Y=Be(k);return Y.persistence.runTransaction("Save bundle","readwrite",Ee=>Y.Je.saveBundleMetadata(Ee,V))}(c.localStore,y),m._completeWith(x.progress)}catch(y){f4("SyncEngine",`Loading bundle failed with ${y}`),m._failWith(y)}var k}),function(c,h,m){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield t9(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,p.Z)(function*(){return function(t,r){const o=Be(t);return o.persistence.runTransaction("Get named query","readonly",c=>o.Je.getNamedQuery(c,r))}(yield e9(n),e)}))}(fr(n=Yt(n,tr)),e).then(t=>t?new rn(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Qi(this,t):null)}}class mu extends u5{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(new ho(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Tn.forKey(t,this.firestore,null)}}class M9{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mu(e)}get(e){const t=U4(e);return this._delegate.get(t).then(r=>new p5(this._firestore,new c2(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=U4(e);return r?(h5("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=U4(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=U4(e);return this._delegate.delete(t),this}}class by{constructor(e){this._delegate=e}set(e,t,r){const o=U4(e);return r?(h5("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=U4(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=U4(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class U6{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new O6(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new h2(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=U6.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let c=o.get(t);return c||(c=new U6(e,new mu(e),t),o.set(t,c)),c}}U6.INSTANCES=new WeakMap;class Tn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mu(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Tn(t,new Rn(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new Tn(t,new Rn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new H4(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new H4(this.firestore,Xv(this._delegate,e))}catch(t){throw wr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,M.m9)(e))instanceof Rn&&ey(this._delegate,e)}set(e,t){t=h5("DocumentReference.set",t);try{return t?F6(this._delegate,e,t):F6(this._delegate,e)}catch(r){throw wr(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?H6(this._delegate,e):H6(this._delegate,e,t,...r)}catch(o){throw wr(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return u2(Yt(n.firestore,tr),[new h6(n._key,Nn.none())])}(this._delegate)}onSnapshot(...e){const t=wy(e),r=Ey(e,o=>new p5(this.firestore,new c2(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return po(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Yt(n,Rn);const e=Yt(n.firestore,tr),t=fr(e),r=new F4(e);return function(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(r=(0,p.Z)(function*(o,c,h){try{const m=yield function(y,E){const T=Be(y);return T.persistence.runTransaction("read document","readonly",x=>T.Qn.An(x,E))}(o,c);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new ke(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const y=i2(m,`Failed to get document '${c} from cache`);h.reject(y)}}),function(o,c,h){return r.apply(this,arguments)})(yield e9(n),e,t);var r})),t.promise}(t,n._key).then(o=>new c2(e,r,n._key,o,new O4(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Yt(n,Rn);const e=Yt(n.firestore,tr);return k4(fr(e),n._key,{source:"server"}).then(t=>v9(e,n,t))}(this._delegate):function(n){n=Yt(n,Rn);const e=Yt(n.firestore,tr);return k4(fr(e),n._key).then(t=>v9(e,n,t))}(this._delegate),t.then(r=>new p5(this.firestore,new c2(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Tn(this.firestore,this._delegate.withConverter(e?U6.getInstance(this.firestore,e):null))}}function wr(n,e,t){return n.message=n.message.replace(e,t),n}function wy(n){for(const e of n)if("object"==typeof e&&!f5(e))return e;return{}}function Ey(n,e){var t,r;let o;return o=f5(n[0])?n[0]:f5(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{o.next&&o.next(e(c))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class p5{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Tn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ay(this._delegate,e._delegate)}}class h2 extends p5{data(e){const t=this._delegate.data(e);return function(n,e){n||rt()}(void 0!==t),t}}class Qi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mu(e)}where(e,t,r){try{return new Qi(this.firestore,V4(this._delegate,function(n,e,t){const r=e,o=l5("where",n);return new ly(o,r,t)}(e,t,r)))}catch(o){throw wr(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qi(this.firestore,V4(this._delegate,function(n,e="asc"){const t=e,r=l5("orderBy",n);return new xA(r,t)}(e,t)))}catch(r){throw wr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qi(this.firestore,V4(this._delegate,function(n){return Qv("limit",n),new hy("limit",n,"F")}(e)))}catch(t){throw wr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qi(this.firestore,V4(this._delegate,function(n){return Qv("limitToLast",n),new hy("limitToLast",n,"L")}(e)))}catch(t){throw wr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qi(this.firestore,V4(this._delegate,function(...n){return new fy("startAt",n,!0)}(...e)))}catch(t){throw wr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qi(this.firestore,V4(this._delegate,function(...n){return new fy("startAfter",n,!1)}(...e)))}catch(t){throw wr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qi(this.firestore,V4(this._delegate,function(...n){return new py("endBefore",n,!0)}(...e)))}catch(t){throw wr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qi(this.firestore,V4(this._delegate,function(...n){return new py("endAt",n,!1)}(...e)))}catch(t){throw wr(t,"endAt()","Query.endAt()")}}isEqual(e){return ty(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Yt(n,rn);const e=Yt(n.firestore,tr),t=fr(e),r=new F4(e);return function(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(r=(0,p.Z)(function*(o,c,h){try{const m=yield Y3(o,c,!0),y=new Pv(c,m.Gn),E=y.Io(m.documents),T=y.applyChanges(E,!1);h.resolve(T.snapshot)}catch(m){const y=i2(m,`Failed to execute query '${c} against cache`);h.reject(y)}}),function(o,c,h){return r.apply(this,arguments)})(yield e9(n),e,t);var r})),t.promise}(t,n._query).then(o=>new fc(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Yt(n,rn);const e=Yt(n.firestore,tr),t=fr(e),r=new F4(e);return hu(t,n._query,{source:"server"}).then(o=>new fc(e,r,n,o))}(this._delegate):function(n){n=Yt(n,rn);const e=Yt(n.firestore,tr),t=fr(e),r=new F4(e);return cy(n._query),hu(t,n._query).then(o=>new fc(e,r,n,o))}(this._delegate),t.then(r=>new A9(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=wy(e),r=Ey(e,o=>new A9(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return po(this._delegate,t,r)}withConverter(e){return new Qi(this.firestore,this._delegate.withConverter(e?U6.getInstance(this.firestore,e):null))}}class I9{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new h2(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class A9{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new h2(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new I9(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new h2(this._firestore,r))})}isEqual(e){return ay(this._delegate,e._delegate)}}class H4 extends Qi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Tn(this.firestore,e):null}doc(e){try{return new Tn(this.firestore,void 0===e?t5(this._delegate):t5(this._delegate,e))}catch(t){throw wr(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Yt(n.firestore,tr),r=t5(n),o=fu(n.converter,e);return u2(t,[c9(P6(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Nn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Tn(this.firestore,t))}isEqual(e){return ey(this._delegate,e._delegate)}withConverter(e){return new H4(this.firestore,this._delegate.withConverter(e?U6.getInstance(this.firestore,e):null))}}function U4(n){return Yt(n,Rn)}class T9{constructor(...e){this._delegate=new Ks(...e)}static documentId(){return new T9(bi.keyField().canonicalString())}isEqual(e){return(e=(0,M.m9)(e))instanceof Ks&&this._delegate._internalPath.isEqual(e._internalPath)}}class d2{constructor(e){this._delegate=e}static serverTimestamp(){const e=new l9("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new d2(e)}static delete(){const e=new s5("deleteField");return e._methodName="FieldValue.delete",new d2(e)}static arrayUnion(...e){const t=function(...n){return new Rw("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new d2(t)}static arrayRemove(...e){const t=function(...n){return new kw("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new d2(t)}static increment(e){const t=function(n){return new Pw("increment",n)}(e);return t._methodName="FieldValue.increment",new d2(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const My={Firestore:E9,GeoPoint:r5,Timestamp:Rr,Blob:pu,Transaction:M9,WriteBatch:by,DocumentReference:Tn,DocumentSnapshot:p5,Query:Qi,QueryDocumentSnapshot:h2,QuerySnapshot:A9,CollectionReference:H4,FieldPath:T9,FieldValue:d2,setLogLevel:function(n){!function(n){Qa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new b.wA("firestore-compat",t=>((e,t)=>new E9(e,t,new Xw))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},My)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.4")}(C.Z);var Jo=F(9765),Ay=F(6682),B6=F(309),j6=F(5345);function ni(n,e){return"function"==typeof e?t=>t.pipe(ni((r,o)=>(0,yn.D)(n(r,o)).pipe((0,Je.U)((c,h)=>e(r,c,o,h))))):t=>t.lift(new g5(n))}class g5{constructor(e){this.project=e}call(e,t){return t.subscribe(new Ty(e,this.project))}}class Ty extends j6.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new j6.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,j6.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var tE=F(7771),v5=F(5319),y5=F(7971),nE=F(8858);class rE extends Jo.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Sy(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,c=r.length;let h;if(this.closed)throw new y5.N;if(this.isStopped||this.hasError?h=v5.w.EMPTY:(this.observers.push(e),h=new nE.W(this,e)),o&&e.add(e=new B6.ht(e,o)),t)for(let m=0;m<c&&!e.closed;m++)e.next(r[m]);else for(let m=0;m<c&&!e.closed;m++)e.next(r[m].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),h}_getNow(){return(this.scheduler||tE.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,c=o.length;let h=0;for(;h<c&&!(e-o[h].time<r);)h++;return c>t&&(h=Math.max(h,c-t)),h>0&&o.splice(0,h),o}}class Sy{constructor(e,t){this.time=e,this.value=t}}function S9(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,h,c=0,m=!1,y=!1;return function(T){let x;c++,!o||m?(m=!1,o=new rE(n,e,r),x=o.subscribe(this),h=T.subscribe({next(k){o.next(k)},error(k){m=!0,o.error(k)},complete(){y=!0,h=void 0,o.complete()}}),y&&(h=void 0)):x=o.subscribe(this),this.add(()=>{c--,x.unsubscribe(),x=void 0,h&&!y&&t&&0===c&&(h.unsubscribe(),h=void 0,o=void 0)})}}(r))}const gu=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})(),Dy=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();var pc=F(9193);function _5(n){return e=>0===n?(0,pc.c)():e.lift(new sE(n))}class sE{constructor(e){if(this.total=e,this.total<0)throw new Dy}call(e,t){return t.subscribe(new Ny(e,this.total))}}class Ny extends Gi.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function x9(n=null){return e=>e.lift(new Ly(n))}class Ly{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Ry(e,this.defaultValue))}}class Ry extends Gi.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function ky(n=Py){return e=>e.lift(new oE(n))}class oE{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new aE(e,this.errorFactory))}}class aE extends Gi.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Py(){return new gu}var cE=F(4487);function $6(n,e){const t=arguments.length>=2;return r=>r.pipe(n?M1((o,c)=>n(o,c,r)):cE.y,_5(1),t?x9(e):ky(()=>new gu))}function lE(n,e){return e?ni(()=>n,e):ni(()=>n)}var zy=F(3101);F(2329);const hE=new Map,dE={activated:!1,tokenObservers:[]},fE={initialized:!1,enabled:!1};function Ji(n){return hE.get(n)||dE}function f2(n,e){hE.set(n,e)}function N9(){return fE}class vE{constructor(e,t,r,o,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=o,o>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,p.Z)(function*(){t.stop();try{t.pending=new M.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new M.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const As=new M.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function Fy(n){if(!Ji(n).activated)throw As.create("use-before-activation",{appName:n.name})}function k9(n,e){return C5.apply(this,arguments)}function C5(){return(C5=(0,p.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const c={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,c)}catch(x){throw As.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==h.status)throw As.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(x){throw As.create("fetch-parse-error",{originalErrorMessage:x.message})}const y=m.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw As.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const E=1e3*Number(y[1]),T=Date.now();return{token:m.attestationToken,expireTimeMillis:T+E,issuedAtTimeMillis:T}})).apply(this,arguments)}function UA(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const q6="firebase-app-check-store";let P9=null;function _E(){return P9||(P9=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(As.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(q6,{keyPath:"compositeKey"})}}}catch(t){e(As.create("storage-open",{originalErrorMessage:t.message}))}}),P9)}function By(){return(By=(0,p.Z)(function*(n,e){const r=(yield _E()).transaction(q6,"readwrite"),c=r.objectStore(q6).put({compositeKey:n,value:e});return new Promise((h,m)=>{c.onsuccess=y=>{h()},r.onerror=y=>{var E;m(As.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const O9=new N.Yd("@firebase/app-check");function V9(n,e){return(0,M.hl)()?function(n,e){return function(n,e){return By.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{O9.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function AE(){return N9().enabled}function Gy(){return B4.apply(this,arguments)}function B4(){return(B4=(0,p.Z)(function*(){const n=N9();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const SE={error:"UNKNOWN_ERROR"};function xE(n){return M.US.encodeString(JSON.stringify(n),!1)}function W6(n){return F9.apply(this,arguments)}function F9(){return(F9=(0,p.Z)(function*(n,e=!1){const t=n.app;Fy(t);const r=Ji(t);let c,h,o=r.token;if(!o){const m=yield r.cachedTokenPromise;m&&vu(m)&&(o=m,f2(t,Object.assign(Object.assign({},r),{token:o})),qy(t,{token:o.token}))}if(!e&&o&&vu(o))return{token:o.token};if(AE()){const m=yield k9(UA(t,yield Gy()),n.platformLoggerProvider);return yield V9(t,m),f2(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{o=yield r.provider.getToken()}catch(m){O9.error(m),c=m}return o?(h={token:o.token},f2(t,Object.assign(Object.assign({},r),{token:o})),yield V9(t,o)):h=B9(c),qy(t,h),h})).apply(this,arguments)}function H9(n,e){const t=Ji(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),f2(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function qy(n,e){const t=Ji(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function vu(n){return n.expireTimeMillis-Date.now()>0}function B9(n){return{token:xE(SE),error:n}}class Wy{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Ji(this.app);for(const t of e)H9(this.app,t.next);return Promise.resolve()}}const kE="app-check-internal";(0,g._registerComponent)(new b.wA("app-check",n=>function(n,e){return new Wy(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kE).initialize()})),(0,g._registerComponent)(new b.wA(kE,n=>function(n){return{getToken:e=>W6(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,c=Ji(o),h={next:t,error:r,type:e},m=Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,h]});if(!m.tokenRefresher){const y=function(n){const{app:e}=n;return new vE((0,p.Z)(function*(){let r;if(r=Ji(e).token?yield W6(n,!0):yield W6(n),r.error)throw r.error}),()=>!0,()=>{const t=Ji(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n);m.tokenRefresher=y}if(!m.tokenRefresher.isRunning()&&c.isTokenAutoRefreshEnabled&&m.tokenRefresher.start(),c.token&&vu(c.token)){const y=c.token;Promise.resolve().then(()=>t({token:y.token})).catch(()=>{})}else null==c.token&&c.cachedTokenPromise.then(y=>{y&&vu(y)&&t({token:y.token})}).catch(()=>{});f2(o,m)}(n,"INTERNAL",e),removeTokenListener:e=>H9(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,g.registerVersion)("@firebase/app-check","0.4.2");class I5{constructor(){return(0,Tt.vb)("app-check")}}"undefined"!=typeof window&&window;var BE=F(7841);const T5=new d.OlP("angularfire2.auth.use-emulator"),Q9=new d.OlP("angularfire2.auth.settings"),J9=new d.OlP("angularfire2.auth.tenant-id"),X9=new d.OlP("angularfire2.auth.langugage-code"),ep=new d.OlP("angularfire2.auth.use-device-language"),S5=new d.OlP("angularfire.auth.persistence"),e_=(n,e,t,r,o,c,h,m)=>(0,ur.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=o,c&&y.useDeviceLanguage(),h)for(const[E,T]of Object.entries(h))y.settings[E]=T;return m&&y.setPersistence(m),y},[t,r,o,c,h,m]);let Z6=(()=>{class n{constructor(t,r,o,c,h,m,y,E,T,x,k,V){const Y=new Jo.xQ,Ee=(0,st.of)(void 0).pipe((0,B6.QV)(h.outsideAngular),ni(()=>c.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4671)))),(0,Je.U)(()=>(0,ur.on)(t,c,r)),(0,Je.U)(Re=>e_(Re,c,m,E,T,x,y,k)),S9({bufferSize:1,refCount:!1}));if(So(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,st.of)(null);else{Ee.pipe($6()).subscribe();const Ge=Ee.pipe(ni(ht=>ht.getRedirectResult().then(Sn=>Sn,()=>null)),Tt.iC,S9({bufferSize:1,refCount:!1})),ot=Ee.pipe(ni(ht=>new cn.y(Sn=>({unsubscribe:c.runOutsideAngular(()=>ht.onAuthStateChanged(Or=>Sn.next(Or),Or=>Sn.error(Or),()=>Sn.complete()))})))),Lt=Ee.pipe(ni(ht=>new cn.y(Sn=>({unsubscribe:c.runOutsideAngular(()=>ht.onIdTokenChanged(Or=>Sn.next(Or),Or=>Sn.error(Or),()=>Sn.complete()))}))));this.authState=Ge.pipe(lE(ot),(0,zy.R)(h.outsideAngular),(0,B6.QV)(h.insideAngular)),this.user=Ge.pipe(lE(Lt),(0,zy.R)(h.outsideAngular),(0,B6.QV)(h.insideAngular)),this.idToken=this.user.pipe(ni(ht=>ht?(0,yn.D)(ht.getIdToken()):(0,st.of)(null))),this.idTokenResult=this.user.pipe(ni(ht=>ht?(0,yn.D)(ht.getIdTokenResult()):(0,st.of)(null))),this.credential=(0,Ay.T)(Ge,Y,this.authState.pipe(M1(ht=>!ht))).pipe((0,Je.U)(ht=>(null==ht?void 0:ht.user)?ht:null),(0,zy.R)(h.outsideAngular),(0,B6.QV)(h.insideAngular))}return(0,ur.pX)(this,Ee,c,{spy:{apply:(Re,Ge,ot)=>{(Re.startsWith("signIn")||Re.startsWith("createUser"))&&ot.then(Lt=>Y.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ur.Dh),d.LFG(ur.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Tt.HU),d.LFG(T5,8),d.LFG(Q9,8),d.LFG(J9,8),d.LFG(X9,8),d.LFG(ep,8),d.LFG(S5,8),d.LFG(I5,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function zr(n,e){return function(n,e=J0.z){return new cn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function x5(n,e){return zr(n,e).pipe((0,Je.U)(t=>({payload:t,type:"query"})))}function yu(n,e){return x5(n,e).pipe(n4(void 0),xr(),(0,Je.U)(([t,r])=>{const o=r.payload.docChanges(),c=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const y=o.find(T=>T.doc.ref.isEqual(h.ref)),E=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(h.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(h.metadata)||!y&&E&&JSON.stringify(E.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),c}))}function t_(n,e,t){return yu(n,t).pipe($a((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return np(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return np(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return np(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(c=>c.payload),e),[]),Dl(),(0,Je.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function np(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function rp(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class mc{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=yu(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Je.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(n4(void 0),xr(),M1(([r,o])=>o.length>0||!r),(0,Je.U)(([r,o])=>o),Tt.iC)}auditTrail(e){return this.stateChanges(e).pipe($a((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rp(e);return t_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}valueChanges(e={}){return x5(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Tt.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(Tt.iC)}add(e){return this.ref.add(e)}doc(e){return new ip(this.ref.doc(e),this.afs)}}class ip{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:c}=R5(r,t);return new mc(o,c,this.afs)}snapshotChanges(){return function(n,e){return zr(n,e).pipe(n4(void 0),xr(),(0,Je.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Je.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,yn.D)(this.ref.get(e)).pipe(Tt.iC)}}class sp{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?yu(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),M1(t=>t.length>0),Tt.iC):yu(this.query,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}auditTrail(e){return this.stateChanges(e).pipe($a((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rp(e);return t_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}valueChanges(e={}){return x5(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Tt.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(Tt.iC)}}const N5=new d.OlP("angularfire2.enableFirestorePersistence"),n_=new d.OlP("angularfire2.firestore.persistenceSettings"),L5=new d.OlP("angularfire2.firestore.settings"),$E=new d.OlP("angularfire2.firestore.use-emulator");function R5(n,e=(t=>t)){return{query:e(n),ref:n}}let k5=(()=>{class n{constructor(t,r,o,c,h,m,y,E,T,x,k,V,Y,Ee,Re,Ge,ot){this.schedulers=y;const Lt=(0,ur.on)(t,m,r),ht=T;x&&e_(Lt,m,k,Y,Ee,Re,V,Ge),[this.firestore,this.persistenceEnabled$]=(0,ur.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const Sn=m.runOutsideAngular(()=>Lt.firestore());if(c&&Sn.settings(c),ht&&Sn.useEmulator(...ht),o&&!So(h)){const Or=()=>{try{return(0,yn.D)(Sn.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(kC){return"undefined"!=typeof console&&console.warn(kC),(0,st.of)(!1)}};return[Sn,m.runOutsideAngular(Or)]}return[Sn,(0,st.of)(!1)]},[c,ht,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=R5(o,r),m=this.schedulers.ngZone.run(()=>c);return new mc(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),c=this.firestore.collectionGroup(t);return new sp(o(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new ip(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ur.Dh),d.LFG(ur.xv,8),d.LFG(N5,8),d.LFG(L5,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Tt.HU),d.LFG(n_,8),d.LFG($E,8),d.LFG(Z6,8),d.LFG(T5,8),d.LFG(Q9,8),d.LFG(J9,8),d.LFG(X9,8),d.LFG(ep,8),d.LFG(S5,8),d.LFG(I5,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ri=(()=>{class n{constructor(){BE.Z.registerVersion("angularfire",Tt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:N5,useValue:!0},{provide:n_,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[k5]}),n})();var QA=F(8819);class r_ extends Gi.L{notifyNext(e,t,r,o,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class GE extends Gi.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var JA=F(7444);function _u(n,e,t,r,o=new GE(n,t,r)){if(!o.closed)return e instanceof cn.y?e.subscribe(o):(0,JA.s)(e)(o)}class XA{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new eT(e,this.observables,this.project))}}class eT extends r_{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let c=0;c<o;c++)this.toRespond.push(c);for(let c=0;c<o;c++)this.add(_u(this,t[c],void 0,c))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const c=o.indexOf(r);-1!==c&&o.splice(c,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class WE{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new ZE(e,this.predicate))}}class ZE extends Gi.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const i_="@firebase/database";let op="";function KE(n){op=n}class YE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,M.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,M.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class QE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,M.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const o_=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new YE(e)}}catch(e){}return new QE},K6=o_("localStorage"),a_=o_("sessionStorage"),Y6=new N.Yd("@firebase/database"),c_=function(){let n=1;return function(){return n++}}(),l_=function(n){const e=(0,M.dS)(n),t=new M.gQ;t.update(e);const r=t.digest();return M.US.encodeByteArray(r)},Cu=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Cu.apply(null,r):e+="object"==typeof r?(0,M.Pz)(r):r,e+=" "}return e};let j4=null,R1=!0;const u_=function(n,e){(0,M.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Y6.logLevel=N.in.VERBOSE,j4=Y6.log.bind(Y6),e&&a_.set("logging_enabled",!0)):"function"==typeof n?j4=n:(j4=null,a_.remove("logging_enabled"))},ii=function(...n){if(!0===R1&&(R1=!1,null===j4&&!0===a_.get("logging_enabled")&&u_(!0)),j4){const e=Cu.apply(null,n);j4(e)}},bu=function(n){return function(...e){ii(n,...e)}},ap=function(...n){const e="FIREBASE INTERNAL ERROR: "+Cu(...n);Y6.error(e)},p2=function(...n){const e=`FIREBASE FATAL ERROR: ${Cu(...n)}`;throw Y6.error(e),new Error(e)},Xi=function(...n){const e="FIREBASE WARNING: "+Cu(...n);Y6.warn(e)},P5=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Xo="[MIN_NAME]",m2="[MAX_NAME]",$4=function(n,e){if(n===e)return 0;if(n===Xo||e===m2)return-1;if(e===Xo||n===m2)return 1;{const t=cp(n),r=cp(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},nT=function(n,e){return n===e?0:n<e?-1:1},z5=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,M.Pz)(e))},h_=function(n){if("object"!=typeof n||null===n)return(0,M.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,M.Pz)(e[r]),t+=":",t+=h_(n[e[r]]);return t+="}",t},O5=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function si(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const d_=function(n){(0,M.hu)(!P5(n),"Invalid JSON number");const r=1023;let o,c,h,m,y;0===n?(c=0,h=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),r),c=m+r,h=Math.round(n*Math.pow(2,52-m)-Math.pow(2,52))):(c=0,h=Math.round(n/Math.pow(2,-1074))));const E=[];for(y=52;y;y-=1)E.push(h%2?1:0),h=Math.floor(h/2);for(y=11;y;y-=1)E.push(c%2?1:0),c=Math.floor(c/2);E.push(o?1:0),E.reverse();const T=E.join("");let x="";for(y=0;y<64;y+=8){let k=parseInt(T.substr(y,8),2).toString(16);1===k.length&&(k="0"+k),x+=k}return x.toLowerCase()},tM=new RegExp("^-?(0*)\\d{1,10}$"),f_=-2147483648,Ys=2147483647,cp=function(n){if(tM.test(n)){const e=Number(n);if(e>=f_&&e<=Ys)return e}return null},G4=function(n){try{n()}catch(e){setTimeout(()=>{throw Xi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Q6=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class p_{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class m_{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ii("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xi(e)}}let q4=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const up=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,v_="websocket",y_="long_polling";class hp{constructor(e,t,r,o,c=!1,h="",m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=c,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=K6.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&K6.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function __(n,e,t){let r;if((0,M.hu)("string"==typeof e,"typeof type must == string"),(0,M.hu)("object"==typeof t,"typeof params must == object"),e===v_)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==y_)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return si(t,(c,h)=>{o.push(c+"="+h)}),r+o.join("&")}class es{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,M.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,M.p$)(this.counters_)}}const W4={},X6={};function H5(n){const e=n.toString();return W4[e]||(W4[e]=new es),W4[e]}class fp{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&G4(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class e0{constructor(e,t,r,o,c,h,m){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=c,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bu(e),this.stats_=H5(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),__(t,y_,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new fp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,M.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $5((...c)=>{const[h,m,y,E,T]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===h)this.id=m,this.password=y;else{if("close"!==h)throw new Error("Unrecognized command received: "+h);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[h,m]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&up.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e0.forceAllow_=!0}static forceDisallow(){e0.forceDisallow_=!0}static isAvailable(){return!((0,M.Yr)()||!e0.forceAllow_&&(e0.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,M.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,M.h$)(t),o=O5(r,1840);for(let c=0;c<o.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[c]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,M.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,M.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class $5{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,M.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=c_(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=$5.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){ii("frame writing exception"),m.stack&&ii(m.stack),ii(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ii("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const h=this.pendingSegs.shift();r=r+"&seg"+o+"="+h.seg+"&ts"+o+"="+h.ts+"&d"+o+"="+h.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,M.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ii("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Au=null;"undefined"!=typeof MozWebSocket?Au=MozWebSocket:"undefined"!=typeof WebSocket&&(Au=WebSocket);let Tu=(()=>{class n{constructor(t,r,o,c,h,m,y){this.connId=t,this.applicationId=o,this.appCheckToken=c,this.authToken=h,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bu(this.connId),this.stats_=H5(r),this.connURL=n.connectionURL_(r,m,y,c),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,c){const h={v:"5"};return!(0,M.Yr)()&&"undefined"!=typeof location&&location.hostname&&up.test(location.hostname)&&(h.r="f"),r&&(h.s=r),o&&(h.ls=o),c&&(h.ac=c),__(t,v_,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,K6.set("previous_websocket_failure",!0);try{if((0,M.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${op}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,m=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;m&&(c.proxy={origin:m}),this.mySock=new Au(this.connURL,[],c)}else this.mySock=new Au(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const c=o.message||o.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const c=o.message||o.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==Au&&!n.forceDisallow_}static previouslyFailed(){return K6.isInMemoryStorage||!0===K6.get("previous_websocket_failure")}markConnectionHealthy(){K6.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,M.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,M.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,M.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=O5(r,16384);o.length>1&&this.sendString_(String(o.length));for(let c=0;c<o.length;c++)this.sendString_(o[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class mo{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[e0,Tu]}initTransports_(e){const t=Tu&&Tu.isAvailable();let r=t&&!Tu.previouslyFailed();if(e.webSocketOnly&&(t||Xi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Tu];else{const o=this.transports_=[];for(const c of mo.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class bp{constructor(e,t,r,o,c,h,m,y,E,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=c,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=y,this.onKill_=E,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bu("c:"+this.id+":"),this.transportManager_=new mo(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Q6(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=z5("t",e),r=z5("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=z5("t",e),r=z5("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=z5("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ap("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ap("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Xi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Q6(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Q6(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(K6.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class vc{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class W5{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,M.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let c=0;c<o.length;c++)if(o[c].callback===t&&(!r||r===o[c].context))return void o.splice(c,1)}validateEventType_(e){(0,M.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Z5 extends W5{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,M.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Z5}getInitialEvent(e){return(0,M.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function sn(){return new pn("")}function Ot(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function yc(n){return n.pieces_.length-n.pieceNum_}function bn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new pn(n.pieces_,e)}function S_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function K5(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function mM(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new pn(e,0)}function Hn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new pn(t,0)}function Vt(n){return n.pieceNum_>=n.pieces_.length}function Ss(n,e){const t=Ot(n),r=Ot(e);if(null===t)return e;if(t===r)return Ss(bn(n),bn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function sT(n,e){const t=K5(n,0),r=K5(e,0);for(let o=0;o<t.length&&o<r.length;o++){const c=$4(t[o],r[o]);if(0!==c)return c}return t.length===r.length?0:t.length<r.length?-1:1}function x_(n,e){if(yc(n)!==yc(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function i(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(yc(n)>yc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class s{constructor(e,t){this.errorPrefix_=t,this.parts_=K5(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,M.ug)(this.parts_[r]);u(this)}}function u(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+f(n))}function f(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class v extends W5{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new v}getInitialEvent(e){return(0,M.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _=1e3;let Ie,ue=(()=>{class n extends vc{constructor(t,r,o,c,h,m,y,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=c,this.onServerInfoUpdate_=h,this.authTokenProvider_=m,this.appCheckTokenProvider_=y,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=bu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,M.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");v.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Z5.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const c=++this.requestNumber_,h={r:c,a:t,b:r};this.log_((0,M.Pz)(h)),(0,M.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(h),o&&(this.requestCBHash_[c]=o)}get(t){this.initConnection_();const r=new M.BH,o={p:t._path.toString(),q:t._queryObject},c={action:"g",request:o,onComplete:m=>{const y=m.d;"ok"===m.s?(this.onDataUpdate_(o.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const h=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const m=this.outstandingGets_[h];void 0===m||c!==m||(delete this.outstandingGets_[h],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+h+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(h),r.promise}listen(t,r,o,c){this.initConnection_();const h=t._queryIdentifier,m=t._path.toString();this.log_("Listen called for "+m+" "+h),this.listens.has(m)||this.listens.set(m,new Map),(0,M.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,M.hu)(!this.listens.get(m).has(h),"listen() called twice for same path/queryId.");const y={onComplete:c,hashFn:r,query:t,tag:o};this.listens.get(m).set(h,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),c=r._queryIdentifier;this.log_("Listen on "+o+" for "+c);const h={p:o};t.tag&&(h.q=r._queryObject,h.t=t.tag),h.h=t.hashFn(),this.sendRequest("q",h,y=>{const E=y.d,T=y.s;n.warnOnListenWarnings_(E,r),(this.listens.get(o)&&this.listens.get(o).get(c))===t&&(this.log_("listen response",y),"ok"!==T&&this.removeListen_(o,c),t.onComplete&&t.onComplete(T,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,M.r3)(t,"w")){const o=(0,M.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const c='".indexOn": "'+r._queryParams.getIndex().toString()+'"',h=r._path.toString();Xi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${h} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,M.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,M.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,c=>{const h=c.s,m=c.d||"error";this.authToken_===t&&("ok"===h?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(h,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),c=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+c),(0,M.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,c)&&this.connected_&&this.sendUnlisten_(o,c,t._queryObject,r)}sendUnlisten_(t,r,o,c){this.log_("Unlisten on "+t+" for "+r);const h={p:t};c&&(h.q=o,h.t=c),this.sendRequest("n",h)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,c){const h={p:r,d:o};this.log_("onDisconnect "+t,h),this.sendRequest(t,h,m=>{c&&setTimeout(()=>{c(m.s,m.d)},Math.floor(0))})}put(t,r,o,c){this.putInternal("p",t,r,o,c)}merge(t,r,o,c){this.putInternal("m",t,r,o,c)}putInternal(t,r,o,c,h){this.initConnection_();const m={p:r,d:o};void 0!==h&&(m.h=h),this.outstandingPuts_.push({action:t,request:m,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,c=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,h=>{this.log_(r+" response",h),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(h.s,h.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,M.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ap("Unrecognized action received from server: "+(0,M.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,M.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,p.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),c=t.onRealtimeDisconnect_.bind(t),h=t.id+":"+n.nextConnectionId_++,m=t.lastSessionId;let y=!1,E=null;const T=function(){E?E.close():(y=!0,c())};t.realtime_={close:T,sendRequest:function(V){(0,M.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(V)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,Y]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);y?ii("getToken() completed but was canceled"):(ii("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=Y&&Y.token,E=new bp(h,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,c,Ee=>{Xi(Ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},m))}catch(V){t.log_("Failed to get token: "+V),y||(t.repoInfo_.nodeAdmin&&Xi(V),T())}}})()}interrupt(t){ii("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ii("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,M.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(h=>h_(h)).join("$"):"default";const c=this.removeListen_(t,o);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(t,r){const o=new pn(t).toString();let c;if(this.listens.has(o)){const h=this.listens.get(o);c=h.get(r),h.delete(r),0===h.size&&this.listens.delete(o)}else c=void 0;return c}onAuthRevoked_(t,r){ii("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ii("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,M.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+op.replace(/\./g,"-")]=1,(0,M.uI)()?t["framework.cordova"]=1:(0,M.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Z5.getInstance().currentlyOnline();return(0,M.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class q{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new q(e,t)}}class Pe{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new q(Xo,e),o=new q(Xo,t);return 0!==this.compare(r,o)}minPost(){return q.MIN}}class Qe extends Pe{static get __EMPTY_NODE(){return Ie}static set __EMPTY_NODE(e){Ie=e}compare(e,t){return $4(e.name,t.name)}isDefinedOn(e){throw(0,M.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return q.MIN}maxPost(){return new q(m2,Ie)}makePost(e,t){return(0,M.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new q(e,Ie)}toString(){return".key"}}const Xe=new Qe;class kt{constructor(e,t,r,o,c=null){this.isReverse_=o,this.resultGenerator_=c,this.nodeStack_=[];let h=1;for(;!e.isEmpty();)if(e=e,h=t?r(e.key,t):1,o&&(h*=-1),h<0)e=this.isReverse_?e.left:e.right;else{if(0===h){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Cc,mn=(()=>{class n{constructor(t,r,o,c,h){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=c?c:oi.EMPTY_NODE,this.right=null!=h?h:oi.EMPTY_NODE}copy(t,r,o,c,h){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=c?c:this.left,null!=h?h:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let c=this;const h=o(t,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(t,r,o),null):0===h?c.copy(null,r,null,null,null):c.copy(null,null,null,null,c.right.insert(t,r,o)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return oi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,c;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return oi.EMPTY_NODE;c=o.right.min_(),o=o.copy(c.key,c.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class oi{constructor(e,t=oi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new oi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,mn.BLACK,null,null))}remove(e){return new oi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kt(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new kt(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new kt(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new kt(this.root_,null,this.comparator_,!0,e)}}function r0(n,e){return $4(n.name,e.name)}function _c(n,e){return $4(n,e)}oi.EMPTY_NODE=new class{copy(e,t,r,o,c){return this}insert(e,t,r){return new mn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Y5=function(n){return"number"==typeof n?"number:"+d_(n):"string:"+n},Q5=function(n){if(n.isLeafNode()){const e=n.val();(0,M.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,M.r3)(e,".sv"),"Priority must be a string or number.")}else(0,M.hu)(n===Cc||n.isEmpty(),"priority of unexpected type.");(0,M.hu)(n===Cc||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let J5,oT,aT,bc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,M.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Q5(this.priorityNode_)}static set __childrenNodeConstructor(t){J5=t}static get __childrenNodeConstructor(){return J5}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Vt(t)?this:".priority"===Ot(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Ot(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,M.hu)(".priority"!==o||1===yc(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(bn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Y5(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?d_(this.value_):this.value_,this.lazyHash_=l_(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,M.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,c=n.VALUE_TYPE_ORDER.indexOf(r),h=n.VALUE_TYPE_ORDER.indexOf(o);return(0,M.hu)(c>=0,"Unknown leaf type: "+r),(0,M.hu)(h>=0,"Unknown leaf type: "+o),c===h?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:h-c}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Un=new class extends Pe{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),c=r.compareTo(o);return 0===c?$4(e.name,t.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return q.MIN}maxPost(){return new q(m2,new bc("[PRIORITY-POST]",aT))}makePost(e,t){const r=oT(e);return new q(t,new bc("[PRIORITY-POST]",r))}toString(){return".priority"}},vN=Math.log(2);class yN{constructor(e){this.count=parseInt(Math.log(e+1)/vN,10),this.current_=this.count-1;const o=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const D_=function(n,e,t,r){n.sort(e);const o=function(y,E){const T=E-y;let x,k;if(0===T)return null;if(1===T)return x=n[y],k=t?t(x):x,new mn(k,x.node,mn.BLACK,null,null);{const V=parseInt(T/2,10)+y,Y=o(y,V),Ee=o(V+1,E);return x=n[V],k=t?t(x):x,new mn(k,x.node,mn.BLACK,Y,Ee)}},m=function(y){let E=null,T=null,x=n.length;const k=function(Y,Ee){const Re=x-Y,Ge=x;x-=Y;const ot=o(Re+1,Ge),Lt=n[Re],ht=t?t(Lt):Lt;V(new mn(ht,Lt.node,Ee,null,ot))},V=function(Y){E?(E.left=Y,E=Y):(T=Y,E=Y)};for(let Y=0;Y<y.count;++Y){const Ee=y.nextBitIsOne(),Re=Math.pow(2,y.count-(Y+1));Ee?k(Re,mn.BLACK):(k(Re,mn.BLACK),k(Re,mn.RED))}return T}(new yN(n.length));return new oi(r||e,m)};let gM;const X5={};class Z4{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,M.hu)(X5&&Un,"ChildrenNode.ts has not been loaded"),gM=gM||new Z4({".priority":X5},{".priority":Un}),gM}get(e){const t=(0,M.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof oi?t:null}hasIndex(e){return(0,M.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,M.hu)(e!==Xe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const c=t.getIterator(q.Wrap);let m,h=c.getNext();for(;h;)o=o||e.isDefinedOn(h.node),r.push(h),h=c.getNext();m=o?D_(r,e.getCompare()):X5;const y=e.toString(),E=Object.assign({},this.indexSet_);E[y]=e;const T=Object.assign({},this.indexes_);return T[y]=m,new Z4(T,E)}addToIndexes(e,t){const r=(0,M.UI)(this.indexes_,(o,c)=>{const h=(0,M.DV)(this.indexSet_,c);if((0,M.hu)(h,"Missing index implementation for "+c),o===X5){if(h.isDefinedOn(e.node)){const m=[],y=t.getIterator(q.Wrap);let E=y.getNext();for(;E;)E.name!==e.name&&m.push(E),E=y.getNext();return m.push(e),D_(m,h.getCompare())}return X5}{const m=t.get(e.name);let y=o;return m&&(y=y.remove(new q(e.name,m))),y.insert(e,e.node)}});return new Z4(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,M.UI)(this.indexes_,o=>{if(o===X5)return o;{const c=t.get(e.name);return c?o.remove(new q(e.name,c)):o}});return new Z4(r,this.indexSet_)}}let Ep,Dt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Q5(this.priorityNode_),this.children_.isEmpty()&&(0,M.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ep||(Ep=new n(new oi(_c),null,Z4.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ep}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ep:r}}getChild(t){const r=Ot(t);return null===r?this:this.getImmediateChild(r).getChild(bn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,M.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new q(t,r);let c,h;r.isEmpty()?(c=this.children_.remove(t),h=this.indexMap_.removeFromIndexes(o,this.children_)):(c=this.children_.insert(t,r),h=this.indexMap_.addToIndexes(o,this.children_));const m=c.isEmpty()?Ep:this.priorityNode_;return new n(c,m,h)}}updateChild(t,r){const o=Ot(t);if(null===o)return r;{(0,M.hu)(".priority"!==Ot(t)||1===yc(t),".priority must be the last token in a path");const c=this.getImmediateChild(o).updateChild(bn(t),r);return this.updateImmediateChild(o,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,c=0,h=!0;if(this.forEachChild(Un,(m,y)=>{r[m]=y.val(t),o++,h&&n.INTEGER_REGEXP_.test(m)?c=Math.max(c,Number(m)):h=!1}),!t&&h&&c<2*o){const m=[];for(const y in r)m[y]=r[y];return m}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Y5(this.getPriority().val())+":"),this.forEachChild(Un,(r,o)=>{const c=o.hash();""!==c&&(t+=":"+r+":"+c)}),this.lazyHash_=""===t?"":l_(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const c=this.resolveIndex_(o);if(c){const h=c.getPredecessorKey(new q(t,r));return h?h.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new q(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new q(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(c=>r(c.name,c.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,c=>c);{const c=this.children_.getIteratorFrom(t.name,q.Wrap);let h=c.peek();for(;null!=h&&r.compare(h,t)<0;)c.getNext(),h=c.peek();return c}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,c=>c);{const c=this.children_.getReverseIteratorFrom(t.name,q.Wrap);let h=c.peek();for(;null!=h&&r.compare(h,t)>0;)c.getNext(),h=c.peek();return c}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Mp?-1:0}withIndex(t){if(t===Xe||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Xe||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Un),c=r.getIterator(Un);let h=o.getNext(),m=c.getNext();for(;h&&m;){if(h.name!==m.name||!h.node.equals(m.node))return!1;h=o.getNext(),m=c.getNext()}return null===h&&null===m}return!1}return!1}}resolveIndex_(t){return t===Xe?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Mp=new class extends Dt{constructor(){super(new oi(_c),Dt.EMPTY_NODE,Z4.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Dt.EMPTY_NODE}isEmpty(){return!1}};function pr(n,e=null){if(null===n)return Dt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,M.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new bc(n,pr(e));if(n instanceof Array){let t=Dt.EMPTY_NODE;return si(n,(r,o)=>{if((0,M.r3)(n,r)&&"."!==r.substring(0,1)){const c=pr(o);(c.isLeafNode()||!c.isEmpty())&&(t=t.updateImmediateChild(r,c))}}),t.updatePriority(pr(e))}{const t=[];let r=!1;if(si(n,(h,m)=>{if("."!==h.substring(0,1)){const y=pr(m);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new q(h,y)))}}),0===t.length)return Dt.EMPTY_NODE;const c=D_(t,r0,h=>h.name,_c);if(r){const h=D_(t,Un.getCompare());return new Dt(c,pr(e),new Z4({".priority":h},{".priority":Un}))}return new Dt(c,pr(e),Z4.Default)}}Object.defineProperties(q,{MIN:{value:new q(Xo,Dt.EMPTY_NODE)},MAX:{value:new q(m2,Mp)}}),Qe.__EMPTY_NODE=Dt.EMPTY_NODE,bc.__childrenNodeConstructor=Dt,function(n){Cc=n}(Mp),function(n){aT=n}(Mp),function(n){oT=n}(pr);class vM extends Pe{constructor(e){super(),this.indexPath_=e,(0,M.hu)(!Vt(e)&&".priority"!==Ot(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),c=r.compareTo(o);return 0===c?$4(e.name,t.name):c}makePost(e,t){const r=pr(e),o=Dt.EMPTY_NODE.updateChild(this.indexPath_,r);return new q(t,o)}maxPost(){const e=Dt.EMPTY_NODE.updateChild(this.indexPath_,Mp);return new q(m2,e)}toString(){return K5(this.indexPath_,0).join("/")}}const yM=new class extends Pe{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?$4(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return q.MIN}maxPost(){return q.MAX}makePost(e,t){const r=pr(e);return new q(t,r)}toString(){return".value"}},ed="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wN=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const c=new Array(8);for(o=7;o>=0;o--)c[o]=ed.charAt(t%64),t=Math.floor(t/64);(0,M.hu)(0===t,"Cannot push at time == 0");let h=c.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)h+=ed.charAt(e[o]);return(0,M.hu)(20===h.length,"nextPushId: Length should be 20."),h}}(),uT=function(n){if(n===""+Ys)return"-";const e=cp(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let h=0;h<t.length;h++)t[h]=n.charAt(h);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return m2;const c=ed.charAt(ed.indexOf(t[r])+1);return t[r]=c,t.slice(0,r+1).join("")},hT=function(n){if(n===""+f_)return Xo;const e=cp(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Ys:(delete t[t.length-1],t.join("")):(t[t.length-1]=ed.charAt(ed.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function dT(n){return{type:"value",snapshotNode:n}}function td(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ip(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ap(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class CM{constructor(e){this.index_=e}updateChild(e,t,r,o,c,h){(0,M.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(t);return m.getChild(o).equals(r.getChild(o))&&m.isEmpty()===r.isEmpty()||(null!=h&&(r.isEmpty()?e.hasChild(t)?h.trackChildChange(Ip(t,m)):(0,M.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?h.trackChildChange(td(t,r)):h.trackChildChange(Ap(t,r,m))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Un,(o,c)=>{t.hasChild(o)||r.trackChildChange(Ip(o,c))}),t.isLeafNode()||t.forEachChild(Un,(o,c)=>{if(e.hasChild(o)){const h=e.getImmediateChild(o);h.equals(c)||r.trackChildChange(Ap(o,c,h))}else r.trackChildChange(td(o,c))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Dt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Tp{constructor(e){this.indexedFilter_=new CM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Tp.getStartPost_(e),this.endPost_=Tp.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,c,h){return this.matches(new q(t,r))||(r=Dt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,c,h)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Dt.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(Dt.EMPTY_NODE);const c=this;return t.forEachChild(Un,(h,m)=>{c.matches(new q(h,m))||(o=o.updateImmediateChild(h,Dt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class MN{constructor(e){this.rangedFilter_=new Tp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,c,h){return this.rangedFilter_.matches(new q(t,r))||(r=Dt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,c,h):this.fullLimitUpdateChild_(e,t,r,c,h)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=Dt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let c;o=Dt.EMPTY_NODE.withIndex(this.index_),c=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;c.hasNext()&&h<this.limit_;){const m=c.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),m)<=0:this.index_.compare(m,this.rangedFilter_.getEndPost())<=0,!y)break;o=o.updateImmediateChild(m.name,m.node),h++}}else{let c,h,m,y;if(o=t.withIndex(this.index_),o=o.updatePriority(Dt.EMPTY_NODE),this.reverse_){y=o.getReverseIterator(this.index_),c=this.rangedFilter_.getEndPost(),h=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();m=(k,V)=>x(V,k)}else y=o.getIterator(this.index_),c=this.rangedFilter_.getStartPost(),h=this.rangedFilter_.getEndPost(),m=this.index_.getCompare();let E=0,T=!1;for(;y.hasNext();){const x=y.getNext();!T&&m(c,x)<=0&&(T=!0),T&&E<this.limit_&&m(x,h)<=0?E++:o=o.updateImmediateChild(x.name,Dt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,c){let h;if(this.reverse_){const x=this.index_.getCompare();h=(k,V)=>x(V,k)}else h=this.index_.getCompare();const m=e;(0,M.hu)(m.numChildren()===this.limit_,"");const y=new q(t,r),E=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),T=this.rangedFilter_.matches(y);if(m.hasChild(t)){const x=m.getImmediateChild(t);let k=o.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=k&&(k.name===t||m.hasChild(k.name));)k=o.getChildAfterChild(this.index_,k,this.reverse_);const V=null==k?1:h(k,y);if(T&&!r.isEmpty()&&V>=0)return null!=c&&c.trackChildChange(Ap(t,r,x)),m.updateImmediateChild(t,r);{null!=c&&c.trackChildChange(Ip(t,x));const Ee=m.updateImmediateChild(t,Dt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(null!=c&&c.trackChildChange(td(k.name,k.node)),Ee.updateImmediateChild(k.name,k.node)):Ee}}return r.isEmpty()?e:T&&h(E,y)>=0?(null!=c&&(c.trackChildChange(Ip(E.name,E.node)),c.trackChildChange(td(t,r))),m.updateImmediateChild(t,r).updateImmediateChild(E.name,Dt.EMPTY_NODE)):e}}class N_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Un}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,M.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,M.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,M.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,M.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:m2}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,M.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Un}copy(){const e=new N_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function wM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function L_(n,e){const t=n.copy();return t.index_=e,t}function fT(n){const e={};if(n.isDefault())return e;let t;return n.index_===Un?t="$priority":n.index_===yM?t="$value":n.index_===Xe?t="$key":((0,M.hu)(n.index_ instanceof vM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,M.Pz)(t),n.startSet_&&(e.startAt=(0,M.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,M.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,M.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,M.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function pT(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Un&&(e.i=n.index_.toString()),e}class R_ extends vc{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=bu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,M.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const h=R_.getListenId_(e,r),m={};this.listens_[h]=m;const y=fT(e._queryParams);this.restRequest_(c+".json",y,(E,T)=>{let x=T;if(404===E&&(x=null,E=null),null===E&&this.onDataUpdate_(c,x,!1,r),(0,M.DV)(this.listens_,h)===m){let k;k=E?401===E?"permission_denied":"rest_error:"+E:"ok",o(k,null)}})}unlisten(e,t){const r=R_.getListenId_(e,t);delete this.listens_[r]}get(e){const t=fT(e._queryParams),r=e._path.toString(),o=new M.BH;return this.restRequest_(r+".json",t,(c,h)=>{let m=h;404===c&&(m=null,c=null),null===c?(this.onDataUpdate_(r,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,c])=>{o&&o.accessToken&&(t.auth=o.accessToken),c&&c.token&&(t.ac=c.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,M.xO)(t);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&4===m.readyState){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let y=null;if(m.status>=200&&m.status<300){try{y=(0,M.cI)(m.responseText)}catch(E){Xi("Failed to parse JSON response for "+h+": "+m.responseText)}r(null,y)}else 401!==m.status&&404!==m.status&&Xi("Got unsuccessful REST response for "+h+" Status: "+m.status),r(m.status);r=null}},m.open("GET",h,!0),m.send()})}}class DN{constructor(){this.rootNode_=Dt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function k_(){return{value:null,children:new Map}}function nd(n,e,t){if(Vt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ot(e);n.children.has(r)||n.children.set(r,k_()),nd(n.children.get(r),e=bn(e),t)}}function EM(n,e){if(Vt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Un,(r,o)=>{nd(n,new pn(r),o)}),EM(n,e)}}if(n.children.size>0){const t=Ot(e);return e=bn(e),n.children.has(t)&&EM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function MM(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{MM(o,new pn(e.toString()+"/"+r),t)})}class LN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&si(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class PN{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new LN(e);const r=1e4+2e4*Math.random();Q6(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;si(e,(o,c)=>{c>0&&(0,M.r3)(this.statsToReport_,o)&&(t[o]=c,r=!0)}),r&&this.server_.reportStats(t),Q6(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ea=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ea||(ea={})),ea))();function TM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class P_{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ea.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Vt(this.path)){if(null!=this.affectedTree.value)return(0,M.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new pn(e));return new P_(sn(),t,this.revert)}}return(0,M.hu)(Ot(this.path)===e,"operationForChild called for unrelated child."),new P_(bn(this.path),this.affectedTree,this.revert)}}class Sp{constructor(e,t){this.source=e,this.path=t,this.type=ea.LISTEN_COMPLETE}operationForChild(e){return Vt(this.path)?new Sp(this.source,sn()):new Sp(this.source,bn(this.path))}}class xu{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ea.OVERWRITE}operationForChild(e){return Vt(this.path)?new xu(this.source,sn(),this.snap.getImmediateChild(e)):new xu(this.source,bn(this.path),this.snap)}}class rd{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ea.MERGE}operationForChild(e){if(Vt(this.path)){const t=this.children.subtree(new pn(e));return t.isEmpty()?null:t.value?new xu(this.source,sn(),t.value):new rd(this.source,sn(),t)}return(0,M.hu)(Ot(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rd(this.source,bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class s0{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Vt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ot(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class zN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function xp(n,e,t,r,o,c){const h=r.filter(m=>m.type===t);h.sort((m,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,M.g5)("Should only compare child_ events.");const r=new q(e.childName,e.snapshotNode),o=new q(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,m,y)),h.forEach(m=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,m,c);o.forEach(E=>{E.respondsTo(m.type)&&e.push(E.createEvent(y,n.query_))})})}function z_(n,e){return{eventCache:n,serverCache:e}}function Dp(n,e,t,r){return z_(new s0(e,t,r),n.serverCache)}function gT(n,e,t,r){return z_(n.eventCache,new s0(e,t,r))}function O_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Du(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let SM;class Bn{constructor(e,t=(()=>(SM||(SM=new oi(nT)),SM))()){this.value=e,this.children=t}static fromObject(e){let t=new Bn(null);return si(e,(r,o)=>{t=t.set(new pn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:sn(),value:this.value};if(Vt(e))return null;{const r=Ot(e),o=this.children.get(r);if(null!==o){const c=o.findRootMostMatchingPathAndValue(bn(e),t);return null!=c?{path:Hn(new pn(r),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Vt(e))return this;{const t=Ot(e),r=this.children.get(t);return null!==r?r.subtree(bn(e)):new Bn(null)}}set(e,t){if(Vt(e))return new Bn(t,this.children);{const r=Ot(e),c=(this.children.get(r)||new Bn(null)).set(bn(e),t),h=this.children.insert(r,c);return new Bn(this.value,h)}}remove(e){if(Vt(e))return this.children.isEmpty()?new Bn(null):new Bn(null,this.children);{const t=Ot(e),r=this.children.get(t);if(r){const o=r.remove(bn(e));let c;return c=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&c.isEmpty()?new Bn(null):new Bn(this.value,c)}return this}}get(e){if(Vt(e))return this.value;{const t=Ot(e),r=this.children.get(t);return r?r.get(bn(e)):null}}setTree(e,t){if(Vt(e))return t;{const r=Ot(e),c=(this.children.get(r)||new Bn(null)).setTree(bn(e),t);let h;return h=c.isEmpty()?this.children.remove(r):this.children.insert(r,c),new Bn(this.value,h)}}fold(e){return this.fold_(sn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,c)=>{r[o]=c.fold_(Hn(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,sn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(Vt(e))return null;{const c=Ot(e),h=this.children.get(c);return h?h.findOnPath_(bn(e),Hn(t,c),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,sn(),t)}foreachOnPath_(e,t,r){if(Vt(e))return this;{this.value&&r(t,this.value);const o=Ot(e),c=this.children.get(o);return c?c.foreachOnPath_(bn(e),Hn(t,o),r):new Bn(null)}}foreach(e){this.foreach_(sn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(Hn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class g2{constructor(e){this.writeTree_=e}static empty(){return new g2(new Bn(null))}}function Np(n,e,t){if(Vt(e))return new g2(new Bn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let c=r.value;const h=Ss(o,e);return c=c.updateChild(h,t),new g2(n.writeTree_.set(o,c))}{const o=new Bn(t),c=n.writeTree_.setTree(e,o);return new g2(c)}}}function xM(n,e,t){let r=n;return si(t,(o,c)=>{r=Np(r,Hn(e,o),c)}),r}function vT(n,e){if(Vt(e))return g2.empty();{const t=n.writeTree_.setTree(e,new Bn(null));return new g2(t)}}function DM(n,e){return null!=Nu(n,e)}function Nu(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ss(t.path,e)):null}function yT(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Un,(r,o)=>{e.push(new q(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new q(r,o.value))}),e}function o0(n,e){if(Vt(e))return n;{const t=Nu(n,e);return new g2(null!=t?new Bn(t):n.writeTree_.subtree(e))}}function NM(n){return n.writeTree_.isEmpty()}function id(n,e){return _T(sn(),n.writeTree_,e)}function _T(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,c)=>{".priority"===o?((0,M.hu)(null!==c.value,"Priority writes must always be leaf nodes"),r=c.value):t=_T(Hn(n,o),c,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Hn(n,".priority"),r)),t}}function V_(n,e){return MT(e,n)}function GN(n,e){if(n.snap)return i(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&i(Hn(n.path,t),e))return!0;return!1}function WN(n){return n.visible}function CT(n,e,t){let r=g2.empty();for(let o=0;o<n.length;++o){const c=n[o];if(e(c)){const h=c.path;let m;if(c.snap)i(t,h)?(m=Ss(t,h),r=Np(r,m,c.snap)):i(h,t)&&(m=Ss(h,t),r=Np(r,sn(),c.snap.getChild(m)));else{if(!c.children)throw(0,M.g5)("WriteRecord should have .snap or .children");if(i(t,h))m=Ss(t,h),r=xM(r,m,c.children);else if(i(h,t))if(m=Ss(h,t),Vt(m))r=xM(r,sn(),c.children);else{const y=(0,M.DV)(c.children,Ot(m));if(y){const E=y.getChild(bn(m));r=Np(r,sn(),E)}}}}}return r}function bT(n,e,t,r,o){if(r||o){const c=o0(n.visibleWrites,e);return!o&&NM(c)?t:o||null!=t||DM(c,sn())?id(CT(n.allWrites,function(E){return(E.visible||o)&&(!r||!~r.indexOf(E.writeId))&&(i(E.path,e)||i(e,E.path))},e),t||Dt.EMPTY_NODE):null}{const c=Nu(n.visibleWrites,e);if(null!=c)return c;{const h=o0(n.visibleWrites,e);return NM(h)?t:null!=t||DM(h,sn())?id(h,t||Dt.EMPTY_NODE):null}}}function F_(n,e,t,r){return bT(n.writeTree,n.treePath,e,t,r)}function LM(n,e){return function(n,e,t){let r=Dt.EMPTY_NODE;const o=Nu(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Un,(c,h)=>{r=r.updateImmediateChild(c,h)}),r;if(t){const c=o0(n.visibleWrites,e);return t.forEachChild(Un,(h,m)=>{const y=id(o0(c,new pn(h)),m);r=r.updateImmediateChild(h,y)}),yT(c).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}return yT(o0(n.visibleWrites,e)).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}(n.writeTree,n.treePath,e)}function wT(n,e,t,r){return function(n,e,t,r,o){(0,M.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const c=Hn(e,t);if(DM(n.visibleWrites,c))return null;{const h=o0(n.visibleWrites,c);return NM(h)?o.getChild(t):id(h,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function H_(n,e){return function(n,e){return Nu(n.visibleWrites,e)}(n.writeTree,Hn(n.treePath,e))}function RM(n,e,t){return function(n,e,t,r){const o=Hn(e,t),c=Nu(n.visibleWrites,o);return null!=c?c:r.isCompleteForChild(t)?id(o0(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function ET(n,e){return MT(Hn(n.treePath,e),n.writeTree)}function MT(n,e){return{treePath:n,writeTree:e}}class tL{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,M.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,M.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const c=o.type;if("child_added"===t&&"child_removed"===c)this.changeMap.set(r,Ap(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===c)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===c)this.changeMap.set(r,Ip(r,o.oldSnap));else if("child_changed"===t&&"child_added"===c)this.changeMap.set(r,td(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==c)throw(0,M.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,Ap(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const IT=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class kM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new s0(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Du(this.viewCache_),c=function(n,e,t,r,o,c){return function(n,e,t,r,o,c,h){let m;const y=o0(n.visibleWrites,e),E=Nu(y,sn());if(null!=E)m=E;else{if(null==t)return[];m=id(y,t)}if(m=m.withIndex(h),m.isEmpty()||m.isLeafNode())return[];{const T=[],x=h.getCompare(),k=c?m.getReverseIteratorFrom(r,h):m.getIteratorFrom(r,h);let V=k.getNext();for(;V&&T.length<o;)0!==x(V,r)&&T.push(V),V=k.getNext();return T}}(n.writeTree,n.treePath,e,t,r,o,c)}(this.writes_,o,t,1,r,e);return 0===c.length?null:c[0]}}function AT(n,e,t,r,o,c){const h=e.eventCache;if(null!=H_(r,t))return e;{let m,y;if(Vt(t))if((0,M.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=Du(e),x=LM(r,E instanceof Dt?E:Dt.EMPTY_NODE);m=n.filter.updateFullNode(e.eventCache.getNode(),x,c)}else{const E=F_(r,Du(e));m=n.filter.updateFullNode(e.eventCache.getNode(),E,c)}else{const E=Ot(t);if(".priority"===E){(0,M.hu)(1===yc(t),"Can't have a priority with additional path components");const T=h.getNode();y=e.serverCache.getNode();const x=wT(r,t,T,y);m=null!=x?n.filter.updatePriority(T,x):h.getNode()}else{const T=bn(t);let x;if(h.isCompleteForChild(E)){y=e.serverCache.getNode();const k=wT(r,t,h.getNode(),y);x=null!=k?h.getNode().getImmediateChild(E).updateChild(T,k):h.getNode().getImmediateChild(E)}else x=RM(r,E,e.serverCache);m=null!=x?n.filter.updateChild(h.getNode(),E,x,T,o,c):h.getNode()}}return Dp(e,m,h.isFullyInitialized()||Vt(t),n.filter.filtersNodes())}}function U_(n,e,t,r,o,c,h,m){const y=e.serverCache;let E;const T=h?n.filter:n.filter.getIndexedFilter();if(Vt(t))E=T.updateFullNode(y.getNode(),r,null);else if(T.filtersNodes()&&!y.isFiltered()){const V=y.getNode().updateChild(t,r);E=T.updateFullNode(y.getNode(),V,null)}else{const V=Ot(t);if(!y.isCompleteForPath(t)&&yc(t)>1)return e;const Y=bn(t),Re=y.getNode().getImmediateChild(V).updateChild(Y,r);E=".priority"===V?T.updatePriority(y.getNode(),Re):T.updateChild(y.getNode(),V,Re,Y,IT,null)}const x=gT(e,E,y.isFullyInitialized()||Vt(t),T.filtersNodes());return AT(n,x,t,o,new kM(o,x,c),m)}function PM(n,e,t,r,o,c,h){const m=e.eventCache;let y,E;const T=new kM(o,e,c);if(Vt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,h),y=Dp(e,E,!0,n.filter.filtersNodes());else{const x=Ot(t);if(".priority"===x)E=n.filter.updatePriority(e.eventCache.getNode(),r),y=Dp(e,E,m.isFullyInitialized(),m.isFiltered());else{const k=bn(t),V=m.getNode().getImmediateChild(x);let Y;if(Vt(k))Y=r;else{const Ee=T.getCompleteChild(x);Y=null!=Ee?".priority"===S_(k)&&Ee.getChild(mM(k)).isEmpty()?Ee:Ee.updateChild(k,r):Dt.EMPTY_NODE}y=V.equals(Y)?e:Dp(e,n.filter.updateChild(m.getNode(),x,Y,k,T,h),m.isFullyInitialized(),n.filter.filtersNodes())}}return y}function TT(n,e){return n.eventCache.isCompleteForChild(e)}function ST(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function zM(n,e,t,r,o,c,h,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,y=e;E=Vt(t)?r:new Bn(null).setTree(t,r);const T=e.serverCache.getNode();return E.children.inorderTraversal((x,k)=>{if(T.hasChild(x)){const Y=ST(0,e.serverCache.getNode().getImmediateChild(x),k);y=U_(n,y,new pn(x),Y,o,c,h,m)}}),E.children.inorderTraversal((x,k)=>{const V=!e.serverCache.isCompleteForChild(x)&&void 0===k.value;if(!T.hasChild(x)&&!V){const Ee=ST(0,e.serverCache.getNode().getImmediateChild(x),k);y=U_(n,y,new pn(x),Ee,o,c,h,m)}}),y}class hL{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new CM(r.getIndex()),c=function(n){return n.loadsAllData()?new CM(n.getIndex()):n.hasLimit()?new MN(n):new Tp(n)}(r);this.processor_=function(n){return{filter:n}}(c);const h=t.serverCache,m=t.eventCache,y=o.updateFullNode(Dt.EMPTY_NODE,h.getNode(),null),E=c.updateFullNode(Dt.EMPTY_NODE,m.getNode(),null),T=new s0(y,h.isFullyInitialized(),o.filtersNodes()),x=new s0(E,m.isFullyInitialized(),c.filtersNodes());this.viewCache_=z_(x,T),this.eventGenerator_=new zN(this.query_)}get query(){return this.query_}}function pL(n,e){const t=Du(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Vt(e)&&!t.getImmediateChild(Ot(e)).isEmpty())?t.getChild(e):null}function xT(n){return 0===n.eventRegistrations_.length}function DT(n,e,t){const r=[];if(t){(0,M.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(c=>{const h=c.createCancelEvent(t,o);h&&r.push(h)})}if(e){let o=[];for(let c=0;c<n.eventRegistrations_.length;++c){const h=n.eventRegistrations_[c];if(h.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(c+1));break}}else o.push(h)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function NT(n,e,t,r){e.type===ea.MERGE&&null!==e.source.queryId&&((0,M.hu)(Du(n.viewCache_),"We should always have a full cache before handling merges"),(0,M.hu)(O_(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,c=function(n,e,t,r,o){const c=new tL;let h,m;if(t.type===ea.OVERWRITE){const E=t;E.source.fromUser?h=PM(n,e,E.path,E.snap,r,o,c):((0,M.hu)(E.source.fromServer,"Unknown source."),m=E.source.tagged||e.serverCache.isFiltered()&&!Vt(E.path),h=U_(n,e,E.path,E.snap,r,o,m,c))}else if(t.type===ea.MERGE){const E=t;E.source.fromUser?h=function(n,e,t,r,o,c,h){let m=e;return r.foreach((y,E)=>{const T=Hn(t,y);TT(e,Ot(T))&&(m=PM(n,m,T,E,o,c,h))}),r.foreach((y,E)=>{const T=Hn(t,y);TT(e,Ot(T))||(m=PM(n,m,T,E,o,c,h))}),m}(n,e,E.path,E.children,r,o,c):((0,M.hu)(E.source.fromServer,"Unknown source."),m=E.source.tagged||e.serverCache.isFiltered(),h=zM(n,e,E.path,E.children,r,o,m,c))}else if(t.type===ea.ACK_USER_WRITE){const E=t;h=E.revert?function(n,e,t,r,o,c){let h;if(null!=H_(r,t))return e;{const m=new kM(r,e,o),y=e.eventCache.getNode();let E;if(Vt(t)||".priority"===Ot(t)){let T;if(e.serverCache.isFullyInitialized())T=F_(r,Du(e));else{const x=e.serverCache.getNode();(0,M.hu)(x instanceof Dt,"serverChildren would be complete if leaf node"),T=LM(r,x)}T=T,E=n.filter.updateFullNode(y,T,c)}else{const T=Ot(t);let x=RM(r,T,e.serverCache);null==x&&e.serverCache.isCompleteForChild(T)&&(x=y.getImmediateChild(T)),E=null!=x?n.filter.updateChild(y,T,x,bn(t),m,c):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(y,T,Dt.EMPTY_NODE,bn(t),m,c):y,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(h=F_(r,Du(e)),h.isLeafNode()&&(E=n.filter.updateFullNode(E,h,c)))}return h=e.serverCache.isFullyInitialized()||null!=H_(r,sn()),Dp(e,E,h,n.filter.filtersNodes())}}(n,e,E.path,r,o,c):function(n,e,t,r,o,c,h){if(null!=H_(o,t))return e;const m=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(Vt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return U_(n,e,t,y.getNode().getChild(t),o,c,m,h);if(Vt(t)){let E=new Bn(null);return y.getNode().forEachChild(Xe,(T,x)=>{E=E.set(new pn(T),x)}),zM(n,e,t,E,o,c,m,h)}return e}{let E=new Bn(null);return r.foreach((T,x)=>{const k=Hn(t,T);y.isCompleteForPath(k)&&(E=E.set(T,y.getNode().getChild(k)))}),zM(n,e,t,E,o,c,m,h)}}(n,e,E.path,E.affectedTree,r,o,c)}else{if(t.type!==ea.LISTEN_COMPLETE)throw(0,M.g5)("Unknown operation type: "+t.type);h=function(n,e,t,r,o){const c=e.serverCache;return AT(n,gT(e,c.getNode(),c.isFullyInitialized()||Vt(t),c.isFiltered()),t,r,IT,o)}(n,e,t.path,r,c)}const y=c.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),c=O_(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(c)||!r.getNode().getPriority().equals(c.getPriority()))&&t.push(dT(O_(e)))}}(e,h,y),{viewCache:h,changes:y}}(n.processor_,o,e,t,r);return function(n,e){(0,M.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,M.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,c.viewCache),(0,M.hu)(c.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=c.viewCache,LT(n,c.changes,c.viewCache.eventCache.getNode(),null)}function LT(n,e,t,r){return function(n,e,t,r){const o=[],c=[];return e.forEach(h=>{"child_changed"===h.type&&n.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&c.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(h.childName,h.snapshotNode))}),xp(n,o,"child_removed",e,r,t),xp(n,o,"child_added",e,r,t),xp(n,o,"child_moved",c,r,t),xp(n,o,"child_changed",e,r,t),xp(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let B_,$_;class RT{constructor(){this.views=new Map}}function OM(n,e,t,r){const o=e.source.queryId;if(null!==o){const c=n.views.get(o);return(0,M.hu)(null!=c,"SyncTree gave us an op for an invalid query."),NT(c,e,t,r)}{let c=[];for(const h of n.views.values())c=c.concat(NT(h,e,t,r));return c}}function kT(n,e,t,r,o){const h=n.views.get(e._queryIdentifier);if(!h){let m=F_(t,o?r:null),y=!1;m?y=!0:r instanceof Dt?(m=LM(t,r),y=!1):(m=Dt.EMPTY_NODE,y=!1);const E=z_(new s0(m,y,!1),new s0(r,o,!1));return new hL(e,E)}return h}function PT(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function a0(n,e){let t=null;for(const r of n.views.values())t=t||pL(r,e);return t}function zT(n,e){return e._queryParams.loadsAllData()?j_(n):n.views.get(e._queryIdentifier)}function OT(n,e){return null!=zT(n,e)}function c0(n){return null!=j_(n)}function j_(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let ML=1;class VT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Bn(null),this.pendingWriteTree_={visibleWrites:g2.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function VM(n,e,t,r,o){return function(n,e,t,r,o){(0,M.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=Np(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?sd(n,new xu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function l0(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(m=>m.writeId===e);(0,M.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,c=!1,h=n.allWrites.length-1;for(;o&&h>=0;){const m=n.allWrites[h];m.visible&&(h>=t&&GN(m,r.path)?o=!1:i(r.path,m.path)&&(c=!0)),h--}return!!o&&(c?(function(n){n.visibleWrites=CT(n.allWrites,WN,sn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=vT(n.visibleWrites,r.path):si(r.children,y=>{n.visibleWrites=vT(n.visibleWrites,Hn(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let c=new Bn(null);return null!=r.snap?c=c.set(sn(),!0):si(r.children,h=>{c=c.set(new pn(h),!0)}),sd(n,new P_(r.path,c,t))}return[]}function Lp(n,e,t){return sd(n,new xu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function FM(n,e,t,r){const o=e._path,c=n.syncPointTree_.get(o);let h=[];if(c&&("default"===e._queryIdentifier||OT(c,e))){const m=function(n,e,t,r){const o=e._queryIdentifier,c=[];let h=[];const m=c0(n);if("default"===o)for(const[y,E]of n.views.entries())h=h.concat(DT(E,t,r)),xT(E)&&(n.views.delete(y),E.query._queryParams.loadsAllData()||c.push(E.query));else{const y=n.views.get(o);y&&(h=h.concat(DT(y,t,r)),xT(y)&&(n.views.delete(o),y.query._queryParams.loadsAllData()||c.push(y.query)))}return m&&!c0(n)&&c.push(new((0,M.hu)(B_,"Reference.ts has not been loaded"),B_)(e._repo,e._path)),{removed:c,events:h}}(c,e,t,r);(function(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=m.removed;h=m.events;const E=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(o,(x,k)=>c0(k));if(E&&!T){const x=n.syncPointTree_.subtree(o);if(!x.isEmpty()){const k=function(n){return n.fold((e,t,r)=>{if(t&&c0(t))return[j_(t)];{let o=[];return t&&(o=PT(t)),si(r,(c,h)=>{o=o.concat(h)}),o}})}(x);for(let V=0;V<k.length;++V){const Y=k[V],Ee=Y.query,Re=BT(n,Y);n.listenProvider_.startListening(Rp(Ee),q_(n,Ee),Re.hashFn,Re.onComplete)}}}if(!T&&y.length>0&&!r)if(E){const x=null;n.listenProvider_.stopListening(Rp(e),x)}else y.forEach(x=>{const k=n.queryToTagMap.get(W_(x));n.listenProvider_.stopListening(Rp(x),k)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=W_(r),c=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(c)}}}(n,y)}return h}function FT(n,e,t){const r=e._path;let o=null,c=!1;n.syncPointTree_.foreachOnPath(r,(x,k)=>{const V=Ss(x,r);o=o||a0(k,V),c=c||c0(k)});let m,h=n.syncPointTree_.get(r);h?(c=c||c0(h),o=o||a0(h,sn())):(h=new RT,n.syncPointTree_=n.syncPointTree_.set(r,h)),null!=o?m=!0:(m=!1,o=Dt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((k,V)=>{const Y=a0(V,sn());Y&&(o=o.updateImmediateChild(k,Y))}));const y=OT(h,e);if(!y&&!e._queryParams.loadsAllData()){const x=W_(e);(0,M.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const k=ML++;n.queryToTagMap.set(x,k),n.tagToQueryMap.set(k,x)}let T=function(n,e,t,r,o,c){const h=kT(n,e,r,o,c);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,h),function(n,e){n.eventRegistrations_.push(e)}(h,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Un,(c,h)=>{r.push(td(c,h))}),t.isFullyInitialized()&&r.push(dT(t.getNode())),LT(n,r,t.getNode(),e)}(h,t)}(h,e,t,V_(n.pendingWriteTree_,r),o,m);if(!y&&!c){const x=zT(h,e);T=T.concat(function(n,e,t){const r=e._path,o=q_(n,e),c=BT(n,t),h=n.listenProvider_.startListening(Rp(e),o,c.hashFn,c.onComplete),m=n.syncPointTree_.subtree(r);if(o)(0,M.hu)(!c0(m.value),"If we're adding a query, it shouldn't be shadowed");else{const y=m.fold((E,T,x)=>{if(!Vt(E)&&T&&c0(T))return[j_(T).query];{let k=[];return T&&(k=k.concat(PT(T).map(V=>V.query))),si(x,(V,Y)=>{k=k.concat(Y)}),k}});for(let E=0;E<y.length;++E){const T=y[E];n.listenProvider_.stopListening(Rp(T),q_(n,T))}}return h}(n,e,x))}return T}function G_(n,e,t){const o=n.pendingWriteTree_,c=n.syncPointTree_.findOnPath(e,(h,m)=>{const E=a0(m,Ss(h,e));if(E)return E});return bT(o,e,c,t,!0)}function sd(n,e){return HT(e,n.syncPointTree_,null,V_(n.pendingWriteTree_,sn()))}function HT(n,e,t,r){if(Vt(n.path))return UT(n,e,t,r);{const o=e.get(sn());null==t&&null!=o&&(t=a0(o,sn()));let c=[];const h=Ot(n.path),m=n.operationForChild(h),y=e.children.get(h);if(y&&m){const E=t?t.getImmediateChild(h):null,T=ET(r,h);c=c.concat(HT(m,y,E,T))}return o&&(c=c.concat(OM(o,n,r,t))),c}}function UT(n,e,t,r){const o=e.get(sn());null==t&&null!=o&&(t=a0(o,sn()));let c=[];return e.children.inorderTraversal((h,m)=>{const y=t?t.getImmediateChild(h):null,E=ET(r,h),T=n.operationForChild(h);T&&(c=c.concat(UT(T,m,y,E)))}),o&&(c=c.concat(OM(o,n,r,t))),c}function BT(n,e){const t=e.query,r=q_(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Dt.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=HM(n,t);if(r){const o=UM(r),c=o.path,h=o.queryId,m=Ss(c,e);return BM(n,c,new Sp(TM(h),m))}return[]}(n,t._path,r):function(n,e){return sd(n,new Sp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const c=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return FM(n,t,null,c)}}}}function q_(n,e){const t=W_(e);return n.queryToTagMap.get(t)}function W_(n){return n._path.toString()+"$"+n._queryIdentifier}function HM(n,e){return n.tagToQueryMap.get(e)}function UM(n){const e=n.indexOf("$");return(0,M.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new pn(n.substr(0,e))}}function BM(n,e,t){const r=n.syncPointTree_.get(e);return(0,M.hu)(r,"Missing sync point for query tag that we're tracking"),OM(r,t,V_(n.pendingWriteTree_,e),null)}function Rp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,M.hu)($_,"Reference.ts has not been loaded"),$_)(n._repo,n._path):n}class jM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new jM(t)}node(){return this.node_}}class $M{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Hn(this.path_,e);return new $M(this.syncTree_,t)}node(){return G_(this.syncTree_,this.path_)}}const jT=function(n,e,t){return n&&"object"==typeof n?((0,M.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?OL(n[".sv"],e,t):"object"==typeof n[".sv"]?VL(n[".sv"],e):void(0,M.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},OL=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,M.hu)(!1,"Unexpected server value: "+n)}},VL=function(n,e,t){n.hasOwnProperty("increment")||(0,M.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,M.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,M.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const h=o.getValue();return"number"!=typeof h?r:h+r},$T=function(n,e,t,r){return qM(e,new $M(t,n),r)},GM=function(n,e,t){return qM(n,new jM(e),t)};function qM(n,e,t){const r=n.getPriority().val(),o=jT(r,e.getImmediateChild(".priority"),t);let c;if(n.isLeafNode()){const h=n,m=jT(h.getValue(),e,t);return m!==h.getValue()||o!==h.getPriority().val()?new bc(m,pr(o)):n}{const h=n;return c=h,o!==h.getPriority().val()&&(c=c.updatePriority(new bc(o))),h.forEachChild(Un,(m,y)=>{const E=qM(y,e.getImmediateChild(m),t);E!==y&&(c=c.updateImmediateChild(m,E))}),c}}class WM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Z_(n,e){let t=e instanceof pn?e:new pn(e),r=n,o=Ot(t);for(;null!==o;){const c=(0,M.DV)(r.node.children,o)||{children:{},childCount:0};r=new WM(o,r,c),t=bn(t),o=Ot(t)}return r}function Lu(n){return n.node.value}function ZM(n,e){n.node.value=e,KM(n)}function GT(n){return n.node.childCount>0}function K_(n,e){si(n.node.children,(t,r)=>{e(new WM(t,n,r))})}function qT(n,e,t,r){t&&!r&&e(n),K_(n,o=>{qT(o,e,!0,r)}),t&&r&&e(n)}function kp(n){return new pn(null===n.parent?n.name:kp(n.parent)+"/"+n.name)}function KM(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Lu(n)&&!GT(n)}(t),o=(0,M.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,KM(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,KM(n))}(n.parent,n.name,n)}const BL=/[\[\].#$\/\u0000-\u001F\u007F]/,jL=/[\[\].#$\u0000-\u001F\u007F]/,YM=10485760,Y_=function(n){return"string"==typeof n&&0!==n.length&&!BL.test(n)},WT=function(n){return"string"==typeof n&&0!==n.length&&!jL.test(n)},Pp=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!P5(n)||n&&"object"==typeof n&&(0,M.r3)(n,".sv")},wc=function(n,e,t,r){r&&void 0===e||zp((0,M.gK)(n,"value"),e,t)},zp=function(n,e,t){const r=t instanceof pn?new s(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+f(r));if("function"==typeof e)throw new Error(n+"contains a function "+f(r)+" with contents = "+e.toString());if(P5(e))throw new Error(n+"contains "+e.toString()+" "+f(r));if("string"==typeof e&&e.length>YM/3&&(0,M.ug)(e)>YM)throw new Error(n+"contains a string greater than "+YM+" utf8 bytes "+f(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,c=!1;if(si(e,(h,m)=>{if(".value"===h)o=!0;else if(".priority"!==h&&".sv"!==h&&(c=!0,!Y_(h)))throw new Error(n+" contains an invalid key ("+h+") "+f(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,M.ug)(e),u(n)})(r,h),zp(n,m,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,M.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&c)throw new Error(n+' contains ".value" child '+f(r)+" in addition to actual children.")}},ZT=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,M.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const c=[];si(e,(h,m)=>{const y=new pn(h);if(zp(o,m,Hn(t,y)),".priority"===S_(y)&&!Pp(m))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const c=K5(r);for(let h=0;h<c.length;h++)if((".priority"!==c[h]||h!==c.length-1)&&!Y_(c[h]))throw new Error(n+"contains an invalid key ("+c[h]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(sT);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&i(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,c)},QM=function(n,e,t){if(!t||void 0!==e){if(P5(e))throw new Error((0,M.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pp(e))throw new Error((0,M.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Op=function(n,e,t,r){if(!(r&&void 0===t||Y_(t)))throw new Error((0,M.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vp=function(n,e,t,r){if(!(r&&void 0===t||WT(t)))throw new Error((0,M.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ta=function(n,e){if(".info"===Ot(e))throw new Error(n+" failed = Can't modify data under /.info/")},KT=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Y_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),WT(n)}(t))throw new Error((0,M.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class WL{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Q_(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],c=o.getPath();null!==t&&!x_(c,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:c}),t.events.push(o)}t&&n.eventLists_.push(t)}function JM(n,e,t){Q_(n,t),YT(n,r=>x_(r,e))}function na(n,e,t){Q_(n,t),YT(n,r=>i(r,e)||i(e,r))}function YT(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(ZL(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function ZL(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();j4&&ii("event: "+t.toString()),G4(r)}}}const QT="repo_interrupt";class YL{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=k_(),this.transactionQueueTree_=new WM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JT(n){const t=n.infoData_.getNode(new pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Fp(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:JT(n)})}function XT(n,e,t,r,o){n.dataUpdateCount++;const c=new pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let h=[];if(o)if(r){const y=(0,M.UI)(t,E=>pr(E));h=function(n,e,t,r){const o=HM(n,r);if(o){const c=UM(o),h=c.path,m=c.queryId,y=Ss(h,e),E=Bn.fromObject(t);return BM(n,h,new rd(TM(m),y,E))}return[]}(n.serverSyncTree_,c,y,o)}else{const y=pr(t);h=function(n,e,t,r){const o=HM(n,r);if(null!=o){const c=UM(o),h=c.path,m=c.queryId,y=Ss(h,e);return BM(n,h,new xu(TM(m),y,t))}return[]}(n.serverSyncTree_,c,y,o)}else if(r){const y=(0,M.UI)(t,E=>pr(E));h=function(n,e,t){const r=Bn.fromObject(t);return sd(n,new rd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,c,y)}else{const y=pr(t);h=Lp(n.serverSyncTree_,c,y)}let m=c;h.length>0&&(m=ad(n,c)),na(n.eventQueue_,m,h)}function eS(n,e){XM(n,"connected",e),!1===e&&function(n){od(n,"onDisconnectEvents");const e=Fp(n),t=k_();MM(n.onDisconnect_,sn(),(o,c)=>{const h=$T(o,c,n.serverSyncTree_,e);nd(t,o,h)});let r=[];MM(t,sn(),(o,c)=>{r=r.concat(Lp(n.serverSyncTree_,o,c));const h=rI(n,o);ad(n,h)}),n.onDisconnect_=k_(),na(n.eventQueue_,sn(),r)}(n)}function XM(n,e,t){const r=new pn("/.info/"+e),o=pr(t);n.infoData_.updateSnapshot(r,o);const c=Lp(n.infoSyncTree_,r,o);na(n.eventQueue_,r,c)}function J_(n){return n.nextWriteId_++}function eI(n,e,t,r,o){od(n,"set",{path:e.toString(),value:t,priority:r});const c=Fp(n),h=pr(t,r),m=G_(n.serverSyncTree_,e),y=GM(h,m,c),E=J_(n),T=VM(n.serverSyncTree_,e,y,E,!0);Q_(n.eventQueue_,T),n.server_.put(e.toString(),h.val(!0),(k,V)=>{const Y="ok"===k;Y||Xi("set at "+e+" failed: "+k);const Ee=l0(n.serverSyncTree_,E,!Y);na(n.eventQueue_,e,Ee),u0(0,o,k,V)});const x=rI(n,e);ad(n,x),na(n.eventQueue_,x,[])}function nR(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&EM(n.onDisconnect_,e),u0(0,t,r,o)})}function tS(n,e,t,r){const o=pr(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(c,h)=>{"ok"===c&&nd(n.onDisconnect_,e,o),u0(0,r,c,h)})}function tI(n,e,t){let r;r=".info"===Ot(e._path)?FM(n.infoSyncTree_,e,t):FM(n.serverSyncTree_,e,t),JM(n.eventQueue_,e._path,r)}function nS(n){n.persistentConnection_&&n.persistentConnection_.interrupt(QT)}function od(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ii(t,...e)}function u0(n,e,t,r){e&&G4(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let c=o;r&&(c+=": "+r);const h=new Error(c);h.code=o,e(h)}})}function nI(n,e,t){return G_(n.serverSyncTree_,e,t)||Dt.EMPTY_NODE}function X_(n,e=n.transactionQueueTree_){if(e||eC(n,e),Lu(e)){const t=iS(n,e);(0,M.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(E=>E.currentWriteId),o=nI(n,e,r);let c=o;const h=o.hash();for(let E=0;E<t.length;E++){const T=t[E];(0,M.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const x=Ss(e,T.path);c=c.updateChild(x,T.currentOutputSnapshotRaw)}const m=c.val(!0),y=e;n.server_.put(y.toString(),m,E=>{od(n,"transaction put response",{path:y.toString(),status:E});let T=[];if("ok"===E){const x=[];for(let k=0;k<t.length;k++)t[k].status=2,T=T.concat(l0(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&x.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();eC(n,Z_(n.transactionQueueTree_,e)),X_(n,n.transactionQueueTree_),na(n.eventQueue_,e,T);for(let k=0;k<x.length;k++)G4(x[k])}else{if("datastale"===E)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{Xi("transaction at "+y.toString()+" failed: "+E);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=E}ad(n,e)}},h)}(n,kp(e),t)}else GT(e)&&K_(e,t=>{X_(n,t)})}function ad(n,e){const t=rS(n,e),r=kp(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const h=e.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const y=e[m],E=Ss(t,y.path);let x,T=!1;if((0,M.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)T=!0,x=y.abortReason,o=o.concat(l0(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)T=!0,x="maxretry",o=o.concat(l0(n.serverSyncTree_,y.currentWriteId,!0));else{const k=nI(n,y.path,h);y.currentInputSnapshot=k;const V=e[m].update(k.val());if(void 0!==V){zp("transaction failed: Data returned ",V,y.path);let Y=pr(V);"object"==typeof V&&null!=V&&(0,M.r3)(V,".priority")||(Y=Y.updatePriority(k.getPriority()));const Re=y.currentWriteId,Ge=Fp(n),ot=GM(Y,k,Ge);y.currentOutputSnapshotRaw=Y,y.currentOutputSnapshotResolved=ot,y.currentWriteId=J_(n),h.splice(h.indexOf(Re),1),o=o.concat(VM(n.serverSyncTree_,y.path,ot,y.currentWriteId,y.applyLocally)),o=o.concat(l0(n.serverSyncTree_,Re,!0))}else T=!0,x="nodata",o=o.concat(l0(n.serverSyncTree_,y.currentWriteId,!0))}na(n.eventQueue_,t,o),o=[],T&&(e[m].status=2,setTimeout(e[m].unwatcher,Math.floor(0)),e[m].onComplete&&r.push("nodata"===x?()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot):()=>e[m].onComplete(new Error(x),!1,null)))}eC(n,n.transactionQueueTree_);for(let m=0;m<r.length;m++)G4(r[m]);X_(n,n.transactionQueueTree_)}(n,iS(n,t),r),r}function rS(n,e){let t,r=n.transactionQueueTree_;for(t=Ot(e);null!==t&&void 0===Lu(r);)r=Z_(r,t),t=Ot(e=bn(e));return r}function iS(n,e){const t=[];return sS(n,e,t),t.sort((r,o)=>r.order-o.order),t}function sS(n,e,t){const r=Lu(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);K_(e,o=>{sS(n,o,t)})}function eC(n,e){const t=Lu(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,ZM(e,t.length>0?t:void 0)}K_(e,r=>{eC(n,r)})}function rI(n,e){const t=kp(rS(n,e)),r=Z_(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{iI(n,o)}),iI(n,r),qT(r,o=>{iI(n,o)}),t}function iI(n,e){const t=Lu(e);if(t){const r=[];let o=[],c=-1;for(let h=0;h<t.length;h++)3===t[h].status||(1===t[h].status?((0,M.hu)(c===h-1,"All SENT items should be at beginning of queue."),c=h,t[h].status=3,t[h].abortReason="set"):((0,M.hu)(0===t[h].status,"Unexpected transaction status in abort"),t[h].unwatcher(),o=o.concat(l0(n.serverSyncTree_,t[h].currentWriteId,!0)),t[h].onComplete&&r.push(t[h].onComplete.bind(null,new Error("set"),!1,null))));-1===c?ZM(e,void 0):t.length=c+1,na(n.eventQueue_,kp(e),o);for(let h=0;h<r.length;h++)G4(r[h])}}const sI=function(n,e){const t=dR(n),r=t.namespace;return"firebase.com"===t.domain&&p2(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&p2("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Xi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new hp(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new pn(t.pathString)}},dR=function(n){let e="",t="",r="",o="",c="",h=!0,m="https",y=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(m=n.substring(0,E-1),n=n.substring(E+2));let T=n.indexOf("/");-1===T&&(T=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(T,x)),T<x&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(c){}e+="/"+o}return e}(n.substring(T,x)));const k=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));E=e.indexOf(":"),E>=0?(h="https"===m||"wss"===m,y=parseInt(e.substring(E+1),10)):E=e.length;const V=e.slice(0,E);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),c=r}"ns"in k&&(c=k.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:h,scheme:m,pathString:o,namespace:c}};class oS{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,M.Pz)(this.snapshot.exportVal())}}class aS{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class cS{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,M.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class lS{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new M.BH;return nR(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ta("OnDisconnect.remove",this._path);const e=new M.BH;return tS(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ta("OnDisconnect.set",this._path),wc("OnDisconnect.set",e,this._path,!1);const t=new M.BH;return tS(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ta("OnDisconnect.setWithPriority",this._path),wc("OnDisconnect.setWithPriority",e,this._path,!1),QM("OnDisconnect.setWithPriority",t,!1);const r=new M.BH;return function(n,e,t,r,o){const c=pr(t,r);n.server_.onDisconnectPut(e.toString(),c.val(!0),(h,m)=>{"ok"===h&&nd(n.onDisconnect_,e,c),u0(0,o,h,m)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ta("OnDisconnect.update",this._path),ZT("OnDisconnect.update",e,this._path,!1);const t=new M.BH;return function(n,e,t,r){if((0,M.xb)(t))return ii("onDisconnect().update() called with empty data.  Don't do anything."),void u0(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,c)=>{"ok"===o&&si(t,(h,m)=>{const y=pr(m);nd(n.onDisconnect_,Hn(e,h),y)}),u0(0,r,o,c)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class P1{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return Vt(this._path)?null:S_(this._path)}get ref(){return new ra(this._repo,this._path)}get _queryIdentifier(){const e=pT(this._queryParams),t=h_(e);return"{}"===t?"default":t}get _queryObject(){return pT(this._queryParams)}isEqual(e){if(!((e=(0,M.m9)(e))instanceof P1))return!1;const t=this._repo===e._repo,r=x_(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function tC(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function h0(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Xe){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Xo)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==m2)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===Un){if(null!=e&&!Pp(e)||null!=t&&!Pp(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,M.hu)(n.getIndex()instanceof vM||n.getIndex()===yM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nC(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ra extends P1{constructor(e,t){super(e,t,new N_,!1)}get parent(){const e=mM(this._path);return null===e?null:new ra(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ru{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new pn(e),r=ku(this.ref,e);return new Ru(this._node.getChild(t),r,Un)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new Ru(o,ku(this.ref,r),Un)))}hasChild(e){const t=new pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function uS(n,e){return(n=(0,M.m9)(n))._checkNotDeleted("ref"),void 0!==e?ku(n._root,e):n._root}function hS(n,e){(n=(0,M.m9)(n))._checkNotDeleted("refFromURL");const t=sI(e,n._repo.repoInfo_.nodeAdmin);KT("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&p2("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),uS(n,t.path.toString())}function ku(n,e){return null===Ot((n=(0,M.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Vp("child","path",t,!1)):Vp("child","path",e,!1),new ra(n._repo,Hn(n._path,e));var t}function oI(n,e){n=(0,M.m9)(n),ta("set",n._path),wc("set",e,n._path,!1);const t=new M.BH;return eI(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function vR(n,e){ZT("update",e,n._path,!1);const t=new M.BH;return function(n,e,t,r){od(n,"update",{path:e.toString(),value:t});let o=!0;const c=Fp(n),h={};if(si(t,(m,y)=>{o=!1,h[m]=$T(Hn(e,m),pr(y),n.serverSyncTree_,c)}),o)ii("update() called with empty data.  Don't do anything."),u0(0,r,"ok",void 0);else{const m=J_(n),y=function(n,e,t,r){!function(n,e,t,r){(0,M.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=xM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=Bn.fromObject(t);return sd(n,new rd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,h,m);Q_(n.eventQueue_,y),n.server_.merge(e.toString(),t,(E,T)=>{const x="ok"===E;x||Xi("update at "+e+" failed: "+E);const k=l0(n.serverSyncTree_,m,!x),V=k.length>0?ad(n,e):e;na(n.eventQueue_,V,k),u0(0,r,E,T)}),si(t,E=>{const T=rI(n,Hn(e,E));ad(n,T)}),na(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function yR(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,T)=>{const x=Ss(E,t);r=r||a0(T,x)});let o=n.syncPointTree_.get(t);o?r=r||a0(o,sn()):(o=new RT,n.syncPointTree_=n.syncPointTree_.set(t,o));const c=null!=r,h=c?new s0(r,!0,!1):null;return function(n){return O_(n.viewCache_)}(kT(o,e,V_(n.pendingWriteTree_,e._path),c?h.getNode():Dt.EMPTY_NODE,c))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=pr(r).withIndex(e._queryParams.getIndex()),c=Lp(n.serverSyncTree_,e._path,o);return JM(n.eventQueue_,e._path,c),Promise.resolve(o)},r=>(od(n,"get for query "+(0,M.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,M.m9)(n))._repo,n).then(e=>new Ru(e,new ra(n._repo,n._path),n._queryParams.getIndex()))}class rC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new oS("value",this,new Ru(e.snapshotNode,new ra(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new aS(this,e,t):null}matches(e){return e instanceof rC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class iC{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new aS(this,e,t):null}createEvent(e,t){(0,M.hu)(null!=e.childName,"Child events should have a childName.");const r=ku(new ra(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new oS(e.type,this,new Ru(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof iC&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Hp(n,e,t,r,o){let c;if("object"==typeof r&&(c=void 0,o=r),"function"==typeof r&&(c=r),o&&o.onlyOnce){const y=t,E=(T,x)=>{tI(n._repo,n,m),y(T,x)};E.userCallback=t.userCallback,E.context=t.context,t=E}const h=new cS(t,c||void 0),m="value"===e?new rC(h):new iC(e,h);return function(n,e,t){let r;r=".info"===Ot(e._path)?FT(n.infoSyncTree_,e,t):FT(n.serverSyncTree_,e,t),JM(n.eventQueue_,e._path,r)}(n._repo,n,m),()=>tI(n._repo,n,m)}function aI(n,e,t,r){return Hp(n,"value",e,t,r)}function dS(n,e,t,r){return Hp(n,"child_added",e,t,r)}function fS(n,e,t,r){return Hp(n,"child_changed",e,t,r)}function pS(n,e,t,r){return Hp(n,"child_moved",e,t,r)}function mS(n,e,t,r){return Hp(n,"child_removed",e,t,r)}function gS(n,e,t){let r=null;const o=t?new cS(t):null;"value"===e?r=new rC(o):e&&(r=new iC(e,o)),tI(n._repo,n,r)}class v2{}class vS extends v2{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("endAt",this._value,e._path,!0);const t=wM(e._queryParams,this._value,this._key);if(nC(t),h0(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new P1(e._repo,e._path,t,e._orderByCalled)}}class CR extends v2{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===Xe?("string"==typeof e&&(e=hT(e)),o=wM(n,e,t)):(r=null==t?Xo:hT(t),o=wM(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(nC(t),h0(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new P1(e._repo,e._path,t,e._orderByCalled)}}class yS extends v2{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("startAt",this._value,e._path,!0);const t=bM(e._queryParams,this._value,this._key);if(nC(t),h0(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new P1(e._repo,e._path,t,e._orderByCalled)}}class ER extends v2{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wc("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===Xe)"string"==typeof e&&(e=uT(e)),r=bM(n,e,t);else{let o;o=null==t?m2:uT(t),r=bM(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(nC(t),h0(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new P1(e._repo,e._path,t,e._orderByCalled)}}class IR extends v2{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new P1(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class TR extends v2{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new P1(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class xR extends v2{constructor(e){super(),this._path=e}_apply(e){tC(e,"orderByChild");const t=new pn(this._path);if(Vt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new vM(t),o=L_(e._queryParams,r);return h0(o),new P1(e._repo,e._path,o,!0)}}class NR extends v2{_apply(e){tC(e,"orderByKey");const t=L_(e._queryParams,Xe);return h0(t),new P1(e._repo,e._path,t,!0)}}class RR extends v2{_apply(e){tC(e,"orderByPriority");const t=L_(e._queryParams,Un);return h0(t),new P1(e._repo,e._path,t,!0)}}class PR extends v2{_apply(e){tC(e,"orderByValue");const t=L_(e._queryParams,yM);return h0(t),new P1(e._repo,e._path,t,!0)}}class OR extends v2{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(wc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new vS(this._value,this._key)._apply(new yS(this._value,this._key)._apply(e))}}function y2(n,...e){let t=(0,M.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,M.hu)(!B_,"__referenceConstructor has already been defined"),B_=n})(ra),function(n){(0,M.hu)(!$_,"__referenceConstructor has already been defined"),$_=n}(ra);const cI={};function CS(n,e,t,r,o){let c=r||n.options.databaseURL;void 0===c&&(n.options.projectId||p2("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ii("Using default host for project ",n.options.projectId),c=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,E,h=sI(c,o),m=h.repoInfo;"undefined"!=typeof process&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(y=!0,c=`http://${E}?ns=${m.namespace}`,h=sI(c,o),m=h.repoInfo):y=!h.repoInfo.secure;const T=o&&y?new q4(q4.OWNER):new m_(n.name,n.options,e);KT("Invalid Firebase Database URL",h),Vt(h.path)||p2("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function(n,e,t,r){let o=cI[e.name];o||(o={},cI[e.name]=o);let c=o[n.toURLString()];return c&&p2("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new YL(n,false,t,r),o[n.toURLString()]=c,c}(m,n,T,new p_(n.name,t));return new $R(x,n)}class $R{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=H5(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new R_(n.repoInfo_,(r,o,c,h)=>{XT(n,r,o,c,h)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>eS(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,M.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ue(n.repoInfo_,e,(r,o,c,h)=>{XT(n,r,o,c,h)},r=>{eS(n,r)},r=>{!function(n,e){si(e,(t,r)=>{XM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return X6[t]||(X6[t]=e()),X6[t]}(n.repoInfo_,()=>new PN(n.stats_,n.server_)),n.infoData_=new DN,n.infoSyncTree_=new VT({startListening:(r,o,c,h)=>{let m=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(m=Lp(n.infoSyncTree_,r._path,y),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),XM(n,"connected",!1),n.serverSyncTree_=new VT({startListening:(r,o,c,h)=>(n.server_.listen(r,c,o,(m,y)=>{const E=h(m,y);na(n.eventQueue_,r._path,E)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ra(this._repo,sn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=cI[e];(!t||t[n.key]!==n)&&p2(`Database ${e}(${n.repoInfo_}) has already been deleted.`),nS(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&p2("Cannot call "+e+" on a deleted database.")}}function ZR(n,e){u_(n,e)}class XR{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ue.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ue.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},KE(g.SDK_VERSION),(0,g._registerComponent)(new b.wA("database",(e,{instanceIdentifier:t})=>CS(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,g.registerVersion)(i_,"0.12.2",void 0),(0,g.registerVersion)(i_,"0.12.2","esm2017");const rk=new N.Yd("@firebase/database-compat"),bS=function(n){rk.warn("FIREBASE WARNING: "+n)};class ok{constructor(e){this._delegate=e}cancel(e){(0,M.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,M.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,M.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,M.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,M.Dv)("OnDisconnect.set",1,2,arguments.length),(0,M.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,M.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,M.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),c=>r(c)),o}update(e,t){if((0,M.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let c=0;c<e.length;++c)o[""+c]=e[c];e=o,bS("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,M.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class ak{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,M.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class d0{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,M.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,M.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,M.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,M.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,M.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vp("DataSnapshot.child","path",e,!1),new d0(this._database,this._delegate.child(e))}hasChild(e){return(0,M.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Vp("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,M.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,M.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,M.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new d0(this._database,t)))}hasChildren(){return(0,M.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,M.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,M.Dv)("DataSnapshot.ref",0,0,arguments.length),new go(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ts{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var c;(0,M.Dv)("Query.on",2,4,arguments.length),(0,M.Wj)("Query.on","callback",t,!1);const h=ts.getCancelAndContextArgs_("Query.on",r,o),m=(E,T)=>{t.call(h.context,new d0(this.database,E),T)};m.userCallback=t,m.context=h.context;const y=null===(c=h.cancel)||void 0===c?void 0:c.bind(h.context);switch(e){case"value":return aI(this._delegate,m,y),t;case"child_added":return dS(this._delegate,m,y),t;case"child_removed":return mS(this._delegate,m,y),t;case"child_changed":return fS(this._delegate,m,y),t;case"child_moved":return pS(this._delegate,m,y),t;default:throw new Error((0,M.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,M.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,M.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,M.Wj)("Query.off","callback",t,!0),(0,M.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,gS(this._delegate,e,o)}else gS(this._delegate,e)}get(){return yR(this._delegate).then(e=>new d0(this.database,e))}once(e,t,r,o){(0,M.Dv)("Query.once",1,4,arguments.length),(0,M.Wj)("Query.once","callback",t,!0);const c=ts.getCancelAndContextArgs_("Query.once",r,o),h=new M.BH,m=(E,T)=>{const x=new d0(this.database,E);t&&t.call(c.context,x,T),h.resolve(x)};m.userCallback=t,m.context=c.context;const y=E=>{c.cancel&&c.cancel.call(c.context,E),h.reject(E)};switch(e){case"value":aI(this._delegate,m,y,{onlyOnce:!0});break;case"child_added":dS(this._delegate,m,y,{onlyOnce:!0});break;case"child_removed":mS(this._delegate,m,y,{onlyOnce:!0});break;case"child_changed":fS(this._delegate,m,y,{onlyOnce:!0});break;case"child_moved":pS(this._delegate,m,y,{onlyOnce:!0});break;default:throw new Error((0,M.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return h.promise}limitToFirst(e){return(0,M.Dv)("Query.limitToFirst",1,1,arguments.length),new ts(this.database,y2(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new IR(n)}(e)))}limitToLast(e){return(0,M.Dv)("Query.limitToLast",1,1,arguments.length),new ts(this.database,y2(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new TR(n)}(e)))}orderByChild(e){return(0,M.Dv)("Query.orderByChild",1,1,arguments.length),new ts(this.database,y2(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vp("orderByChild","path",n,!1),new xR(n)}(e)))}orderByKey(){return(0,M.Dv)("Query.orderByKey",0,0,arguments.length),new ts(this.database,y2(this._delegate,new NR))}orderByPriority(){return(0,M.Dv)("Query.orderByPriority",0,0,arguments.length),new ts(this.database,y2(this._delegate,new RR))}orderByValue(){return(0,M.Dv)("Query.orderByValue",0,0,arguments.length),new ts(this.database,y2(this._delegate,new PR))}startAt(e=null,t){return(0,M.Dv)("Query.startAt",0,2,arguments.length),new ts(this.database,y2(this._delegate,function(n=null,e){return Op("startAt","key",e,!0),new yS(n,e)}(e,t)))}startAfter(e=null,t){return(0,M.Dv)("Query.startAfter",0,2,arguments.length),new ts(this.database,y2(this._delegate,function(n,e){return Op("startAfter","key",e,!0),new ER(n,e)}(e,t)))}endAt(e=null,t){return(0,M.Dv)("Query.endAt",0,2,arguments.length),new ts(this.database,y2(this._delegate,function(n,e){return Op("endAt","key",e,!0),new vS(n,e)}(e,t)))}endBefore(e=null,t){return(0,M.Dv)("Query.endBefore",0,2,arguments.length),new ts(this.database,y2(this._delegate,function(n,e){return Op("endBefore","key",e,!0),new CR(n,e)}(e,t)))}equalTo(e,t){return(0,M.Dv)("Query.equalTo",1,2,arguments.length),new ts(this.database,y2(this._delegate,function(n,e){return Op("equalTo","key",e,!0),new OR(n,e)}(e,t)))}toString(){return(0,M.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,M.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,M.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ts))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,M.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,M.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,M.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new go(this.database,new ra(this._delegate._repo,this._delegate._path))}}class go extends ts{constructor(e,t){super(e,new P1(t._repo,t._path,new N_,!1)),this.database=e,this._delegate=t}getKey(){return(0,M.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,M.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new go(this.database,ku(this._delegate,e))}getParent(){(0,M.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new go(this.database,e):null}getRoot(){return(0,M.Dv)("Reference.root",0,0,arguments.length),new go(this.database,this._delegate.root)}set(e,t){(0,M.Dv)("Reference.set",1,2,arguments.length),(0,M.Wj)("Reference.set","onComplete",t,!0);const r=oI(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,M.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let c=0;c<e.length;++c)o[""+c]=e[c];e=o,bS("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ta("Reference.update",this._delegate._path),(0,M.Wj)("Reference.update","onComplete",t,!0);const r=vR(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,M.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,M.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(ta("setWithPriority",n._path),wc("setWithPriority",e,n._path,!1),QM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new M.BH;return eI(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),c=>r(c)),o}remove(e){(0,M.Dv)("Reference.remove",0,1,arguments.length),(0,M.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return ta("remove",n._path),oI(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,M.Dv)("Reference.transaction",1,3,arguments.length),(0,M.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,M.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,M.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,M.m9)(n),ta("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,c=new M.BH,m=aI(n,()=>{});return function(n,e,t,r,o,c){od(n,"transaction on "+e);const h={path:e,update:t,onComplete:r,status:null,order:c_(),applyLocally:c,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=nI(n,e,void 0);h.currentInputSnapshot=m;const y=h.update(m.val());if(void 0===y)h.unwatcher(),h.currentOutputSnapshotRaw=null,h.currentOutputSnapshotResolved=null,h.onComplete&&h.onComplete(null,!1,h.currentInputSnapshot);else{zp("transaction failed: Data returned ",y,h.path),h.status=0;const E=Z_(n.transactionQueueTree_,e),T=Lu(E)||[];let x;T.push(h),ZM(E,T),"object"==typeof y&&null!==y&&(0,M.r3)(y,".priority")?(x=(0,M.DV)(y,".priority"),(0,M.hu)(Pp(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(G_(n.serverSyncTree_,e)||Dt.EMPTY_NODE).getPriority().val();const k=Fp(n),V=pr(y,x),Y=GM(V,m,k);h.currentOutputSnapshotRaw=V,h.currentOutputSnapshotResolved=Y,h.currentWriteId=J_(n);const Ee=VM(n.serverSyncTree_,e,Y,h.currentWriteId,h.applyLocally);na(n.eventQueue_,e,Ee),X_(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,E,T)=>{let x=null;y?c.reject(y):(x=new Ru(T,new ra(n._repo,n._path),Un),c.resolve(new XR(E,x)))},m,o),c.promise}(this._delegate,e,{applyLocally:r}).then(c=>new ak(c.committed,new d0(this.database,c.snapshot)));return t&&o.then(c=>t(null,c.committed,c.snapshot),c=>t(c,!1,null)),o}setPriority(e,t){(0,M.Dv)("Reference.setPriority",1,2,arguments.length),(0,M.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,M.m9)(n),ta("setPriority",n._path),QM("setPriority",e,!1);const t=new M.BH;return eI(n._repo,Hn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,M.Dv)("Reference.push",0,2,arguments.length),(0,M.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,M.m9)(n),ta("push",n._path),wc("push",e,n._path,!0);const t=JT(n._repo),r=wN(t),o=ku(n,r),c=ku(n,r);let h;return h=null!=e?oI(c,e).then(()=>c):Promise.resolve(c),o.then=h.then.bind(h),o.catch=h.then.bind(h,void 0),o}(this._delegate,e),o=r.then(h=>new go(this.database,h));t&&o.then(()=>t(null),h=>t(h));const c=new go(this.database,r);return c.then=o.then.bind(o),c.catch=o.catch.bind(o,void 0),c}onDisconnect(){return ta("Reference.onDisconnect",this._delegate._path),new ok(new lS(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Up{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,M.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&p2("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let c;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&p2('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new q4(q4.OWNER);else if(r.mockUserToken){const h="string"==typeof r.mockUserToken?r.mockUserToken:(0,M.Sg)(r.mockUserToken,n.app.options.projectId);c=new q4(h)}!function(n,e,t,r){n.repoInfo_=new hp(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,c)}(this._delegate,e,t,r)}ref(e){if((0,M.Dv)("database.ref",0,1,arguments.length),e instanceof go){const t=hS(this._delegate,e.toString());return new go(this,t)}{const t=uS(this._delegate,e);return new go(this,t)}}refFromURL(e){(0,M.Dv)("database.refFromURL",1,1,arguments.length);const r=hS(this._delegate,e);return new go(this,r)}goOffline(){return(0,M.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,M.m9)(n))._checkNotDeleted("goOffline"),nS(n._repo)}(this._delegate)}goOnline(){return(0,M.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,M.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(QT)}(n._repo)}(this._delegate)}}Up.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var lk=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:c=!1}){KE(t);const h=new b.zt("auth-internal",new b.H0("database-standalone"));return h.setComponent(new b.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Up(CS(n,h,void 0,e,c),n),namespace:o}}});const uk=Up.ServerValue;function wS(n){return null==n}function ES(n){return"function"==typeof n.set}function MS(n,e){return ES(e)?e:n.ref(e)}function IS(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(ES(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Bp(n,e,t="on",r=J0.z){return new cn.y(o=>{let c=null;return c=n[t](e,(h,m)=>{r.schedule(()=>{o.next({snapshot:h,prevKey:m})}),"once"===t&&r.schedule(()=>o.complete())},h=>{r.schedule(()=>o.error(h))}),"on"===t?{unsubscribe(){null!=c&&n.off(e,c)}}:{unsubscribe(){}}}).pipe((0,Je.U)(o=>{const{snapshot:c,prevKey:h}=o;let m=null;return c.exists()&&(m=c.key),{type:e,payload:c,prevKey:h,key:m}}),(0,QA.B)())}function AS(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function gk(n,e){const{payload:t,prevKey:r,key:o}=e,c=AS(n,o),h=function(n,e){if(wS(e))return 0;{const t=AS(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let m=null;e.payload.forEach(y=>{const E={payload:y,type:"value",prevKey:m,key:y.key};return m=y.key,n=[...n,E],!1})}return n;case"child_added":if(c>-1){const m=n[c-1];(m&&m.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(h,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(h,0,e)}return n;case"child_removed":return n.filter(m=>m.payload.key!==t.key);case"child_changed":return n.map(m=>m.payload.key===o?e:m);case"child_moved":if(c>-1){const m=n.splice(c,1)[0];return(n=n.slice()).splice(h,0,m),n}return n;default:return n}}function TS(n){return(wS(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function SS(n,e,t){return function(n,e,t){return Bp(n,"value","once",t).pipe(ni(r=>{const o=[(0,st.of)(r)];return e.forEach(c=>o.push(Bp(n,c,"on",t))),(0,Ay.T)(...o).pipe($a(gk,[]))}),Dl())}(n,e=TS(e),t)}function xS(n,e,t){const r=(e=TS(e)).map(o=>Bp(n,o,"on",t));return(0,Ay.T)(...r)}function DS(n,e){return function(r,o){return IS(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function Ck(n){return function(t){return t?IS(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function NS(n,e){return function(){return Bp(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new b.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new Up(o,r)},"PUBLIC").setServiceProps({Reference:go,Query:ts,Database:Up,DataSnapshot:d0,enableLogging:ZR,INTERNAL:lk,ServerValue:uk}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.2")}(C.Z);const Ek=new d.OlP("angularfire2.realtimeDatabaseURL"),Mk=new d.OlP("angularfire2.database.use-emulator");let Ik=(()=>{class n{constructor(t,r,o,c,h,m,y,E,T,x,k,V,Y,Ee,Re){this.schedulers=m;const Ge=y,ot=(0,ur.on)(t,h,r);E&&e_(ot,h,T,k,V,Y,x,Ee),this.database=(0,ur.cc)(`${ot.name}.database.${o}`,"AngularFireDatabase",ot.name,()=>{const Lt=h.runOutsideAngular(()=>ot.database(o||void 0));return Ge&&Lt.useEmulator(...Ge),Lt},[Ge])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>MS(this.database,t));let c=o;return r&&(c=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:DS(r,"update"),set:DS(r,"set"),push:o=>r.push(o),remove:Ck(r),snapshotChanges:o=>SS(n,o,t).pipe(Tt.iC),stateChanges:o=>xS(n,o,t).pipe(Tt.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return Bp(n,"value","on",e).pipe((0,Je.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new XA(n,t))}}(e),(0,Je.U)(([o,c])=>{const h=o.lastKeyToLoad,m=c.map(y=>y.key);return{actions:c,lastKeyToLoad:h,loadedKeys:m}}),function(n){return e=>e.lift(new WE(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,Je.U)(o=>o.actions))}(n,xS(n,e).pipe($a((o,c)=>[...o,c],[])),t)}(n,o,t).pipe(Tt.iC),valueChanges:(o,c)=>SS(n,o,t).pipe((0,Je.U)(m=>m.map(y=>c&&c.idField?Object.assign(Object.assign({},y.payload.val()),{[c.idField]:y.key}):y.payload.val())),Tt.iC)}}(c,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>NS(n,e.schedulers.outsideAngular)().pipe(Tt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>NS(n,e.schedulers.outsideAngular)().pipe(Tt.iC,(0,Je.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>MS(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ur.Dh),d.LFG(ur.xv,8),d.LFG(Ek,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Tt.HU),d.LFG(Mk,8),d.LFG(Z6,8),d.LFG(T5,8),d.LFG(Q9,8),d.LFG(J9,8),d.LFG(X9,8),d.LFG(ep,8),d.LFG(S5,8),d.LFG(I5,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ak=(()=>{class n{constructor(){BE.Z.registerVersion("angularfire",Tt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Ik]}),n})();var Qs=F(9773);function cd(n,e){return(0,Qs.zg)(n,e,1)}class LS{}class RS{}class K4{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),c=o.toLowerCase(),h=t.slice(r+1).trim();this.maybeSetNormalizedName(o,c),this.headers.has(c)?this.headers.get(c).push(h):this.headers.set(c,[h])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof K4?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new K4;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof K4?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const c=e.value;if(c){let h=this.headers.get(t);if(!h)return;h=h.filter(m=>-1===c.indexOf(m)),0===h.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,h)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Tk{encodeKey(e){return kS(e)}encodeValue(e){return kS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const xk=/%(\d[a-f0-9])/gi,Dk={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function kS(n){return encodeURIComponent(n).replace(xk,(e,t)=>{var r;return null!==(r=Dk[t])&&void 0!==r?r:e})}function PS(n){return`${n}`}class f0{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Tk,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const c=o.indexOf("="),[h,m]=-1==c?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,c)),e.decodeValue(o.slice(c+1))],y=t.get(h)||[];y.push(m),t.set(h,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(c=>{t.push({param:r,value:c,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new f0({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(PS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(PS(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Nk{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function zS(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function OS(n){return"undefined"!=typeof Blob&&n instanceof Blob}function VS(n){return"undefined"!=typeof FormData&&n instanceof FormData}class jp{constructor(e,t,r,o){let c;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,c=o):c=r,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new K4),this.context||(this.context=new Nk),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+h}}else this.params=new f0,this.urlWithParams=t}serializeBody(){return null===this.body?null:zS(this.body)||OS(this.body)||VS(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof f0?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||VS(this.body)?null:OS(this.body)?this.body.type||null:zS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof f0?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,o=e.url||this.url,c=e.responseType||this.responseType,h=void 0!==e.body?e.body:this.body,m=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,y=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,T=e.params||this.params;const x=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((k,V)=>k.set(V,e.setHeaders[V]),E)),e.setParams&&(T=Object.keys(e.setParams).reduce((k,V)=>k.set(V,e.setParams[V]),T)),new jp(r,o,h,{params:T,headers:E,context:x,reportProgress:y,responseType:c,withCredentials:m})}}var ai=(()=>((ai=ai||{})[ai.Sent=0]="Sent",ai[ai.UploadProgress=1]="UploadProgress",ai[ai.ResponseHeader=2]="ResponseHeader",ai[ai.DownloadProgress=3]="DownloadProgress",ai[ai.Response=4]="Response",ai[ai.User=5]="User",ai))();class lI{constructor(e,t=200,r="OK"){this.headers=e.headers||new K4,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class uI extends lI{constructor(e={}){super(e),this.type=ai.ResponseHeader}clone(e={}){return new uI({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sC extends lI{constructor(e={}){super(e),this.type=ai.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new sC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class FS extends lI{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function hI(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let kk=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let c;if(t instanceof jp)c=t;else{let y,E;y=o.headers instanceof K4?o.headers:new K4(o.headers),o.params&&(E=o.params instanceof f0?o.params:new f0({fromObject:o.params})),c=new jp(t,r,void 0!==o.body?o.body:null,{headers:y,context:o.context,params:E,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const h=(0,st.of)(c).pipe(cd(y=>this.handler.handle(y)));if(t instanceof jp||"events"===o.observe)return h;const m=h.pipe(M1(y=>y instanceof sC));switch(o.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return m.pipe((0,Je.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return m.pipe((0,Je.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return m.pipe((0,Je.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));case"json":default:return m.pipe((0,Je.U)(y=>y.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new f0).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,hI(o,r))}post(t,r,o={}){return this.request("POST",t,hI(o,r))}put(t,r,o={}){return this.request("PUT",t,hI(o,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(LS))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class HS{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const US=new d.OlP("HTTP_INTERCEPTORS");let Pk=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const zk=/^\)\]\}',?\n/;let BS=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new cn.y(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((V,Y)=>o.setRequestHeader(V,Y.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&o.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();o.responseType="json"!==V?V:"text"}const c=t.serializeBody();let h=null;const m=()=>{if(null!==h)return h;const V=1223===o.status?204:o.status,Y=o.statusText||"OK",Ee=new K4(o.getAllResponseHeaders()),Re=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return h=new uI({headers:Ee,status:V,statusText:Y,url:Re}),h},y=()=>{let{headers:V,status:Y,statusText:Ee,url:Re}=m(),Ge=null;204!==Y&&(Ge=void 0===o.response?o.responseText:o.response),0===Y&&(Y=Ge?200:0);let ot=Y>=200&&Y<300;if("json"===t.responseType&&"string"==typeof Ge){const Lt=Ge;Ge=Ge.replace(zk,"");try{Ge=""!==Ge?JSON.parse(Ge):null}catch(ht){Ge=Lt,ot&&(ot=!1,Ge={error:ht,text:Ge})}}ot?(r.next(new sC({body:Ge,headers:V,status:Y,statusText:Ee,url:Re||void 0})),r.complete()):r.error(new FS({error:Ge,headers:V,status:Y,statusText:Ee,url:Re||void 0}))},E=V=>{const{url:Y}=m(),Ee=new FS({error:V,status:o.status||0,statusText:o.statusText||"Unknown Error",url:Y||void 0});r.error(Ee)};let T=!1;const x=V=>{T||(r.next(m()),T=!0);let Y={type:ai.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(Y.total=V.total),"text"===t.responseType&&!!o.responseText&&(Y.partialText=o.responseText),r.next(Y)},k=V=>{let Y={type:ai.UploadProgress,loaded:V.loaded};V.lengthComputable&&(Y.total=V.total),r.next(Y)};return o.addEventListener("load",y),o.addEventListener("error",E),o.addEventListener("timeout",E),o.addEventListener("abort",E),t.reportProgress&&(o.addEventListener("progress",x),null!==c&&o.upload&&o.upload.addEventListener("progress",k)),o.send(c),r.next({type:ai.Sent}),()=>{o.removeEventListener("error",E),o.removeEventListener("abort",E),o.removeEventListener("load",y),o.removeEventListener("timeout",E),t.reportProgress&&(o.removeEventListener("progress",x),null!==c&&o.upload&&o.upload.removeEventListener("progress",k)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fa))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const dI=new d.OlP("XSRF_COOKIE_NAME"),fI=new d.OlP("XSRF_HEADER_NAME");class jS{}let Vk=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=or(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(be),d.LFG(d.Lbi),d.LFG(dI))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),pI=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const o=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||o.startsWith("http://")||o.startsWith("https://"))return r.handle(t);const c=this.tokenService.getToken();return null!==c&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,c)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(jS),d.LFG(fI))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Fk=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(US,[]);this.chain=r.reduceRight((o,c)=>new HS(o,c),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(RS),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Hk=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:pI,useClass:Pk}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:dI,useValue:t.cookieName}:[],t.headerName?{provide:fI,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[pI,{provide:US,useExisting:pI,multi:!0},{provide:jS,useClass:Vk},{provide:dI,useValue:"XSRF-TOKEN"},{provide:fI,useValue:"X-XSRF-TOKEN"}]}),n})(),Uk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[kk,{provide:LS,useClass:Fk},BS,{provide:RS,useExisting:BS}],imports:[[Hk.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),$p=(()=>{class n{constructor(t){this.afs=t,this.trails=this.afs.collection("trails").snapshotChanges().pipe((0,Je.U)(r=>r.map(o=>{const c=o.payload.doc.data();return c.id=o.payload.doc.id,console.log(c),c}))),this.trailsCollection=this.afs.collection("trails"),this.profiles=this.afs.collection("profiles").snapshotChanges().pipe((0,Je.U)(r=>r.map(o=>{const c=o.payload.doc.data();return c.id=o.payload.doc.id,console.log(c),c}))),this.profilesCollection=this.afs.collection("profiles")}getTrails(){return this.trails}addTrail(t){this.trailsCollection.add(t)}deleteTrail(t){this.trailDoc=this.afs.doc(`trails/${t.id}`),this.trailDoc.delete()}updateTrail(t){this.trailDoc=this.afs.doc(`trails/${t.id}`),this.trailDoc.update(t)}addProfile(t,r){this.profilesCollection.doc(t).set(r)}getProfile(){return console.log(this.profiles),this.profiles}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(k5))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _2 extends Jo.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new y5.N;return this._value}next(e){super.next(this._value=e)}}var Bk=F(6693);const $S={};class $k{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Gk(e,this.resultSelector))}}class Gk extends r_{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push($S),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(_u(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,h=this.toRespond?o[r]===$S?--this.toRespond:this.toRespond:0;o[r]=t,0===h&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function GS(n){return new cn.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,yn.D)(t):(0,pc.c)()).subscribe(e)})}var qk=F(2441);function Pu(n){return function(t){const r=new Wk(n),o=t.lift(r);return r.caught=o}}class Wk{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Zk(e,this.selector,this.caught))}}class Zk extends j6.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const r=new j6.IY(this);this.add(r);const o=(0,j6.ft)(t,r);o!==r&&this.add(o)}}}function mI(n){return function(t){return 0===n?(0,pc.c)():t.lift(new Kk(n))}}class Kk{constructor(e){if(this.total=e,this.total<0)throw new Dy}call(e,t){return t.subscribe(new Yk(e,this.total))}}class Yk extends Gi.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let c=0;c<r;c++){const h=t++%r;e.next(o[h])}}e.complete()}}var vo=F(3342),Jk=F(1307);class eP{constructor(e){this.callback=e}call(e,t){return t.subscribe(new tP(e,this.callback))}}class tP extends Gi.L{constructor(e,t){super(e),this.add(new v5.w(t))}}class Y4{constructor(e,t){this.id=e,this.url=t}}class gI extends Y4{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Gp extends Y4{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qS extends Y4{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nP extends Y4{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class rP extends Y4{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iP extends Y4{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sP extends Y4{constructor(e,t,r,o,c){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oP extends Y4{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aP extends Y4{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WS{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ZS{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cP{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lP{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uP{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hP{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Bt="primary";class dP{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ld(n){return new dP(n)}const YS="ngNavigationCancelingError";function vI(n){const e=Error("NavigationCancelingError: "+n);return e[YS]=!0,e}function pP(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let c=0;c<r.length;c++){const h=r[c],m=n[c];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Ec(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let c=0;c<t.length;c++)if(o=t[c],!QS(n[o],e[o]))return!1;return!0}function QS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,c)=>r[c]===o)}return n===e}function JS(n){return Array.prototype.concat.apply([],n)}function XS(n){return n.length>0?n[n.length-1]:null}function ns(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Mc(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,yn.D)(Promise.resolve(n)):(0,st.of)(n)}const vP={exact:function nx(n,e,t){if(!Ou(n.segments,e.segments)||!oC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!nx(n.children[r],e.children[r],t))return!1;return!0},subset:rx},ex={exact:function(n,e){return Ec(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>QS(n[t],e[t]))},ignored:()=>!0};function tx(n,e,t){return vP[t.paths](n.root,e.root,t.matrixParams)&&ex[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function rx(n,e,t){return ix(n,e,e.segments,t)}function ix(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Ou(o,t)||e.hasChildren()||!oC(o,t,r))}if(n.segments.length===t.length){if(!Ou(n.segments,t)||!oC(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!rx(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Ou(n.segments,o)&&oC(n.segments,o,r)&&n.children[Bt])&&ix(n.children[Bt],e,c,r)}}function oC(n,e,t){return e.every((r,o)=>ex[t](n[o].parameters,r.parameters))}class zu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ld(this.queryParams)),this._queryParamMap}toString(){return wP.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ns(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return aC(this)}}class qp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ld(this.parameters)),this._parameterMap}toString(){return cx(this)}}function Ou(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class yI{}class sx{parse(e){const t=new NP(e);return new zu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${`/${Wp(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${cC(t)}=${cC(o)}`).join("&"):`${cC(t)}=${cC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:""}`}}const wP=new sx;function aC(n){return n.segments.map(e=>cx(e)).join("/")}function Wp(n,e){if(!n.hasChildren())return aC(n);if(e){const t=n.children[Bt]?Wp(n.children[Bt],!1):"",r=[];return ns(n.children,(o,c)=>{c!==Bt&&r.push(`${c}:${Wp(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return ns(n.children,(r,o)=>{o===Bt&&(t=t.concat(e(r,o)))}),ns(n.children,(r,o)=>{o!==Bt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Bt?[Wp(n.children[Bt],!1)]:[`${o}:${Wp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Bt]?`${aC(n)}/${t[0]}`:`${aC(n)}/(${t.join("//")})`}}function ox(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cC(n){return ox(n).replace(/%3B/gi,";")}function _I(n){return ox(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lC(n){return decodeURIComponent(n)}function ax(n){return lC(n.replace(/\+/g,"%20"))}function cx(n){return`${_I(n.path)}${function(n){return Object.keys(n).map(e=>`;${_I(e)}=${_I(n[e])}`).join("")}(n.parameters)}`}const AP=/^[^\/()?;=#]+/;function uC(n){const e=n.match(AP);return e?e[0]:""}const TP=/^[^=?&#]+/,xP=/^[^?&#]+/;class NP{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Bt]=new $t(e,t)),r}parseSegment(){const e=uC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new qp(lC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=uC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=uC(this.remaining);o&&(r=o,this.capture(r))}e[lC(t)]=lC(r)}parseQueryParam(e){const t=function(n){const e=n.match(TP);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function(n){const e=n.match(xP);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=ax(t),c=ax(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(c)}else e[o]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=uC(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Bt);const h=this.parseChildren();t[c]=1===Object.keys(h).length?h[Bt]:new $t([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class lx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=CI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=CI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=bI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return bI(e,this._root).map(t=>t.value)}}function CI(n,e){if(n===e.value)return e;for(const t of e.children){const r=CI(n,t);if(r)return r}return null}function bI(n,e){if(n===e.value)return[e];for(const t of e.children){const r=bI(n,t);if(r.length)return r.unshift(e),r}return[]}class Q4{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Zp(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ux extends lx{constructor(e,t){super(e),this.snapshot=t,wI(this,e)}toString(){return this.snapshot.toString()}}function hx(n,e){const t=function(n,e){const h=new hC([],{},{},"",{},Bt,e,null,n.root,-1,{});return new fx("",new Q4(h,[]))}(n,e),r=new _2([new qp("",{})]),o=new _2({}),c=new _2({}),h=new _2({}),m=new _2(""),y=new ud(r,o,h,m,c,Bt,e,t.root);return y.snapshot=t.root,new ux(new Q4(y,[]),t)}class ud{constructor(e,t,r,o,c,h,m,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=h,this.component=m,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Je.U)(e=>ld(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Je.U)(e=>ld(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function dx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],c=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(c.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class hC{constructor(e,t,r,o,c,h,m,y,E,T,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=h,this.component=m,this.routeConfig=y,this._urlSegment=E,this._lastPathIndex=T,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ld(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ld(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fx extends lx{constructor(e,t){super(t),this.url=e,wI(this,t)}toString(){return px(this._root)}}function wI(n,e){e.value._routerState=n,e.children.forEach(t=>wI(n,t))}function px(n){const e=n.children.length>0?` { ${n.children.map(px).join(", ")} } `:"";return`${n.value}${e}`}function EI(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ec(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ec(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ec(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ec(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function MI(n,e){return Ec(n.params,e.params)&&function(n,e){return Ou(n,e)&&n.every((t,r)=>Ec(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||MI(n.parent,e.parent))}function dC(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return dC(n,r,o);return dC(n,r)})}(n,e,t);return new Q4(r,o)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const h=c.route;return mx(e,h),h}}const r=function(n){return new ud(new _2(n.url),new _2(n.params),new _2(n.queryParams),new _2(n.fragment),new _2(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(c=>dC(n,c));return new Q4(r,o)}}function mx(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)mx(n.children[t],e.children[t])}function fC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Kp(n){return"object"==typeof n&&null!=n&&n.outlets}function II(n,e,t,r,o){let c={};return r&&ns(r,(h,m)=>{c[m]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),new zu(t.root===n?e:gx(t.root,n,e),c,o)}function gx(n,e,t){const r={};return ns(n.children,(o,c)=>{r[c]=o===e?t:gx(o,e,t)}),new $t(n.segments,r)}class vx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fC(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Kp);if(o&&o!==XS(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class AI{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yx(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return pC(n,e,t);const r=function(n,e,t){let r=0,o=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return c;const h=n.segments[o],m=t[r];if(Kp(m))break;const y=`${m}`,E=r<t.length-1?t[r+1]:null;if(o>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!Cx(y,E,h))return c;r+=2}else{if(!Cx(y,{},h))return c;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new $t(n.segments.slice(0,r.pathIndex),{});return c.children[Bt]=new $t(n.segments.slice(r.pathIndex),n.children),pC(c,0,o)}return r.match&&0===o.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?TI(n,e,t):r.match?pC(n,0,o):TI(n,e,t)}function pC(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function(n){return Kp(n[0])?n[0].outlets:{[Bt]:n}}(t),o={};return ns(r,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(o[h]=yx(n.children[h],e,c))}),ns(n.children,(c,h)=>{void 0===r[h]&&(o[h]=c)}),new $t(n.segments,o)}}function TI(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const c=t[o];if(Kp(c)){const y=jP(c.outlets);return new $t(r,y)}if(0===o&&fC(t[0])){r.push(new qp(n.segments[e].path,_x(t[0]))),o++;continue}const h=Kp(c)?c.outlets[Bt]:`${c}`,m=o<t.length-1?t[o+1]:null;h&&m&&fC(m)?(r.push(new qp(h,_x(m))),o+=2):(r.push(new qp(h,{})),o++)}return new $t(r,{})}function jP(n){const e={};return ns(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=TI(new $t([],{}),0,t))}),e}function _x(n){const e={};return ns(n,(t,r)=>e[r]=`${t}`),e}function Cx(n,e,t){return n==t.path&&Ec(e,t.parameters)}class GP{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),EI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Zp(t);e.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,o[h],r),delete o[h]}),ns(o,(c,h)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(o===c)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=Zp(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Zp(t);e.children.forEach(c=>{this.activateRoutes(c,o[c.value.outlet],r),this.forwardEvent(new hP(c.value.snapshot))}),e.children.length&&this.forwardEvent(new lP(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(EI(o),o===c)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),bx(m.route)}else{const m=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),y=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=y,h.outlet&&h.outlet.activateWith(o,y),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}function bx(n){EI(n.value),n.children.forEach(bx)}class SI{constructor(e,t){this.routes=e,this.module=t}}function p0(n){return"function"==typeof n}function Vu(n){return n instanceof zu}const Yp=Symbol("INITIAL_VALUE");function Qp(){return ni(n=>function(...n){let e,t;return(0,g8.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,p1.k)(n[0])&&(n=n[0]),(0,Bk.n)(n,t).lift(new $k(e))}(n.map(e=>e.pipe(_5(1),n4(Yp)))).pipe($a((e,t)=>{let r=!1;return t.reduce((o,c,h)=>o!==Yp?o:(c===Yp&&(r=!0),r||!1!==c&&h!==t.length-1&&!Vu(c)?o:c),e)},Yp),M1(e=>e!==Yp),(0,Je.U)(e=>Vu(e)?e:!0===e),_5(1)))}let wx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:function(){return[kI]},encapsulation:2}),n})();function Ex(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];JP(r,XP(e,r))}}function JP(n,e){n.children&&Ex(n.children,e)}function XP(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function xI(n){const e=n.children&&n.children.map(xI),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Bt&&(t.component=wx),t}function ia(n){return n.outlet||Bt}function Mx(n,e){const t=n.filter(r=>ia(r)===e);return t.push(...n.filter(r=>ia(r)!==e)),t}const Ix={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function mC(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Ix):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||pP)(t,n,e);if(!c)return Object.assign({},Ix);const h={};ns(c.posParams,(y,E)=>{h[E]=y.path});const m=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:m,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function gC(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>vC(n,e,r)&&ia(r)!==Bt)}(n,t,r)){const h=new $t(e,function(n,e,t,r){const o={};o[Bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&ia(c)!==Bt){const h=new $t([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[ia(c)]=h}return o}(n,e,r,new $t(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>vC(n,e,r))}(n,t,r)){const h=new $t(n.segments,function(n,e,t,r,o,c){const h={};for(const m of r)if(vC(n,t,m)&&!o[ia(m)]){const y=new $t([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===c?n.segments.length:e.length,h[ia(m)]=y}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const c=new $t(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function vC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ax(n,e,t,r){return!!(ia(n)===r||r!==Bt&&vC(e,t,n))&&("**"===n.path||mC(e,n,t).matched)}function Tx(n,e,t){return 0===e.length&&!n.children[t]}class Jp{constructor(e){this.segmentGroup=e||null}}class Sx{constructor(e){this.urlTree=e}}function yC(n){return new cn.y(e=>e.error(new Jp(n)))}function xx(n){return new cn.y(e=>e.error(new Sx(n)))}function iz(n){return new cn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class az{constructor(e,t,r,o,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=gC(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Bt).pipe((0,Je.U)(c=>this.createUrlTree(DI(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pu(c=>{if(c instanceof Sx)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Jp?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Bt).pipe((0,Je.U)(o=>this.createUrlTree(DI(o),e.queryParams,e.fragment))).pipe(Pu(o=>{throw o instanceof Jp?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new $t([],{[Bt]:e}):e;return new zu(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Je.U)(c=>new $t([],c))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const c of Object.keys(r.children))"primary"===c?o.unshift(c):o.push(c);return(0,yn.D)(o).pipe(cd(c=>{const h=r.children[c],m=Mx(t,c);return this.expandSegmentGroup(e,m,h,c).pipe((0,Je.U)(y=>({segment:y,outlet:c})))}),$a((c,h)=>(c[h.outlet]=h.segment,c),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?M1((o,c)=>n(o,c,r)):cE.y,mI(1),t?x9(e):ky(()=>new gu))}())}expandSegment(e,t,r,o,c,h){return(0,yn.D)(r).pipe(cd(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,c,h).pipe(Pu(E=>{if(E instanceof Jp)return(0,st.of)(null);throw E}))),$6(m=>!!m),Pu((m,y)=>{if(m instanceof gu||"EmptyError"===m.name){if(Tx(t,o,c))return(0,st.of)(new $t([],{}));throw new Jp(t)}throw m}))}expandSegmentAgainstRoute(e,t,r,o,c,h,m){return Ax(o,t,c,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,c,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h):yC(t):yC(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?xx(c):this.lineralizeSegments(r,c).pipe((0,Qs.zg)(h=>{const m=new $t(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h){const{matched:m,consumedSegments:y,lastChild:E,positionalParamSegments:T}=mC(t,o,c);if(!m)return yC(t);const x=this.applyRedirectCommands(y,o.redirectTo,T);return o.redirectTo.startsWith("/")?xx(x):this.lineralizeSegments(o,x).pipe((0,Qs.zg)(k=>this.expandSegment(e,t,r,k.concat(c.slice(E)),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,st.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Je.U)(k=>(r._loadedConfig=k,new $t(o,{})))):(0,st.of)(new $t(o,{}));const{matched:h,consumedSegments:m,lastChild:y}=mC(t,r,o);if(!h)return yC(t);const E=o.slice(y);return this.getChildConfig(e,r,o).pipe((0,Qs.zg)(x=>{const k=x.module,V=x.routes,{segmentGroup:Y,slicedSegments:Ee}=gC(t,m,E,V),Re=new $t(Y.segments,Y.children);if(0===Ee.length&&Re.hasChildren())return this.expandChildren(k,V,Re).pipe((0,Je.U)(ht=>new $t(m,ht)));if(0===V.length&&0===Ee.length)return(0,st.of)(new $t(m,{}));const Ge=ia(r)===c;return this.expandSegment(k,Re,V,Ee,Ge?Bt:c,!0).pipe((0,Je.U)(Lt=>new $t(m.concat(Lt.segments),Lt.children)))}))}getChildConfig(e,t,r){return t.children?(0,st.of)(new SI(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,st.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Qs.zg)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Je.U)(c=>(t._loadedConfig=c,c))):function(n){return new cn.y(e=>e.error(vI(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):(0,st.of)(new SI([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,st.of)(!0);const c=o.map(h=>{const m=e.get(h);let y;if(function(n){return n&&p0(n.canLoad)}(m))y=m.canLoad(t,r);else{if(!p0(m))throw new Error("Invalid CanLoad guard");y=m(t,r)}return Mc(y)});return(0,st.of)(c).pipe(Qp(),(0,vo.b)(h=>{if(!Vu(h))return;const m=vI(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,Je.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,st.of)(r);if(o.numberOfChildren>1||!o.children[Bt])return iz(e.redirectTo);o=o.children[Bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const c=this.createSegmentGroup(e,t.root,r,o);return new zu(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ns(e,(o,c)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[c]=t[m]}else r[c]=o}),r}createSegmentGroup(e,t,r,o){const c=this.createSegments(e,t.segments,r,o);let h={};return ns(t.children,(m,y)=>{h[y]=this.createSegmentGroup(e,m,r,o)}),new $t(c,h)}createSegments(e,t,r,o){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,o):this.findOrReturn(c,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function DI(n){const e={};for(const r of Object.keys(n.children)){const c=DI(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function(n){if(1===n.numberOfChildren&&n.children[Bt]){const e=n.children[Bt];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}class Dx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _C{constructor(e,t){this.component=e,this.route=t}}function uz(n,e,t){const r=n._root;return Xp(r,e?e._root:null,t,[r.value])}function CC(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Xp(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=Zp(e);return n.children.forEach(h=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ou(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ou(n.url,e.url)||!Ec(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MI(n,e)||!Ec(n.queryParams,e.queryParams);case"paramsChange":default:return!MI(n,e)}}(h,c,c.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new Dx(r)):(c.data=h.data,c._resolvedData=h._resolvedData),Xp(n,e,c.component?m?m.children:null:t,r,o),y&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new _C(m.outlet.component,h))}else h&&em(e,m,o),o.canActivateChecks.push(new Dx(r)),Xp(n,null,c.component?m?m.children:null:t,r,o)})(h,c[h.value.outlet],t,r.concat([h.value]),o),delete c[h.value.outlet]}),ns(c,(h,m)=>em(h,t.getContext(m),o)),o}function em(n,e,t){const r=Zp(n),o=n.value;ns(r,(c,h)=>{em(c,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new _C(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Ez{}function Nx(n){return new cn.y(e=>e.error(n))}class Iz{constructor(e,t,r,o,c,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const e=gC(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Bt);if(null===t)return null;const r=new hC([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Bt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Q4(r,t),c=new fx(this.url,o);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=dx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const h=t.children[c],m=Mx(e,c),y=this.processSegmentGroup(m,h,c);if(null===y)return null;r.push(...y)}const o=Lx(r);return function(n){n.sort((e,t)=>e.value.outlet===Bt?-1:t.value.outlet===Bt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const c of e){const h=this.processSegmentAgainstRoute(c,t,r,o);if(null!==h)return h}return Tx(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Ax(e,t,r,o))return null;let c,h=[],m=[];if("**"===e.path){const V=r.length>0?XS(r).parameters:{};c=new hC(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Px(e),ia(e),e.component,e,Rx(t),kx(t)+r.length,zx(e))}else{const V=mC(t,e,r);if(!V.matched)return null;h=V.consumedSegments,m=r.slice(V.lastChild),c=new hC(h,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Px(e),ia(e),e.component,e,Rx(t),kx(t)+h.length,zx(e))}const y=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:E,slicedSegments:T}=gC(t,h,m,y.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===T.length&&E.hasChildren()){const V=this.processChildren(y,E);return null===V?null:[new Q4(c,V)]}if(0===y.length&&0===T.length)return[new Q4(c,[])];const x=ia(e)===o,k=this.processSegment(y,E,T,x?Bt:o);return null===k?null:[new Q4(c,k)]}}function Sz(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Lx(n){const e=[],t=new Set;for(const r of n){if(!Sz(r)){e.push(r);continue}const o=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Lx(r.children);e.push(new Q4(r.value,o))}return e.filter(r=>!t.has(r))}function Rx(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function kx(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Px(n){return n.data||{}}function zx(n){return n.resolve||{}}function NI(n){return ni(e=>{const t=n(e);return t?(0,yn.D)(t).pipe((0,Je.U)(()=>e)):(0,st.of)(e)})}class zz extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const LI=new d.OlP("ROUTES");class Ox{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Je.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=c.create(e);return new SI(JS(h.injector.get(LI,void 0,d.XFs.Self|d.XFs.Optional)).map(xI),h)}),Pu(c=>{throw t._loader$=void 0,c}));return t._loader$=new qk.c(o,()=>new Jo.xQ).pipe((0,Jk.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,yn.D)(this.loader.load(e)):Mc(e()).pipe((0,Qs.zg)(t=>t instanceof d.YKP?(0,st.of)(t):(0,yn.D)(this.compiler.compileModuleAsync(t))))}}class Oz{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new hd,this.attachRef=null}}class hd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Oz,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Fz{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Hz(n){throw n}function Uz(n,e,t){return e.parse("/")}function Vx(n,e){return(0,st.of)(null)}const Bz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Js=(()=>{class n{constructor(t,r,o,c,h,m,y,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=c,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Jo.xQ,this.errorHandler=Hz,this.malformedUriErrorHandler=Uz,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Vx,afterPreactivation:Vx},this.urlHandlingStrategy=new Fz,this.routeReuseStrategy=new zz,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(d.h0i),this.console=h.get(d.c2e);const k=h.get(d.R0b);this.isNgZoneEnabled=k instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=new zu(new $t([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ox(m,y,V=>this.triggerEvent(new WS(V)),V=>this.triggerEvent(new ZS(V))),this.routerState=hx(this.currentUrlTree,this.rootComponentType),this.transitions=new _2({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(M1(o=>0!==o.id),(0,Je.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ni(o=>{let c=!1,h=!1;return(0,st.of)(o).pipe((0,vo.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ni(m=>{const y=this.browserUrlTree.toString(),E=!this.navigated||m.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return bC(m.source)&&(this.browserUrlTree=m.extractedUrl),(0,st.of)(m).pipe(ni(x=>{const k=this.transitions.getValue();return r.next(new gI(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),k!==this.transitions.getValue()?pc.E:Promise.resolve(x)}),function(n,e,t,r){return ni(o=>function(n,e,t,r,o){return new az(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Je.U)(c=>Object.assign(Object.assign({},o),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,vo.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,e,t,r,o){return(0,Qs.zg)(c=>function(n,e,t,r,o="emptyOnly",c="legacy"){try{const h=new Iz(n,e,t,r,o,c).recognize();return null===h?Nx(new Ez):(0,st.of)(h)}catch(h){return Nx(h)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,o).pipe((0,Je.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,vo.b)(x=>{"eager"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(x.urlAfterRedirects,x),this.browserUrlTree=x.urlAfterRedirects);const k=new rP(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(k)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:V,source:Y,restoredState:Ee,extras:Re}=m,Ge=new gI(k,this.serializeUrl(V),Y,Ee);r.next(Ge);const ot=hx(V,this.rootComponentType).snapshot;return(0,st.of)(Object.assign(Object.assign({},m),{targetSnapshot:ot,urlAfterRedirects:V,extras:Object.assign(Object.assign({},Re),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,this.browserUrlTree=m.urlAfterRedirects,m.resolve(null),pc.E}),NI(m=>{const{targetSnapshot:y,id:E,extractedUrl:T,rawUrl:x,extras:{skipLocationChange:k,replaceUrl:V}}=m;return this.hooks.beforePreactivation(y,{navigationId:E,appliedUrlTree:T,rawUrlTree:x,skipLocationChange:!!k,replaceUrl:!!V})}),(0,vo.b)(m=>{const y=new iP(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}),(0,Je.U)(m=>Object.assign(Object.assign({},m),{guards:uz(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Qs.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:c,canDeactivateChecks:h}}=t;return 0===h.length&&0===c.length?(0,st.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,yn.D)(n).pipe((0,Qs.zg)(o=>function(n,e,t,r,o){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,st.of)(!0);const h=c.map(m=>{const y=CC(m,e,o);let E;if(function(n){return n&&p0(n.canDeactivate)}(y))E=Mc(y.canDeactivate(n,e,t,r));else{if(!p0(y))throw new Error("Invalid CanDeactivate guard");E=Mc(y(n,e,t,r))}return E.pipe($6())});return(0,st.of)(h).pipe(Qp())}(o.component,o.route,t,e,r)),$6(o=>!0!==o,!0))}(h,r,o,n).pipe((0,Qs.zg)(m=>m&&function(n){return"boolean"==typeof n}(m)?function(n,e,t,r){return(0,yn.D)(e).pipe(cd(o=>X0(function(n,e){return null!==n&&e&&e(new cP(n)),(0,st.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new uP(n)),(0,st.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(h=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>GS(()=>{const m=h.guards.map(y=>{const E=CC(y,h.node,t);let T;if(function(n){return n&&p0(n.canActivateChild)}(E))T=Mc(E.canActivateChild(r,n));else{if(!p0(E))throw new Error("Invalid CanActivateChild guard");T=Mc(E(r,n))}return T.pipe($6())});return(0,st.of)(m).pipe(Qp())}));return(0,st.of)(c).pipe(Qp())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,st.of)(!0);const o=r.map(c=>GS(()=>{const h=CC(c,e,t);let m;if(function(n){return n&&p0(n.canActivate)}(h))m=Mc(h.canActivate(e,n));else{if(!p0(h))throw new Error("Invalid CanActivate guard");m=Mc(h(e,n))}return m.pipe($6())}));return(0,st.of)(o).pipe(Qp())}(n,o.route,t))),$6(o=>!0!==o,!0))}(r,c,n,e):(0,st.of)(m)),(0,Je.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,vo.b)(m=>{if(Vu(m.guardsResult)){const E=vI(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw E.url=m.guardsResult,E}const y=new sP(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(y)}),M1(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),NI(m=>{if(m.guards.canActivateChecks.length)return(0,st.of)(m).pipe((0,vo.b)(y=>{const E=new oP(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}),ni(y=>{let E=!1;return(0,st.of)(y).pipe(function(n,e){return(0,Qs.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,st.of)(t);let c=0;return(0,yn.D)(o).pipe(cd(h=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,st.of)({});const c={};return(0,yn.D)(o).pipe((0,Qs.zg)(h=>function(n,e,t,r){const o=CC(n,e,r);return Mc(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,vo.b)(m=>{c[h]=m}))),mI(1),(0,Qs.zg)(()=>Object.keys(c).length===o.length?(0,st.of)(c):pc.E))}(n._resolve,n,e,r).pipe((0,Je.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),dx(n,t).resolve),null)))}(h.route,r,n,e)),(0,vo.b)(()=>c++),mI(1),(0,Qs.zg)(h=>c===o.length?(0,st.of)(t):pc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,vo.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,vo.b)(y=>{const E=new aP(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}))}),NI(m=>{const{targetSnapshot:y,id:E,extractedUrl:T,rawUrl:x,extras:{skipLocationChange:k,replaceUrl:V}}=m;return this.hooks.afterPreactivation(y,{navigationId:E,appliedUrlTree:T,rawUrlTree:x,skipLocationChange:!!k,replaceUrl:!!V})}),(0,Je.U)(m=>{const y=function(n,e,t){const r=dC(n,e._root,t?t._root:void 0);return new ux(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:y})}),(0,vo.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Je.U)(r=>(new GP(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,vo.b)({next(){c=!0},complete(){c=!0}}),function(n){return e=>e.lift(new eP(n))}(()=>{if(!c&&!h){const m=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,m)):this.cancelNavigationTransition(o,m)}this.currentNavigation=null}),Pu(m=>{if(h=!0,function(n){return n&&n[YS]}(m)){const y=Vu(m.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const E=new qS(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(E),y?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),x={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bC(o.source)};this.scheduleNavigation(T,"imperative",null,x,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new nP(o.id,this.serializeUrl(o.extractedUrl),m);r.next(y);try{o.resolve(this.errorHandler(m))}catch(E){o.reject(E)}}return pc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:c,urlTree:h}=r,m={replaceUrl:!0};if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(m.state=y)}this.scheduleNavigation(h,o,c,m)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ex(t),this.config=t.map(xI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:c,fragment:h,queryParamsHandling:m,preserveFragment:y}=r,E=o||this.routerState.root,T=y?this.currentUrlTree.fragment:h;let x=null;switch(m){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=c||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,e,t,r,o){if(0===t.length)return II(e.root,e.root,e,r,o);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new vx(!0,0,n);let e=0,t=!1;const r=n.reduce((o,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const m={};return ns(c.outlets,(y,E)=>{m[E]="string"==typeof y?y.split("/"):y}),[...o,{outlets:m}]}if(c.segmentPath)return[...o,c.segmentPath]}return"string"!=typeof c?[...o,c]:0===h?(c.split("/").forEach((m,y)=>{0==y&&"."===m||(0==y&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,c]},[]);return new vx(t,e,r)}(t);if(c.toRoot())return II(e.root,new $t([],{}),e,r,o);const h=function(n,e,t){if(n.isAbsolute)return new AI(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new AI(c,c===e.root,0)}const r=fC(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,c=t;for(;c>o;){if(c-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new AI(r,!1,o-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),m=h.processChildren?pC(h.segmentGroup,h.index,c.commands):yx(h.segmentGroup,h.index,c.commands);return II(h.segmentGroup,m,e,r,o)}(E,this.currentUrlTree,t,x,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Vu(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Bz):!1===r?Object.assign({},jz):r,Vu(t))return tx(this.currentUrlTree,t,o);const c=this.parseUrl(t);return tx(this.currentUrlTree,c,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const c=t[o];return null!=c&&(r[o]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Gp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,c,h){var m,y;if(this.disposed)return Promise.resolve(!1);const E=this.getTransition(),T=bC(r)&&E&&!bC(E.source),V=(this.lastSuccessfulId===E.id||this.currentNavigation?E.rawUrl:E.urlAfterRedirects).toString()===t.toString();if(T&&V)return Promise.resolve(!0);let Y,Ee,Re;h?(Y=h.resolve,Ee=h.reject,Re=h.promise):Re=new Promise((Lt,ht)=>{Y=Lt,Ee=ht});const Ge=++this.navigationId;let ot;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ot=o&&o.\u0275routerPageId?o.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):ot=0,this.setTransition({id:Ge,targetPageId:ot,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:Y,reject:Ee,promise:Re,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Re.catch(Lt=>Promise.reject(Lt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",c):this.location.go(o,"",c)}restoreHistory(t,r=!1){var o,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new qS(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.DyG),d.LFG(yI),d.LFG(hd),d.LFG(Ve),d.LFG(d.zs3),d.LFG(d.v3s),d.LFG(d.Sil),d.LFG(void 0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function bC(n){return"imperative"!==n}let m0=(()=>{class n{constructor(t,r,o,c,h){this.router=t,this.route=r,this.commands=[],this.onChanges=new Jo.xQ,null==o&&c.setAttribute(h.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:dd(this.skipLocationChange),replaceUrl:dd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:dd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Js),d.Y36(ud),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[d.TTD]}),n})();function dd(n){return""===n||!!n}let kI=(()=>{class n{constructor(t,r,o,c,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.name=c||Bt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,y=new Wz(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(hd),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class Wz{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ud?this.route:e===hd?this.childContexts:this.parent.get(e,t)}}class Fx{}class Hx{preload(e,t){return(0,st.of)(null)}}let Ux=(()=>{class n{constructor(t,r,o,c,h){this.router=t,this.injector=c,this.preloadingStrategy=h,this.loader=new Ox(r,o,E=>t.triggerEvent(new WS(E)),E=>t.triggerEvent(new ZS(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(M1(t=>t instanceof Gp),cd(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?o.push(this.preloadConfig(t,c)):c.children&&o.push(this.processRoutes(t,c.children));return(0,yn.D)(o).pipe((0,_i.J)(),(0,Je.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,st.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Qs.zg)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Js),d.LFG(d.v3s),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(Fx))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),PI=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof KS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new KS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Js),d.LFG(O1),d.LFG(void 0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Fu=new d.OlP("ROUTER_CONFIGURATION"),Bx=new d.OlP("ROUTER_FORROOT_GUARD"),Yz=[Ve,{provide:yI,useClass:sx},{provide:Js,useFactory:function(n,e,t,r,o,c,h,m={},y,E){const T=new Js(null,n,e,t,r,o,c,JS(h));return y&&(T.urlHandlingStrategy=y),E&&(T.routeReuseStrategy=E),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(m,T),m.enableTracing&&T.events.subscribe(x=>{var k,V;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(V=console.groupEnd)||void 0===V||V.call(console)}),T},deps:[yI,hd,Ve,d.zs3,d.v3s,d.Sil,LI,Fu,[class{},new d.FiY],[class{},new d.FiY]]},hd,{provide:ud,useFactory:function(n){return n.routerState.root},deps:[Js]},{provide:d.v3s,useClass:d.EAV},Ux,Hx,class{preload(e,t){return t().pipe(Pu(()=>(0,st.of)(null)))}},{provide:Fu,useValue:{enableTracing:!1}}];function Qz(){return new d.PXZ("Router",Js)}let jx=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Yz,$x(t),{provide:Bx,useFactory:eO,deps:[[Js,new d.FiY,new d.tp0]]},{provide:Fu,useValue:r||{}},{provide:le,useFactory:Xz,deps:[ee,[new d.tBr(he),new d.FiY],Fu]},{provide:PI,useFactory:Jz,deps:[Js,O1,Fu]},{provide:Fx,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Hx},{provide:d.PXZ,multi:!0,useFactory:Qz},[zI,{provide:d.ip1,multi:!0,useFactory:iO,deps:[zI]},{provide:Gx,useFactory:sO,deps:[zI]},{provide:d.tb,multi:!0,useExisting:Gx}]]}}static forChild(t){return{ngModule:n,providers:[$x(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Bx,8),d.LFG(Js,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Jz(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new PI(n,e,t)}function Xz(n,e,t={}){return t.useHash?new Ae(n,e):new Ce(n,e)}function eO(n){return"guarded"}function $x(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:LI,multi:!0,useValue:n}]}let zI=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Jo.xQ}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),c=this.injector.get(Js),h=this.injector.get(Fu);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,st.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Fu),o=this.injector.get(Ux),c=this.injector.get(PI),h=this.injector.get(Js),m=this.injector.get(d.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),c.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function iO(n){return n.appInitializer.bind(n)}function sO(n){return n.bootstrapListener.bind(n)}const Gx=new d.OlP("Router Initializer");let g0=(()=>{class n{constructor(t){this.firebaseAuth=t,this.isLoggedIn=!1,t.authState.subscribe(r=>{console.log(null==r?void 0:r.uid),this.currentUser=null==r?void 0:r.uid,console.log(this.currentUser)})}signIn(t,r){var o=this;return(0,p.Z)(function*(){yield o.firebaseAuth.signInWithEmailAndPassword(t,r).then(c=>{o.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(c.user))})})()}signUp(t,r){var o=this;return(0,p.Z)(function*(){yield o.firebaseAuth.createUserWithEmailAndPassword(t,r).then(c=>{o.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(c.user))})})()}logout(){this.firebaseAuth.signOut(),localStorage.removeItem("user"),this.isLoggedIn=!1}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Z6))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aO=function(){return["/home"]};let qx=(()=>{class n{constructor(t,r,o){this.authService=t,this.fb=r,this.angularAuth=o,this.isLogin=new d.vpe,this.toSignup=new d.vpe,this.isSignedIn=!1}ngOnInit(){this.initializeForm(),this.isSignedIn=null!==localStorage.getItem("user")}initializeForm(){this.signInForm=this.fb.group({email:"",password:""})}onSignIn(){var t=this;return(0,p.Z)(function*(){var r,o;let c=null===(r=t.signInForm.get("email"))||void 0===r?void 0:r.value,h=null===(o=t.signInForm.get("password"))||void 0===o?void 0:o.value;yield t.authService.signIn(c,h),console.log(c,h),t.authService.isLoggedIn&&(t.isSignedIn=!0),t.signInForm.reset(),console.log(t.isSignedIn),t.isLogin.emit()})()}handleLogout(){this.isLogin.emit(),this.authService.logout()}handleToSignup(){this.toSignup.emit()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(g0),d.Y36(ja),d.Y36(Z6))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],outputs:{isLogin:"isLogin",toSignup:"toSignup"},decls:19,vars:3,consts:[[1,"intro-wrapper"],[1,"login-box"],[3,"formGroup","ngSubmit"],[1,"email"],["for","email"],["type","text","formControlName","email"],[1,"password"],["for","password"],["type","password","formControlName","password"],["type","submit",1,"sign-in",3,"routerLink"],[3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h2"),d._uU(3,"AllTrails"),d.qZA(),d.TgZ(4,"form",2),d.NdJ("ngSubmit",function(){return r.onSignIn()}),d.TgZ(5,"div",3),d.TgZ(6,"label",4),d._uU(7,"Email:"),d.qZA(),d._UZ(8,"input",5),d.qZA(),d.TgZ(9,"div",6),d.TgZ(10,"label",7),d._uU(11,"Password:"),d.qZA(),d._UZ(12,"input",8),d.qZA(),d.TgZ(13,"button",9),d._uU(14,"Sign In"),d.qZA(),d.qZA(),d.TgZ(15,"p"),d._uU(16,"Don't have an account? "),d.TgZ(17,"a",10),d.NdJ("click",function(){return r.handleToSignup()}),d._uU(18,"Sign up here!"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(4),d.Q6J("formGroup",r.signInForm),d.xp6(9),d.Q6J("routerLink",d.DdM(2,aO)))},directives:[$s,y1,Ha,Tr,K1,Ua,m0],styles:['form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%}.intro-wrapper[_ngcontent-%COMP%]{background-image:url(Background-mountains.b56a72c038e47b69edc1.jpg);background-size:cover;height:100vh}.login-box[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-right:-50%;transform:translate(-50%,-50%);background-color:#004200e6;color:#fff;height:300px;width:80vw;display:flex;flex-direction:column;justify-content:space-between;padding:10px;border-radius:4px}.email[_ngcontent-%COMP%], .password[_ngcontent-%COMP%]{margin:10px 0;display:flex;flex-direction:row;justify-content:space-between;width:80%}.sign-in[_ngcontent-%COMP%]{padding:2px}input[_ngcontent-%COMP%]{width:35vw;margin-left:5px}h2[_ngcontent-%COMP%]{text-align:center;font-family:"Freckle face",cursive;letter-spacing:.2rem;font-size:2rem}p[_ngcontent-%COMP%]{font-size:.8rem;text-align:center}a[_ngcontent-%COMP%]{color:#fff;cursor:pointer;text-decoration:underline}@media only screen and (min-width: 475px){.login-box[_ngcontent-%COMP%]{width:50vw}}@media only screen and (min-width: 769px){.login-box[_ngcontent-%COMP%]{width:30vw}input[_ngcontent-%COMP%]{width:15vw}}']}),n})(),Wx=(()=>{class n{constructor(t,r){this.authService=t,this.fb=r,this.toLogin=new d.vpe,this.isSignedIn=!1}ngOnInit(){this.initializeForm(),this.isSignedIn=null!==localStorage.getItem("user")}initializeForm(){this.signUpForm=this.fb.group({email:"",password:""})}onSignUp(){var t=this;return(0,p.Z)(function*(){var r,o;let c=null===(r=t.signUpForm.get("email"))||void 0===r?void 0:r.value,h=null===(o=t.signUpForm.get("password"))||void 0===o?void 0:o.value;yield t.authService.signUp(c,h),t.authService.isLoggedIn&&(t.isSignedIn=!0),t.signUpForm.reset(),console.log(t.isSignedIn),t.toLogin.emit()})()}handleToLogin(){this.toLogin.emit()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(g0),d.Y36(ja))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-signup"]],outputs:{toLogin:"toLogin"},decls:21,vars:1,consts:[[1,"intro-wrapper"],[1,"login-box"],[3,"formGroup","ngSubmit"],[1,"email"],["for","email"],["type","text","formControlName","email"],[1,"password"],["for","password"],["type","text","formControlName","password"],["type","submit",1,"sign-up"],["id","back",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h2"),d._uU(3,"AllTrails"),d.qZA(),d.TgZ(4,"h4"),d._uU(5,"Create an account"),d.qZA(),d.TgZ(6,"form",2),d.NdJ("ngSubmit",function(){return r.onSignUp()}),d.TgZ(7,"div",3),d.TgZ(8,"label",4),d._uU(9,"Email:"),d.qZA(),d._UZ(10,"input",5),d.qZA(),d.TgZ(11,"div",6),d.TgZ(12,"label",7),d._uU(13,"Password:"),d.qZA(),d._UZ(14,"input",8),d.qZA(),d.TgZ(15,"p"),d._uU(16,"*Password must be at least 6 characters"),d.qZA(),d.TgZ(17,"button",9),d._uU(18,"Sign Up"),d.qZA(),d.qZA(),d.TgZ(19,"p",10),d.NdJ("click",function(){return r.handleToLogin()}),d._uU(20,"Back"),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(6),d.Q6J("formGroup",r.signUpForm))},directives:[$s,y1,Ha,Tr,K1,Ua],styles:['form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%}.intro-wrapper[_ngcontent-%COMP%]{background-image:url(Background-mountains.b56a72c038e47b69edc1.jpg);background-size:cover;height:100vh}#back[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%]{cursor:pointer;margin:5px}.login-box[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-right:-50%;transform:translate(-50%,-50%);background-color:#004200e6;color:#fff;height:300px;width:80vw;display:flex;flex-direction:column;justify-content:space-evenly;padding:10px;border-radius:4px}.password[_ngcontent-%COMP%], .email[_ngcontent-%COMP%]{margin:10px 0;display:flex;flex-direction:row;justify-content:space-between;width:80%}.sign-up[_ngcontent-%COMP%]{padding:2px}p[_ngcontent-%COMP%]{font-size:12px}input[_ngcontent-%COMP%]{width:35vw;margin-left:5px}h2[_ngcontent-%COMP%]{text-align:center;font-family:"Freckle face",cursive;letter-spacing:.2rem;font-size:2rem}h4[_ngcontent-%COMP%]{text-align:center}a[_ngcontent-%COMP%]{color:#fff}@media only screen and (min-width: 475px){p[_ngcontent-%COMP%]{font-size:16px}}@media only screen and (min-width: 769px){.login-box[_ngcontent-%COMP%]{width:30vw}input[_ngcontent-%COMP%]{width:15vw}}']}),n})();const cO=function(){return["/account"]};let lO=(()=>{class n{constructor(t,r,o,c){this.fb=t,this.crudService=r,this.firebaseAuth=o,this.authService=c,this.trail={name:"",location:"",date:"",note:"",routeType:{typeOfRoute:""}},this.currentUser=c.currentUser}ngOnInit(){this.crudService.getProfile().subscribe(t=>{this.profiles=t.filter(r=>r.user===this.currentUser),this.creatorName=this.profiles[0].name,console.log(this.creatorName),this.initializeForm()})}initializeForm(){this.adventureForm=this.fb.group({name:"",user:this.authService.currentUser,creatorName:this.creatorName,location:"",date:"",note:"",routeType:this.fb.group({typeOfRoute:""})})}onSubmit(){this.crudService.addTrail(this.adventureForm.value),this.adventureForm.reset()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ja),d.Y36($p),d.Y36(Z6),d.Y36(g0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-adventure-form"]],decls:32,vars:3,consts:[[1,"about-form-wrapper"],[3,"formGroup","ngSubmit"],["formGroupName","routeType",1,"checkbox-grouping"],[1,"checkbox-cont"],["type","radio","formControlName","typeOfRoute","name","typeOfRoute","value","Hiking"],["type","radio","formControlName","typeOfRoute","name","typeOfRoute","value","Biking"],["type","radio","formControlName","typeOfRoute","name","typeOfRoute","value","Kayaking"],[1,"about-input-fields"],["formControlName","name","type","text","placeholder","Name of route","onfocus","this.placeholder = ''","onblur","this.placeholder = 'Name of route'",1,"name-input"],["formControlName","location","type","text","placeholder","City/State","onfocus","this.placeholder = ''","onblur","this.placeholder = 'City/State or park'",1,"name-input"],["formControlName","date","type","text","placeholder","dd/mm/yy","onfocus","this.placeholder = ''","onblur","this.placeholder = 'dd/mm/yy'",1,"name-input"],["id","note-textarea"],["formControlName","note","placeholder","Tell the story!","onfocus","this.placeholder = ''","onblur","this.placeholder = 'Tell the story!'"],[1,"button-box"],["type","submit",1,"about-submit"],[1,"about-back",3,"routerLink"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"h2"),d._uU(2,"Tell us about your adventure!"),d.qZA(),d.TgZ(3,"form",1),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(4,"div",2),d.TgZ(5,"label",3),d._uU(6," Hiking "),d._UZ(7,"input",4),d.qZA(),d.TgZ(8,"label",3),d._uU(9," Biking "),d._UZ(10,"input",5),d.qZA(),d.TgZ(11,"label",3),d._uU(12," Kayking "),d._UZ(13,"input",6),d.qZA(),d.qZA(),d.TgZ(14,"div",7),d.TgZ(15,"label"),d._uU(16," Trail Name: "),d._UZ(17,"input",8),d.qZA(),d.TgZ(18,"label"),d._uU(19," Trail Location: "),d._UZ(20,"input",9),d.qZA(),d.TgZ(21,"label"),d._uU(22," Date: "),d._UZ(23,"input",10),d.qZA(),d.TgZ(24,"label",11),d._uU(25," Notes: "),d._UZ(26,"textarea",12),d.qZA(),d.TgZ(27,"div",13),d.TgZ(28,"button",14),d._uU(29,"Submit"),d.qZA(),d.TgZ(30,"button",15),d._uU(31,"Back"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(3),d.Q6J("formGroup",r.adventureForm),d.xp6(27),d.Q6J("routerLink",d.DdM(2,cO)))},directives:[$s,y1,Ha,eo,B2,Tr,K1,Ua,m0],styles:[".about-form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;position:absolute;top:50%;left:50%;margin-right:-50%;transform:translate(-50%,-50%);border:1px solid #fff;border-radius:5px;padding:20px;background-color:#000542}.background[_ngcontent-%COMP%]{background-color:#0003;height:100vh;width:100vw}h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{text-align:center}h2[_ngcontent-%COMP%]{margin-bottom:20px;border-bottom:1px solid #fff}h4[_ngcontent-%COMP%]{margin:20px 0}label[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin:5px 0}.name-input[_ngcontent-%COMP%]{width:170px}textarea[_ngcontent-%COMP%]{width:170px;height:80px}#note-textarea[_ngcontent-%COMP%]{height:80px}.about-input-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column}.checkbox-grouping[_ngcontent-%COMP%]{margin-bottom:20px}.about-submit[_ngcontent-%COMP%]{margin-top:10px;cursor:pointer;width:40%}.about-back[_ngcontent-%COMP%]{margin-top:10px;cursor:pointer;width:40%}.button-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}@media only screen and (min-width: 475px){.name-input[_ngcontent-%COMP%]{width:220px}textarea[_ngcontent-%COMP%]{width:300px}}@media only screen and (min-width: 769px){textarea[_ngcontent-%COMP%]{width:400px}}"]}),n})();function uO(n,e){1&n&&(d.TgZ(0,"div",11),d.TgZ(1,"h3",12),d._uU(2,"Ryan Hubbuck"),d.qZA(),d.TgZ(3,"p",13),d._uU(4,"Knoxville, TN"),d.qZA(),d.TgZ(5,"p",14),d._uU(6,"dskfjsadkjfkdsaj fkasd jfkjasdkjf aksj fklasdj fkasj dkfj sadkfsadj fksad ksdaj fk"),d.qZA(),d.TgZ(7,"a"),d.TgZ(8,"p",15),d._uU(9,"Back"),d.qZA(),d.qZA(),d.qZA())}function hO(n,e){if(1&n&&(d.TgZ(0,"ul"),d.TgZ(1,"li",4),d.TgZ(2,"p",5),d._uU(3),d.qZA(),d.TgZ(4,"p",6),d._uU(5),d.qZA(),d.TgZ(6,"p",7),d._uU(7),d.qZA(),d.TgZ(8,"p",8),d._uU(9),d.qZA(),d.TgZ(10,"p",9),d._uU(11),d.qZA(),d.qZA(),d.YNc(12,uO,10,0,"div",10),d.qZA()),2&n){const t=e.$implicit,r=d.oxw();d.xp6(3),d.AsE("",t.name,"-",t.date,""),d.xp6(2),d.Oqu(t.location),d.xp6(2),d.Oqu(null==t.routeType?null:t.routeType.typeOfRoute),d.xp6(2),d.Oqu(t.note),d.xp6(2),d.Oqu(t.creatorName),d.xp6(1),d.Q6J("ngIf",r.showModal)}}let dO=(()=>{class n{constructor(t){this.crudService=t,this.showModal=!1}ngOnInit(){this.crudService.getTrails().subscribe(t=>{this.trails=t}),this.crudService.getProfile().subscribe(t=>{this.profiles=t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($p))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-feed"]],decls:8,vars:1,consts:[[1,"feed-container"],[1,"feed-headline"],[1,"trails-container"],[4,"ngFor","ngForOf"],[1,"trail"],[1,"trail-title"],[1,"trail-location"],[1,"trail-type"],[1,"trail-description"],[1,"trail-creator"],["class","modal-container",4,"ngIf"],[1,"modal-container"],[1,"users-name"],[1,"user-location"],[1,"user-bio"],[1,"back"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"h2",1),d._uU(2,"Trail Feed"),d.qZA(),d.TgZ(3,"div",2),d.YNc(4,hO,13,7,"ul",3),d.qZA(),d._UZ(5,"br"),d._UZ(6,"br"),d._UZ(7,"br"),d.qZA()),2&t&&(d.xp6(4),d.Q6J("ngForOf",r.trails))},directives:[Ft,Rs],styles:['.feed-container[_ngcontent-%COMP%]{padding:0 20px;margin:20px 30px;height:95vh;overflow-y:scroll}.feed-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.feed-container[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.feed-headline[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;font-size:36px;color:#fff;font-family:"Baloo 2",cursive}h4[_ngcontent-%COMP%]{color:#fff}.nav-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center}.nav-options[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;list-style-type:none;margin:10px 0}li[_ngcontent-%COMP%]{margin:2px}button[_ngcontent-%COMP%]{width:80px;height:32px;border-radius:3px;cursor:pointer}#hiking-button[_ngcontent-%COMP%]{background-color:#ff5f5f}#biking-button[_ngcontent-%COMP%]{background-color:#58e6ff}#kayaking-button[_ngcontent-%COMP%]{background-color:#53ff53}.trails-container[_ngcontent-%COMP%]{display:grid}.trail[_ngcontent-%COMP%]{border-bottom:1px solid #000;border-top:1px solid #000;margin:4px;padding:0 10px;background-color:#fff;border-radius:2px;list-style-type:none}.trail-title[_ngcontent-%COMP%], .trail-location[_ngcontent-%COMP%]{font-size:18px}.trail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.trail-type[_ngcontent-%COMP%], .trail-creator[_ngcontent-%COMP%]{padding-left:30px;font-size:14px}.trail-description[_ngcontent-%COMP%]{padding:0 30px;font-size:16px}.trail-creator[_ngcontent-%COMP%]{text-align:right}.modal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;position:absolute;top:50%;left:50%;margin-right:-50%;transform:translate(-50%,-50%);border:1px solid #fff;border-radius:5px;padding:20px;background-color:#000542}.back[_ngcontent-%COMP%]{text-decoration:underline;text-align:right;font-size:14px;margin-bottom:-10px;cursor:pointer}a[_ngcontent-%COMP%]{color:#fff}h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:28px}.user-location[_ngcontent-%COMP%], .user-bio[_ngcontent-%COMP%]{margin:10px 0}.user-bio[_ngcontent-%COMP%]{margin-bottom:20px}@media only screen and (min-width: 475px){.feed-container[_ngcontent-%COMP%]{padding:0 80px;margin:20px 40px}h2[_ngcontent-%COMP%]{font-size:34px}h3[_ngcontent-%COMP%]{font-size:30px}.feed-headline[_ngcontent-%COMP%]{font-size:46px}.user-location[_ngcontent-%COMP%], .user-bio[_ngcontent-%COMP%]{font-size:18px}.back[_ngcontent-%COMP%]{font-size:16px}}@media only screen and (min-width: 769px){.feed-container[_ngcontent-%COMP%]{padding:0 160px;margin:20px 100px}h2[_ngcontent-%COMP%]{font-size:38px}}']}),n})();var Zx={prefix:"fas",iconName:"edit",icon:[576,512,[],"f044","M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"]},OI={prefix:"fas",iconName:"window-close",icon:[512,512,[],"f410","M464 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-83.6 290.5c4.8 4.8 4.8 12.6 0 17.4l-40.5 40.5c-4.8 4.8-12.6 4.8-17.4 0L256 313.3l-66.5 67.1c-4.8 4.8-12.6 4.8-17.4 0l-40.5-40.5c-4.8-4.8-4.8-12.6 0-17.4l67.1-66.5-67.1-66.5c-4.8-4.8-4.8-12.6 0-17.4l40.5-40.5c4.8-4.8 12.6-4.8 17.4 0l66.5 67.1 66.5-67.1c4.8-4.8 12.6-4.8 17.4 0l40.5 40.5c4.8 4.8 4.8 12.6 0 17.4L313.3 256l67.1 66.5z"]};function tm(n){return(tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Kx(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function jte(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),r.forEach(function(o){jte(n,o,t[o])})}return n}function VI(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],r=!0,o=!1,c=void 0;try{for(var m,h=n[Symbol.iterator]();!(r=(m=h.next()).done)&&(t.push(m.value),!e||t.length!==e);r=!0);}catch(y){o=!0,c=y}finally{try{!r&&null!=h.return&&h.return()}finally{if(o)throw c}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var HI={},Qx={};try{"undefined"!=typeof window&&(HI=window),"undefined"!=typeof document&&(Qx=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&performance}catch(n){}var eD=(HI.navigator||{}).userAgent,tD=void 0===eD?"":eD,fd=HI,ci=Qx,J4=!!ci.documentElement&&!!ci.head&&"function"==typeof ci.addEventListener&&"function"==typeof ci.createElement,X4=(~tD.indexOf("MSIE")||tD.indexOf("Trident/"),"___FONT_AWESOME___"),sD="svg-inline--fa",lD=[1,2,3,4,5,6,7,8,9,10],one=lD.concat([11,12,13,14,15,16,17,18,19,20]),Hu={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},uD=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Hu.GROUP,Hu.SWAP_OPACITY,Hu.PRIMARY,Hu.SECONDARY].concat(lD.map(function(n){return"".concat(n,"x")})).concat(one.map(function(n){return"w-".concat(n)})),fd.FontAwesomeConfig||{});ci&&"function"==typeof ci.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=VI(n,2),r=e[1],o=function(n){return""===n||"false"!==n&&("true"===n||n)}(function(n){var e=ci.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=o&&(uD[r]=o)});var jI=Gt({},{familyPrefix:"fa",replacementClass:sD,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},uD);jI.autoReplaceSvg||(jI.observeMutations=!1);var Nt=Gt({},jI);fd.FontAwesomeConfig=Nt;var el=fd||{};el[X4]||(el[X4]={}),el[X4].styles||(el[X4].styles={}),el[X4].hooks||(el[X4].hooks={}),el[X4].shims||(el[X4].shims=[]);var C2=el[X4],hD=[];J4&&((ci.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ci.readyState)||ci.addEventListener("DOMContentLoaded",function n(){ci.removeEventListener("DOMContentLoaded",n),hD.map(function(e){return e()})}));var GI,$I="pending",dD="settled",MC="fulfilled",IC="rejected",mne=function(){},fD="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,gne="undefined"==typeof setImmediate?setTimeout:setImmediate,nm=[];function vne(){for(var n=0;n<nm.length;n++)nm[n][0](nm[n][1]);nm=[],GI=!1}function AC(n,e){nm.push([n,e]),GI||(GI=!0,gne(vne,0))}function pD(n){var e=n.owner,t=e._state,r=e._data,o=n[t],c=n.then;if("function"==typeof o){t=MC;try{r=o(r)}catch(h){rm(c,h)}}mD(c,r)||(t===MC&&qI(c,r),t===IC&&rm(c,r))}function mD(n,e){var t;try{if(n===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===tm(e))){var r=e.then;if("function"==typeof r)return r.call(e,function(o){t||(t=!0,e===o?gD(n,o):qI(n,o))},function(o){t||(t=!0,rm(n,o))}),!0}}catch(o){return t||rm(n,o),!0}return!1}function qI(n,e){(n===e||!mD(n,e))&&gD(n,e)}function gD(n,e){n._state===$I&&(n._state=dD,n._data=e,AC(_ne,n))}function rm(n,e){n._state===$I&&(n._state=dD,n._data=e,AC(Cne,n))}function vD(n){n._then=n._then.forEach(pD)}function _ne(n){n._state=MC,vD(n)}function Cne(n){n._state=IC,vD(n),!n._handled&&fD&&global.process.emit("unhandledRejection",n._data,n)}function bne(n){global.process.emit("rejectionHandled",n)}function yo(n){if("function"!=typeof n)throw new TypeError("Promise resolver "+n+" is not a function");if(!(this instanceof yo))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(n,e){function r(o){rm(e,o)}try{n(function(o){qI(e,o)},r)}catch(o){r(o)}}(n,this)}yo.prototype={constructor:yo,_state:$I,_then:null,_data:void 0,_handled:!1,then:function(e,t){var r={owner:this,then:new this.constructor(mne),fulfilled:e,rejected:t};return(t||e)&&!this._handled&&(this._handled=!0,this._state===IC&&fD&&AC(bne,this)),this._state===MC||this._state===IC?AC(pD,r):this._then.push(r),r.then},catch:function(e){return this.then(null,e)}},yo.all=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.all().");return new yo(function(e,t){var r=[],o=0;function c(y){return o++,function(E){r[y]=E,--o||e(r)}}for(var m,h=0;h<n.length;h++)(m=n[h])&&"function"==typeof m.then?m.then(c(h),t):r[h]=m;o||e(r)})},yo.race=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.race().");return new yo(function(e,t){for(var o,r=0;r<n.length;r++)(o=n[r])&&"function"==typeof o.then?o.then(e,t):e(o)})},yo.resolve=function(n){return n&&"object"===tm(n)&&n.constructor===yo?n:new yo(function(e){e(n)})},yo.reject=function(n){return new yo(function(e,t){t(n)})};var tl={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function im(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function _D(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function TC(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t],";")},"")}function ZI(n){return n.size!==tl.size||n.x!==tl.x||n.y!==tl.y||n.rotate!==tl.rotate||n.flipX||n.flipY}function CD(n){var e=n.transform,r=n.iconWidth,o={transform:"translate(".concat(n.containerWidth/2," 256)")},c="translate(".concat(32*e.x,", ").concat(32*e.y,") "),h="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),m="rotate(".concat(e.rotate," 0 0)");return{outer:o,inner:{transform:"".concat(c," ").concat(h," ").concat(m)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var KI={x:0,y:0,width:"100%",height:"100%"};function bD(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function Tne(n){return"g"===n.tag?n.children:[n]}function YI(n){var e=n.icons,t=e.main,r=e.mask,o=n.prefix,c=n.iconName,h=n.transform,m=n.symbol,y=n.title,E=n.maskId,T=n.titleId,x=n.extra,k=n.watchable,V=void 0!==k&&k,Y=r.found?r:t,Ee=Y.width,Re=Y.height,Ge="fak"===o,ot=Ge?"":"fa-w-".concat(Math.ceil(Ee/Re*16)),Lt=[Nt.replacementClass,c?"".concat(Nt.familyPrefix,"-").concat(c):"",ot].filter(function(PC){return-1===x.classes.indexOf(PC)}).filter(function(PC){return""!==PC||!!PC}).concat(x.classes).join(" "),ht={children:[],attributes:Gt({},x.attributes,{"data-prefix":o,"data-icon":c,class:Lt,role:x.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Ee," ").concat(Re)})},Sn=Ge&&!~x.classes.indexOf("fa-fw")?{width:"".concat(Ee/Re*16*.0625,"em")}:{};V&&(ht.attributes["data-fa-i2svg"]=""),y&&ht.children.push({tag:"title",attributes:{id:ht.attributes["aria-labelledby"]||"title-".concat(T||im())},children:[y]});var Or=Gt({},ht,{prefix:o,iconName:c,main:t,mask:r,maskId:E,transform:h,symbol:m,styles:Gt({},Sn,x.styles)}),kC=r.found&&t.found?function(n){var e=n.children,t=n.attributes,r=n.main,o=n.mask,c=n.maskId,y=r.icon,T=o.icon,x=CD({transform:n.transform,containerWidth:o.width,iconWidth:r.width}),k={tag:"rect",attributes:Gt({},KI,{fill:"white"})},V=y.children?{children:y.children.map(bD)}:{},Y={tag:"g",attributes:Gt({},x.inner),children:[bD(Gt({tag:y.tag,attributes:Gt({},y.attributes,x.path)},V))]},Ee={tag:"g",attributes:Gt({},x.outer),children:[Y]},Re="mask-".concat(c||im()),Ge="clip-".concat(c||im()),ot={tag:"mask",attributes:Gt({},KI,{id:Re,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[k,Ee]},Lt={tag:"defs",children:[{tag:"clipPath",attributes:{id:Ge},children:Tne(T)},ot]};return e.push(Lt,{tag:"rect",attributes:Gt({fill:"currentColor","clip-path":"url(#".concat(Ge,")"),mask:"url(#".concat(Re,")")},KI)}),{children:e,attributes:t}}(Or):function(n){var e=n.children,t=n.attributes,r=n.main,o=n.transform,h=TC(n.styles);if(h.length>0&&(t.style=h),ZI(o)){var m=CD({transform:o,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:Gt({},m.outer),children:[{tag:"g",attributes:Gt({},m.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:Gt({},r.icon.attributes,m.path)}]}]})}else e.push(r.icon);return{children:e,attributes:t}}(Or),qre=kC.attributes;return Or.children=kC.children,Or.attributes=qre,m?function(n){var t=n.iconName,r=n.children,c=n.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Gt({},n.attributes,{id:!0===c?"".concat(n.prefix,"-").concat(Nt.familyPrefix,"-").concat(t):c}),children:r}]}]}(Or):function(n){var e=n.children,t=n.main,r=n.mask,o=n.attributes,c=n.styles,h=n.transform;if(ZI(h)&&t.found&&!r.found){var E={x:t.width/t.height/2,y:.5};o.style=TC(Gt({},c,{"transform-origin":"".concat(E.x+h.x/16,"em ").concat(E.y+h.y/16,"em")}))}return[{tag:"svg",attributes:o,children:e}]}(Or)}var XI=function(e,t,r,o){var y,E,T,c=Object.keys(e),h=c.length,m=void 0!==o?function(e,t){return function(r,o,c,h){return e.call(t,r,o,c,h)}}(t,o):t;for(void 0===r?(y=1,T=e[c[0]]):(y=0,T=r);y<h;y++)T=m(T,e[E=c[y]],E,e);return T};function AD(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.skipHooks,o=void 0!==r&&r,c=Object.keys(e).reduce(function(h,m){var y=e[m];return y.icon?h[y.iconName]=y.icon:h[m]=y,h},{});"function"!=typeof C2.hooks.addPack||o?C2.styles[n]=Gt({},C2.styles[n]||{},c):C2.hooks.addPack(n,c),"fas"===n&&AD("fa",e)}var TD=C2.styles,Pne=C2.shims,ND=function(){var e=function(o){return XI(TD,function(c,h,m){return c[m]=XI(h,o,{}),c},{})};e(function(r,o,c){return o[3]&&(r[o[3]]=c),r}),e(function(r,o,c){var h=o[2];return r[c]=c,h.forEach(function(m){r[m]=c}),r});var t="far"in TD;XI(Pne,function(r,o){var h=o[1];return"far"===h&&!t&&(h="fas"),r[o[0]]={prefix:h,iconName:o[2]},r},{})};function RD(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}function gd(n){var e=n.tag,t=n.attributes,r=void 0===t?{}:t,o=n.children,c=void 0===o?[]:o;return"string"==typeof n?_D(n):"<".concat(e," ").concat(function(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(_D(n[t]),'" ')},"").trim()}(r),">").concat(c.map(gd).join(""),"</").concat(e,">")}ND();function om(n){this.name="MissingIcon",this.message=n||"Icon unavailable",this.stack=(new Error).stack}(om.prototype=Object.create(Error.prototype)).constructor=om;var DC={fill:"currentColor"},FD={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},rA=(Gt({},DC,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),Gt({},FD,{attributeName:"opacity"}));function sA(n){var e=n[0],t=n[1],c=VI(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(c)?{tag:"g",attributes:{class:"".concat(Nt.familyPrefix,"-").concat(Hu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Nt.familyPrefix,"-").concat(Hu.SECONDARY),fill:"currentColor",d:c[0]}},{tag:"path",attributes:{class:"".concat(Nt.familyPrefix,"-").concat(Hu.PRIMARY),fill:"currentColor",d:c[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:c}}}}function am(){Nt.autoAddCss&&!RC&&(function(n){if(n&&J4){var e=ci.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=ci.head.childNodes,r=null,o=t.length-1;o>-1;o--){var c=t[o],h=(c.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(h)>-1&&(r=c)}ci.head.insertBefore(e,r)}}(function(){var n="fa",e=sD,t=Nt.familyPrefix,r=Nt.replacementClass,o='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if(t!==n||r!==e){var c=new RegExp("\\.".concat(n,"\\-"),"g"),h=new RegExp("\\--".concat(n,"\\-"),"g"),m=new RegExp("\\.".concat(e),"g");o=o.replace(c,".".concat(t,"-")).replace(h,"--".concat(t,"-")).replace(m,".".concat(r))}return o}()),RC=!0)}function NC(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(r){return gd(r)})}}),Object.defineProperty(n,"node",{get:function(){if(J4){var r=ci.createElement("div");return r.innerHTML=n.html,r.children}}}),n}function LC(n){var e=n.prefix,t=void 0===e?"fa":e,r=n.iconName;if(r)return RD($D.definitions,t,r)||RD(C2.styles,t,r)}Gt({},DC,{cx:"256",cy:"364",r:"28"}),Gt({},FD,{attributeName:"r",values:"28;14;28;28;14;28;"}),Gt({},rA,{values:"1;0;1;1;0;1;"}),Gt({},DC,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Gt({},rA,{values:"1;0;0;0;0;1;"}),Gt({},DC,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Gt({},rA,{values:"0;0;1;1;0;0;"});var $D=new(function(){function n(){(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function(n,e,t){e&&Kx(n.prototype,e)}(n,[{key:"add",value:function(){for(var t=this,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];var h=o.reduce(this._pullDefinitions,{});Object.keys(h).forEach(function(m){t.definitions[m]=Gt({},t.definitions[m]||{},h[m]),AD(m,h[m]),ND()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,r){var o=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(o).map(function(c){var h=o[c],m=h.prefix,y=h.iconName,E=h.icon;t[m]||(t[m]={}),t[m][y]=E}),t}}]),n}()),RC=!1,cA_transform=function(e){return function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce(function(r,o){var c=o.toLowerCase().split("-"),h=c[0],m=c.slice(1).join("-");if(h&&"h"===m)return r.flipX=!0,r;if(h&&"v"===m)return r.flipY=!0,r;if(m=parseFloat(m),isNaN(m))return r;switch(h){case"grow":r.size=r.size+m;break;case"shrink":r.size=r.size-m;break;case"left":r.x=r.x-m;break;case"right":r.x=r.x+m;break;case"up":r.y=r.y-m;break;case"down":r.y=r.y+m;break;case"rotate":r.rotate=r.rotate+m}return r},t):t}(e)},GD=function(n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e||{}).icon?e:LC(e||{}),o=t.mask;return o&&(o=(o||{}).icon?o:LC(o||{})),n(r,Gt({},t,{mask:o}))}}(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.transform,r=void 0===t?tl:t,o=e.symbol,c=void 0!==o&&o,h=e.mask,m=void 0===h?null:h,y=e.maskId,E=void 0===y?null:y,T=e.title,x=void 0===T?null:T,k=e.titleId,V=void 0===k?null:k,Y=e.classes,Ee=void 0===Y?[]:Y,Re=e.attributes,Ge=void 0===Re?{}:Re,ot=e.styles,Lt=void 0===ot?{}:ot;if(n){var ht=n.prefix,Sn=n.iconName,Or=n.icon;return NC(Gt({type:"icon"},n),function(){return am(),Nt.autoA11y&&(x?Ge["aria-labelledby"]="".concat(Nt.replacementClass,"-title-").concat(V||im()):(Ge["aria-hidden"]="true",Ge.focusable="false")),YI({icons:{main:sA(Or),mask:m?sA(m.icon):{found:!1,width:null,height:null,icon:{}}},prefix:ht,iconName:Sn,transform:Gt({},tl,r),symbol:c,title:x,maskId:E,titleId:V,extra:{attributes:Ge,styles:Lt,classes:Ee}})})}});const ZD=["*"];let KD=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null,this.globalLibrary=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})(),vre=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const r of t)r.prefix in this.definitions||(this.definitions[r.prefix]={}),this.definitions[r.prefix][r.iconName]=r}addIconPacks(...t){for(const r of t){const o=Object.keys(r).map(c=>r[c]);this.addIcons(...o)}}getIconDefinition(t,r){return t in this.definitions&&r in this.definitions[t]?this.definitions[t][r]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const YD=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let wre=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[d.TTD]}),n})(),Ere=(()=>{class n{constructor(t,r){this.renderer=t,this.elementRef=r}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275cmp=d.Xpm({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[d.TTD],ngContentSelectors:ZD,decls:1,vars:0,template:function(t,r){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2}),n})(),QD=(()=>{class n{constructor(t,r,o,c,h){this.sanitizer=t,this.config=r,this.iconLibrary=o,this.stackItem=c,this.classes=[],null!=h&&null==c&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let r=null;if(r=null==this.icon?this.config.fallbackIcon:this.icon,t){const o=this.findIconDefinition(r);if(null!=o){const c=this.buildParams();this.renderIcon(o,c)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const r=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);if("icon"in r)return r;const o=this.iconLibrary.getIconDefinition(r.prefix,r.iconName);if(null!=o)return o;const c=LC(r);if(null!=c){const h="Global icon library is deprecated. Consult https://github.com/FortAwesome/angular-fontawesome/blob/master/UPGRADING.md for the migration instructions.";if("unset"===this.config.globalLibrary)console.error("FontAwesome: "+h);else if(!this.config.globalLibrary)throw new Error(h);return c}return(n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(r),null}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},r="string"==typeof this.transform?cA_transform(this.transform):this.transform;return{title:this.title,transform:r,classes:[...YD(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,r){const o=GD(t,r);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(o.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ti),d.Y36(KD),d.Y36(vre),d.Y36(wre,8),d.Y36(Ere,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,r){2&t&&(d.Ikx("innerHTML",r.renderedIconHTML,d.oJD),d.uIk("title",r.title))},inputs:{classes:"classes",icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",transform:"transform",a11yRole:"a11yRole"},features:[d.TTD],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),Mre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Ire=function(){return["/adventure-form"]};function Are(n,e){if(1&n&&(d.TgZ(0,"div",9),d.TgZ(1,"h3"),d._uU(2),d.qZA(),d.TgZ(3,"h4",10),d._uU(4),d.qZA(),d.TgZ(5,"button",11),d._uU(6,"Add a trail"),d.qZA(),d.qZA()),2&n){const t=e.$implicit;d.xp6(2),d.AsE("",t.name," - ",t.location,""),d.xp6(2),d.Oqu(t.bio),d.xp6(1),d.Q6J("routerLink",d.DdM(4,Ire))}}function Tre(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",19),d.TgZ(1,"i",20),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).clearState()}),d._UZ(2,"fa-icon",21),d.qZA(),d.qZA()}if(2&n){const t=d.oxw(2);d.xp6(2),d.Q6J("icon",t.faWindowClose)}}function Sre(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"form",24),d.NdJ("ngSubmit",function(){d.CHM(t);const o=d.oxw().$implicit;return d.oxw().updateItem(o)}),d.TgZ(2,"div",25),d.TgZ(3,"label",26),d._uU(4," Hiking "),d._UZ(5,"input",27),d.qZA(),d.TgZ(6,"label",26),d._uU(7," Biking "),d._UZ(8,"input",28),d.qZA(),d.TgZ(9,"label",26),d._uU(10," Kayking "),d._UZ(11,"input",29),d.qZA(),d.qZA(),d.TgZ(12,"div",30),d.TgZ(13,"div",31),d.TgZ(14,"input",32),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().$implicit.name=o}),d.qZA(),d.TgZ(15,"input",33),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().$implicit.location=o}),d.qZA(),d.TgZ(16,"input",34),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().$implicit.date=o}),d.qZA(),d.qZA(),d.TgZ(17,"div",35),d.TgZ(18,"textarea",36),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().$implicit.note=o}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(19,"div",37),d.TgZ(20,"button",38),d.NdJ("click",function(){d.CHM(t);const o=d.oxw().$implicit;return d.oxw().updateItem(o)}),d._uU(21,"Update"),d.qZA(),d.TgZ(22,"button",39),d.NdJ("click",function(o){d.CHM(t);const c=d.oxw().$implicit;return d.oxw().deleteTrail(o,c)}),d._uU(23,"Delete"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&n){const t=d.oxw().$implicit;d.xp6(14),d.Q6J("ngModel",t.name),d.xp6(1),d.Q6J("ngModel",t.location),d.xp6(1),d.Q6J("ngModel",t.date),d.xp6(2),d.Q6J("ngModel",t.note)}}function xre(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"ul"),d.TgZ(1,"li",12),d.TgZ(2,"p",13),d._uU(3),d.qZA(),d.TgZ(4,"p",14),d._uU(5),d.qZA(),d.TgZ(6,"p",15),d._uU(7),d.qZA(),d.TgZ(8,"p",16),d._uU(9),d.qZA(),d.TgZ(10,"p",17),d._uU(11),d.qZA(),d.TgZ(12,"div",18),d.TgZ(13,"a",19),d.TgZ(14,"i",20),d.NdJ("click",function(o){const h=d.CHM(t).$implicit;return d.oxw().editItem(o,h)}),d._UZ(15,"fa-icon",21),d.qZA(),d.qZA(),d.YNc(16,Tre,3,1,"a",22),d.qZA(),d.YNc(17,Sre,24,4,"div",23),d.qZA(),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw();d.xp6(3),d.Oqu(t.name),d.xp6(2),d.Oqu(null==t.routeType?null:t.routeType.typeOfRoute),d.xp6(2),d.Oqu(t.date),d.xp6(2),d.Oqu(t.location),d.xp6(2),d.Oqu(t.note),d.xp6(4),d.Q6J("icon",r.faEdit),d.xp6(1),d.Q6J("ngIf",r.editState&&r.itemToEdit.id==t.id),d.xp6(1),d.Q6J("ngIf",r.editState&&r.itemToEdit.id==t.id)}}const Dre=function(){return["/account-about"]},Rre=function(){return["/account"]},kre=[{path:"home",component:dO},{path:"login",component:qx},{path:"signup",component:Wx},{path:"adventure-form",component:lO},{path:"account",component:(()=>{class n{constructor(t,r,o){this.router=t,this.crudService=r,this.authService=o,this.editState=!1,this.faEdit=Zx,this.faWindowClose=OI,this.btnClick=()=>{this.router.navigateByUrl("/adventure-form")},this.currentUser=o.currentUser}ngOnInit(){this.crudService.getTrails().subscribe(t=>{t.map(r=>{this.username=r.user}),this.trails=t.filter(r=>r.user===this.currentUser)}),this.crudService.getProfile().subscribe(t=>{this.profiles=t.filter(r=>r.user===this.currentUser),console.log(this.profiles)})}deleteTrail(t,r){this.clearState(),this.crudService.deleteTrail(r)}editItem(t,r){this.editState=!0,this.itemToEdit=r}updateItem(t){this.crudService.updateTrail(t),this.clearState()}clearState(){this.editState=!1,this.itemToEdit=null}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Js),d.Y36($p),d.Y36(g0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-your-account"]],decls:12,vars:4,consts:[[1,"your-account-container"],[1,"account-headline"],["class","info-container",4,"ngFor","ngForOf"],[1,"about-button-box"],[1,"account-about",3,"routerLink"],[1,"your-adventures"],[1,"trail-headline"],[1,"your-trails-container"],[4,"ngFor","ngForOf"],[1,"info-container"],[1,"profile-bio"],[1,"add-adventures",3,"routerLink"],[1,"trail"],[1,"trail-title"],[1,"trail-type"],[1,"trail-date"],[1,"trail-location"],[1,"trail-description"],[1,"icons"],[1,"secondary-content"],[3,"click"],[3,"icon"],["class","secondary-content",4,"ngIf"],[4,"ngIf"],[3,"ngSubmit"],["formGroupName","routeType",1,"checkbox-grouping"],[1,"checkbox-cont"],["type","radio","formControlName","typeOfRoute","name","typeOfRoute","value","hiking"],["type","radio","formControlName","typeOfRoute","name","typeOfRoute","value","biking"],["type","radio","formControlName","typeOfRoute","name","typeOfRoute","value","kayaking"],[1,"about-input-fields"],[1,"inputs"],["type","text","placeholder","Name of route","name","name",1,"update-input-field",3,"ngModel","ngModelChange"],["type","text","placeholder","City/State","name","location",1,"update-input-field",3,"ngModel","ngModelChange"],["type","text","placeholder","dd/mm/yy","name","date",1,"update-input-field",3,"ngModel","ngModelChange"],[1,"textarea"],["placeholder","Tell the story!","name","note",3,"ngModel","ngModelChange"],[1,"form-buttons"],["id","submit-button","type","submit",1,"about-submit",3,"click"],["id","delete-button",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"h2",1),d._uU(2,"Your Account"),d.qZA(),d.YNc(3,Are,7,5,"div",2),d.TgZ(4,"div",3),d.TgZ(5,"button",4),d._uU(6,"Update your account"),d.qZA(),d.qZA(),d.TgZ(7,"div",5),d.TgZ(8,"h2",6),d._uU(9,"Your Trails"),d.qZA(),d.TgZ(10,"div",7),d.YNc(11,xre,18,8,"ul",8),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(3),d.Q6J("ngForOf",r.profiles),d.xp6(2),d.Q6J("routerLink",d.DdM(3,Dre)),d.xp6(6),d.Q6J("ngForOf",r.trails))},directives:[Ft,m0,QD,Rs,$s,y1,J1,eo,B2,Tr,K1,Ua,Xc],styles:['.your-account-container[_ngcontent-%COMP%]{margin:20px;color:#fff;height:90vh;overflow-y:scroll}.your-account-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.your-account-container[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.account-headline[_ngcontent-%COMP%], .trail-headline[_ngcontent-%COMP%]{text-align:center;margin:10px 0;font-size:46px;color:#fff;font-family:"Baloo 2",cursive}h3[_ngcontent-%COMP%]{margin:8px 0}.profile-bio[_ngcontent-%COMP%]{margin:8px 90px}li[_ngcontent-%COMP%]{list-style-type:none}a[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%]{margin:5px 0;cursor:pointer;border-radius:3px;padding:6px}.no-adventures[_ngcontent-%COMP%]{font-size:18px}.your-adventures-container[_ngcontent-%COMP%]{margin:10px 0}.add-adventures[_ngcontent-%COMP%]{background-color:#72ec00cc}.about-button-box[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.account-about[_ngcontent-%COMP%]{background-color:#8d00a0cc;font-weight:600;color:#fff}.trail[_ngcontent-%COMP%]{border-bottom:1px solid #000;border-top:1px solid #000;margin:4px;padding:0 10px;background-color:#fff;border-radius:2px;color:#000}.trail-title[_ngcontent-%COMP%], .trail-location[_ngcontent-%COMP%]{font-size:18px}.trail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.trail-type[_ngcontent-%COMP%], .trail-creator[_ngcontent-%COMP%]{padding-left:30px;font-size:14px}.trail-description[_ngcontent-%COMP%]{padding:0 30px;font-size:16px}.trail-creator[_ngcontent-%COMP%]{text-align:right}.icons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}form[_ngcontent-%COMP%]{margin:10px}textarea[_ngcontent-%COMP%]{width:220px;height:70px;margin:5px 0}.form-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#submit-button[_ngcontent-%COMP%]{background-color:#ffa600;color:#fff;margin:0 4px;font-weight:bold}#delete-button[_ngcontent-%COMP%]{background-color:#c92317;color:#fff;margin:0 4px;font-weight:bold}@media only screen and (min-width: 475px){.your-account-container[_ngcontent-%COMP%]{padding:0 80px}.info-container[_ngcontent-%COMP%]{text-align:center}h2[_ngcontent-%COMP%]{font-size:32px}textarea[_ngcontent-%COMP%]{width:501px}.checkbox-cont[_ngcontent-%COMP%]{margin:0 40px}}@media only screen and (min-width: 769px){.your-account-container[_ngcontent-%COMP%]{padding:0 160px}.your-adventures[_ngcontent-%COMP%]{margin:30px 50px 0}.inputs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:40%}.textarea[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}textarea[_ngcontent-%COMP%]{width:100%}.update-input-field[_ngcontent-%COMP%]{width:250px}}@media only screen and (min-width: 1025px){.your-adventures[_ngcontent-%COMP%]{margin:30px 100px 0}}']}),n})()},{path:"about",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-site-info"]],decls:6,vars:0,consts:[[1,"about-wrapper"],[1,"about-content"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"h2"),d._uU(2,"About AllTrails"),d.qZA(),d.TgZ(3,"div",1),d.TgZ(4,"p"),d._uU(5,"AllTrails was designed to bring lovers of the outdoors together. Our mission is to bring you a place to share your best memories and keep a log of all your accomplishments with fellow hikers, cyclists, and kayakers. We hope to form a community of like-minded individuals and bring you all a place to culture relationships and to encourage exploration."),d.qZA(),d.qZA(),d.qZA())},styles:[".about-wrapper[_ngcontent-%COMP%]{color:#fff;width:60%;text-align:center;position:absolute;top:40%;left:50%;margin-right:-50%;transform:translate(-50%,-50%)}.about-content[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{font-size:26px}@media only screen and (min-width: 475px){.about-wrapper[_ngcontent-%COMP%]{top:25%}}"]}),n})()},{path:"account-about",component:(()=>{class n{constructor(t,r,o){this.fb=t,this.crudService=r,this.authService=o,this.profile={name:"",bio:"",location:""}}ngOnInit(){this.initializeForm()}initializeForm(){this.aboutForm=this.fb.group({name:"",bio:"",location:"",user:this.authService.currentUser})}onSubmit(){this.crudService.addProfile(`${this.authService.currentUser}`,this.aboutForm.value),this.aboutForm.reset()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ja),d.Y36($p),d.Y36(g0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-about-form"]],decls:19,vars:3,consts:[[1,"about-form-wrapper"],[3,"formGroup","ngSubmit"],[1,"about-input-fields"],["formControlName","name","type","text","placeholder","Your name.","onfocus","this.placeholder = ''","onblur","this.placeholder = 'Your name.'",1,"name-input"],["formControlName","bio","placeholder","Share your story.","onfocus","this.placeholder = ''","onblur","this.placeholder = 'Share your story.'",1,"bio-input"],["type","text","formControlName","location","placeholder","Where do you live?","onfocus","this.placeholder = ''","onblur","this.placeholder = 'Where do you live?'",1,"location-input"],[1,"button-box"],["type","submit",1,"about-submit"],[1,"back",3,"routerLink"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"h2"),d._uU(2,"About You"),d.qZA(),d.TgZ(3,"form",1),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(4,"div",2),d.TgZ(5,"label"),d._uU(6," Name: "),d._UZ(7,"input",3),d.qZA(),d.TgZ(8,"label"),d._uU(9," Bio: "),d._UZ(10,"textarea",4),d.qZA(),d.TgZ(11,"label"),d._uU(12," Location: "),d._UZ(13,"input",5),d.qZA(),d.TgZ(14,"div",6),d.TgZ(15,"button",7),d._uU(16,"Submit"),d.qZA(),d.TgZ(17,"button",8),d._uU(18,"Back"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(3),d.Q6J("formGroup",r.aboutForm),d.xp6(14),d.Q6J("routerLink",d.DdM(2,Rre)))},directives:[$s,y1,Ha,Tr,K1,Ua,m0],styles:[".about-form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;position:absolute;top:50%;left:50%;margin-right:-50%;transform:translate(-50%,-50%);border:1px solid #fff;border-radius:5px;padding:20px;background-color:#000542}h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{text-align:center}h2[_ngcontent-%COMP%]{margin-bottom:20px;border-bottom:1px solid #fff}h4[_ngcontent-%COMP%]{margin:20px 0}label[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin:5px 0}textarea[_ngcontent-%COMP%], .name-input[_ngcontent-%COMP%]{width:170px}.button-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.about-input-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column}.checkbox-grouping[_ngcontent-%COMP%]{display:flex;flex-direction:column}.about-submit[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{margin-top:10px;cursor:pointer;width:200px}@media only screen and (min-width: 475px){.name-input[_ngcontent-%COMP%]{width:220px}textarea[_ngcontent-%COMP%]{width:300px;height:100px}label[_ngcontent-%COMP%]{width:450px}}@media only screen and (min-width: 769px){label[_ngcontent-%COMP%]{width:520px}textarea[_ngcontent-%COMP%]{width:400px}}"]}),n})()},{path:"user-profile",component:(()=>{class n{constructor(){this.faWindowClose=OI}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-profile-modal"]],decls:10,vars:0,consts:[[1,"modal-container"],[1,"users-name"],[1,"user-location"],[1,"user-bio"],[1,"back"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"h3",1),d._uU(2,"Ryan Hubbuck"),d.qZA(),d.TgZ(3,"p",2),d._uU(4,"Knoxville, TN"),d.qZA(),d.TgZ(5,"p",3),d._uU(6,"dskfjsadkjfkdsaj fkasd jfkjasdkjf aksj fklasdj fkasj dkfj sadkfsadj fksad ksdaj fk"),d.qZA(),d.TgZ(7,"a"),d.TgZ(8,"p",4),d._uU(9,"Back"),d.qZA(),d.qZA(),d.qZA())},styles:[".modal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;position:absolute;top:50%;left:50%;margin-right:-50%;transform:translate(-50%,-50%);border:1px solid #fff;border-radius:5px;padding:20px;background-color:#000542}.back[_ngcontent-%COMP%]{text-decoration:underline;text-align:right;font-size:14px;margin-bottom:-10px;cursor:pointer}a[_ngcontent-%COMP%]{color:#fff}h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:28px}.user-location[_ngcontent-%COMP%], .user-bio[_ngcontent-%COMP%]{margin:10px 0}.user-bio[_ngcontent-%COMP%]{margin-bottom:20px}@media only screen and (min-width: 475px){h3[_ngcontent-%COMP%]{font-size:30px}.user-location[_ngcontent-%COMP%], .user-bio[_ngcontent-%COMP%]{font-size:18px}.back[_ngcontent-%COMP%]{font-size:16px}}"]}),n})()}];let Pre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[jx.forRoot(kre)],jx]}),n})();const zre=function(){return["/home"]},Ore=function(){return["/account"]};let Vre=(()=>{class n{constructor(t){this.authService=t,this.isLogout=new d.vpe,this.isSignedIn=!1}ngOnInit(){}handleLogout(){this.authService.logout(),this.isLogout.emit()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(g0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-header"]],outputs:{isLogout:"isLogout"},decls:15,vars:4,consts:[[1,"header-wrapper"],[1,"content-wrapper"],[1,"logo-container"],[1,"logo"],[1,"nav-container"],[3,"routerLink"],[3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"h2",3),d._uU(4,"AllTrails"),d.qZA(),d.qZA(),d.TgZ(5,"ul",4),d.TgZ(6,"li"),d.TgZ(7,"p",5),d._uU(8,"Home"),d.qZA(),d.qZA(),d.TgZ(9,"li"),d.TgZ(10,"p",5),d._uU(11,"Account"),d.qZA(),d.qZA(),d.TgZ(12,"li",6),d.NdJ("click",function(){return r.handleLogout()}),d.TgZ(13,"p"),d._uU(14,"Signout"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(7),d.Q6J("routerLink",d.DdM(2,zre)),d.xp6(3),d.Q6J("routerLink",d.DdM(3,Ore)))},directives:[m0],styles:['.header-wrapper[_ngcontent-%COMP%]{height:50px;background-color:#000542b3;color:#fff;width:100%;border-bottom:1px solid #fff}.logo-wrapper[_ngcontent-%COMP%]{width:60%}.logo[_ngcontent-%COMP%]{cursor:pointer}h2[_ngcontent-%COMP%]{font-family:"Freckle face",cursive;letter-spacing:.2rem;font-size:24px;margin-left:10px;margin-top:5px}p[_ngcontent-%COMP%]{cursor:pointer;font-size:10px;margin-top:5px}.content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-top:5px}.nav-container[_ngcontent-%COMP%]{display:flex;width:40%;flex-direction:row;justify-content:space-evenly;list-style-type:none}@media only screen and (min-width: 475px){p[_ngcontent-%COMP%]{font-size:12px}h2[_ngcontent-%COMP%]{font-size:26px}}@media only screen and (min-width: 769px){p[_ngcontent-%COMP%]{font-size:14px}h2[_ngcontent-%COMP%]{font-size:30px}}']}),n})();function Fre(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-login",5),d.NdJ("isLogin",function(){return d.CHM(t),d.oxw().handleLogin()})("toSignup",function(){return d.CHM(t),d.oxw().handleToSignup()}),d.qZA()}}function Hre(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-signup",6),d.NdJ("toLogin",function(){return d.CHM(t),d.oxw().handleToLogin()}),d.qZA()}}function Ure(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-header",7),d.NdJ("isLogout",function(){return d.CHM(t),d.oxw().handleLogout()}),d.qZA()}}function Bre(n,e){1&n&&d._UZ(0,"router-outlet")}let jre=(()=>{class n{constructor(t,r,o){this.authService=r,this.isSignedIn=!1,this.isSignup=!1,this.items=t.collection("items").valueChanges(),o.authState.subscribe(c=>{console.log(null==c?void 0:c.uid),this.currentUser=null==c?void 0:c.uid})}handleLogin(){this.isSignedIn=!0}handleLogout(){this.isSignedIn=!1}handleToSignup(){this.isSignup=!0}handleToLogin(){this.isSignup=!1}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(k5),d.Y36(g0),d.Y36(Z6))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:4,consts:[[1,"app"],[3,"isLogin","toSignup",4,"ngIf"],[3,"toLogin",4,"ngIf"],[3,"isLogout",4,"ngIf"],[4,"ngIf"],[3,"isLogin","toSignup"],[3,"toLogin"],[3,"isLogout"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,Fre,1,0,"app-login",1),d.YNc(2,Hre,1,0,"app-signup",2),d.YNc(3,Ure,1,0,"app-header",3),d.YNc(4,Bre,1,0,"router-outlet",4),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",!r.isSignedIn&&!r.isSignup),d.xp6(1),d.Q6J("ngIf",r.isSignup),d.xp6(1),d.Q6J("ngIf",r.isSignedIn),d.xp6(1),d.Q6J("ngIf",r.isSignedIn))},directives:[Rs,qx,Wx,Vre,kI],styles:[".app[_ngcontent-%COMP%]{background-image:url(Main-background.fa112deda135cc53f9ad.jpg);height:100vh;background-size:cover}"]}),n})();const eN_firebase={projectId:"alltrails-88e15",appId:"1:299077371059:web:f1e9aeea6f3a9f6a581cc6",databaseURL:"https://alltrails-88e15-default-rtdb.firebaseio.com",storageBucket:"alltrails-88e15.appspot.com",apiKey:"AIzaSyAuHXKX_LCIfMCuwEz46wf9YjTmHubdpV8",authDomain:"alltrails-88e15.firebaseapp.com",messagingSenderId:"299077371059",measurementId:"G-70GPKY3EN8"};let $re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[jre]}),n.\u0275inj=d.cJS({providers:[$p,g0],imports:[[E0,Pre,Vn,K0,W0,Mre,ur.hO.initializeApp(eN_firebase),Ak,ri,Uk]]}),n})();(0,d.G48)(),U1().bootstrapModule($re).catch(n=>console.error(n))},4762:(Ke,Se,F)=>{"use strict";function pe(se,ce){var Me={};for(var me in se)Object.prototype.hasOwnProperty.call(se,me)&&ce.indexOf(me)<0&&(Me[me]=se[me]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var ze=0;for(me=Object.getOwnPropertySymbols(se);ze<me.length;ze++)ce.indexOf(me[ze])<0&&Object.prototype.propertyIsEnumerable.call(se,me[ze])&&(Me[me[ze]]=se[me[ze]])}return Me}function ee(se,ce,Me,me){return new(Me||(Me=Promise))(function(ge,lt){function qt(wt){try{gt(me.next(wt))}catch(vt){lt(vt)}}function xn(wt){try{gt(me.throw(wt))}catch(vt){lt(vt)}}function gt(wt){wt.done?ge(wt.value):function(ge){return ge instanceof Me?ge:new Me(function(lt){lt(ge)})}(wt.value).then(qt,xn)}gt((me=me.apply(se,ce||[])).next())})}function W(se,ce){var me,ze,ge,lt,Me={label:0,sent:function(){if(1&ge[0])throw ge[1];return ge[1]},trys:[],ops:[]};return lt={next:qt(0),throw:qt(1),return:qt(2)},"function"==typeof Symbol&&(lt[Symbol.iterator]=function(){return this}),lt;function qt(gt){return function(wt){return function(gt){if(me)throw new TypeError("Generator is already executing.");for(;Me;)try{if(me=1,ze&&(ge=2&gt[0]?ze.return:gt[0]?ze.throw||((ge=ze.return)&&ge.call(ze),0):ze.next)&&!(ge=ge.call(ze,gt[1])).done)return ge;switch(ze=0,ge&&(gt=[2&gt[0],ge.value]),gt[0]){case 0:case 1:ge=gt;break;case 4:return Me.label++,{value:gt[1],done:!1};case 5:Me.label++,ze=gt[1],gt=[0];continue;case 7:gt=Me.ops.pop(),Me.trys.pop();continue;default:if(!(ge=(ge=Me.trys).length>0&&ge[ge.length-1])&&(6===gt[0]||2===gt[0])){Me=0;continue}if(3===gt[0]&&(!ge||gt[1]>ge[0]&&gt[1]<ge[3])){Me.label=gt[1];break}if(6===gt[0]&&Me.label<ge[1]){Me.label=ge[1],ge=gt;break}if(ge&&Me.label<ge[2]){Me.label=ge[2],Me.ops.push(gt);break}ge[2]&&Me.ops.pop(),Me.trys.pop();continue}gt=ce.call(se,Me)}catch(wt){gt=[6,wt],ze=0}finally{me=ge=0}if(5&gt[0])throw gt[1];return{value:gt[0]?gt[1]:void 0,done:!0}}([gt,wt])}}}function B(se){var ce="function"==typeof Symbol&&Symbol.iterator,Me=ce&&se[ce],me=0;if(Me)return Me.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&me>=se.length&&(se=void 0),{value:se&&se[me++],done:!se}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(se,ce){var Me="function"==typeof Symbol&&se[Symbol.iterator];if(!Me)return se;var ze,lt,me=Me.call(se),ge=[];try{for(;(void 0===ce||ce-- >0)&&!(ze=me.next()).done;)ge.push(ze.value)}catch(qt){lt={error:qt}}finally{try{ze&&!ze.done&&(Me=me.return)&&Me.call(me)}finally{if(lt)throw lt.error}}return ge}function _e(se,ce,Me){if(Me||2===arguments.length)for(var ge,me=0,ze=ce.length;me<ze;me++)(ge||!(me in ce))&&(ge||(ge=Array.prototype.slice.call(ce,0,me)),ge[me]=ce[me]);return se.concat(ge||Array.prototype.slice.call(ce))}F.d(Se,{_T:()=>pe,mG:()=>ee,Jh:()=>W,XA:()=>B,CR:()=>ie,ev:()=>_e})},8239:(Ke,Se,F)=>{"use strict";function d(O,pe,re,J,be,ee,W){try{var z=O[ee](W),H=z.value}catch(B){return void re(B)}z.done?pe(H):Promise.resolve(H).then(J,be)}function ne(O){return function(){var pe=this,re=arguments;return new Promise(function(J,be){var ee=O.apply(pe,re);function W(H){d(ee,J,be,W,z,"next",H)}function z(H){d(ee,J,be,W,z,"throw",H)}W(void 0)})}}F.d(Se,{Z:()=>ne})}},Ke=>{Ke(Ke.s=5556)}]);